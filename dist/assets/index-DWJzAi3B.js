var GT=Object.defineProperty;var YT=(e,r,n)=>r in e?GT(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var lg=(e,r,n)=>YT(e,typeof r!="symbol"?r+"":r,n);function QT(e,r){for(var n=0;n<r.length;n++){const a=r[n];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const o=Object.getOwnPropertyDescriptor(a,l);o&&Object.defineProperty(e,l,o.get?o:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function Za(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var og={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN;function XT(){if(HN)return sc;HN=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(a,l,o){var d=null;if(o!==void 0&&(d=""+o),l.key!==void 0&&(d=""+l.key),"key"in l){o={};for(var m in l)m!=="key"&&(o[m]=l[m])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:d,ref:l!==void 0?l:null,props:o}}return sc.Fragment=r,sc.jsx=n,sc.jsxs=n,sc}var KN;function ZT(){return KN||(KN=1,og.exports=XT()),og.exports}var t=ZT(),cg={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GN;function JT(){if(GN)return yt;GN=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),v=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,S={};function C(B,le,ye){this.props=B,this.context=le,this.refs=S,this.updater=ye||w}C.prototype.isReactComponent={},C.prototype.setState=function(B,le){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,le,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function O(){}O.prototype=C.prototype;function k(B,le,ye){this.props=B,this.context=le,this.refs=S,this.updater=ye||w}var E=k.prototype=new O;E.constructor=k,N(E,C.prototype),E.isPureReactComponent=!0;var M=Array.isArray;function D(){}var R={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function z(B,le,ye){var ge=ye.ref;return{$$typeof:e,type:B,key:le,ref:ge!==void 0?ge:null,props:ye}}function U(B,le){return z(B.type,le,B.props)}function q(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function Y(B){var le={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ye){return le[ye]})}var ee=/\/+/g;function _(B,le){return typeof B=="object"&&B!==null&&B.key!=null?Y(""+B.key):le.toString(36)}function G(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(D,D):(B.status="pending",B.then(function(le){B.status==="pending"&&(B.status="fulfilled",B.value=le)},function(le){B.status==="pending"&&(B.status="rejected",B.reason=le)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function L(B,le,ye,ge,Ne){var Me=typeof B;(Me==="undefined"||Me==="boolean")&&(B=null);var ce=!1;if(B===null)ce=!0;else switch(Me){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(B.$$typeof){case e:case r:ce=!0;break;case g:return ce=B._init,L(ce(B._payload),le,ye,ge,Ne)}}if(ce)return Ne=Ne(B),ce=ge===""?"."+_(B,0):ge,M(Ne)?(ye="",ce!=null&&(ye=ce.replace(ee,"$&/")+"/"),L(Ne,le,ye,"",function(Re){return Re})):Ne!=null&&(q(Ne)&&(Ne=U(Ne,ye+(Ne.key==null||B&&B.key===Ne.key?"":(""+Ne.key).replace(ee,"$&/")+"/")+ce)),le.push(Ne)),1;ce=0;var Le=ge===""?".":ge+":";if(M(B))for(var X=0;X<B.length;X++)ge=B[X],Me=Le+_(ge,X),ce+=L(ge,le,ye,Me,Ne);else if(X=b(B),typeof X=="function")for(B=X.call(B),X=0;!(ge=B.next()).done;)ge=ge.value,Me=Le+_(ge,X++),ce+=L(ge,le,ye,Me,Ne);else if(Me==="object"){if(typeof B.then=="function")return L(G(B),le,ye,ge,Ne);throw le=String(B),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return ce}function V(B,le,ye){if(B==null)return B;var ge=[],Ne=0;return L(B,ge,"","",function(Me){return le.call(ye,Me,Ne++)}),ge}function Z(B){if(B._status===-1){var le=B._result;le=le(),le.then(function(ye){(B._status===0||B._status===-1)&&(B._status=1,B._result=ye)},function(ye){(B._status===0||B._status===-1)&&(B._status=2,B._result=ye)}),B._status===-1&&(B._status=0,B._result=le)}if(B._status===1)return B._result.default;throw B._result}var K=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},de={map:V,forEach:function(B,le,ye){V(B,function(){le.apply(this,arguments)},ye)},count:function(B){var le=0;return V(B,function(){le++}),le},toArray:function(B){return V(B,function(le){return le})||[]},only:function(B){if(!q(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return yt.Activity=p,yt.Children=de,yt.Component=C,yt.Fragment=n,yt.Profiler=l,yt.PureComponent=k,yt.StrictMode=a,yt.Suspense=f,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,yt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return R.H.useMemoCache(B)}},yt.cache=function(B){return function(){return B.apply(null,arguments)}},yt.cacheSignal=function(){return null},yt.cloneElement=function(B,le,ye){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ge=N({},B.props),Ne=B.key;if(le!=null)for(Me in le.key!==void 0&&(Ne=""+le.key),le)!P.call(le,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&le.ref===void 0||(ge[Me]=le[Me]);var Me=arguments.length-2;if(Me===1)ge.children=ye;else if(1<Me){for(var ce=Array(Me),Le=0;Le<Me;Le++)ce[Le]=arguments[Le+2];ge.children=ce}return z(B.type,Ne,ge)},yt.createContext=function(B){return B={$$typeof:d,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},yt.createElement=function(B,le,ye){var ge,Ne={},Me=null;if(le!=null)for(ge in le.key!==void 0&&(Me=""+le.key),le)P.call(le,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ne[ge]=le[ge]);var ce=arguments.length-2;if(ce===1)Ne.children=ye;else if(1<ce){for(var Le=Array(ce),X=0;X<ce;X++)Le[X]=arguments[X+2];Ne.children=Le}if(B&&B.defaultProps)for(ge in ce=B.defaultProps,ce)Ne[ge]===void 0&&(Ne[ge]=ce[ge]);return z(B,Me,Ne)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(B){return{$$typeof:m,render:B}},yt.isValidElement=q,yt.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:Z}},yt.memo=function(B,le){return{$$typeof:h,type:B,compare:le===void 0?null:le}},yt.startTransition=function(B){var le=R.T,ye={};R.T=ye;try{var ge=B(),Ne=R.S;Ne!==null&&Ne(ye,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(D,K)}catch(Me){K(Me)}finally{le!==null&&ye.types!==null&&(le.types=ye.types),R.T=le}},yt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},yt.use=function(B){return R.H.use(B)},yt.useActionState=function(B,le,ye){return R.H.useActionState(B,le,ye)},yt.useCallback=function(B,le){return R.H.useCallback(B,le)},yt.useContext=function(B){return R.H.useContext(B)},yt.useDebugValue=function(){},yt.useDeferredValue=function(B,le){return R.H.useDeferredValue(B,le)},yt.useEffect=function(B,le){return R.H.useEffect(B,le)},yt.useEffectEvent=function(B){return R.H.useEffectEvent(B)},yt.useId=function(){return R.H.useId()},yt.useImperativeHandle=function(B,le,ye){return R.H.useImperativeHandle(B,le,ye)},yt.useInsertionEffect=function(B,le){return R.H.useInsertionEffect(B,le)},yt.useLayoutEffect=function(B,le){return R.H.useLayoutEffect(B,le)},yt.useMemo=function(B,le){return R.H.useMemo(B,le)},yt.useOptimistic=function(B,le){return R.H.useOptimistic(B,le)},yt.useReducer=function(B,le,ye){return R.H.useReducer(B,le,ye)},yt.useRef=function(B){return R.H.useRef(B)},yt.useState=function(B){return R.H.useState(B)},yt.useSyncExternalStore=function(B,le,ye){return R.H.useSyncExternalStore(B,le,ye)},yt.useTransition=function(){return R.H.useTransition()},yt.version="19.2.0",yt}var YN;function ao(){return YN||(YN=1,cg.exports=JT()),cg.exports}var y=ao();const Zx=Za(y),e6=QT({__proto__:null,default:Zx},[y]);var dg={exports:{}},ic={},ug={exports:{}},mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QN;function t6(){return QN||(QN=1,(function(e){function r(L,V){var Z=L.length;L.push(V);e:for(;0<Z;){var K=Z-1>>>1,de=L[K];if(0<l(de,V))L[K]=V,L[Z]=de,Z=K;else break e}}function n(L){return L.length===0?null:L[0]}function a(L){if(L.length===0)return null;var V=L[0],Z=L.pop();if(Z!==V){L[0]=Z;e:for(var K=0,de=L.length,B=de>>>1;K<B;){var le=2*(K+1)-1,ye=L[le],ge=le+1,Ne=L[ge];if(0>l(ye,Z))ge<de&&0>l(Ne,ye)?(L[K]=Ne,L[ge]=Z,K=ge):(L[K]=ye,L[le]=Z,K=le);else if(ge<de&&0>l(Ne,Z))L[K]=Ne,L[ge]=Z,K=ge;else break e}}return V}function l(L,V){var Z=L.sortIndex-V.sortIndex;return Z!==0?Z:L.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,m=d.now();e.unstable_now=function(){return d.now()-m}}var f=[],h=[],g=1,p=null,v=3,b=!1,w=!1,N=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function E(L){for(var V=n(h);V!==null;){if(V.callback===null)a(h);else if(V.startTime<=L)a(h),V.sortIndex=V.expirationTime,r(f,V);else break;V=n(h)}}function M(L){if(N=!1,E(L),!w)if(n(f)!==null)w=!0,D||(D=!0,Y());else{var V=n(h);V!==null&&G(M,V.startTime-L)}}var D=!1,R=-1,P=5,z=-1;function U(){return S?!0:!(e.unstable_now()-z<P)}function q(){if(S=!1,D){var L=e.unstable_now();z=L;var V=!0;try{e:{w=!1,N&&(N=!1,O(R),R=-1),b=!0;var Z=v;try{t:{for(E(L),p=n(f);p!==null&&!(p.expirationTime>L&&U());){var K=p.callback;if(typeof K=="function"){p.callback=null,v=p.priorityLevel;var de=K(p.expirationTime<=L);if(L=e.unstable_now(),typeof de=="function"){p.callback=de,E(L),V=!0;break t}p===n(f)&&a(f),E(L)}else a(f);p=n(f)}if(p!==null)V=!0;else{var B=n(h);B!==null&&G(M,B.startTime-L),V=!1}}break e}finally{p=null,v=Z,b=!1}V=void 0}}finally{V?Y():D=!1}}}var Y;if(typeof k=="function")Y=function(){k(q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,_=ee.port2;ee.port1.onmessage=q,Y=function(){_.postMessage(null)}}else Y=function(){C(q,0)};function G(L,V){R=C(function(){L(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(L){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var Z=v;v=V;try{return L()}finally{v=Z}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Z=v;v=L;try{return V()}finally{v=Z}},e.unstable_scheduleCallback=function(L,V,Z){var K=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?K+Z:K):Z=K,L){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Z+de,L={id:g++,callback:V,priorityLevel:L,startTime:Z,expirationTime:de,sortIndex:-1},Z>K?(L.sortIndex=Z,r(h,L),n(f)===null&&L===n(h)&&(N?(O(R),R=-1):N=!0,G(M,Z-K))):(L.sortIndex=de,r(f,L),w||b||(w=!0,D||(D=!0,Y()))),L},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(L){var V=v;return function(){var Z=v;v=V;try{return L.apply(this,arguments)}finally{v=Z}}}})(mg)),mg}var XN;function r6(){return XN||(XN=1,ug.exports=t6()),ug.exports}var fg={exports:{}},pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZN;function n6(){if(ZN)return pn;ZN=1;var e=ao();function r(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(f,h,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:p==null?null:""+p,children:f,containerInfo:h,implementation:g}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,pn.createPortal=function(f,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(r(299));return o(f,h,null,g)},pn.flushSync=function(f){var h=d.T,g=a.p;try{if(d.T=null,a.p=2,f)return f()}finally{d.T=h,a.p=g,a.d.f()}},pn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(f,h))},pn.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},pn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var g=h.as,p=m(g,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?a.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:b}):g==="script"&&a.d.X(f,{crossOrigin:p,integrity:v,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=m(h.as,h.crossOrigin);a.d.M(f,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(f)},pn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,p=m(g,h.crossOrigin);a.d.L(f,g,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pn.preloadModule=function(f,h){if(typeof f=="string")if(h){var g=m(h.as,h.crossOrigin);a.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(f)},pn.requestFormReset=function(f){a.d.r(f)},pn.unstable_batchedUpdates=function(f,h){return f(h)},pn.useFormState=function(f,h,g){return d.H.useFormState(f,h,g)},pn.useFormStatus=function(){return d.H.useHostTransitionStatus()},pn.version="19.2.0",pn}var JN;function yk(){if(JN)return fg.exports;JN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),fg.exports=n6(),fg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function a6(){if(ew)return ic;ew=1;var e=r6(),r=ao(),n=yk();function a(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function d(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(a(188))}function h(s){var i=s.alternate;if(!i){if(i=o(s),i===null)throw Error(a(188));return i!==s?null:s}for(var c=s,u=i;;){var x=c.return;if(x===null)break;var j=x.alternate;if(j===null){if(u=x.return,u!==null){c=u;continue}break}if(x.child===j.child){for(j=x.child;j;){if(j===c)return f(x),s;if(j===u)return f(x),i;j=j.sibling}throw Error(a(188))}if(c.return!==u.return)c=x,u=j;else{for(var I=!1,$=x.child;$;){if($===c){I=!0,c=x,u=j;break}if($===u){I=!0,u=x,c=j;break}$=$.sibling}if(!I){for($=j.child;$;){if($===c){I=!0,c=j,u=x;break}if($===u){I=!0,u=j,c=x;break}$=$.sibling}if(!I)throw Error(a(189))}}if(c.alternate!==u)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?s:i}function g(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=g(s),i!==null)return i;s=s.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Y(s){return s===null||typeof s!="object"?null:(s=q&&s[q]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function _(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case D:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case w:return"Portal";case k:return s.displayName||"Context";case O:return(s._context.displayName||"Context")+".Consumer";case E:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return i=s.displayName||null,i!==null?i:_(s.type)||"Memo";case P:i=s._payload,s=s._init;try{return _(s(i))}catch{}}return null}var G=Array.isArray,L=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},K=[],de=-1;function B(s){return{current:s}}function le(s){0>de||(s.current=K[de],K[de]=null,de--)}function ye(s,i){de++,K[de]=s.current,s.current=i}var ge=B(null),Ne=B(null),Me=B(null),ce=B(null);function Le(s,i){switch(ye(Me,i),ye(Ne,s),ye(ge,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?gN(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=gN(i),s=pN(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}le(ge),ye(ge,s)}function X(){le(ge),le(Ne),le(Me)}function Re(s){s.memoizedState!==null&&ye(ce,s);var i=ge.current,c=pN(i,s.type);i!==c&&(ye(Ne,s),ye(ge,c))}function at(s){Ne.current===s&&(le(ge),le(Ne)),ce.current===s&&(le(ce),tc._currentValue=Z)}var je,vt;function Xe(s){if(je===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);je=i&&i[1]||"",vt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+je+s+vt}var ut=!1;function pt(s,i){if(!s||ut)return"";ut=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(be){var xe=be}Reflect.construct(s,[],Oe)}else{try{Oe.call()}catch(be){xe=be}s.call(Oe.prototype)}}else{try{throw Error()}catch(be){xe=be}(Oe=s())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(be){if(be&&xe&&typeof be.stack=="string")return[be.stack,xe.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=u.DetermineComponentFrameRoot(),I=j[0],$=j[1];if(I&&$){var re=I.split(`
`),he=$.split(`
`);for(x=u=0;u<re.length&&!re[u].includes("DetermineComponentFrameRoot");)u++;for(;x<he.length&&!he[x].includes("DetermineComponentFrameRoot");)x++;if(u===re.length||x===he.length)for(u=re.length-1,x=he.length-1;1<=u&&0<=x&&re[u]!==he[x];)x--;for(;1<=u&&0<=x;u--,x--)if(re[u]!==he[x]){if(u!==1||x!==1)do if(u--,x--,0>x||re[u]!==he[x]){var Se=`
`+re[u].replace(" at new "," at ");return s.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",s.displayName)),Se}while(1<=u&&0<=x);break}}}finally{ut=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Xe(c):""}function bt(s,i){switch(s.tag){case 26:case 27:case 5:return Xe(s.type);case 16:return Xe("Lazy");case 13:return s.child!==i&&i!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return pt(s.type,!1);case 11:return pt(s.type.render,!1);case 1:return pt(s.type,!0);case 31:return Xe("Activity");default:return""}}function nr(s){try{var i="",c=null;do i+=bt(s,c),c=s,s=s.return;while(s);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var zt=Object.prototype.hasOwnProperty,te=e.unstable_scheduleCallback,Te=e.unstable_cancelCallback,_e=e.unstable_shouldYield,qe=e.unstable_requestPaint,Ye=e.unstable_now,st=e.unstable_getCurrentPriorityLevel,H=e.unstable_ImmediatePriority,Ae=e.unstable_UserBlockingPriority,Ee=e.unstable_NormalPriority,W=e.unstable_LowPriority,me=e.unstable_IdlePriority,Ve=e.log,We=e.unstable_setDisableYieldValue,Fe=null,F=null;function se(s){if(typeof Ve=="function"&&We(s),F&&typeof F.setStrictMode=="function")try{F.setStrictMode(Fe,s)}catch{}}var oe=Math.clz32?Math.clz32:Ct,Pe=Math.log,$e=Math.LN2;function Ct(s){return s>>>=0,s===0?32:31-(Pe(s)/$e|0)|0}var it=256,Ke=262144,xt=4194304;function Ar(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ur(s,i,c){var u=s.pendingLanes;if(u===0)return 0;var x=0,j=s.suspendedLanes,I=s.pingedLanes;s=s.warmLanes;var $=u&134217727;return $!==0?(u=$&~j,u!==0?x=Ar(u):(I&=$,I!==0?x=Ar(I):c||(c=$&~s,c!==0&&(x=Ar(c))))):($=u&~j,$!==0?x=Ar($):I!==0?x=Ar(I):c||(c=u&~s,c!==0&&(x=Ar(c)))),x===0?0:i!==0&&i!==x&&(i&j)===0&&(j=x&-x,c=i&-i,j>=c||j===32&&(c&4194048)!==0)?i:x}function jn(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function mn(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tt(){var s=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),s}function Pr(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function $t(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function tn(s,i,c,u,x,j){var I=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var $=s.entanglements,re=s.expirationTimes,he=s.hiddenUpdates;for(c=I&~c;0<c;){var Se=31-oe(c),Oe=1<<Se;$[Se]=0,re[Se]=-1;var xe=he[Se];if(xe!==null)for(he[Se]=null,Se=0;Se<xe.length;Se++){var be=xe[Se];be!==null&&(be.lane&=-536870913)}c&=~Oe}u!==0&&pr(s,u,0),j!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=j&~(I&~i))}function pr(s,i,c){s.pendingLanes|=i,s.suspendedLanes&=~i;var u=31-oe(i);s.entangledLanes|=i,s.entanglements[u]=s.entanglements[u]|1073741824|c&261930}function Nn(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var u=31-oe(c),x=1<<u;x&i|s[u]&i&&(s[u]|=i),c&=~x}}function Nt(s,i){var c=i&-i;return c=(c&42)!==0?1:fn(c),(c&(s.suspendedLanes|i))!==0?0:c}function fn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function lr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function _r(){var s=V.p;return s!==0?s:(s=window.event,s===void 0?32:zN(s.type))}function Ht(s,i){var c=V.p;try{return V.p=s,i()}finally{V.p=c}}var Tr=Math.random().toString(36).slice(2),Sr="__reactFiber$"+Tr,ft="__reactProps$"+Tr,Xt="__reactContainer$"+Tr,ts="__reactEvents$"+Tr,La="__reactListeners$"+Tr,Ca="__reactHandles$"+Tr,wn="__reactResources$"+Tr,$a="__reactMarker$"+Tr;function Bs(s){delete s[Sr],delete s[ft],delete s[ts],delete s[La],delete s[Ca]}function hn(s){var i=s[Sr];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Xt]||c[Sr]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=wN(s);s!==null;){if(c=s[Sr])return c;s=wN(s)}return i}s=c,c=s.parentNode}return null}function gn(s){if(s=s[Sr]||s[Xt]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Qr(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(a(33))}function Bn(s){var i=s[wn];return i||(i=s[wn]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Bt(s){s[$a]=!0}var sa=new Set,Vr={};function In(s,i){Fn(s,i),Fn(s+"Capture",i)}function Fn(s,i){for(Vr[s]=i,s=0;s<i.length;s++)sa.add(i[s])}var Ai=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fs={},rs={};function Us(s){return zt.call(rs,s)?!0:zt.call(Fs,s)?!1:Ai.test(s)?rs[s]=!0:(Fs[s]=!0,!1)}function ns(s,i,c){if(Us(i))if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+c)}}function Da(s,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+c)}}function Sn(s,i,c,u){if(u===null)s.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(i,c,""+u)}}function mr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function za(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ia(s,i,c){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,j=u.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return x.call(this)},set:function(I){c=""+I,j.call(this,I)}}),Object.defineProperty(s,i,{enumerable:u.enumerable}),{getValue:function(){return c},setValue:function(I){c=""+I},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function T(s){if(!s._valueTracker){var i=za(s)?"checked":"value";s._valueTracker=ia(s,i,""+s[i])}}function ae(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),u="";return s&&(u=za(s)?s.checked?"true":"false":s.value),s=u,s!==c?(i.setValue(s),!0):!1}function ne(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ve=/[\n"\\]/g;function Ie(s){return s.replace(ve,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ue(s,i,c,u,x,j,I,$){s.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.type=I:s.removeAttribute("type"),i!=null?I==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+mr(i)):s.value!==""+mr(i)&&(s.value=""+mr(i)):I!=="submit"&&I!=="reset"||s.removeAttribute("value"),i!=null?Dt(s,I,mr(i)):c!=null?Dt(s,I,mr(c)):u!=null&&s.removeAttribute("value"),x==null&&j!=null&&(s.defaultChecked=!!j),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.name=""+mr($):s.removeAttribute("name")}function Je(s,i,c,u,x,j,I,$){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.type=j),i!=null||c!=null){if(!(j!=="submit"&&j!=="reset"||i!=null)){T(s);return}c=c!=null?""+mr(c):"",i=i!=null?""+mr(i):c,$||i===s.value||(s.value=i),s.defaultValue=i}u=u??x,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=$?s.checked:!!u,s.defaultChecked=!!u,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(s.name=I),T(s)}function Dt(s,i,c){i==="number"&&ne(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ot(s,i,c,u){if(s=s.options,i){i={};for(var x=0;x<c.length;x++)i["$"+c[x]]=!0;for(c=0;c<s.length;c++)x=i.hasOwnProperty("$"+s[c].value),s[c].selected!==x&&(s[c].selected=x),x&&u&&(s[c].defaultSelected=!0)}else{for(c=""+mr(c),i=null,x=0;x<s.length;x++){if(s[x].value===c){s[x].selected=!0,u&&(s[x].defaultSelected=!0);return}i!==null||s[x].disabled||(i=s[x])}i!==null&&(i.selected=!0)}}function Ce(s,i,c){if(i!=null&&(i=""+mr(i),i!==s.value&&(s.value=i),c==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=c!=null?""+mr(c):""}function De(s,i,c,u){if(i==null){if(u!=null){if(c!=null)throw Error(a(92));if(G(u)){if(1<u.length)throw Error(a(93));u=u[0]}c=u}c==null&&(c=""),i=c}c=mr(i),s.defaultValue=c,u=s.textContent,u===c&&u!==""&&u!==null&&(s.value=u),T(s)}function Be(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var rt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function et(s,i,c){var u=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?u?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":u?s.setProperty(i,c):typeof c!="number"||c===0||rt.has(i)?i==="float"?s.cssFloat=c:s[i]=(""+c).trim():s[i]=c+"px"}function lt(s,i,c){if(i!=null&&typeof i!="object")throw Error(a(62));if(s=s.style,c!=null){for(var u in c)!c.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var x in i)u=i[x],i.hasOwnProperty(x)&&c[x]!==u&&et(s,x,u)}else for(var j in i)i.hasOwnProperty(j)&&et(s,j,i[j])}function ze(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Q(s){return A.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function J(){}var we=null;function ot(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Qe=null,gt=null;function At(s){var i=gn(s);if(i&&(s=i.stateNode)){var c=s[ft]||null;e:switch(s=i.stateNode,i.type){case"input":if(Ue(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ie(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var u=c[i];if(u!==s&&u.form===s.form){var x=u[ft]||null;if(!x)throw Error(a(90));Ue(u,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(i=0;i<c.length;i++)u=c[i],u.form===s.form&&ae(u)}break e;case"textarea":Ce(s,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Ot(s,!!c.multiple,i,!1)}}}var kt=!1;function ar(s,i,c){if(kt)return s(i,c);kt=!0;try{var u=s(i);return u}finally{if(kt=!1,(Qe!==null||gt!==null)&&(Fd(),Qe&&(i=Qe,s=gt,gt=Qe=null,At(i),s)))for(i=0;i<s.length;i++)At(s[i])}}function wt(s,i){var c=s.stateNode;if(c===null)return null;var u=c[ft]||null;if(u===null)return null;c=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(a(231,i,typeof c));return c}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zt=!1;if(Un)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){Zt=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{Zt=!1}var Ba=null,Kt=null,Oa=null;function yo(){if(Oa)return Oa;var s,i=Kt,c=i.length,u,x="value"in Ba?Ba.value:Ba.textContent,j=x.length;for(s=0;s<c&&i[s]===x[s];s++);var I=c-s;for(u=1;u<=I&&i[c-u]===x[j-u];u++);return Oa=x.slice(s,1<u?1-u:void 0)}function rd(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function nd(){return!0}function xy(){return!1}function En(s){function i(c,u,x,j,I){this._reactName=c,this._targetInst=x,this.type=u,this.nativeEvent=j,this.target=I,this.currentTarget=null;for(var $ in s)s.hasOwnProperty($)&&(c=s[$],this[$]=c?c(j):j[$]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?nd:xy,this.isPropagationStopped=xy,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=nd)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=nd)},persist:function(){},isPersistent:nd}),i}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ad=En(Ti),bo=p({},Ti,{view:0,detail:0}),HO=En(bo),cf,df,jo,sd=p({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==jo&&(jo&&s.type==="mousemove"?(cf=s.screenX-jo.screenX,df=s.screenY-jo.screenY):df=cf=0,jo=s),cf)},movementY:function(s){return"movementY"in s?s.movementY:df}}),vy=En(sd),KO=p({},sd,{dataTransfer:0}),GO=En(KO),YO=p({},bo,{relatedTarget:0}),uf=En(YO),QO=p({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),XO=En(QO),ZO=p({},Ti,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),JO=En(ZO),eA=p({},Ti,{data:0}),yy=En(eA),tA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aA(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=nA[s])?!!i[s]:!1}function mf(){return aA}var sA=p({},bo,{key:function(s){if(s.key){var i=tA[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=rd(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?rA[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(s){return s.type==="keypress"?rd(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?rd(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),iA=En(sA),lA=p({},sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),by=En(lA),oA=p({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),cA=En(oA),dA=p({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),uA=En(dA),mA=p({},sd,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),fA=En(mA),hA=p({},Ti,{newState:0,oldState:0}),gA=En(hA),pA=[9,13,27,32],ff=Un&&"CompositionEvent"in window,No=null;Un&&"documentMode"in document&&(No=document.documentMode);var xA=Un&&"TextEvent"in window&&!No,jy=Un&&(!ff||No&&8<No&&11>=No),Ny=" ",wy=!1;function Sy(s,i){switch(s){case"keyup":return pA.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ky(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var gl=!1;function vA(s,i){switch(s){case"compositionend":return ky(i);case"keypress":return i.which!==32?null:(wy=!0,Ny);case"textInput":return s=i.data,s===Ny&&wy?null:s;default:return null}}function yA(s,i){if(gl)return s==="compositionend"||!ff&&Sy(s,i)?(s=yo(),Oa=Kt=Ba=null,gl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return jy&&i.locale!=="ko"?null:i.data;default:return null}}var bA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cy(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!bA[s.type]:i==="textarea"}function Dy(s,i,c,u){Qe?gt?gt.push(u):gt=[u]:Qe=u,i=Gd(i,"onChange"),0<i.length&&(c=new ad("onChange","change",null,c,u),s.push({event:c,listeners:i}))}var wo=null,So=null;function jA(s){cN(s,0)}function id(s){var i=Qr(s);if(ae(i))return s}function Oy(s,i){if(s==="change")return i}var Ay=!1;if(Un){var hf;if(Un){var gf="oninput"in document;if(!gf){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),gf=typeof Ty.oninput=="function"}hf=gf}else hf=!1;Ay=hf&&(!document.documentMode||9<document.documentMode)}function Iy(){wo&&(wo.detachEvent("onpropertychange",Ey),So=wo=null)}function Ey(s){if(s.propertyName==="value"&&id(So)){var i=[];Dy(i,So,s,ot(s)),ar(jA,i)}}function NA(s,i,c){s==="focusin"?(Iy(),wo=i,So=c,wo.attachEvent("onpropertychange",Ey)):s==="focusout"&&Iy()}function wA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return id(So)}function SA(s,i){if(s==="click")return id(i)}function kA(s,i){if(s==="input"||s==="change")return id(i)}function CA(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var Vn=typeof Object.is=="function"?Object.is:CA;function ko(s,i){if(Vn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),u=Object.keys(i);if(c.length!==u.length)return!1;for(u=0;u<c.length;u++){var x=c[u];if(!zt.call(i,x)||!Vn(s[x],i[x]))return!1}return!0}function My(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Py(s,i){var c=My(s);s=0;for(var u;c;){if(c.nodeType===3){if(u=s+c.textContent.length,s<=i&&u>=i)return{node:c,offset:i-s};s=u}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=My(c)}}function _y(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?_y(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function Ry(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=ne(s.document);i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=ne(s.document)}return i}function pf(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var DA=Un&&"documentMode"in document&&11>=document.documentMode,pl=null,xf=null,Co=null,vf=!1;function Ly(s,i,c){var u=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;vf||pl==null||pl!==ne(u)||(u=pl,"selectionStart"in u&&pf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Co&&ko(Co,u)||(Co=u,u=Gd(xf,"onSelect"),0<u.length&&(i=new ad("onSelect","select",null,i,c),s.push({event:i,listeners:u}),i.target=pl)))}function Ii(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var xl={animationend:Ii("Animation","AnimationEnd"),animationiteration:Ii("Animation","AnimationIteration"),animationstart:Ii("Animation","AnimationStart"),transitionrun:Ii("Transition","TransitionRun"),transitionstart:Ii("Transition","TransitionStart"),transitioncancel:Ii("Transition","TransitionCancel"),transitionend:Ii("Transition","TransitionEnd")},yf={},$y={};Un&&($y=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function Ei(s){if(yf[s])return yf[s];if(!xl[s])return s;var i=xl[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in $y)return yf[s]=i[c];return s}var zy=Ei("animationend"),By=Ei("animationiteration"),Fy=Ei("animationstart"),OA=Ei("transitionrun"),AA=Ei("transitionstart"),TA=Ei("transitioncancel"),Uy=Ei("transitionend"),Vy=new Map,bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bf.push("scrollEnd");function Aa(s,i){Vy.set(s,i),In(i,[s])}var ld=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},la=[],vl=0,jf=0;function od(){for(var s=vl,i=jf=vl=0;i<s;){var c=la[i];la[i++]=null;var u=la[i];la[i++]=null;var x=la[i];la[i++]=null;var j=la[i];if(la[i++]=null,u!==null&&x!==null){var I=u.pending;I===null?x.next=x:(x.next=I.next,I.next=x),u.pending=x}j!==0&&qy(c,x,j)}}function cd(s,i,c,u){la[vl++]=s,la[vl++]=i,la[vl++]=c,la[vl++]=u,jf|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Nf(s,i,c,u){return cd(s,i,c,u),dd(s)}function Mi(s,i){return cd(s,null,null,i),dd(s)}function qy(s,i,c){s.lanes|=c;var u=s.alternate;u!==null&&(u.lanes|=c);for(var x=!1,j=s.return;j!==null;)j.childLanes|=c,u=j.alternate,u!==null&&(u.childLanes|=c),j.tag===22&&(s=j.stateNode,s===null||s._visibility&1||(x=!0)),s=j,j=j.return;return s.tag===3?(j=s.stateNode,x&&i!==null&&(x=31-oe(c),s=j.hiddenUpdates,u=s[x],u===null?s[x]=[i]:u.push(i),i.lane=c|536870912),j):null}function dd(s){if(50<Go)throw Go=0,Ih=null,Error(a(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var yl={};function IA(s,i,c,u){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(s,i,c,u){return new IA(s,i,c,u)}function wf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function as(s,i){var c=s.alternate;return c===null?(c=qn(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Wy(s,i){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,i=c.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function ud(s,i,c,u,x,j){var I=0;if(u=s,typeof s=="function")wf(s)&&(I=1);else if(typeof s=="string")I=RT(s,c,ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=qn(31,c,i,x),s.elementType=z,s.lanes=j,s;case N:return Pi(c.children,x,j,i);case S:I=8,x|=24;break;case C:return s=qn(12,c,i,x|2),s.elementType=C,s.lanes=j,s;case M:return s=qn(13,c,i,x),s.elementType=M,s.lanes=j,s;case D:return s=qn(19,c,i,x),s.elementType=D,s.lanes=j,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:I=10;break e;case O:I=9;break e;case E:I=11;break e;case R:I=14;break e;case P:I=16,u=null;break e}I=29,c=Error(a(130,s===null?"null":typeof s,"")),u=null}return i=qn(I,c,i,x),i.elementType=s,i.type=u,i.lanes=j,i}function Pi(s,i,c,u){return s=qn(7,s,u,i),s.lanes=c,s}function Sf(s,i,c){return s=qn(6,s,null,i),s.lanes=c,s}function Hy(s){var i=qn(18,null,null,0);return i.stateNode=s,i}function kf(s,i,c){return i=qn(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var Ky=new WeakMap;function oa(s,i){if(typeof s=="object"&&s!==null){var c=Ky.get(s);return c!==void 0?c:(i={value:s,source:i,stack:nr(i)},Ky.set(s,i),i)}return{value:s,source:i,stack:nr(i)}}var bl=[],jl=0,md=null,Do=0,ca=[],da=0,Vs=null,Fa=1,Ua="";function ss(s,i){bl[jl++]=Do,bl[jl++]=md,md=s,Do=i}function Gy(s,i,c){ca[da++]=Fa,ca[da++]=Ua,ca[da++]=Vs,Vs=s;var u=Fa;s=Ua;var x=32-oe(u)-1;u&=~(1<<x),c+=1;var j=32-oe(i)+x;if(30<j){var I=x-x%5;j=(u&(1<<I)-1).toString(32),u>>=I,x-=I,Fa=1<<32-oe(i)+x|c<<x|u,Ua=j+s}else Fa=1<<j|c<<x|u,Ua=s}function Cf(s){s.return!==null&&(ss(s,1),Gy(s,1,0))}function Df(s){for(;s===md;)md=bl[--jl],bl[jl]=null,Do=bl[--jl],bl[jl]=null;for(;s===Vs;)Vs=ca[--da],ca[da]=null,Ua=ca[--da],ca[da]=null,Fa=ca[--da],ca[da]=null}function Yy(s,i){ca[da++]=Fa,ca[da++]=Ua,ca[da++]=Vs,Fa=i.id,Ua=i.overflow,Vs=s}var nn=null,fr=null,Rt=!1,qs=null,ua=!1,Of=Error(a(519));function Ws(s){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(oa(i,s)),Of}function Qy(s){var i=s.stateNode,c=s.type,u=s.memoizedProps;switch(i[Sr]=s,i[ft]=u,c){case"dialog":Et("cancel",i),Et("close",i);break;case"iframe":case"object":case"embed":Et("load",i);break;case"video":case"audio":for(c=0;c<Qo.length;c++)Et(Qo[c],i);break;case"source":Et("error",i);break;case"img":case"image":case"link":Et("error",i),Et("load",i);break;case"details":Et("toggle",i);break;case"input":Et("invalid",i),Je(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Et("invalid",i);break;case"textarea":Et("invalid",i),De(i,u.value,u.defaultValue,u.children)}c=u.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||u.suppressHydrationWarning===!0||fN(i.textContent,c)?(u.popover!=null&&(Et("beforetoggle",i),Et("toggle",i)),u.onScroll!=null&&Et("scroll",i),u.onScrollEnd!=null&&Et("scrollend",i),u.onClick!=null&&(i.onclick=J),i=!0):i=!1,i||Ws(s,!0)}function Xy(s){for(nn=s.return;nn;)switch(nn.tag){case 5:case 31:case 13:ua=!1;return;case 27:case 3:ua=!0;return;default:nn=nn.return}}function Nl(s){if(s!==nn)return!1;if(!Rt)return Xy(s),Rt=!0,!1;var i=s.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Hh(s.type,s.memoizedProps)),c=!c),c&&fr&&Ws(s),Xy(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));fr=NN(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));fr=NN(s)}else i===27?(i=fr,si(s.type)?(s=Xh,Xh=null,fr=s):fr=i):fr=nn?fa(s.stateNode.nextSibling):null;return!0}function _i(){fr=nn=null,Rt=!1}function Af(){var s=qs;return s!==null&&(Rn===null?Rn=s:Rn.push.apply(Rn,s),qs=null),s}function Oo(s){qs===null?qs=[s]:qs.push(s)}var Tf=B(null),Ri=null,is=null;function Hs(s,i,c){ye(Tf,i._currentValue),i._currentValue=c}function ls(s){s._currentValue=Tf.current,le(Tf)}function If(s,i,c){for(;s!==null;){var u=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),s===c)break;s=s.return}}function Ef(s,i,c,u){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var j=x.dependencies;if(j!==null){var I=x.child;j=j.firstContext;e:for(;j!==null;){var $=j;j=x;for(var re=0;re<i.length;re++)if($.context===i[re]){j.lanes|=c,$=j.alternate,$!==null&&($.lanes|=c),If(j.return,c,s),u||(I=null);break e}j=$.next}}else if(x.tag===18){if(I=x.return,I===null)throw Error(a(341));I.lanes|=c,j=I.alternate,j!==null&&(j.lanes|=c),If(I,c,s),I=null}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===s){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}}function wl(s,i,c,u){s=null;for(var x=i,j=!1;x!==null;){if(!j){if((x.flags&524288)!==0)j=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var I=x.alternate;if(I===null)throw Error(a(387));if(I=I.memoizedProps,I!==null){var $=x.type;Vn(x.pendingProps.value,I.value)||(s!==null?s.push($):s=[$])}}else if(x===ce.current){if(I=x.alternate,I===null)throw Error(a(387));I.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(tc):s=[tc])}x=x.return}s!==null&&Ef(i,s,c,u),i.flags|=262144}function fd(s){for(s=s.firstContext;s!==null;){if(!Vn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Li(s){Ri=s,is=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function an(s){return Zy(Ri,s)}function hd(s,i){return Ri===null&&Li(s),Zy(s,i)}function Zy(s,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},is===null){if(s===null)throw Error(a(308));is=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else is=is.next=i;return c}var EA=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(c,u){s.push(u)}};this.abort=function(){i.aborted=!0,s.forEach(function(c){return c()})}},MA=e.unstable_scheduleCallback,PA=e.unstable_NormalPriority,Rr={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new EA,data:new Map,refCount:0}}function Ao(s){s.refCount--,s.refCount===0&&MA(PA,function(){s.controller.abort()})}var To=null,Pf=0,Sl=0,kl=null;function _A(s,i){if(To===null){var c=To=[];Pf=0,Sl=Lh(),kl={status:"pending",value:void 0,then:function(u){c.push(u)}}}return Pf++,i.then(Jy,Jy),i}function Jy(){if(--Pf===0&&To!==null){kl!==null&&(kl.status="fulfilled");var s=To;To=null,Sl=0,kl=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function RA(s,i){var c=[],u={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return s.then(function(){u.status="fulfilled",u.value=i;for(var x=0;x<c.length;x++)(0,c[x])(i)},function(x){for(u.status="rejected",u.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),u}var eb=L.S;L.S=function(s,i){Lj=Ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&_A(s,i),eb!==null&&eb(s,i)};var $i=B(null);function _f(){var s=$i.current;return s!==null?s:sr.pooledCache}function gd(s,i){i===null?ye($i,$i.current):ye($i,i.pool)}function tb(){var s=_f();return s===null?null:{parent:Rr._currentValue,pool:s}}var Cl=Error(a(460)),Rf=Error(a(474)),pd=Error(a(542)),xd={then:function(){}};function rb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function nb(s,i,c){switch(c=s[c],c===void 0?s.push(i):c!==i&&(i.then(J,J),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,sb(s),s;default:if(typeof i.status=="string")i.then(J,J);else{if(s=sr,s!==null&&100<s.shellSuspendCounter)throw Error(a(482));s=i,s.status="pending",s.then(function(u){if(i.status==="pending"){var x=i;x.status="fulfilled",x.value=u}},function(u){if(i.status==="pending"){var x=i;x.status="rejected",x.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,sb(s),s}throw Bi=i,Cl}}function zi(s){try{var i=s._init;return i(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Bi=c,Cl):c}}var Bi=null;function ab(){if(Bi===null)throw Error(a(459));var s=Bi;return Bi=null,s}function sb(s){if(s===Cl||s===pd)throw Error(a(483))}var Dl=null,Io=0;function vd(s){var i=Io;return Io+=1,Dl===null&&(Dl=[]),nb(Dl,s,i)}function Eo(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function yd(s,i){throw i.$$typeof===v?Error(a(525)):(s=Object.prototype.toString.call(i),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function ib(s){function i(ue,ie){if(s){var fe=ue.deletions;fe===null?(ue.deletions=[ie],ue.flags|=16):fe.push(ie)}}function c(ue,ie){if(!s)return null;for(;ie!==null;)i(ue,ie),ie=ie.sibling;return null}function u(ue){for(var ie=new Map;ue!==null;)ue.key!==null?ie.set(ue.key,ue):ie.set(ue.index,ue),ue=ue.sibling;return ie}function x(ue,ie){return ue=as(ue,ie),ue.index=0,ue.sibling=null,ue}function j(ue,ie,fe){return ue.index=fe,s?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<ie?(ue.flags|=67108866,ie):fe):(ue.flags|=67108866,ie)):(ue.flags|=1048576,ie)}function I(ue){return s&&ue.alternate===null&&(ue.flags|=67108866),ue}function $(ue,ie,fe,ke){return ie===null||ie.tag!==6?(ie=Sf(fe,ue.mode,ke),ie.return=ue,ie):(ie=x(ie,fe),ie.return=ue,ie)}function re(ue,ie,fe,ke){var mt=fe.type;return mt===N?Se(ue,ie,fe.props.children,ke,fe.key):ie!==null&&(ie.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===P&&zi(mt)===ie.type)?(ie=x(ie,fe.props),Eo(ie,fe),ie.return=ue,ie):(ie=ud(fe.type,fe.key,fe.props,null,ue.mode,ke),Eo(ie,fe),ie.return=ue,ie)}function he(ue,ie,fe,ke){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==fe.containerInfo||ie.stateNode.implementation!==fe.implementation?(ie=kf(fe,ue.mode,ke),ie.return=ue,ie):(ie=x(ie,fe.children||[]),ie.return=ue,ie)}function Se(ue,ie,fe,ke,mt){return ie===null||ie.tag!==7?(ie=Pi(fe,ue.mode,ke,mt),ie.return=ue,ie):(ie=x(ie,fe),ie.return=ue,ie)}function Oe(ue,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=Sf(""+ie,ue.mode,fe),ie.return=ue,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:return fe=ud(ie.type,ie.key,ie.props,null,ue.mode,fe),Eo(fe,ie),fe.return=ue,fe;case w:return ie=kf(ie,ue.mode,fe),ie.return=ue,ie;case P:return ie=zi(ie),Oe(ue,ie,fe)}if(G(ie)||Y(ie))return ie=Pi(ie,ue.mode,fe,null),ie.return=ue,ie;if(typeof ie.then=="function")return Oe(ue,vd(ie),fe);if(ie.$$typeof===k)return Oe(ue,hd(ue,ie),fe);yd(ue,ie)}return null}function xe(ue,ie,fe,ke){var mt=ie!==null?ie.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return mt!==null?null:$(ue,ie,""+fe,ke);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return fe.key===mt?re(ue,ie,fe,ke):null;case w:return fe.key===mt?he(ue,ie,fe,ke):null;case P:return fe=zi(fe),xe(ue,ie,fe,ke)}if(G(fe)||Y(fe))return mt!==null?null:Se(ue,ie,fe,ke,null);if(typeof fe.then=="function")return xe(ue,ie,vd(fe),ke);if(fe.$$typeof===k)return xe(ue,ie,hd(ue,fe),ke);yd(ue,fe)}return null}function be(ue,ie,fe,ke,mt){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ue=ue.get(fe)||null,$(ie,ue,""+ke,mt);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case b:return ue=ue.get(ke.key===null?fe:ke.key)||null,re(ie,ue,ke,mt);case w:return ue=ue.get(ke.key===null?fe:ke.key)||null,he(ie,ue,ke,mt);case P:return ke=zi(ke),be(ue,ie,fe,ke,mt)}if(G(ke)||Y(ke))return ue=ue.get(fe)||null,Se(ie,ue,ke,mt,null);if(typeof ke.then=="function")return be(ue,ie,fe,vd(ke),mt);if(ke.$$typeof===k)return be(ue,ie,fe,hd(ie,ke),mt);yd(ie,ke)}return null}function Ge(ue,ie,fe,ke){for(var mt=null,Ft=null,nt=ie,St=ie=0,Pt=null;nt!==null&&St<fe.length;St++){nt.index>St?(Pt=nt,nt=null):Pt=nt.sibling;var Ut=xe(ue,nt,fe[St],ke);if(Ut===null){nt===null&&(nt=Pt);break}s&&nt&&Ut.alternate===null&&i(ue,nt),ie=j(Ut,ie,St),Ft===null?mt=Ut:Ft.sibling=Ut,Ft=Ut,nt=Pt}if(St===fe.length)return c(ue,nt),Rt&&ss(ue,St),mt;if(nt===null){for(;St<fe.length;St++)nt=Oe(ue,fe[St],ke),nt!==null&&(ie=j(nt,ie,St),Ft===null?mt=nt:Ft.sibling=nt,Ft=nt);return Rt&&ss(ue,St),mt}for(nt=u(nt);St<fe.length;St++)Pt=be(nt,ue,St,fe[St],ke),Pt!==null&&(s&&Pt.alternate!==null&&nt.delete(Pt.key===null?St:Pt.key),ie=j(Pt,ie,St),Ft===null?mt=Pt:Ft.sibling=Pt,Ft=Pt);return s&&nt.forEach(function(di){return i(ue,di)}),Rt&&ss(ue,St),mt}function ht(ue,ie,fe,ke){if(fe==null)throw Error(a(151));for(var mt=null,Ft=null,nt=ie,St=ie=0,Pt=null,Ut=fe.next();nt!==null&&!Ut.done;St++,Ut=fe.next()){nt.index>St?(Pt=nt,nt=null):Pt=nt.sibling;var di=xe(ue,nt,Ut.value,ke);if(di===null){nt===null&&(nt=Pt);break}s&&nt&&di.alternate===null&&i(ue,nt),ie=j(di,ie,St),Ft===null?mt=di:Ft.sibling=di,Ft=di,nt=Pt}if(Ut.done)return c(ue,nt),Rt&&ss(ue,St),mt;if(nt===null){for(;!Ut.done;St++,Ut=fe.next())Ut=Oe(ue,Ut.value,ke),Ut!==null&&(ie=j(Ut,ie,St),Ft===null?mt=Ut:Ft.sibling=Ut,Ft=Ut);return Rt&&ss(ue,St),mt}for(nt=u(nt);!Ut.done;St++,Ut=fe.next())Ut=be(nt,ue,St,Ut.value,ke),Ut!==null&&(s&&Ut.alternate!==null&&nt.delete(Ut.key===null?St:Ut.key),ie=j(Ut,ie,St),Ft===null?mt=Ut:Ft.sibling=Ut,Ft=Ut);return s&&nt.forEach(function(KT){return i(ue,KT)}),Rt&&ss(ue,St),mt}function tr(ue,ie,fe,ke){if(typeof fe=="object"&&fe!==null&&fe.type===N&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:e:{for(var mt=fe.key;ie!==null;){if(ie.key===mt){if(mt=fe.type,mt===N){if(ie.tag===7){c(ue,ie.sibling),ke=x(ie,fe.props.children),ke.return=ue,ue=ke;break e}}else if(ie.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===P&&zi(mt)===ie.type){c(ue,ie.sibling),ke=x(ie,fe.props),Eo(ke,fe),ke.return=ue,ue=ke;break e}c(ue,ie);break}else i(ue,ie);ie=ie.sibling}fe.type===N?(ke=Pi(fe.props.children,ue.mode,ke,fe.key),ke.return=ue,ue=ke):(ke=ud(fe.type,fe.key,fe.props,null,ue.mode,ke),Eo(ke,fe),ke.return=ue,ue=ke)}return I(ue);case w:e:{for(mt=fe.key;ie!==null;){if(ie.key===mt)if(ie.tag===4&&ie.stateNode.containerInfo===fe.containerInfo&&ie.stateNode.implementation===fe.implementation){c(ue,ie.sibling),ke=x(ie,fe.children||[]),ke.return=ue,ue=ke;break e}else{c(ue,ie);break}else i(ue,ie);ie=ie.sibling}ke=kf(fe,ue.mode,ke),ke.return=ue,ue=ke}return I(ue);case P:return fe=zi(fe),tr(ue,ie,fe,ke)}if(G(fe))return Ge(ue,ie,fe,ke);if(Y(fe)){if(mt=Y(fe),typeof mt!="function")throw Error(a(150));return fe=mt.call(fe),ht(ue,ie,fe,ke)}if(typeof fe.then=="function")return tr(ue,ie,vd(fe),ke);if(fe.$$typeof===k)return tr(ue,ie,hd(ue,fe),ke);yd(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,ie!==null&&ie.tag===6?(c(ue,ie.sibling),ke=x(ie,fe),ke.return=ue,ue=ke):(c(ue,ie),ke=Sf(fe,ue.mode,ke),ke.return=ue,ue=ke),I(ue)):c(ue,ie)}return function(ue,ie,fe,ke){try{Io=0;var mt=tr(ue,ie,fe,ke);return Dl=null,mt}catch(nt){if(nt===Cl||nt===pd)throw nt;var Ft=qn(29,nt,null,ue.mode);return Ft.lanes=ke,Ft.return=ue,Ft}finally{}}}var Fi=ib(!0),lb=ib(!1),Ks=!1;function Lf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ys(s,i,c){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(Wt&2)!==0){var x=u.pending;return x===null?i.next=i:(i.next=x.next,x.next=i),u.pending=i,i=dd(s),qy(s,null,c),i}return cd(s,u,i,c),dd(s)}function Mo(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var u=i.lanes;u&=s.pendingLanes,c|=u,i.lanes=c,Nn(s,c)}}function zf(s,i){var c=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,c===u)){var x=null,j=null;if(c=c.firstBaseUpdate,c!==null){do{var I={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};j===null?x=j=I:j=j.next=I,c=c.next}while(c!==null);j===null?x=j=i:j=j.next=i}else x=j=i;c={baseState:u.baseState,firstBaseUpdate:x,lastBaseUpdate:j,shared:u.shared,callbacks:u.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}var Bf=!1;function Po(){if(Bf){var s=kl;if(s!==null)throw s}}function _o(s,i,c,u){Bf=!1;var x=s.updateQueue;Ks=!1;var j=x.firstBaseUpdate,I=x.lastBaseUpdate,$=x.shared.pending;if($!==null){x.shared.pending=null;var re=$,he=re.next;re.next=null,I===null?j=he:I.next=he,I=re;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,$=Se.lastBaseUpdate,$!==I&&($===null?Se.firstBaseUpdate=he:$.next=he,Se.lastBaseUpdate=re))}if(j!==null){var Oe=x.baseState;I=0,Se=he=re=null,$=j;do{var xe=$.lane&-536870913,be=xe!==$.lane;if(be?(Mt&xe)===xe:(u&xe)===xe){xe!==0&&xe===Sl&&(Bf=!0),Se!==null&&(Se=Se.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});e:{var Ge=s,ht=$;xe=i;var tr=c;switch(ht.tag){case 1:if(Ge=ht.payload,typeof Ge=="function"){Oe=Ge.call(tr,Oe,xe);break e}Oe=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=ht.payload,xe=typeof Ge=="function"?Ge.call(tr,Oe,xe):Ge,xe==null)break e;Oe=p({},Oe,xe);break e;case 2:Ks=!0}}xe=$.callback,xe!==null&&(s.flags|=64,be&&(s.flags|=8192),be=x.callbacks,be===null?x.callbacks=[xe]:be.push(xe))}else be={lane:xe,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Se===null?(he=Se=be,re=Oe):Se=Se.next=be,I|=xe;if($=$.next,$===null){if($=x.shared.pending,$===null)break;be=$,$=be.next,be.next=null,x.lastBaseUpdate=be,x.shared.pending=null}}while(!0);Se===null&&(re=Oe),x.baseState=re,x.firstBaseUpdate=he,x.lastBaseUpdate=Se,j===null&&(x.shared.lanes=0),ei|=I,s.lanes=I,s.memoizedState=Oe}}function ob(s,i){if(typeof s!="function")throw Error(a(191,s));s.call(i)}function cb(s,i){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)ob(c[s],i)}var Ol=B(null),bd=B(0);function db(s,i){s=ps,ye(bd,s),ye(Ol,i),ps=s|i.baseLanes}function Ff(){ye(bd,ps),ye(Ol,Ol.current)}function Uf(){ps=bd.current,le(Ol),le(bd)}var Wn=B(null),ma=null;function Qs(s){var i=s.alternate;ye(Ir,Ir.current&1),ye(Wn,s),ma===null&&(i===null||Ol.current!==null||i.memoizedState!==null)&&(ma=s)}function Vf(s){ye(Ir,Ir.current),ye(Wn,s),ma===null&&(ma=s)}function ub(s){s.tag===22?(ye(Ir,Ir.current),ye(Wn,s),ma===null&&(ma=s)):Xs()}function Xs(){ye(Ir,Ir.current),ye(Wn,Wn.current)}function Hn(s){le(Wn),ma===s&&(ma=null),le(Ir)}var Ir=B(0);function jd(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Yh(c)||Qh(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var os=0,jt=null,Jt=null,Lr=null,Nd=!1,Al=!1,Ui=!1,wd=0,Ro=0,Tl=null,LA=0;function Cr(){throw Error(a(321))}function qf(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!Vn(s[c],i[c]))return!1;return!0}function Wf(s,i,c,u,x,j){return os=j,jt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,L.H=s===null||s.memoizedState===null?Gb:ih,Ui=!1,j=c(u,x),Ui=!1,Al&&(j=fb(i,c,u,x)),mb(s),j}function mb(s){L.H=zo;var i=Jt!==null&&Jt.next!==null;if(os=0,Lr=Jt=jt=null,Nd=!1,Ro=0,Tl=null,i)throw Error(a(300));s===null||$r||(s=s.dependencies,s!==null&&fd(s)&&($r=!0))}function fb(s,i,c,u){jt=s;var x=0;do{if(Al&&(Tl=null),Ro=0,Al=!1,25<=x)throw Error(a(301));if(x+=1,Lr=Jt=null,s.updateQueue!=null){var j=s.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}L.H=Yb,j=i(c,u)}while(Al);return j}function $A(){var s=L.H,i=s.useState()[0];return i=typeof i.then=="function"?Lo(i):i,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(jt.flags|=1024),i}function Hf(){var s=wd!==0;return wd=0,s}function Kf(s,i,c){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~c}function Gf(s){if(Nd){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Nd=!1}os=0,Lr=Jt=jt=null,Al=!1,Ro=wd=0,Tl=null}function kn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?jt.memoizedState=Lr=s:Lr=Lr.next=s,Lr}function Er(){if(Jt===null){var s=jt.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var i=Lr===null?jt.memoizedState:Lr.next;if(i!==null)Lr=i,Jt=s;else{if(s===null)throw jt.alternate===null?Error(a(467)):Error(a(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Lr===null?jt.memoizedState=Lr=s:Lr=Lr.next=s}return Lr}function Sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lo(s){var i=Ro;return Ro+=1,Tl===null&&(Tl=[]),s=nb(Tl,s,i),i=jt,(Lr===null?i.memoizedState:Lr.next)===null&&(i=i.alternate,L.H=i===null||i.memoizedState===null?Gb:ih),s}function kd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Lo(s);if(s.$$typeof===k)return an(s)}throw Error(a(438,String(s)))}function Yf(s){var i=null,c=jt.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var u=jt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(x){return x.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=Sd(),jt.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(s),u=0;u<s;u++)c[u]=U;return i.index++,c}function cs(s,i){return typeof i=="function"?i(s):i}function Cd(s){var i=Er();return Qf(i,Jt,s)}function Qf(s,i,c){var u=s.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=c;var x=s.baseQueue,j=u.pending;if(j!==null){if(x!==null){var I=x.next;x.next=j.next,j.next=I}i.baseQueue=x=j,u.pending=null}if(j=s.baseState,x===null)s.memoizedState=j;else{i=x.next;var $=I=null,re=null,he=i,Se=!1;do{var Oe=he.lane&-536870913;if(Oe!==he.lane?(Mt&Oe)===Oe:(os&Oe)===Oe){var xe=he.revertLane;if(xe===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Oe===Sl&&(Se=!0);else if((os&xe)===xe){he=he.next,xe===Sl&&(Se=!0);continue}else Oe={lane:0,revertLane:he.revertLane,gesture:null,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},re===null?($=re=Oe,I=j):re=re.next=Oe,jt.lanes|=xe,ei|=xe;Oe=he.action,Ui&&c(j,Oe),j=he.hasEagerState?he.eagerState:c(j,Oe)}else xe={lane:Oe,revertLane:he.revertLane,gesture:he.gesture,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},re===null?($=re=xe,I=j):re=re.next=xe,jt.lanes|=Oe,ei|=Oe;he=he.next}while(he!==null&&he!==i);if(re===null?I=j:re.next=$,!Vn(j,s.memoizedState)&&($r=!0,Se&&(c=kl,c!==null)))throw c;s.memoizedState=j,s.baseState=I,s.baseQueue=re,u.lastRenderedState=j}return x===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Xf(s){var i=Er(),c=i.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=s;var u=c.dispatch,x=c.pending,j=i.memoizedState;if(x!==null){c.pending=null;var I=x=x.next;do j=s(j,I.action),I=I.next;while(I!==x);Vn(j,i.memoizedState)||($r=!0),i.memoizedState=j,i.baseQueue===null&&(i.baseState=j),c.lastRenderedState=j}return[j,u]}function hb(s,i,c){var u=jt,x=Er(),j=Rt;if(j){if(c===void 0)throw Error(a(407));c=c()}else c=i();var I=!Vn((Jt||x).memoizedState,c);if(I&&(x.memoizedState=c,$r=!0),x=x.queue,eh(xb.bind(null,u,x,s),[s]),x.getSnapshot!==i||I||Lr!==null&&Lr.memoizedState.tag&1){if(u.flags|=2048,Il(9,{destroy:void 0},pb.bind(null,u,x,c,i),null),sr===null)throw Error(a(349));j||(os&127)!==0||gb(u,i,c)}return c}function gb(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=jt.updateQueue,i===null?(i=Sd(),jt.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function pb(s,i,c,u){i.value=c,i.getSnapshot=u,vb(i)&&yb(s)}function xb(s,i,c){return c(function(){vb(i)&&yb(s)})}function vb(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!Vn(s,c)}catch{return!0}}function yb(s){var i=Mi(s,2);i!==null&&Ln(i,s,2)}function Zf(s){var i=kn();if(typeof s=="function"){var c=s;if(s=c(),Ui){se(!0);try{c()}finally{se(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:s},i}function bb(s,i,c,u){return s.baseState=c,Qf(s,Jt,typeof u=="function"?u:cs)}function zA(s,i,c,u,x){if(Ad(s))throw Error(a(485));if(s=i.action,s!==null){var j={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){j.listeners.push(I)}};L.T!==null?c(!0):j.isTransition=!1,u(j),c=i.pending,c===null?(j.next=i.pending=j,jb(i,j)):(j.next=c.next,i.pending=c.next=j)}}function jb(s,i){var c=i.action,u=i.payload,x=s.state;if(i.isTransition){var j=L.T,I={};L.T=I;try{var $=c(x,u),re=L.S;re!==null&&re(I,$),Nb(s,i,$)}catch(he){Jf(s,i,he)}finally{j!==null&&I.types!==null&&(j.types=I.types),L.T=j}}else try{j=c(x,u),Nb(s,i,j)}catch(he){Jf(s,i,he)}}function Nb(s,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(u){wb(s,i,u)},function(u){return Jf(s,i,u)}):wb(s,i,c)}function wb(s,i,c){i.status="fulfilled",i.value=c,Sb(i),s.state=c,i=s.pending,i!==null&&(c=i.next,c===i?s.pending=null:(c=c.next,i.next=c,jb(s,c)))}function Jf(s,i,c){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=c,Sb(i),i=i.next;while(i!==u)}s.action=null}function Sb(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function kb(s,i){return i}function Cb(s,i){if(Rt){var c=sr.formState;if(c!==null){e:{var u=jt;if(Rt){if(fr){t:{for(var x=fr,j=ua;x.nodeType!==8;){if(!j){x=null;break t}if(x=fa(x.nextSibling),x===null){x=null;break t}}j=x.data,x=j==="F!"||j==="F"?x:null}if(x){fr=fa(x.nextSibling),u=x.data==="F!";break e}}Ws(u)}u=!1}u&&(i=c[0])}}return c=kn(),c.memoizedState=c.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kb,lastRenderedState:i},c.queue=u,c=Wb.bind(null,jt,u),u.dispatch=c,u=Zf(!1),j=sh.bind(null,jt,!1,u.queue),u=kn(),x={state:i,dispatch:null,action:s,pending:null},u.queue=x,c=zA.bind(null,jt,x,j,c),x.dispatch=c,u.memoizedState=s,[i,c,!1]}function Db(s){var i=Er();return Ob(i,Jt,s)}function Ob(s,i,c){if(i=Qf(s,i,kb)[0],s=Cd(cs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Lo(i)}catch(I){throw I===Cl?pd:I}else u=i;i=Er();var x=i.queue,j=x.dispatch;return c!==i.memoizedState&&(jt.flags|=2048,Il(9,{destroy:void 0},BA.bind(null,x,c),null)),[u,j,s]}function BA(s,i){s.action=i}function Ab(s){var i=Er(),c=Jt;if(c!==null)return Ob(i,c,s);Er(),i=i.memoizedState,c=Er();var u=c.queue.dispatch;return c.memoizedState=s,[i,u,!1]}function Il(s,i,c,u){return s={tag:s,create:c,deps:u,inst:i,next:null},i=jt.updateQueue,i===null&&(i=Sd(),jt.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=s.next=s:(u=c.next,c.next=s,s.next=u,i.lastEffect=s),s}function Tb(){return Er().memoizedState}function Dd(s,i,c,u){var x=kn();jt.flags|=s,x.memoizedState=Il(1|i,{destroy:void 0},c,u===void 0?null:u)}function Od(s,i,c,u){var x=Er();u=u===void 0?null:u;var j=x.memoizedState.inst;Jt!==null&&u!==null&&qf(u,Jt.memoizedState.deps)?x.memoizedState=Il(i,j,c,u):(jt.flags|=s,x.memoizedState=Il(1|i,j,c,u))}function Ib(s,i){Dd(8390656,8,s,i)}function eh(s,i){Od(2048,8,s,i)}function FA(s){jt.flags|=4;var i=jt.updateQueue;if(i===null)i=Sd(),jt.updateQueue=i,i.events=[s];else{var c=i.events;c===null?i.events=[s]:c.push(s)}}function Eb(s){var i=Er().memoizedState;return FA({ref:i,nextImpl:s}),function(){if((Wt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Mb(s,i){return Od(4,2,s,i)}function Pb(s,i){return Od(4,4,s,i)}function _b(s,i){if(typeof i=="function"){s=s();var c=i(s);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Rb(s,i,c){c=c!=null?c.concat([s]):null,Od(4,4,_b.bind(null,i,s),c)}function th(){}function Lb(s,i){var c=Er();i=i===void 0?null:i;var u=c.memoizedState;return i!==null&&qf(i,u[1])?u[0]:(c.memoizedState=[s,i],s)}function $b(s,i){var c=Er();i=i===void 0?null:i;var u=c.memoizedState;if(i!==null&&qf(i,u[1]))return u[0];if(u=s(),Ui){se(!0);try{s()}finally{se(!1)}}return c.memoizedState=[u,i],u}function rh(s,i,c){return c===void 0||(os&1073741824)!==0&&(Mt&261930)===0?s.memoizedState=i:(s.memoizedState=c,s=zj(),jt.lanes|=s,ei|=s,c)}function zb(s,i,c,u){return Vn(c,i)?c:Ol.current!==null?(s=rh(s,c,u),Vn(s,i)||($r=!0),s):(os&42)===0||(os&1073741824)!==0&&(Mt&261930)===0?($r=!0,s.memoizedState=c):(s=zj(),jt.lanes|=s,ei|=s,i)}function Bb(s,i,c,u,x){var j=V.p;V.p=j!==0&&8>j?j:8;var I=L.T,$={};L.T=$,sh(s,!1,i,c);try{var re=x(),he=L.S;if(he!==null&&he($,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Se=RA(re,u);$o(s,i,Se,Yn(s))}else $o(s,i,u,Yn(s))}catch(Oe){$o(s,i,{then:function(){},status:"rejected",reason:Oe},Yn())}finally{V.p=j,I!==null&&$.types!==null&&(I.types=$.types),L.T=I}}function UA(){}function nh(s,i,c,u){if(s.tag!==5)throw Error(a(476));var x=Fb(s).queue;Bb(s,x,i,Z,c===null?UA:function(){return Ub(s),c(u)})}function Fb(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:Z},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:c},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Ub(s){var i=Fb(s);i.next===null&&(i=s.alternate.memoizedState),$o(s,i.next.queue,{},Yn())}function ah(){return an(tc)}function Vb(){return Er().memoizedState}function qb(){return Er().memoizedState}function VA(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var c=Yn();s=Gs(c);var u=Ys(i,s,c);u!==null&&(Ln(u,i,c),Mo(u,i,c)),i={cache:Mf()},s.payload=i;return}i=i.return}}function qA(s,i,c){var u=Yn();c={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ad(s)?Hb(i,c):(c=Nf(s,i,c,u),c!==null&&(Ln(c,s,u),Kb(c,i,u)))}function Wb(s,i,c){var u=Yn();$o(s,i,c,u)}function $o(s,i,c,u){var x={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ad(s))Hb(i,x);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=i.lastRenderedReducer,j!==null))try{var I=i.lastRenderedState,$=j(I,c);if(x.hasEagerState=!0,x.eagerState=$,Vn($,I))return cd(s,i,x,0),sr===null&&od(),!1}catch{}finally{}if(c=Nf(s,i,x,u),c!==null)return Ln(c,s,u),Kb(c,i,u),!0}return!1}function sh(s,i,c,u){if(u={lane:2,revertLane:Lh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ad(s)){if(i)throw Error(a(479))}else i=Nf(s,c,u,2),i!==null&&Ln(i,s,2)}function Ad(s){var i=s.alternate;return s===jt||i!==null&&i===jt}function Hb(s,i){Al=Nd=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function Kb(s,i,c){if((c&4194048)!==0){var u=i.lanes;u&=s.pendingLanes,c|=u,i.lanes=c,Nn(s,c)}}var zo={readContext:an,use:kd,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useLayoutEffect:Cr,useInsertionEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useSyncExternalStore:Cr,useId:Cr,useHostTransitionStatus:Cr,useFormState:Cr,useActionState:Cr,useOptimistic:Cr,useMemoCache:Cr,useCacheRefresh:Cr};zo.useEffectEvent=Cr;var Gb={readContext:an,use:kd,useCallback:function(s,i){return kn().memoizedState=[s,i===void 0?null:i],s},useContext:an,useEffect:Ib,useImperativeHandle:function(s,i,c){c=c!=null?c.concat([s]):null,Dd(4194308,4,_b.bind(null,i,s),c)},useLayoutEffect:function(s,i){return Dd(4194308,4,s,i)},useInsertionEffect:function(s,i){Dd(4,2,s,i)},useMemo:function(s,i){var c=kn();i=i===void 0?null:i;var u=s();if(Ui){se(!0);try{s()}finally{se(!1)}}return c.memoizedState=[u,i],u},useReducer:function(s,i,c){var u=kn();if(c!==void 0){var x=c(i);if(Ui){se(!0);try{c(i)}finally{se(!1)}}}else x=i;return u.memoizedState=u.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},u.queue=s,s=s.dispatch=qA.bind(null,jt,s),[u.memoizedState,s]},useRef:function(s){var i=kn();return s={current:s},i.memoizedState=s},useState:function(s){s=Zf(s);var i=s.queue,c=Wb.bind(null,jt,i);return i.dispatch=c,[s.memoizedState,c]},useDebugValue:th,useDeferredValue:function(s,i){var c=kn();return rh(c,s,i)},useTransition:function(){var s=Zf(!1);return s=Bb.bind(null,jt,s.queue,!0,!1),kn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,c){var u=jt,x=kn();if(Rt){if(c===void 0)throw Error(a(407));c=c()}else{if(c=i(),sr===null)throw Error(a(349));(Mt&127)!==0||gb(u,i,c)}x.memoizedState=c;var j={value:c,getSnapshot:i};return x.queue=j,Ib(xb.bind(null,u,j,s),[s]),u.flags|=2048,Il(9,{destroy:void 0},pb.bind(null,u,j,c,i),null),c},useId:function(){var s=kn(),i=sr.identifierPrefix;if(Rt){var c=Ua,u=Fa;c=(u&~(1<<32-oe(u)-1)).toString(32)+c,i="_"+i+"R_"+c,c=wd++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=LA++,i="_"+i+"r_"+c.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:ah,useFormState:Cb,useActionState:Cb,useOptimistic:function(s){var i=kn();i.memoizedState=i.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=sh.bind(null,jt,!0,c),c.dispatch=i,[s,i]},useMemoCache:Yf,useCacheRefresh:function(){return kn().memoizedState=VA.bind(null,jt)},useEffectEvent:function(s){var i=kn(),c={impl:s};return i.memoizedState=c,function(){if((Wt&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},ih={readContext:an,use:kd,useCallback:Lb,useContext:an,useEffect:eh,useImperativeHandle:Rb,useInsertionEffect:Mb,useLayoutEffect:Pb,useMemo:$b,useReducer:Cd,useRef:Tb,useState:function(){return Cd(cs)},useDebugValue:th,useDeferredValue:function(s,i){var c=Er();return zb(c,Jt.memoizedState,s,i)},useTransition:function(){var s=Cd(cs)[0],i=Er().memoizedState;return[typeof s=="boolean"?s:Lo(s),i]},useSyncExternalStore:hb,useId:Vb,useHostTransitionStatus:ah,useFormState:Db,useActionState:Db,useOptimistic:function(s,i){var c=Er();return bb(c,Jt,s,i)},useMemoCache:Yf,useCacheRefresh:qb};ih.useEffectEvent=Eb;var Yb={readContext:an,use:kd,useCallback:Lb,useContext:an,useEffect:eh,useImperativeHandle:Rb,useInsertionEffect:Mb,useLayoutEffect:Pb,useMemo:$b,useReducer:Xf,useRef:Tb,useState:function(){return Xf(cs)},useDebugValue:th,useDeferredValue:function(s,i){var c=Er();return Jt===null?rh(c,s,i):zb(c,Jt.memoizedState,s,i)},useTransition:function(){var s=Xf(cs)[0],i=Er().memoizedState;return[typeof s=="boolean"?s:Lo(s),i]},useSyncExternalStore:hb,useId:Vb,useHostTransitionStatus:ah,useFormState:Ab,useActionState:Ab,useOptimistic:function(s,i){var c=Er();return Jt!==null?bb(c,Jt,s,i):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Yf,useCacheRefresh:qb};Yb.useEffectEvent=Eb;function lh(s,i,c,u){i=s.memoizedState,c=c(u,i),c=c==null?i:p({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var oh={enqueueSetState:function(s,i,c){s=s._reactInternals;var u=Yn(),x=Gs(u);x.payload=i,c!=null&&(x.callback=c),i=Ys(s,x,u),i!==null&&(Ln(i,s,u),Mo(i,s,u))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var u=Yn(),x=Gs(u);x.tag=1,x.payload=i,c!=null&&(x.callback=c),i=Ys(s,x,u),i!==null&&(Ln(i,s,u),Mo(i,s,u))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=Yn(),u=Gs(c);u.tag=2,i!=null&&(u.callback=i),i=Ys(s,u,c),i!==null&&(Ln(i,s,c),Mo(i,s,c))}};function Qb(s,i,c,u,x,j,I){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,j,I):i.prototype&&i.prototype.isPureReactComponent?!ko(c,u)||!ko(x,j):!0}function Xb(s,i,c,u){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,u),i.state!==s&&oh.enqueueReplaceState(i,i.state,null)}function Vi(s,i){var c=i;if("ref"in i){c={};for(var u in i)u!=="ref"&&(c[u]=i[u])}if(s=s.defaultProps){c===i&&(c=p({},c));for(var x in s)c[x]===void 0&&(c[x]=s[x])}return c}function Zb(s){ld(s)}function Jb(s){console.error(s)}function ej(s){ld(s)}function Td(s,i){try{var c=s.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function tj(s,i,c){try{var u=s.onCaughtError;u(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function ch(s,i,c){return c=Gs(c),c.tag=3,c.payload={element:null},c.callback=function(){Td(s,i)},c}function rj(s){return s=Gs(s),s.tag=3,s}function nj(s,i,c,u){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var j=u.value;s.payload=function(){return x(j)},s.callback=function(){tj(i,c,u)}}var I=c.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(s.callback=function(){tj(i,c,u),typeof x!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var $=u.stack;this.componentDidCatch(u.value,{componentStack:$!==null?$:""})})}function WA(s,i,c,u,x){if(c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=c.alternate,i!==null&&wl(i,c,x,!0),c=Wn.current,c!==null){switch(c.tag){case 31:case 13:return ma===null?Ud():c.alternate===null&&Dr===0&&(Dr=3),c.flags&=-257,c.flags|=65536,c.lanes=x,u===xd?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([u]):i.add(u),Ph(s,u,x)),!1;case 22:return c.flags|=65536,u===xd?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([u]):c.add(u)),Ph(s,u,x)),!1}throw Error(a(435,c.tag))}return Ph(s,u,x),Ud(),!1}if(Rt)return i=Wn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=x,u!==Of&&(s=Error(a(422),{cause:u}),Oo(oa(s,c)))):(u!==Of&&(i=Error(a(423),{cause:u}),Oo(oa(i,c))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,u=oa(u,c),x=ch(s.stateNode,u,x),zf(s,x),Dr!==4&&(Dr=2)),!1;var j=Error(a(520),{cause:u});if(j=oa(j,c),Ko===null?Ko=[j]:Ko.push(j),Dr!==4&&(Dr=2),i===null)return!0;u=oa(u,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,s=x&-x,c.lanes|=s,s=ch(c.stateNode,u,s),zf(c,s),!1;case 1:if(i=c.type,j=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ti===null||!ti.has(j))))return c.flags|=65536,x&=-x,c.lanes|=x,x=rj(x),nj(x,s,c,u),zf(c,x),!1}c=c.return}while(c!==null);return!1}var dh=Error(a(461)),$r=!1;function sn(s,i,c,u){i.child=s===null?lb(i,null,c,u):Fi(i,s.child,c,u)}function aj(s,i,c,u,x){c=c.render;var j=i.ref;if("ref"in u){var I={};for(var $ in u)$!=="ref"&&(I[$]=u[$])}else I=u;return Li(i),u=Wf(s,i,c,I,j,x),$=Hf(),s!==null&&!$r?(Kf(s,i,x),ds(s,i,x)):(Rt&&$&&Cf(i),i.flags|=1,sn(s,i,u,x),i.child)}function sj(s,i,c,u,x){if(s===null){var j=c.type;return typeof j=="function"&&!wf(j)&&j.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=j,ij(s,i,j,u,x)):(s=ud(c.type,null,u,i,i.mode,x),s.ref=i.ref,s.return=i,i.child=s)}if(j=s.child,!vh(s,x)){var I=j.memoizedProps;if(c=c.compare,c=c!==null?c:ko,c(I,u)&&s.ref===i.ref)return ds(s,i,x)}return i.flags|=1,s=as(j,u),s.ref=i.ref,s.return=i,i.child=s}function ij(s,i,c,u,x){if(s!==null){var j=s.memoizedProps;if(ko(j,u)&&s.ref===i.ref)if($r=!1,i.pendingProps=u=j,vh(s,x))(s.flags&131072)!==0&&($r=!0);else return i.lanes=s.lanes,ds(s,i,x)}return uh(s,i,c,u,x)}function lj(s,i,c,u){var x=u.children,j=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(j=j!==null?j.baseLanes|c:c,s!==null){for(u=i.child=s.child,x=0;u!==null;)x=x|u.lanes|u.childLanes,u=u.sibling;u=x&~j}else u=0,i.child=null;return oj(s,i,j,c,u)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&gd(i,j!==null?j.cachePool:null),j!==null?db(i,j):Ff(),ub(i);else return u=i.lanes=536870912,oj(s,i,j!==null?j.baseLanes|c:c,c,u)}else j!==null?(gd(i,j.cachePool),db(i,j),Xs(),i.memoizedState=null):(s!==null&&gd(i,null),Ff(),Xs());return sn(s,i,x,c),i.child}function Bo(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function oj(s,i,c,u,x){var j=_f();return j=j===null?null:{parent:Rr._currentValue,pool:j},i.memoizedState={baseLanes:c,cachePool:j},s!==null&&gd(i,null),Ff(),ub(i),s!==null&&wl(s,i,u,!0),i.childLanes=x,null}function Id(s,i){return i=Md({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function cj(s,i,c){return Fi(i,s.child,null,c),s=Id(i,i.pendingProps),s.flags|=2,Hn(i),i.memoizedState=null,s}function HA(s,i,c){var u=i.pendingProps,x=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(Rt){if(u.mode==="hidden")return s=Id(i,u),i.lanes=536870912,Bo(null,s);if(Vf(i),(s=fr)?(s=jN(s,ua),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Fa,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},c=Hy(s),c.return=i,i.child=c,nn=i,fr=null)):s=null,s===null)throw Ws(i);return i.lanes=536870912,null}return Id(i,u)}var j=s.memoizedState;if(j!==null){var I=j.dehydrated;if(Vf(i),x)if(i.flags&256)i.flags&=-257,i=cj(s,i,c);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(a(558));else if($r||wl(s,i,c,!1),x=(c&s.childLanes)!==0,$r||x){if(u=sr,u!==null&&(I=Nt(u,c),I!==0&&I!==j.retryLane))throw j.retryLane=I,Mi(s,I),Ln(u,s,I),dh;Ud(),i=cj(s,i,c)}else s=j.treeContext,fr=fa(I.nextSibling),nn=i,Rt=!0,qs=null,ua=!1,s!==null&&Yy(i,s),i=Id(i,u),i.flags|=4096;return i}return s=as(s.child,{mode:u.mode,children:u.children}),s.ref=i.ref,i.child=s,s.return=i,s}function Ed(s,i){var c=i.ref;if(c===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(s===null||s.ref!==c)&&(i.flags|=4194816)}}function uh(s,i,c,u,x){return Li(i),c=Wf(s,i,c,u,void 0,x),u=Hf(),s!==null&&!$r?(Kf(s,i,x),ds(s,i,x)):(Rt&&u&&Cf(i),i.flags|=1,sn(s,i,c,x),i.child)}function dj(s,i,c,u,x,j){return Li(i),i.updateQueue=null,c=fb(i,u,c,x),mb(s),u=Hf(),s!==null&&!$r?(Kf(s,i,j),ds(s,i,j)):(Rt&&u&&Cf(i),i.flags|=1,sn(s,i,c,j),i.child)}function uj(s,i,c,u,x){if(Li(i),i.stateNode===null){var j=yl,I=c.contextType;typeof I=="object"&&I!==null&&(j=an(I)),j=new c(u,j),i.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=oh,i.stateNode=j,j._reactInternals=i,j=i.stateNode,j.props=u,j.state=i.memoizedState,j.refs={},Lf(i),I=c.contextType,j.context=typeof I=="object"&&I!==null?an(I):yl,j.state=i.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(lh(i,c,I,u),j.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(I=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),I!==j.state&&oh.enqueueReplaceState(j,j.state,null),_o(i,u,j,x),Po(),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(s===null){j=i.stateNode;var $=i.memoizedProps,re=Vi(c,$);j.props=re;var he=j.context,Se=c.contextType;I=yl,typeof Se=="object"&&Se!==null&&(I=an(Se));var Oe=c.getDerivedStateFromProps;Se=typeof Oe=="function"||typeof j.getSnapshotBeforeUpdate=="function",$=i.pendingProps!==$,Se||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||($||he!==I)&&Xb(i,j,u,I),Ks=!1;var xe=i.memoizedState;j.state=xe,_o(i,u,j,x),Po(),he=i.memoizedState,$||xe!==he||Ks?(typeof Oe=="function"&&(lh(i,c,Oe,u),he=i.memoizedState),(re=Ks||Qb(i,c,re,u,xe,he,I))?(Se||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(i.flags|=4194308)):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=he),j.props=u,j.state=he,j.context=I,u=re):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{j=i.stateNode,$f(s,i),I=i.memoizedProps,Se=Vi(c,I),j.props=Se,Oe=i.pendingProps,xe=j.context,he=c.contextType,re=yl,typeof he=="object"&&he!==null&&(re=an(he)),$=c.getDerivedStateFromProps,(he=typeof $=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(I!==Oe||xe!==re)&&Xb(i,j,u,re),Ks=!1,xe=i.memoizedState,j.state=xe,_o(i,u,j,x),Po();var be=i.memoizedState;I!==Oe||xe!==be||Ks||s!==null&&s.dependencies!==null&&fd(s.dependencies)?(typeof $=="function"&&(lh(i,c,$,u),be=i.memoizedState),(Se=Ks||Qb(i,c,Se,u,xe,be,re)||s!==null&&s.dependencies!==null&&fd(s.dependencies))?(he||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(u,be,re),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(u,be,re)),typeof j.componentDidUpdate=="function"&&(i.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof j.componentDidUpdate!="function"||I===s.memoizedProps&&xe===s.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&xe===s.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=be),j.props=u,j.state=be,j.context=re,u=Se):(typeof j.componentDidUpdate!="function"||I===s.memoizedProps&&xe===s.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||I===s.memoizedProps&&xe===s.memoizedState||(i.flags|=1024),u=!1)}return j=u,Ed(s,i),u=(i.flags&128)!==0,j||u?(j=i.stateNode,c=u&&typeof c.getDerivedStateFromError!="function"?null:j.render(),i.flags|=1,s!==null&&u?(i.child=Fi(i,s.child,null,x),i.child=Fi(i,null,c,x)):sn(s,i,c,x),i.memoizedState=j.state,s=i.child):s=ds(s,i,x),s}function mj(s,i,c,u){return _i(),i.flags|=256,sn(s,i,c,u),i.child}var mh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fh(s){return{baseLanes:s,cachePool:tb()}}function hh(s,i,c){return s=s!==null?s.childLanes&~c:0,i&&(s|=Gn),s}function fj(s,i,c){var u=i.pendingProps,x=!1,j=(i.flags&128)!==0,I;if((I=j)||(I=s!==null&&s.memoizedState===null?!1:(Ir.current&2)!==0),I&&(x=!0,i.flags&=-129),I=(i.flags&32)!==0,i.flags&=-33,s===null){if(Rt){if(x?Qs(i):Xs(),(s=fr)?(s=jN(s,ua),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Vs!==null?{id:Fa,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},c=Hy(s),c.return=i,i.child=c,nn=i,fr=null)):s=null,s===null)throw Ws(i);return Qh(s)?i.lanes=32:i.lanes=536870912,null}var $=u.children;return u=u.fallback,x?(Xs(),x=i.mode,$=Md({mode:"hidden",children:$},x),u=Pi(u,x,c,null),$.return=i,u.return=i,$.sibling=u,i.child=$,u=i.child,u.memoizedState=fh(c),u.childLanes=hh(s,I,c),i.memoizedState=mh,Bo(null,u)):(Qs(i),gh(i,$))}var re=s.memoizedState;if(re!==null&&($=re.dehydrated,$!==null)){if(j)i.flags&256?(Qs(i),i.flags&=-257,i=ph(s,i,c)):i.memoizedState!==null?(Xs(),i.child=s.child,i.flags|=128,i=null):(Xs(),$=u.fallback,x=i.mode,u=Md({mode:"visible",children:u.children},x),$=Pi($,x,c,null),$.flags|=2,u.return=i,$.return=i,u.sibling=$,i.child=u,Fi(i,s.child,null,c),u=i.child,u.memoizedState=fh(c),u.childLanes=hh(s,I,c),i.memoizedState=mh,i=Bo(null,u));else if(Qs(i),Qh($)){if(I=$.nextSibling&&$.nextSibling.dataset,I)var he=I.dgst;I=he,u=Error(a(419)),u.stack="",u.digest=I,Oo({value:u,source:null,stack:null}),i=ph(s,i,c)}else if($r||wl(s,i,c,!1),I=(c&s.childLanes)!==0,$r||I){if(I=sr,I!==null&&(u=Nt(I,c),u!==0&&u!==re.retryLane))throw re.retryLane=u,Mi(s,u),Ln(I,s,u),dh;Yh($)||Ud(),i=ph(s,i,c)}else Yh($)?(i.flags|=192,i.child=s.child,i=null):(s=re.treeContext,fr=fa($.nextSibling),nn=i,Rt=!0,qs=null,ua=!1,s!==null&&Yy(i,s),i=gh(i,u.children),i.flags|=4096);return i}return x?(Xs(),$=u.fallback,x=i.mode,re=s.child,he=re.sibling,u=as(re,{mode:"hidden",children:u.children}),u.subtreeFlags=re.subtreeFlags&65011712,he!==null?$=as(he,$):($=Pi($,x,c,null),$.flags|=2),$.return=i,u.return=i,u.sibling=$,i.child=u,Bo(null,u),u=i.child,$=s.child.memoizedState,$===null?$=fh(c):(x=$.cachePool,x!==null?(re=Rr._currentValue,x=x.parent!==re?{parent:re,pool:re}:x):x=tb(),$={baseLanes:$.baseLanes|c,cachePool:x}),u.memoizedState=$,u.childLanes=hh(s,I,c),i.memoizedState=mh,Bo(s.child,u)):(Qs(i),c=s.child,s=c.sibling,c=as(c,{mode:"visible",children:u.children}),c.return=i,c.sibling=null,s!==null&&(I=i.deletions,I===null?(i.deletions=[s],i.flags|=16):I.push(s)),i.child=c,i.memoizedState=null,c)}function gh(s,i){return i=Md({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Md(s,i){return s=qn(22,s,null,i),s.lanes=0,s}function ph(s,i,c){return Fi(i,s.child,null,c),s=gh(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function hj(s,i,c){s.lanes|=i;var u=s.alternate;u!==null&&(u.lanes|=i),If(s.return,i,c)}function xh(s,i,c,u,x,j){var I=s.memoizedState;I===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:c,tailMode:x,treeForkCount:j}:(I.isBackwards=i,I.rendering=null,I.renderingStartTime=0,I.last=u,I.tail=c,I.tailMode=x,I.treeForkCount=j)}function gj(s,i,c){var u=i.pendingProps,x=u.revealOrder,j=u.tail;u=u.children;var I=Ir.current,$=(I&2)!==0;if($?(I=I&1|2,i.flags|=128):I&=1,ye(Ir,I),sn(s,i,u,c),u=Rt?Do:0,!$&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&hj(s,c,i);else if(s.tag===19)hj(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(x){case"forwards":for(c=i.child,x=null;c!==null;)s=c.alternate,s!==null&&jd(s)===null&&(x=c),c=c.sibling;c=x,c===null?(x=i.child,i.child=null):(x=c.sibling,c.sibling=null),xh(i,!1,x,c,j,u);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=i.child,i.child=null;x!==null;){if(s=x.alternate,s!==null&&jd(s)===null){i.child=x;break}s=x.sibling,x.sibling=c,c=x,x=s}xh(i,!0,c,null,j,u);break;case"together":xh(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ds(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),ei|=i.lanes,(c&i.childLanes)===0)if(s!==null){if(wl(s,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(a(153));if(i.child!==null){for(s=i.child,c=as(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=as(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function vh(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&fd(s)))}function KA(s,i,c){switch(i.tag){case 3:Le(i,i.stateNode.containerInfo),Hs(i,Rr,s.memoizedState.cache),_i();break;case 27:case 5:Re(i);break;case 4:Le(i,i.stateNode.containerInfo);break;case 10:Hs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Vf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Qs(i),i.flags|=128,null):(c&i.child.childLanes)!==0?fj(s,i,c):(Qs(i),s=ds(s,i,c),s!==null?s.sibling:null);Qs(i);break;case 19:var x=(s.flags&128)!==0;if(u=(c&i.childLanes)!==0,u||(wl(s,i,c,!1),u=(c&i.childLanes)!==0),x){if(u)return gj(s,i,c);i.flags|=128}if(x=i.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ye(Ir,Ir.current),u)break;return null;case 22:return i.lanes=0,lj(s,i,c,i.pendingProps);case 24:Hs(i,Rr,s.memoizedState.cache)}return ds(s,i,c)}function pj(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps)$r=!0;else{if(!vh(s,c)&&(i.flags&128)===0)return $r=!1,KA(s,i,c);$r=(s.flags&131072)!==0}else $r=!1,Rt&&(i.flags&1048576)!==0&&Gy(i,Do,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(s=zi(i.elementType),i.type=s,typeof s=="function")wf(s)?(u=Vi(s,u),i.tag=1,i=uj(null,i,s,u,c)):(i.tag=0,i=uh(null,i,s,u,c));else{if(s!=null){var x=s.$$typeof;if(x===E){i.tag=11,i=aj(null,i,s,u,c);break e}else if(x===R){i.tag=14,i=sj(null,i,s,u,c);break e}}throw i=_(s)||s,Error(a(306,i,""))}}return i;case 0:return uh(s,i,i.type,i.pendingProps,c);case 1:return u=i.type,x=Vi(u,i.pendingProps),uj(s,i,u,x,c);case 3:e:{if(Le(i,i.stateNode.containerInfo),s===null)throw Error(a(387));u=i.pendingProps;var j=i.memoizedState;x=j.element,$f(s,i),_o(i,u,null,c);var I=i.memoizedState;if(u=I.cache,Hs(i,Rr,u),u!==j.cache&&Ef(i,[Rr],c,!0),Po(),u=I.element,j.isDehydrated)if(j={element:u,isDehydrated:!1,cache:I.cache},i.updateQueue.baseState=j,i.memoizedState=j,i.flags&256){i=mj(s,i,u,c);break e}else if(u!==x){x=oa(Error(a(424)),i),Oo(x),i=mj(s,i,u,c);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(fr=fa(s.firstChild),nn=i,Rt=!0,qs=null,ua=!0,c=lb(i,null,u,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(_i(),u===x){i=ds(s,i,c);break e}sn(s,i,u,c)}i=i.child}return i;case 26:return Ed(s,i),s===null?(c=DN(i.type,null,i.pendingProps,null))?i.memoizedState=c:Rt||(c=i.type,s=i.pendingProps,u=Yd(Me.current).createElement(c),u[Sr]=i,u[ft]=s,ln(u,c,s),Bt(u),i.stateNode=u):i.memoizedState=DN(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return Re(i),s===null&&Rt&&(u=i.stateNode=SN(i.type,i.pendingProps,Me.current),nn=i,ua=!0,x=fr,si(i.type)?(Xh=x,fr=fa(u.firstChild)):fr=x),sn(s,i,i.pendingProps.children,c),Ed(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&Rt&&((x=u=fr)&&(u=wT(u,i.type,i.pendingProps,ua),u!==null?(i.stateNode=u,nn=i,fr=fa(u.firstChild),ua=!1,x=!0):x=!1),x||Ws(i)),Re(i),x=i.type,j=i.pendingProps,I=s!==null?s.memoizedProps:null,u=j.children,Hh(x,j)?u=null:I!==null&&Hh(x,I)&&(i.flags|=32),i.memoizedState!==null&&(x=Wf(s,i,$A,null,null,c),tc._currentValue=x),Ed(s,i),sn(s,i,u,c),i.child;case 6:return s===null&&Rt&&((s=c=fr)&&(c=ST(c,i.pendingProps,ua),c!==null?(i.stateNode=c,nn=i,fr=null,s=!0):s=!1),s||Ws(i)),null;case 13:return fj(s,i,c);case 4:return Le(i,i.stateNode.containerInfo),u=i.pendingProps,s===null?i.child=Fi(i,null,u,c):sn(s,i,u,c),i.child;case 11:return aj(s,i,i.type,i.pendingProps,c);case 7:return sn(s,i,i.pendingProps,c),i.child;case 8:return sn(s,i,i.pendingProps.children,c),i.child;case 12:return sn(s,i,i.pendingProps.children,c),i.child;case 10:return u=i.pendingProps,Hs(i,i.type,u.value),sn(s,i,u.children,c),i.child;case 9:return x=i.type._context,u=i.pendingProps.children,Li(i),x=an(x),u=u(x),i.flags|=1,sn(s,i,u,c),i.child;case 14:return sj(s,i,i.type,i.pendingProps,c);case 15:return ij(s,i,i.type,i.pendingProps,c);case 19:return gj(s,i,c);case 31:return HA(s,i,c);case 22:return lj(s,i,c,i.pendingProps);case 24:return Li(i),u=an(Rr),s===null?(x=_f(),x===null&&(x=sr,j=Mf(),x.pooledCache=j,j.refCount++,j!==null&&(x.pooledCacheLanes|=c),x=j),i.memoizedState={parent:u,cache:x},Lf(i),Hs(i,Rr,x)):((s.lanes&c)!==0&&($f(s,i),_o(i,null,null,c),Po()),x=s.memoizedState,j=i.memoizedState,x.parent!==u?(x={parent:u,cache:u},i.memoizedState=x,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=x),Hs(i,Rr,u)):(u=j.cache,Hs(i,Rr,u),u!==x.cache&&Ef(i,[Rr],c,!0))),sn(s,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function us(s){s.flags|=4}function yh(s,i,c,u,x){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(x&335544128)===x)if(s.stateNode.complete)s.flags|=8192;else if(Vj())s.flags|=8192;else throw Bi=xd,Rf}else s.flags&=-16777217}function xj(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!EN(i))if(Vj())s.flags|=8192;else throw Bi=xd,Rf}function Pd(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?Tt():536870912,s.lanes|=i,_l|=i)}function Fo(s,i){if(!Rt)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function hr(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,u=0;if(i)for(var x=s.child;x!==null;)c|=x.lanes|x.childLanes,u|=x.subtreeFlags&65011712,u|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)c|=x.lanes|x.childLanes,u|=x.subtreeFlags,u|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=u,s.childLanes=c,i}function GA(s,i,c){var u=i.pendingProps;switch(Df(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hr(i),null;case 1:return hr(i),null;case 3:return c=i.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ls(Rr),X(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Nl(i)?us(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Af())),hr(i),null;case 26:var x=i.type,j=i.memoizedState;return s===null?(us(i),j!==null?(hr(i),xj(i,j)):(hr(i),yh(i,x,null,u,c))):j?j!==s.memoizedState?(us(i),hr(i),xj(i,j)):(hr(i),i.flags&=-16777217):(s=s.memoizedProps,s!==u&&us(i),hr(i),yh(i,x,s,u,c)),null;case 27:if(at(i),c=Me.current,x=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&us(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return hr(i),null}s=ge.current,Nl(i)?Qy(i):(s=SN(x,u,c),i.stateNode=s,us(i))}return hr(i),null;case 5:if(at(i),x=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==u&&us(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return hr(i),null}if(j=ge.current,Nl(i))Qy(i);else{var I=Yd(Me.current);switch(j){case 1:j=I.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:j=I.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":j=I.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":j=I.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":j=I.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof u.is=="string"?I.createElement("select",{is:u.is}):I.createElement("select"),u.multiple?j.multiple=!0:u.size&&(j.size=u.size);break;default:j=typeof u.is=="string"?I.createElement(x,{is:u.is}):I.createElement(x)}}j[Sr]=i,j[ft]=u;e:for(I=i.child;I!==null;){if(I.tag===5||I.tag===6)j.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===i)break e;for(;I.sibling===null;){if(I.return===null||I.return===i)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}i.stateNode=j;e:switch(ln(j,x,u),x){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&us(i)}}return hr(i),yh(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,c),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==u&&us(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(s=Me.current,Nl(i)){if(s=i.stateNode,c=i.memoizedProps,u=null,x=nn,x!==null)switch(x.tag){case 27:case 5:u=x.memoizedProps}s[Sr]=i,s=!!(s.nodeValue===c||u!==null&&u.suppressHydrationWarning===!0||fN(s.nodeValue,c)),s||Ws(i,!0)}else s=Yd(s).createTextNode(u),s[Sr]=i,i.stateNode=s}return hr(i),null;case 31:if(c=i.memoizedState,s===null||s.memoizedState!==null){if(u=Nl(i),c!==null){if(s===null){if(!u)throw Error(a(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(557));s[Sr]=i}else _i(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;hr(i),s=!1}else c=Af(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return i.flags&256?(Hn(i),i):(Hn(i),null);if((i.flags&128)!==0)throw Error(a(558))}return hr(i),null;case 13:if(u=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Nl(i),u!==null&&u.dehydrated!==null){if(s===null){if(!x)throw Error(a(318));if(x=i.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(a(317));x[Sr]=i}else _i(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;hr(i),x=!1}else x=Af(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return i.flags&256?(Hn(i),i):(Hn(i),null)}return Hn(i),(i.flags&128)!==0?(i.lanes=c,i):(c=u!==null,s=s!==null&&s.memoizedState!==null,c&&(u=i.child,x=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(x=u.alternate.memoizedState.cachePool.pool),j=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(j=u.memoizedState.cachePool.pool),j!==x&&(u.flags|=2048)),c!==s&&c&&(i.child.flags|=8192),Pd(i,i.updateQueue),hr(i),null);case 4:return X(),s===null&&Fh(i.stateNode.containerInfo),hr(i),null;case 10:return ls(i.type),hr(i),null;case 19:if(le(Ir),u=i.memoizedState,u===null)return hr(i),null;if(x=(i.flags&128)!==0,j=u.rendering,j===null)if(x)Fo(u,!1);else{if(Dr!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(j=jd(s),j!==null){for(i.flags|=128,Fo(u,!1),s=j.updateQueue,i.updateQueue=s,Pd(i,s),i.subtreeFlags=0,s=c,c=i.child;c!==null;)Wy(c,s),c=c.sibling;return ye(Ir,Ir.current&1|2),Rt&&ss(i,u.treeForkCount),i.child}s=s.sibling}u.tail!==null&&Ye()>zd&&(i.flags|=128,x=!0,Fo(u,!1),i.lanes=4194304)}else{if(!x)if(s=jd(j),s!==null){if(i.flags|=128,x=!0,s=s.updateQueue,i.updateQueue=s,Pd(i,s),Fo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!j.alternate&&!Rt)return hr(i),null}else 2*Ye()-u.renderingStartTime>zd&&c!==536870912&&(i.flags|=128,x=!0,Fo(u,!1),i.lanes=4194304);u.isBackwards?(j.sibling=i.child,i.child=j):(s=u.last,s!==null?s.sibling=j:i.child=j,u.last=j)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=Ye(),s.sibling=null,c=Ir.current,ye(Ir,x?c&1|2:c&1),Rt&&ss(i,u.treeForkCount),s):(hr(i),null);case 22:case 23:return Hn(i),Uf(),u=i.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(c&536870912)!==0&&(i.flags&128)===0&&(hr(i),i.subtreeFlags&6&&(i.flags|=8192)):hr(i),c=i.updateQueue,c!==null&&Pd(i,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==c&&(i.flags|=2048),s!==null&&le($i),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ls(Rr),hr(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function YA(s,i){switch(Df(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return ls(Rr),X(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return at(i),null;case 31:if(i.memoizedState!==null){if(Hn(i),i.alternate===null)throw Error(a(340));_i()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(Hn(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(a(340));_i()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return le(Ir),null;case 4:return X(),null;case 10:return ls(i.type),null;case 22:case 23:return Hn(i),Uf(),s!==null&&le($i),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return ls(Rr),null;case 25:return null;default:return null}}function vj(s,i){switch(Df(i),i.tag){case 3:ls(Rr),X();break;case 26:case 27:case 5:at(i);break;case 4:X();break;case 31:i.memoizedState!==null&&Hn(i);break;case 13:Hn(i);break;case 19:le(Ir);break;case 10:ls(i.type);break;case 22:case 23:Hn(i),Uf(),s!==null&&le($i);break;case 24:ls(Rr)}}function Uo(s,i){try{var c=i.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var x=u.next;c=x;do{if((c.tag&s)===s){u=void 0;var j=c.create,I=c.inst;u=j(),I.destroy=u}c=c.next}while(c!==x)}}catch($){Yt(i,i.return,$)}}function Zs(s,i,c){try{var u=i.updateQueue,x=u!==null?u.lastEffect:null;if(x!==null){var j=x.next;u=j;do{if((u.tag&s)===s){var I=u.inst,$=I.destroy;if($!==void 0){I.destroy=void 0,x=i;var re=c,he=$;try{he()}catch(Se){Yt(x,re,Se)}}}u=u.next}while(u!==j)}}catch(Se){Yt(i,i.return,Se)}}function yj(s){var i=s.updateQueue;if(i!==null){var c=s.stateNode;try{cb(i,c)}catch(u){Yt(s,s.return,u)}}}function bj(s,i,c){c.props=Vi(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(u){Yt(s,i,u)}}function Vo(s,i){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof c=="function"?s.refCleanup=c(u):c.current=u}}catch(x){Yt(s,i,x)}}function Va(s,i){var c=s.ref,u=s.refCleanup;if(c!==null)if(typeof u=="function")try{u()}catch(x){Yt(s,i,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){Yt(s,i,x)}else c.current=null}function jj(s){var i=s.type,c=s.memoizedProps,u=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&u.focus();break e;case"img":c.src?u.src=c.src:c.srcSet&&(u.srcset=c.srcSet)}}catch(x){Yt(s,s.return,x)}}function bh(s,i,c){try{var u=s.stateNode;xT(u,s.type,c,i),u[ft]=i}catch(x){Yt(s,s.return,x)}}function Nj(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&si(s.type)||s.tag===4}function jh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Nj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&si(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Nh(s,i,c){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(s),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=J));else if(u!==4&&(u===27&&si(s.type)&&(c=s.stateNode,i=null),s=s.child,s!==null))for(Nh(s,i,c),s=s.sibling;s!==null;)Nh(s,i,c),s=s.sibling}function _d(s,i,c){var u=s.tag;if(u===5||u===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(u!==4&&(u===27&&si(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(_d(s,i,c),s=s.sibling;s!==null;)_d(s,i,c),s=s.sibling}function wj(s){var i=s.stateNode,c=s.memoizedProps;try{for(var u=s.type,x=i.attributes;x.length;)i.removeAttributeNode(x[0]);ln(i,u,c),i[Sr]=s,i[ft]=c}catch(j){Yt(s,s.return,j)}}var ms=!1,zr=!1,wh=!1,Sj=typeof WeakSet=="function"?WeakSet:Set,Xr=null;function QA(s,i){if(s=s.containerInfo,qh=ru,s=Ry(s),pf(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var u=c.getSelection&&c.getSelection();if(u&&u.rangeCount!==0){c=u.anchorNode;var x=u.anchorOffset,j=u.focusNode;u=u.focusOffset;try{c.nodeType,j.nodeType}catch{c=null;break e}var I=0,$=-1,re=-1,he=0,Se=0,Oe=s,xe=null;t:for(;;){for(var be;Oe!==c||x!==0&&Oe.nodeType!==3||($=I+x),Oe!==j||u!==0&&Oe.nodeType!==3||(re=I+u),Oe.nodeType===3&&(I+=Oe.nodeValue.length),(be=Oe.firstChild)!==null;)xe=Oe,Oe=be;for(;;){if(Oe===s)break t;if(xe===c&&++he===x&&($=I),xe===j&&++Se===u&&(re=I),(be=Oe.nextSibling)!==null)break;Oe=xe,xe=Oe.parentNode}Oe=be}c=$===-1||re===-1?null:{start:$,end:re}}else c=null}c=c||{start:0,end:0}}else c=null;for(Wh={focusedElem:s,selectionRange:c},ru=!1,Xr=i;Xr!==null;)if(i=Xr,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,Xr=s;else for(;Xr!==null;){switch(i=Xr,j=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)x=s[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&j!==null){s=void 0,c=i,x=j.memoizedProps,j=j.memoizedState,u=c.stateNode;try{var Ge=Vi(c.type,x);s=u.getSnapshotBeforeUpdate(Ge,j),u.__reactInternalSnapshotBeforeUpdate=s}catch(ht){Yt(c,c.return,ht)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,c=s.nodeType,c===9)Gh(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Gh(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(a(163))}if(s=i.sibling,s!==null){s.return=i.return,Xr=s;break}Xr=i.return}}function kj(s,i,c){var u=c.flags;switch(c.tag){case 0:case 11:case 15:hs(s,c),u&4&&Uo(5,c);break;case 1:if(hs(s,c),u&4)if(s=c.stateNode,i===null)try{s.componentDidMount()}catch(I){Yt(c,c.return,I)}else{var x=Vi(c.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(x,i,s.__reactInternalSnapshotBeforeUpdate)}catch(I){Yt(c,c.return,I)}}u&64&&yj(c),u&512&&Vo(c,c.return);break;case 3:if(hs(s,c),u&64&&(s=c.updateQueue,s!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{cb(s,i)}catch(I){Yt(c,c.return,I)}}break;case 27:i===null&&u&4&&wj(c);case 26:case 5:hs(s,c),i===null&&u&4&&jj(c),u&512&&Vo(c,c.return);break;case 12:hs(s,c);break;case 31:hs(s,c),u&4&&Oj(s,c);break;case 13:hs(s,c),u&4&&Aj(s,c),u&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=sT.bind(null,c),kT(s,c))));break;case 22:if(u=c.memoizedState!==null||ms,!u){i=i!==null&&i.memoizedState!==null||zr,x=ms;var j=zr;ms=u,(zr=i)&&!j?gs(s,c,(c.subtreeFlags&8772)!==0):hs(s,c),ms=x,zr=j}break;case 30:break;default:hs(s,c)}}function Cj(s){var i=s.alternate;i!==null&&(s.alternate=null,Cj(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Bs(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var xr=null,Mn=!1;function fs(s,i,c){for(c=c.child;c!==null;)Dj(s,i,c),c=c.sibling}function Dj(s,i,c){if(F&&typeof F.onCommitFiberUnmount=="function")try{F.onCommitFiberUnmount(Fe,c)}catch{}switch(c.tag){case 26:zr||Va(c,i),fs(s,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:zr||Va(c,i);var u=xr,x=Mn;si(c.type)&&(xr=c.stateNode,Mn=!1),fs(s,i,c),Zo(c.stateNode),xr=u,Mn=x;break;case 5:zr||Va(c,i);case 6:if(u=xr,x=Mn,xr=null,fs(s,i,c),xr=u,Mn=x,xr!==null)if(Mn)try{(xr.nodeType===9?xr.body:xr.nodeName==="HTML"?xr.ownerDocument.body:xr).removeChild(c.stateNode)}catch(j){Yt(c,i,j)}else try{xr.removeChild(c.stateNode)}catch(j){Yt(c,i,j)}break;case 18:xr!==null&&(Mn?(s=xr,yN(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),Vl(s)):yN(xr,c.stateNode));break;case 4:u=xr,x=Mn,xr=c.stateNode.containerInfo,Mn=!0,fs(s,i,c),xr=u,Mn=x;break;case 0:case 11:case 14:case 15:Zs(2,c,i),zr||Zs(4,c,i),fs(s,i,c);break;case 1:zr||(Va(c,i),u=c.stateNode,typeof u.componentWillUnmount=="function"&&bj(c,i,u)),fs(s,i,c);break;case 21:fs(s,i,c);break;case 22:zr=(u=zr)||c.memoizedState!==null,fs(s,i,c),zr=u;break;default:fs(s,i,c)}}function Oj(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Vl(s)}catch(c){Yt(i,i.return,c)}}}function Aj(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Vl(s)}catch(c){Yt(i,i.return,c)}}function XA(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Sj),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Sj),i;default:throw Error(a(435,s.tag))}}function Rd(s,i){var c=XA(s);i.forEach(function(u){if(!c.has(u)){c.add(u);var x=iT.bind(null,s,u);u.then(x,x)}})}function Pn(s,i){var c=i.deletions;if(c!==null)for(var u=0;u<c.length;u++){var x=c[u],j=s,I=i,$=I;e:for(;$!==null;){switch($.tag){case 27:if(si($.type)){xr=$.stateNode,Mn=!1;break e}break;case 5:xr=$.stateNode,Mn=!1;break e;case 3:case 4:xr=$.stateNode.containerInfo,Mn=!0;break e}$=$.return}if(xr===null)throw Error(a(160));Dj(j,I,x),xr=null,Mn=!1,j=x.alternate,j!==null&&(j.return=null),x.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Tj(i,s),i=i.sibling}var Ta=null;function Tj(s,i){var c=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Pn(i,s),_n(s),u&4&&(Zs(3,s,s.return),Uo(3,s),Zs(5,s,s.return));break;case 1:Pn(i,s),_n(s),u&512&&(zr||c===null||Va(c,c.return)),u&64&&ms&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?u:c.concat(u))));break;case 26:var x=Ta;if(Pn(i,s),_n(s),u&512&&(zr||c===null||Va(c,c.return)),u&4){var j=c!==null?c.memoizedState:null;if(u=s.memoizedState,c===null)if(u===null)if(s.stateNode===null){e:{u=s.type,c=s.memoizedProps,x=x.ownerDocument||x;t:switch(u){case"title":j=x.getElementsByTagName("title")[0],(!j||j[$a]||j[Sr]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=x.createElement(u),x.head.insertBefore(j,x.querySelector("head > title"))),ln(j,u,c),j[Sr]=s,Bt(j),u=j;break e;case"link":var I=TN("link","href",x).get(u+(c.href||""));if(I){for(var $=0;$<I.length;$++)if(j=I[$],j.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&j.getAttribute("rel")===(c.rel==null?null:c.rel)&&j.getAttribute("title")===(c.title==null?null:c.title)&&j.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){I.splice($,1);break t}}j=x.createElement(u),ln(j,u,c),x.head.appendChild(j);break;case"meta":if(I=TN("meta","content",x).get(u+(c.content||""))){for($=0;$<I.length;$++)if(j=I[$],j.getAttribute("content")===(c.content==null?null:""+c.content)&&j.getAttribute("name")===(c.name==null?null:c.name)&&j.getAttribute("property")===(c.property==null?null:c.property)&&j.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&j.getAttribute("charset")===(c.charSet==null?null:c.charSet)){I.splice($,1);break t}}j=x.createElement(u),ln(j,u,c),x.head.appendChild(j);break;default:throw Error(a(468,u))}j[Sr]=s,Bt(j),u=j}s.stateNode=u}else IN(x,s.type,s.stateNode);else s.stateNode=AN(x,u,s.memoizedProps);else j!==u?(j===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):j.count--,u===null?IN(x,s.type,s.stateNode):AN(x,u,s.memoizedProps)):u===null&&s.stateNode!==null&&bh(s,s.memoizedProps,c.memoizedProps)}break;case 27:Pn(i,s),_n(s),u&512&&(zr||c===null||Va(c,c.return)),c!==null&&u&4&&bh(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Pn(i,s),_n(s),u&512&&(zr||c===null||Va(c,c.return)),s.flags&32){x=s.stateNode;try{Be(x,"")}catch(Ge){Yt(s,s.return,Ge)}}u&4&&s.stateNode!=null&&(x=s.memoizedProps,bh(s,x,c!==null?c.memoizedProps:x)),u&1024&&(wh=!0);break;case 6:if(Pn(i,s),_n(s),u&4){if(s.stateNode===null)throw Error(a(162));u=s.memoizedProps,c=s.stateNode;try{c.nodeValue=u}catch(Ge){Yt(s,s.return,Ge)}}break;case 3:if(Zd=null,x=Ta,Ta=Qd(i.containerInfo),Pn(i,s),Ta=x,_n(s),u&4&&c!==null&&c.memoizedState.isDehydrated)try{Vl(i.containerInfo)}catch(Ge){Yt(s,s.return,Ge)}wh&&(wh=!1,Ij(s));break;case 4:u=Ta,Ta=Qd(s.stateNode.containerInfo),Pn(i,s),_n(s),Ta=u;break;case 12:Pn(i,s),_n(s);break;case 31:Pn(i,s),_n(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rd(s,u)));break;case 13:Pn(i,s),_n(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&($d=Ye()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rd(s,u)));break;case 22:x=s.memoizedState!==null;var re=c!==null&&c.memoizedState!==null,he=ms,Se=zr;if(ms=he||x,zr=Se||re,Pn(i,s),zr=Se,ms=he,_n(s),u&8192)e:for(i=s.stateNode,i._visibility=x?i._visibility&-2:i._visibility|1,x&&(c===null||re||ms||zr||qi(s)),c=null,i=s;;){if(i.tag===5||i.tag===26){if(c===null){re=c=i;try{if(j=re.stateNode,x)I=j.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{$=re.stateNode;var Oe=re.memoizedProps.style,xe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;$.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(Ge){Yt(re,re.return,Ge)}}}else if(i.tag===6){if(c===null){re=i;try{re.stateNode.nodeValue=x?"":re.memoizedProps}catch(Ge){Yt(re,re.return,Ge)}}}else if(i.tag===18){if(c===null){re=i;try{var be=re.stateNode;x?bN(be,!0):bN(re.stateNode,!1)}catch(Ge){Yt(re,re.return,Ge)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=s.updateQueue,u!==null&&(c=u.retryQueue,c!==null&&(u.retryQueue=null,Rd(s,c))));break;case 19:Pn(i,s),_n(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Rd(s,u)));break;case 30:break;case 21:break;default:Pn(i,s),_n(s)}}function _n(s){var i=s.flags;if(i&2){try{for(var c,u=s.return;u!==null;){if(Nj(u)){c=u;break}u=u.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var x=c.stateNode,j=jh(s);_d(s,j,x);break;case 5:var I=c.stateNode;c.flags&32&&(Be(I,""),c.flags&=-33);var $=jh(s);_d(s,$,I);break;case 3:case 4:var re=c.stateNode.containerInfo,he=jh(s);Nh(s,he,re);break;default:throw Error(a(161))}}catch(Se){Yt(s,s.return,Se)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Ij(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Ij(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function hs(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)kj(s,i.alternate,i),i=i.sibling}function qi(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Zs(4,i,i.return),qi(i);break;case 1:Va(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&bj(i,i.return,c),qi(i);break;case 27:Zo(i.stateNode);case 26:case 5:Va(i,i.return),qi(i);break;case 22:i.memoizedState===null&&qi(i);break;case 30:qi(i);break;default:qi(i)}s=s.sibling}}function gs(s,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,x=s,j=i,I=j.flags;switch(j.tag){case 0:case 11:case 15:gs(x,j,c),Uo(4,j);break;case 1:if(gs(x,j,c),u=j,x=u.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(he){Yt(u,u.return,he)}if(u=j,x=u.updateQueue,x!==null){var $=u.stateNode;try{var re=x.shared.hiddenCallbacks;if(re!==null)for(x.shared.hiddenCallbacks=null,x=0;x<re.length;x++)ob(re[x],$)}catch(he){Yt(u,u.return,he)}}c&&I&64&&yj(j),Vo(j,j.return);break;case 27:wj(j);case 26:case 5:gs(x,j,c),c&&u===null&&I&4&&jj(j),Vo(j,j.return);break;case 12:gs(x,j,c);break;case 31:gs(x,j,c),c&&I&4&&Oj(x,j);break;case 13:gs(x,j,c),c&&I&4&&Aj(x,j);break;case 22:j.memoizedState===null&&gs(x,j,c),Vo(j,j.return);break;case 30:break;default:gs(x,j,c)}i=i.sibling}}function Sh(s,i){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Ao(c))}function kh(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Ao(s))}function Ia(s,i,c,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ej(s,i,c,u),i=i.sibling}function Ej(s,i,c,u){var x=i.flags;switch(i.tag){case 0:case 11:case 15:Ia(s,i,c,u),x&2048&&Uo(9,i);break;case 1:Ia(s,i,c,u);break;case 3:Ia(s,i,c,u),x&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Ao(s)));break;case 12:if(x&2048){Ia(s,i,c,u),s=i.stateNode;try{var j=i.memoizedProps,I=j.id,$=j.onPostCommit;typeof $=="function"&&$(I,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(re){Yt(i,i.return,re)}}else Ia(s,i,c,u);break;case 31:Ia(s,i,c,u);break;case 13:Ia(s,i,c,u);break;case 23:break;case 22:j=i.stateNode,I=i.alternate,i.memoizedState!==null?j._visibility&2?Ia(s,i,c,u):qo(s,i):j._visibility&2?Ia(s,i,c,u):(j._visibility|=2,El(s,i,c,u,(i.subtreeFlags&10256)!==0||!1)),x&2048&&Sh(I,i);break;case 24:Ia(s,i,c,u),x&2048&&kh(i.alternate,i);break;default:Ia(s,i,c,u)}}function El(s,i,c,u,x){for(x=x&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var j=s,I=i,$=c,re=u,he=I.flags;switch(I.tag){case 0:case 11:case 15:El(j,I,$,re,x),Uo(8,I);break;case 23:break;case 22:var Se=I.stateNode;I.memoizedState!==null?Se._visibility&2?El(j,I,$,re,x):qo(j,I):(Se._visibility|=2,El(j,I,$,re,x)),x&&he&2048&&Sh(I.alternate,I);break;case 24:El(j,I,$,re,x),x&&he&2048&&kh(I.alternate,I);break;default:El(j,I,$,re,x)}i=i.sibling}}function qo(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=s,u=i,x=u.flags;switch(u.tag){case 22:qo(c,u),x&2048&&Sh(u.alternate,u);break;case 24:qo(c,u),x&2048&&kh(u.alternate,u);break;default:qo(c,u)}i=i.sibling}}var Wo=8192;function Ml(s,i,c){if(s.subtreeFlags&Wo)for(s=s.child;s!==null;)Mj(s,i,c),s=s.sibling}function Mj(s,i,c){switch(s.tag){case 26:Ml(s,i,c),s.flags&Wo&&s.memoizedState!==null&&LT(c,Ta,s.memoizedState,s.memoizedProps);break;case 5:Ml(s,i,c);break;case 3:case 4:var u=Ta;Ta=Qd(s.stateNode.containerInfo),Ml(s,i,c),Ta=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=Wo,Wo=16777216,Ml(s,i,c),Wo=u):Ml(s,i,c));break;default:Ml(s,i,c)}}function Pj(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function Ho(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var u=i[c];Xr=u,Rj(u,s)}Pj(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)_j(s),s=s.sibling}function _j(s){switch(s.tag){case 0:case 11:case 15:Ho(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:Ho(s);break;case 12:Ho(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Ld(s)):Ho(s);break;default:Ho(s)}}function Ld(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var u=i[c];Xr=u,Rj(u,s)}Pj(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Zs(8,i,i.return),Ld(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Ld(i));break;default:Ld(i)}s=s.sibling}}function Rj(s,i){for(;Xr!==null;){var c=Xr;switch(c.tag){case 0:case 11:case 15:Zs(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var u=c.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ao(c.memoizedState.cache)}if(u=c.child,u!==null)u.return=c,Xr=u;else e:for(c=s;Xr!==null;){u=Xr;var x=u.sibling,j=u.return;if(Cj(u),u===c){Xr=null;break e}if(x!==null){x.return=j,Xr=x;break e}Xr=j}}}var ZA={getCacheForType:function(s){var i=an(Rr),c=i.data.get(s);return c===void 0&&(c=s(),i.data.set(s,c)),c},cacheSignal:function(){return an(Rr).controller.signal}},JA=typeof WeakMap=="function"?WeakMap:Map,Wt=0,sr=null,It=null,Mt=0,Gt=0,Kn=null,Js=!1,Pl=!1,Ch=!1,ps=0,Dr=0,ei=0,Wi=0,Dh=0,Gn=0,_l=0,Ko=null,Rn=null,Oh=!1,$d=0,Lj=0,zd=1/0,Bd=null,ti=null,qr=0,ri=null,Rl=null,xs=0,Ah=0,Th=null,$j=null,Go=0,Ih=null;function Yn(){return(Wt&2)!==0&&Mt!==0?Mt&-Mt:L.T!==null?Lh():_r()}function zj(){if(Gn===0)if((Mt&536870912)===0||Rt){var s=Ke;Ke<<=1,(Ke&3932160)===0&&(Ke=262144),Gn=s}else Gn=536870912;return s=Wn.current,s!==null&&(s.flags|=32),Gn}function Ln(s,i,c){(s===sr&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)&&(Ll(s,0),ni(s,Mt,Gn,!1)),$t(s,c),((Wt&2)===0||s!==sr)&&(s===sr&&((Wt&2)===0&&(Wi|=c),Dr===4&&ni(s,Mt,Gn,!1)),qa(s))}function Bj(s,i,c){if((Wt&6)!==0)throw Error(a(327));var u=!c&&(i&127)===0&&(i&s.expiredLanes)===0||jn(s,i),x=u?rT(s,i):Mh(s,i,!0),j=u;do{if(x===0){Pl&&!u&&ni(s,i,0,!1);break}else{if(c=s.current.alternate,j&&!eT(c)){x=Mh(s,i,!1),j=!1;continue}if(x===2){if(j=i,s.errorRecoveryDisabledLanes&j)var I=0;else I=s.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){i=I;e:{var $=s;x=Ko;var re=$.current.memoizedState.isDehydrated;if(re&&(Ll($,I).flags|=256),I=Mh($,I,!1),I!==2){if(Ch&&!re){$.errorRecoveryDisabledLanes|=j,Wi|=j,x=4;break e}j=Rn,Rn=x,j!==null&&(Rn===null?Rn=j:Rn.push.apply(Rn,j))}x=I}if(j=!1,x!==2)continue}}if(x===1){Ll(s,0),ni(s,i,0,!0);break}e:{switch(u=s,j=x,j){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:ni(u,i,Gn,!Js);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(x=$d+300-Ye(),10<x)){if(ni(u,i,Gn,!Js),ur(u,0,!0)!==0)break e;xs=i,u.timeoutHandle=xN(Fj.bind(null,u,c,Rn,Bd,Oh,i,Gn,Wi,_l,Js,j,"Throttled",-0,0),x);break e}Fj(u,c,Rn,Bd,Oh,i,Gn,Wi,_l,Js,j,null,-0,0)}}break}while(!0);qa(s)}function Fj(s,i,c,u,x,j,I,$,re,he,Se,Oe,xe,be){if(s.timeoutHandle=-1,Oe=i.subtreeFlags,Oe&8192||(Oe&16785408)===16785408){Oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:J},Mj(i,j,Oe);var Ge=(j&62914560)===j?$d-Ye():(j&4194048)===j?Lj-Ye():0;if(Ge=$T(Oe,Ge),Ge!==null){xs=j,s.cancelPendingCommit=Ge(Yj.bind(null,s,i,j,c,u,x,I,$,re,Se,Oe,null,xe,be)),ni(s,j,I,!he);return}}Yj(s,i,j,c,u,x,I,$,re)}function eT(s){for(var i=s;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var u=0;u<c.length;u++){var x=c[u],j=x.getSnapshot;x=x.value;try{if(!Vn(j(),x))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ni(s,i,c,u){i&=~Dh,i&=~Wi,s.suspendedLanes|=i,s.pingedLanes&=~i,u&&(s.warmLanes|=i),u=s.expirationTimes;for(var x=i;0<x;){var j=31-oe(x),I=1<<j;u[j]=-1,x&=~I}c!==0&&pr(s,c,i)}function Fd(){return(Wt&6)===0?(Yo(0),!1):!0}function Eh(){if(It!==null){if(Gt===0)var s=It.return;else s=It,is=Ri=null,Gf(s),Dl=null,Io=0,s=It;for(;s!==null;)vj(s.alternate,s),s=s.return;It=null}}function Ll(s,i){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,bT(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),xs=0,Eh(),sr=s,It=c=as(s.current,null),Mt=i,Gt=0,Kn=null,Js=!1,Pl=jn(s,i),Ch=!1,_l=Gn=Dh=Wi=ei=Dr=0,Rn=Ko=null,Oh=!1,(i&8)!==0&&(i|=i&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=i;0<u;){var x=31-oe(u),j=1<<x;i|=s[x],u&=~j}return ps=i,od(),c}function Uj(s,i){jt=null,L.H=zo,i===Cl||i===pd?(i=ab(),Gt=3):i===Rf?(i=ab(),Gt=4):Gt=i===dh?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Kn=i,It===null&&(Dr=1,Td(s,oa(i,s.current)))}function Vj(){var s=Wn.current;return s===null?!0:(Mt&4194048)===Mt?ma===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?s===ma:!1}function qj(){var s=L.H;return L.H=zo,s===null?zo:s}function Wj(){var s=L.A;return L.A=ZA,s}function Ud(){Dr=4,Js||(Mt&4194048)!==Mt&&Wn.current!==null||(Pl=!0),(ei&134217727)===0&&(Wi&134217727)===0||sr===null||ni(sr,Mt,Gn,!1)}function Mh(s,i,c){var u=Wt;Wt|=2;var x=qj(),j=Wj();(sr!==s||Mt!==i)&&(Bd=null,Ll(s,i)),i=!1;var I=Dr;e:do try{if(Gt!==0&&It!==null){var $=It,re=Kn;switch(Gt){case 8:Eh(),I=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(i=!0);var he=Gt;if(Gt=0,Kn=null,$l(s,$,re,he),c&&Pl){I=0;break e}break;default:he=Gt,Gt=0,Kn=null,$l(s,$,re,he)}}tT(),I=Dr;break}catch(Se){Uj(s,Se)}while(!0);return i&&s.shellSuspendCounter++,is=Ri=null,Wt=u,L.H=x,L.A=j,It===null&&(sr=null,Mt=0,od()),I}function tT(){for(;It!==null;)Hj(It)}function rT(s,i){var c=Wt;Wt|=2;var u=qj(),x=Wj();sr!==s||Mt!==i?(Bd=null,zd=Ye()+500,Ll(s,i)):Pl=jn(s,i);e:do try{if(Gt!==0&&It!==null){i=It;var j=Kn;t:switch(Gt){case 1:Gt=0,Kn=null,$l(s,i,j,1);break;case 2:case 9:if(rb(j)){Gt=0,Kn=null,Kj(i);break}i=function(){Gt!==2&&Gt!==9||sr!==s||(Gt=7),qa(s)},j.then(i,i);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:rb(j)?(Gt=0,Kn=null,Kj(i)):(Gt=0,Kn=null,$l(s,i,j,7));break;case 5:var I=null;switch(It.tag){case 26:I=It.memoizedState;case 5:case 27:var $=It;if(I?EN(I):$.stateNode.complete){Gt=0,Kn=null;var re=$.sibling;if(re!==null)It=re;else{var he=$.return;he!==null?(It=he,Vd(he)):It=null}break t}}Gt=0,Kn=null,$l(s,i,j,5);break;case 6:Gt=0,Kn=null,$l(s,i,j,6);break;case 8:Eh(),Dr=6;break e;default:throw Error(a(462))}}nT();break}catch(Se){Uj(s,Se)}while(!0);return is=Ri=null,L.H=u,L.A=x,Wt=c,It!==null?0:(sr=null,Mt=0,od(),Dr)}function nT(){for(;It!==null&&!_e();)Hj(It)}function Hj(s){var i=pj(s.alternate,s,ps);s.memoizedProps=s.pendingProps,i===null?Vd(s):It=i}function Kj(s){var i=s,c=i.alternate;switch(i.tag){case 15:case 0:i=dj(c,i,i.pendingProps,i.type,void 0,Mt);break;case 11:i=dj(c,i,i.pendingProps,i.type.render,i.ref,Mt);break;case 5:Gf(i);default:vj(c,i),i=It=Wy(i,ps),i=pj(c,i,ps)}s.memoizedProps=s.pendingProps,i===null?Vd(s):It=i}function $l(s,i,c,u){is=Ri=null,Gf(i),Dl=null,Io=0;var x=i.return;try{if(WA(s,x,i,c,Mt)){Dr=1,Td(s,oa(c,s.current)),It=null;return}}catch(j){if(x!==null)throw It=x,j;Dr=1,Td(s,oa(c,s.current)),It=null;return}i.flags&32768?(Rt||u===1?s=!0:Pl||(Mt&536870912)!==0?s=!1:(Js=s=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Gj(i,s)):Vd(i)}function Vd(s){var i=s;do{if((i.flags&32768)!==0){Gj(i,Js);return}s=i.return;var c=GA(i.alternate,i,ps);if(c!==null){It=c;return}if(i=i.sibling,i!==null){It=i;return}It=i=s}while(i!==null);Dr===0&&(Dr=5)}function Gj(s,i){do{var c=YA(s.alternate,s);if(c!==null){c.flags&=32767,It=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(s=s.sibling,s!==null)){It=s;return}It=s=c}while(s!==null);Dr=6,It=null}function Yj(s,i,c,u,x,j,I,$,re){s.cancelPendingCommit=null;do qd();while(qr!==0);if((Wt&6)!==0)throw Error(a(327));if(i!==null){if(i===s.current)throw Error(a(177));if(j=i.lanes|i.childLanes,j|=jf,tn(s,c,j,I,$,re),s===sr&&(It=sr=null,Mt=0),Rl=i,ri=s,xs=c,Ah=j,Th=x,$j=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,lT(Ee,function(){return eN(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=L.T,L.T=null,x=V.p,V.p=2,I=Wt,Wt|=4;try{QA(s,i,c)}finally{Wt=I,V.p=x,L.T=u}}qr=1,Qj(),Xj(),Zj()}}function Qj(){if(qr===1){qr=0;var s=ri,i=Rl,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=L.T,L.T=null;var u=V.p;V.p=2;var x=Wt;Wt|=4;try{Tj(i,s);var j=Wh,I=Ry(s.containerInfo),$=j.focusedElem,re=j.selectionRange;if(I!==$&&$&&$.ownerDocument&&_y($.ownerDocument.documentElement,$)){if(re!==null&&pf($)){var he=re.start,Se=re.end;if(Se===void 0&&(Se=he),"selectionStart"in $)$.selectionStart=he,$.selectionEnd=Math.min(Se,$.value.length);else{var Oe=$.ownerDocument||document,xe=Oe&&Oe.defaultView||window;if(xe.getSelection){var be=xe.getSelection(),Ge=$.textContent.length,ht=Math.min(re.start,Ge),tr=re.end===void 0?ht:Math.min(re.end,Ge);!be.extend&&ht>tr&&(I=tr,tr=ht,ht=I);var ue=Py($,ht),ie=Py($,tr);if(ue&&ie&&(be.rangeCount!==1||be.anchorNode!==ue.node||be.anchorOffset!==ue.offset||be.focusNode!==ie.node||be.focusOffset!==ie.offset)){var fe=Oe.createRange();fe.setStart(ue.node,ue.offset),be.removeAllRanges(),ht>tr?(be.addRange(fe),be.extend(ie.node,ie.offset)):(fe.setEnd(ie.node,ie.offset),be.addRange(fe))}}}}for(Oe=[],be=$;be=be.parentNode;)be.nodeType===1&&Oe.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<Oe.length;$++){var ke=Oe[$];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}ru=!!qh,Wh=qh=null}finally{Wt=x,V.p=u,L.T=c}}s.current=i,qr=2}}function Xj(){if(qr===2){qr=0;var s=ri,i=Rl,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=L.T,L.T=null;var u=V.p;V.p=2;var x=Wt;Wt|=4;try{kj(s,i.alternate,i)}finally{Wt=x,V.p=u,L.T=c}}qr=3}}function Zj(){if(qr===4||qr===3){qr=0,qe();var s=ri,i=Rl,c=xs,u=$j;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qr=5:(qr=0,Rl=ri=null,Jj(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(ti=null),lr(c),i=i.stateNode,F&&typeof F.onCommitFiberRoot=="function")try{F.onCommitFiberRoot(Fe,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=L.T,x=V.p,V.p=2,L.T=null;try{for(var j=s.onRecoverableError,I=0;I<u.length;I++){var $=u[I];j($.value,{componentStack:$.stack})}}finally{L.T=i,V.p=x}}(xs&3)!==0&&qd(),qa(s),x=s.pendingLanes,(c&261930)!==0&&(x&42)!==0?s===Ih?Go++:(Go=0,Ih=s):Go=0,Yo(0)}}function Jj(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Ao(i)))}function qd(){return Qj(),Xj(),Zj(),eN()}function eN(){if(qr!==5)return!1;var s=ri,i=Ah;Ah=0;var c=lr(xs),u=L.T,x=V.p;try{V.p=32>c?32:c,L.T=null,c=Th,Th=null;var j=ri,I=xs;if(qr=0,Rl=ri=null,xs=0,(Wt&6)!==0)throw Error(a(331));var $=Wt;if(Wt|=4,_j(j.current),Ej(j,j.current,I,c),Wt=$,Yo(0,!1),F&&typeof F.onPostCommitFiberRoot=="function")try{F.onPostCommitFiberRoot(Fe,j)}catch{}return!0}finally{V.p=x,L.T=u,Jj(s,i)}}function tN(s,i,c){i=oa(c,i),i=ch(s.stateNode,i,2),s=Ys(s,i,2),s!==null&&($t(s,2),qa(s))}function Yt(s,i,c){if(s.tag===3)tN(s,s,c);else for(;i!==null;){if(i.tag===3){tN(i,s,c);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ti===null||!ti.has(u))){s=oa(c,s),c=rj(2),u=Ys(i,c,2),u!==null&&(nj(c,u,i,s),$t(u,2),qa(u));break}}i=i.return}}function Ph(s,i,c){var u=s.pingCache;if(u===null){u=s.pingCache=new JA;var x=new Set;u.set(i,x)}else x=u.get(i),x===void 0&&(x=new Set,u.set(i,x));x.has(c)||(Ch=!0,x.add(c),s=aT.bind(null,s,i,c),i.then(s,s))}function aT(s,i,c){var u=s.pingCache;u!==null&&u.delete(i),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,sr===s&&(Mt&c)===c&&(Dr===4||Dr===3&&(Mt&62914560)===Mt&&300>Ye()-$d?(Wt&2)===0&&Ll(s,0):Dh|=c,_l===Mt&&(_l=0)),qa(s)}function rN(s,i){i===0&&(i=Tt()),s=Mi(s,i),s!==null&&($t(s,i),qa(s))}function sT(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),rN(s,c)}function iT(s,i){var c=0;switch(s.tag){case 31:case 13:var u=s.stateNode,x=s.memoizedState;x!==null&&(c=x.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),rN(s,c)}function lT(s,i){return te(s,i)}var Wd=null,zl=null,_h=!1,Hd=!1,Rh=!1,ai=0;function qa(s){s!==zl&&s.next===null&&(zl===null?Wd=zl=s:zl=zl.next=s),Hd=!0,_h||(_h=!0,cT())}function Yo(s,i){if(!Rh&&Hd){Rh=!0;do for(var c=!1,u=Wd;u!==null;){if(s!==0){var x=u.pendingLanes;if(x===0)var j=0;else{var I=u.suspendedLanes,$=u.pingedLanes;j=(1<<31-oe(42|s)+1)-1,j&=x&~(I&~$),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(c=!0,iN(u,j))}else j=Mt,j=ur(u,u===sr?j:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(j&3)===0||jn(u,j)||(c=!0,iN(u,j));u=u.next}while(c);Rh=!1}}function oT(){nN()}function nN(){Hd=_h=!1;var s=0;ai!==0&&yT()&&(s=ai);for(var i=Ye(),c=null,u=Wd;u!==null;){var x=u.next,j=aN(u,i);j===0?(u.next=null,c===null?Wd=x:c.next=x,x===null&&(zl=c)):(c=u,(s!==0||(j&3)!==0)&&(Hd=!0)),u=x}qr!==0&&qr!==5||Yo(s),ai!==0&&(ai=0)}function aN(s,i){for(var c=s.suspendedLanes,u=s.pingedLanes,x=s.expirationTimes,j=s.pendingLanes&-62914561;0<j;){var I=31-oe(j),$=1<<I,re=x[I];re===-1?(($&c)===0||($&u)!==0)&&(x[I]=mn($,i)):re<=i&&(s.expiredLanes|=$),j&=~$}if(i=sr,c=Mt,c=ur(s,s===i?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,c===0||s===i&&(Gt===2||Gt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&Te(u),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||jn(s,c)){if(i=c&-c,i===s.callbackPriority)return i;switch(u!==null&&Te(u),lr(c)){case 2:case 8:c=Ae;break;case 32:c=Ee;break;case 268435456:c=me;break;default:c=Ee}return u=sN.bind(null,s),c=te(c,u),s.callbackPriority=i,s.callbackNode=c,i}return u!==null&&u!==null&&Te(u),s.callbackPriority=2,s.callbackNode=null,2}function sN(s,i){if(qr!==0&&qr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(qd()&&s.callbackNode!==c)return null;var u=Mt;return u=ur(s,s===sr?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Bj(s,u,i),aN(s,Ye()),s.callbackNode!=null&&s.callbackNode===c?sN.bind(null,s):null)}function iN(s,i){if(qd())return null;Bj(s,i,!0)}function cT(){jT(function(){(Wt&6)!==0?te(H,oT):nN()})}function Lh(){if(ai===0){var s=Sl;s===0&&(s=it,it<<=1,(it&261888)===0&&(it=256)),ai=s}return ai}function lN(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Q(""+s)}function oN(s,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,s.id&&c.setAttribute("form",s.id),i.parentNode.insertBefore(c,i),s=new FormData(s),c.parentNode.removeChild(c),s}function dT(s,i,c,u,x){if(i==="submit"&&c&&c.stateNode===x){var j=lN((x[ft]||null).action),I=u.submitter;I&&(i=(i=I[ft]||null)?lN(i.formAction):I.getAttribute("formAction"),i!==null&&(j=i,I=null));var $=new ad("action","action",null,u,x);s.push({event:$,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ai!==0){var re=I?oN(x,I):new FormData(x);nh(c,{pending:!0,data:re,method:x.method,action:j},null,re)}}else typeof j=="function"&&($.preventDefault(),re=I?oN(x,I):new FormData(x),nh(c,{pending:!0,data:re,method:x.method,action:j},j,re))},currentTarget:x}]})}}for(var $h=0;$h<bf.length;$h++){var zh=bf[$h],uT=zh.toLowerCase(),mT=zh[0].toUpperCase()+zh.slice(1);Aa(uT,"on"+mT)}Aa(zy,"onAnimationEnd"),Aa(By,"onAnimationIteration"),Aa(Fy,"onAnimationStart"),Aa("dblclick","onDoubleClick"),Aa("focusin","onFocus"),Aa("focusout","onBlur"),Aa(OA,"onTransitionRun"),Aa(AA,"onTransitionStart"),Aa(TA,"onTransitionCancel"),Aa(Uy,"onTransitionEnd"),Fn("onMouseEnter",["mouseout","mouseover"]),Fn("onMouseLeave",["mouseout","mouseover"]),Fn("onPointerEnter",["pointerout","pointerover"]),Fn("onPointerLeave",["pointerout","pointerover"]),In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),In("onBeforeInput",["compositionend","keypress","textInput","paste"]),In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qo));function cN(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var u=s[c],x=u.event;u=u.listeners;e:{var j=void 0;if(i)for(var I=u.length-1;0<=I;I--){var $=u[I],re=$.instance,he=$.currentTarget;if($=$.listener,re!==j&&x.isPropagationStopped())break e;j=$,x.currentTarget=he;try{j(x)}catch(Se){ld(Se)}x.currentTarget=null,j=re}else for(I=0;I<u.length;I++){if($=u[I],re=$.instance,he=$.currentTarget,$=$.listener,re!==j&&x.isPropagationStopped())break e;j=$,x.currentTarget=he;try{j(x)}catch(Se){ld(Se)}x.currentTarget=null,j=re}}}}function Et(s,i){var c=i[ts];c===void 0&&(c=i[ts]=new Set);var u=s+"__bubble";c.has(u)||(dN(i,s,2,!1),c.add(u))}function Bh(s,i,c){var u=0;i&&(u|=4),dN(c,s,u,i)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Fh(s){if(!s[Kd]){s[Kd]=!0,sa.forEach(function(c){c!=="selectionchange"&&(fT.has(c)||Bh(c,!1,s),Bh(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Kd]||(i[Kd]=!0,Bh("selectionchange",!1,i))}}function dN(s,i,c,u){switch(zN(i)){case 2:var x=FT;break;case 8:x=UT;break;default:x=rg}c=x.bind(null,i,c,s),x=void 0,!Zt||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(x=!0),u?x!==void 0?s.addEventListener(i,c,{capture:!0,passive:x}):s.addEventListener(i,c,!0):x!==void 0?s.addEventListener(i,c,{passive:x}):s.addEventListener(i,c,!1)}function Uh(s,i,c,u,x){var j=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var I=u.tag;if(I===3||I===4){var $=u.stateNode.containerInfo;if($===x)break;if(I===4)for(I=u.return;I!==null;){var re=I.tag;if((re===3||re===4)&&I.stateNode.containerInfo===x)return;I=I.return}for(;$!==null;){if(I=hn($),I===null)return;if(re=I.tag,re===5||re===6||re===26||re===27){u=j=I;continue e}$=$.parentNode}}u=u.return}ar(function(){var he=j,Se=ot(c),Oe=[];e:{var xe=Vy.get(s);if(xe!==void 0){var be=ad,Ge=s;switch(s){case"keypress":if(rd(c)===0)break e;case"keydown":case"keyup":be=iA;break;case"focusin":Ge="focus",be=uf;break;case"focusout":Ge="blur",be=uf;break;case"beforeblur":case"afterblur":be=uf;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=GO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=cA;break;case zy:case By:case Fy:be=XO;break;case Uy:be=uA;break;case"scroll":case"scrollend":be=HO;break;case"wheel":be=fA;break;case"copy":case"cut":case"paste":be=JO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=by;break;case"toggle":case"beforetoggle":be=gA}var ht=(i&4)!==0,tr=!ht&&(s==="scroll"||s==="scrollend"),ue=ht?xe!==null?xe+"Capture":null:xe;ht=[];for(var ie=he,fe;ie!==null;){var ke=ie;if(fe=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||fe===null||ue===null||(ke=wt(ie,ue),ke!=null&&ht.push(Xo(ie,ke,fe))),tr)break;ie=ie.return}0<ht.length&&(xe=new be(xe,Ge,null,c,Se),Oe.push({event:xe,listeners:ht}))}}if((i&7)===0){e:{if(xe=s==="mouseover"||s==="pointerover",be=s==="mouseout"||s==="pointerout",xe&&c!==we&&(Ge=c.relatedTarget||c.fromElement)&&(hn(Ge)||Ge[Xt]))break e;if((be||xe)&&(xe=Se.window===Se?Se:(xe=Se.ownerDocument)?xe.defaultView||xe.parentWindow:window,be?(Ge=c.relatedTarget||c.toElement,be=he,Ge=Ge?hn(Ge):null,Ge!==null&&(tr=o(Ge),ht=Ge.tag,Ge!==tr||ht!==5&&ht!==27&&ht!==6)&&(Ge=null)):(be=null,Ge=he),be!==Ge)){if(ht=vy,ke="onMouseLeave",ue="onMouseEnter",ie="mouse",(s==="pointerout"||s==="pointerover")&&(ht=by,ke="onPointerLeave",ue="onPointerEnter",ie="pointer"),tr=be==null?xe:Qr(be),fe=Ge==null?xe:Qr(Ge),xe=new ht(ke,ie+"leave",be,c,Se),xe.target=tr,xe.relatedTarget=fe,ke=null,hn(Se)===he&&(ht=new ht(ue,ie+"enter",Ge,c,Se),ht.target=fe,ht.relatedTarget=tr,ke=ht),tr=ke,be&&Ge)t:{for(ht=hT,ue=be,ie=Ge,fe=0,ke=ue;ke;ke=ht(ke))fe++;ke=0;for(var mt=ie;mt;mt=ht(mt))ke++;for(;0<fe-ke;)ue=ht(ue),fe--;for(;0<ke-fe;)ie=ht(ie),ke--;for(;fe--;){if(ue===ie||ie!==null&&ue===ie.alternate){ht=ue;break t}ue=ht(ue),ie=ht(ie)}ht=null}else ht=null;be!==null&&uN(Oe,xe,be,ht,!1),Ge!==null&&tr!==null&&uN(Oe,tr,Ge,ht,!0)}}e:{if(xe=he?Qr(he):window,be=xe.nodeName&&xe.nodeName.toLowerCase(),be==="select"||be==="input"&&xe.type==="file")var Ft=Oy;else if(Cy(xe))if(Ay)Ft=kA;else{Ft=wA;var nt=NA}else be=xe.nodeName,!be||be.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?he&&ze(he.elementType)&&(Ft=Oy):Ft=SA;if(Ft&&(Ft=Ft(s,he))){Dy(Oe,Ft,c,Se);break e}nt&&nt(s,xe,he),s==="focusout"&&he&&xe.type==="number"&&he.memoizedProps.value!=null&&Dt(xe,"number",xe.value)}switch(nt=he?Qr(he):window,s){case"focusin":(Cy(nt)||nt.contentEditable==="true")&&(pl=nt,xf=he,Co=null);break;case"focusout":Co=xf=pl=null;break;case"mousedown":vf=!0;break;case"contextmenu":case"mouseup":case"dragend":vf=!1,Ly(Oe,c,Se);break;case"selectionchange":if(DA)break;case"keydown":case"keyup":Ly(Oe,c,Se)}var St;if(ff)e:{switch(s){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else gl?Sy(s,c)&&(Pt="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Pt="onCompositionStart");Pt&&(jy&&c.locale!=="ko"&&(gl||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&gl&&(St=yo()):(Ba=Se,Kt="value"in Ba?Ba.value:Ba.textContent,gl=!0)),nt=Gd(he,Pt),0<nt.length&&(Pt=new yy(Pt,s,null,c,Se),Oe.push({event:Pt,listeners:nt}),St?Pt.data=St:(St=ky(c),St!==null&&(Pt.data=St)))),(St=xA?vA(s,c):yA(s,c))&&(Pt=Gd(he,"onBeforeInput"),0<Pt.length&&(nt=new yy("onBeforeInput","beforeinput",null,c,Se),Oe.push({event:nt,listeners:Pt}),nt.data=St)),dT(Oe,s,he,c,Se)}cN(Oe,i)})}function Xo(s,i,c){return{instance:s,listener:i,currentTarget:c}}function Gd(s,i){for(var c=i+"Capture",u=[];s!==null;){var x=s,j=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||j===null||(x=wt(s,c),x!=null&&u.unshift(Xo(s,x,j)),x=wt(s,i),x!=null&&u.push(Xo(s,x,j))),s.tag===3)return u;s=s.return}return[]}function hT(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function uN(s,i,c,u,x){for(var j=i._reactName,I=[];c!==null&&c!==u;){var $=c,re=$.alternate,he=$.stateNode;if($=$.tag,re!==null&&re===u)break;$!==5&&$!==26&&$!==27||he===null||(re=he,x?(he=wt(c,j),he!=null&&I.unshift(Xo(c,he,re))):x||(he=wt(c,j),he!=null&&I.push(Xo(c,he,re)))),c=c.return}I.length!==0&&s.push({event:i,listeners:I})}var gT=/\r\n?/g,pT=/\u0000|\uFFFD/g;function mN(s){return(typeof s=="string"?s:""+s).replace(gT,`
`).replace(pT,"")}function fN(s,i){return i=mN(i),mN(s)===i}function er(s,i,c,u,x,j){switch(c){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Be(s,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Be(s,""+u);break;case"className":Da(s,"class",u);break;case"tabIndex":Da(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Da(s,c,u);break;case"style":lt(s,u,j);break;case"data":if(i!=="object"){Da(s,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||c!=="href")){s.removeAttribute(c);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(c);break}u=Q(""+u),s.setAttribute(c,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(c==="formAction"?(i!=="input"&&er(s,i,"name",x.name,x,null),er(s,i,"formEncType",x.formEncType,x,null),er(s,i,"formMethod",x.formMethod,x,null),er(s,i,"formTarget",x.formTarget,x,null)):(er(s,i,"encType",x.encType,x,null),er(s,i,"method",x.method,x,null),er(s,i,"target",x.target,x,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(c);break}u=Q(""+u),s.setAttribute(c,u);break;case"onClick":u!=null&&(s.onclick=J);break;case"onScroll":u!=null&&Et("scroll",s);break;case"onScrollEnd":u!=null&&Et("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(c=u.__html,c!=null){if(x.children!=null)throw Error(a(60));s.innerHTML=c}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}c=Q(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,""+u):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":u===!0?s.setAttribute(c,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,u):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(c,u):s.removeAttribute(c);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(c):s.setAttribute(c,u);break;case"popover":Et("beforetoggle",s),Et("toggle",s),ns(s,"popover",u);break;case"xlinkActuate":Sn(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Sn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Sn(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Sn(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Sn(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Sn(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Sn(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ns(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ze.get(c)||c,ns(s,c,u))}}function Vh(s,i,c,u,x,j){switch(c){case"style":lt(s,u,j);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(c=u.__html,c!=null){if(x.children!=null)throw Error(a(60));s.innerHTML=c}}break;case"children":typeof u=="string"?Be(s,u):(typeof u=="number"||typeof u=="bigint")&&Be(s,""+u);break;case"onScroll":u!=null&&Et("scroll",s);break;case"onScrollEnd":u!=null&&Et("scrollend",s);break;case"onClick":u!=null&&(s.onclick=J);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vr.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),i=c.slice(2,x?c.length-7:void 0),j=s[ft]||null,j=j!=null?j[c]:null,typeof j=="function"&&s.removeEventListener(i,j,x),typeof u=="function")){typeof j!="function"&&j!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(i,u,x);break e}c in s?s[c]=u:u===!0?s.setAttribute(c,""):ns(s,c,u)}}}function ln(s,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Et("error",s),Et("load",s);var u=!1,x=!1,j;for(j in c)if(c.hasOwnProperty(j)){var I=c[j];if(I!=null)switch(j){case"src":u=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:er(s,i,j,I,c,null)}}x&&er(s,i,"srcSet",c.srcSet,c,null),u&&er(s,i,"src",c.src,c,null);return;case"input":Et("invalid",s);var $=j=I=x=null,re=null,he=null;for(u in c)if(c.hasOwnProperty(u)){var Se=c[u];if(Se!=null)switch(u){case"name":x=Se;break;case"type":I=Se;break;case"checked":re=Se;break;case"defaultChecked":he=Se;break;case"value":j=Se;break;case"defaultValue":$=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(a(137,i));break;default:er(s,i,u,Se,c,null)}}Je(s,j,$,re,he,I,x,!1);return;case"select":Et("invalid",s),u=I=j=null;for(x in c)if(c.hasOwnProperty(x)&&($=c[x],$!=null))switch(x){case"value":j=$;break;case"defaultValue":I=$;break;case"multiple":u=$;default:er(s,i,x,$,c,null)}i=j,c=I,s.multiple=!!u,i!=null?Ot(s,!!u,i,!1):c!=null&&Ot(s,!!u,c,!0);return;case"textarea":Et("invalid",s),j=x=u=null;for(I in c)if(c.hasOwnProperty(I)&&($=c[I],$!=null))switch(I){case"value":u=$;break;case"defaultValue":x=$;break;case"children":j=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(a(91));break;default:er(s,i,I,$,c,null)}De(s,u,x,j);return;case"option":for(re in c)if(c.hasOwnProperty(re)&&(u=c[re],u!=null))switch(re){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:er(s,i,re,u,c,null)}return;case"dialog":Et("beforetoggle",s),Et("toggle",s),Et("cancel",s),Et("close",s);break;case"iframe":case"object":Et("load",s);break;case"video":case"audio":for(u=0;u<Qo.length;u++)Et(Qo[u],s);break;case"image":Et("error",s),Et("load",s);break;case"details":Et("toggle",s);break;case"embed":case"source":case"link":Et("error",s),Et("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in c)if(c.hasOwnProperty(he)&&(u=c[he],u!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:er(s,i,he,u,c,null)}return;default:if(ze(i)){for(Se in c)c.hasOwnProperty(Se)&&(u=c[Se],u!==void 0&&Vh(s,i,Se,u,c,void 0));return}}for($ in c)c.hasOwnProperty($)&&(u=c[$],u!=null&&er(s,i,$,u,c,null))}function xT(s,i,c,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,j=null,I=null,$=null,re=null,he=null,Se=null;for(be in c){var Oe=c[be];if(c.hasOwnProperty(be)&&Oe!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":re=Oe;default:u.hasOwnProperty(be)||er(s,i,be,null,u,Oe)}}for(var xe in u){var be=u[xe];if(Oe=c[xe],u.hasOwnProperty(xe)&&(be!=null||Oe!=null))switch(xe){case"type":j=be;break;case"name":x=be;break;case"checked":he=be;break;case"defaultChecked":Se=be;break;case"value":I=be;break;case"defaultValue":$=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(a(137,i));break;default:be!==Oe&&er(s,i,xe,be,u,Oe)}}Ue(s,I,$,re,he,Se,j,x);return;case"select":be=I=$=xe=null;for(j in c)if(re=c[j],c.hasOwnProperty(j)&&re!=null)switch(j){case"value":break;case"multiple":be=re;default:u.hasOwnProperty(j)||er(s,i,j,null,u,re)}for(x in u)if(j=u[x],re=c[x],u.hasOwnProperty(x)&&(j!=null||re!=null))switch(x){case"value":xe=j;break;case"defaultValue":$=j;break;case"multiple":I=j;default:j!==re&&er(s,i,x,j,u,re)}i=$,c=I,u=be,xe!=null?Ot(s,!!c,xe,!1):!!u!=!!c&&(i!=null?Ot(s,!!c,i,!0):Ot(s,!!c,c?[]:"",!1));return;case"textarea":be=xe=null;for($ in c)if(x=c[$],c.hasOwnProperty($)&&x!=null&&!u.hasOwnProperty($))switch($){case"value":break;case"children":break;default:er(s,i,$,null,u,x)}for(I in u)if(x=u[I],j=c[I],u.hasOwnProperty(I)&&(x!=null||j!=null))switch(I){case"value":xe=x;break;case"defaultValue":be=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(91));break;default:x!==j&&er(s,i,I,x,u,j)}Ce(s,xe,be);return;case"option":for(var Ge in c)if(xe=c[Ge],c.hasOwnProperty(Ge)&&xe!=null&&!u.hasOwnProperty(Ge))switch(Ge){case"selected":s.selected=!1;break;default:er(s,i,Ge,null,u,xe)}for(re in u)if(xe=u[re],be=c[re],u.hasOwnProperty(re)&&xe!==be&&(xe!=null||be!=null))switch(re){case"selected":s.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:er(s,i,re,xe,u,be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in c)xe=c[ht],c.hasOwnProperty(ht)&&xe!=null&&!u.hasOwnProperty(ht)&&er(s,i,ht,null,u,xe);for(he in u)if(xe=u[he],be=c[he],u.hasOwnProperty(he)&&xe!==be&&(xe!=null||be!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(a(137,i));break;default:er(s,i,he,xe,u,be)}return;default:if(ze(i)){for(var tr in c)xe=c[tr],c.hasOwnProperty(tr)&&xe!==void 0&&!u.hasOwnProperty(tr)&&Vh(s,i,tr,void 0,u,xe);for(Se in u)xe=u[Se],be=c[Se],!u.hasOwnProperty(Se)||xe===be||xe===void 0&&be===void 0||Vh(s,i,Se,xe,u,be);return}}for(var ue in c)xe=c[ue],c.hasOwnProperty(ue)&&xe!=null&&!u.hasOwnProperty(ue)&&er(s,i,ue,null,u,xe);for(Oe in u)xe=u[Oe],be=c[Oe],!u.hasOwnProperty(Oe)||xe===be||xe==null&&be==null||er(s,i,Oe,xe,u,be)}function hN(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vT(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,c=performance.getEntriesByType("resource"),u=0;u<c.length;u++){var x=c[u],j=x.transferSize,I=x.initiatorType,$=x.duration;if(j&&$&&hN(I)){for(I=0,$=x.responseEnd,u+=1;u<c.length;u++){var re=c[u],he=re.startTime;if(he>$)break;var Se=re.transferSize,Oe=re.initiatorType;Se&&hN(Oe)&&(re=re.responseEnd,I+=Se*(re<$?1:($-he)/(re-he)))}if(--u,i+=8*(j+I)/(x.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var qh=null,Wh=null;function Yd(s){return s.nodeType===9?s:s.ownerDocument}function gN(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pN(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Hh(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Kh=null;function yT(){var s=window.event;return s&&s.type==="popstate"?s===Kh?!1:(Kh=s,!0):(Kh=null,!1)}var xN=typeof setTimeout=="function"?setTimeout:void 0,bT=typeof clearTimeout=="function"?clearTimeout:void 0,vN=typeof Promise=="function"?Promise:void 0,jT=typeof queueMicrotask=="function"?queueMicrotask:typeof vN<"u"?function(s){return vN.resolve(null).then(s).catch(NT)}:xN;function NT(s){setTimeout(function(){throw s})}function si(s){return s==="head"}function yN(s,i){var c=i,u=0;do{var x=c.nextSibling;if(s.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(u===0){s.removeChild(x),Vl(i);return}u--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")u++;else if(c==="html")Zo(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Zo(c);for(var j=c.firstChild;j;){var I=j.nextSibling,$=j.nodeName;j[$a]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&j.rel.toLowerCase()==="stylesheet"||c.removeChild(j),j=I}}else c==="body"&&Zo(s.ownerDocument.body);c=x}while(c);Vl(i)}function bN(s,i){var c=s;s=0;do{var u=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),u&&u.nodeType===8)if(c=u.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=u}while(c)}function Gh(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Gh(c),Bs(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function wT(s,i,c,u){for(;s.nodeType===1;){var x=c;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[$a])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(j=s.getAttribute("rel"),j==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(j!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(j=s.getAttribute("src"),(j!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&j&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var j=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===j)return s}else return s;if(s=fa(s.nextSibling),s===null)break}return null}function ST(s,i,c){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=fa(s.nextSibling),s===null))return null;return s}function jN(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=fa(s.nextSibling),s===null))return null;return s}function Yh(s){return s.data==="$?"||s.data==="$~"}function Qh(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function kT(s,i){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||c.readyState!=="loading")i();else{var u=function(){i(),c.removeEventListener("DOMContentLoaded",u)};c.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function fa(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var Xh=null;function NN(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(i===0)return fa(s.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}s=s.nextSibling}return null}function wN(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return s;i--}else c!=="/$"&&c!=="/&"||i++}s=s.previousSibling}return null}function SN(s,i,c){switch(i=Yd(c),s){case"html":if(s=i.documentElement,!s)throw Error(a(452));return s;case"head":if(s=i.head,!s)throw Error(a(453));return s;case"body":if(s=i.body,!s)throw Error(a(454));return s;default:throw Error(a(451))}}function Zo(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Bs(s)}var ha=new Map,kN=new Set;function Qd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var vs=V.d;V.d={f:CT,r:DT,D:OT,C:AT,L:TT,m:IT,X:MT,S:ET,M:PT};function CT(){var s=vs.f(),i=Fd();return s||i}function DT(s){var i=gn(s);i!==null&&i.tag===5&&i.type==="form"?Ub(i):vs.r(s)}var Bl=typeof document>"u"?null:document;function CN(s,i,c){var u=Bl;if(u&&typeof i=="string"&&i){var x=Ie(i);x='link[rel="'+s+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),kN.has(x)||(kN.add(x),s={rel:s,crossOrigin:c,href:i},u.querySelector(x)===null&&(i=u.createElement("link"),ln(i,"link",s),Bt(i),u.head.appendChild(i)))}}function OT(s){vs.D(s),CN("dns-prefetch",s,null)}function AT(s,i){vs.C(s,i),CN("preconnect",s,i)}function TT(s,i,c){vs.L(s,i,c);var u=Bl;if(u&&s&&i){var x='link[rel="preload"][as="'+Ie(i)+'"]';i==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+Ie(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+Ie(c.imageSizes)+'"]')):x+='[href="'+Ie(s)+'"]';var j=x;switch(i){case"style":j=Fl(s);break;case"script":j=Ul(s)}ha.has(j)||(s=p({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:s,as:i},c),ha.set(j,s),u.querySelector(x)!==null||i==="style"&&u.querySelector(Jo(j))||i==="script"&&u.querySelector(ec(j))||(i=u.createElement("link"),ln(i,"link",s),Bt(i),u.head.appendChild(i)))}}function IT(s,i){vs.m(s,i);var c=Bl;if(c&&s){var u=i&&typeof i.as=="string"?i.as:"script",x='link[rel="modulepreload"][as="'+Ie(u)+'"][href="'+Ie(s)+'"]',j=x;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=Ul(s)}if(!ha.has(j)&&(s=p({rel:"modulepreload",href:s},i),ha.set(j,s),c.querySelector(x)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ec(j)))return}u=c.createElement("link"),ln(u,"link",s),Bt(u),c.head.appendChild(u)}}}function ET(s,i,c){vs.S(s,i,c);var u=Bl;if(u&&s){var x=Bn(u).hoistableStyles,j=Fl(s);i=i||"default";var I=x.get(j);if(!I){var $={loading:0,preload:null};if(I=u.querySelector(Jo(j)))$.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":i},c),(c=ha.get(j))&&Zh(s,c);var re=I=u.createElement("link");Bt(re),ln(re,"link",s),re._p=new Promise(function(he,Se){re.onload=he,re.onerror=Se}),re.addEventListener("load",function(){$.loading|=1}),re.addEventListener("error",function(){$.loading|=2}),$.loading|=4,Xd(I,i,u)}I={type:"stylesheet",instance:I,count:1,state:$},x.set(j,I)}}}function MT(s,i){vs.X(s,i);var c=Bl;if(c&&s){var u=Bn(c).hoistableScripts,x=Ul(s),j=u.get(x);j||(j=c.querySelector(ec(x)),j||(s=p({src:s,async:!0},i),(i=ha.get(x))&&Jh(s,i),j=c.createElement("script"),Bt(j),ln(j,"link",s),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},u.set(x,j))}}function PT(s,i){vs.M(s,i);var c=Bl;if(c&&s){var u=Bn(c).hoistableScripts,x=Ul(s),j=u.get(x);j||(j=c.querySelector(ec(x)),j||(s=p({src:s,async:!0,type:"module"},i),(i=ha.get(x))&&Jh(s,i),j=c.createElement("script"),Bt(j),ln(j,"link",s),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},u.set(x,j))}}function DN(s,i,c,u){var x=(x=Me.current)?Qd(x):null;if(!x)throw Error(a(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Fl(c.href),c=Bn(x).hoistableStyles,u=c.get(i),u||(u={type:"style",instance:null,count:0,state:null},c.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Fl(c.href);var j=Bn(x).hoistableStyles,I=j.get(s);if(I||(x=x.ownerDocument||x,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(s,I),(j=x.querySelector(Jo(s)))&&!j._p&&(I.instance=j,I.state.loading=5),ha.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ha.set(s,c),j||_T(x,s,c,I.state))),i&&u===null)throw Error(a(528,""));return I}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ul(c),c=Bn(x).hoistableScripts,u=c.get(i),u||(u={type:"script",instance:null,count:0,state:null},c.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,s))}}function Fl(s){return'href="'+Ie(s)+'"'}function Jo(s){return'link[rel="stylesheet"]['+s+"]"}function ON(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function _T(s,i,c,u){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=s.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),ln(i,"link",c),Bt(i),s.head.appendChild(i))}function Ul(s){return'[src="'+Ie(s)+'"]'}function ec(s){return"script[async]"+s}function AN(s,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var u=s.querySelector('style[data-href~="'+Ie(c.href)+'"]');if(u)return i.instance=u,Bt(u),u;var x=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Bt(u),ln(u,"style",x),Xd(u,c.precedence,s),i.instance=u;case"stylesheet":x=Fl(c.href);var j=s.querySelector(Jo(x));if(j)return i.state.loading|=4,i.instance=j,Bt(j),j;u=ON(c),(x=ha.get(x))&&Zh(u,x),j=(s.ownerDocument||s).createElement("link"),Bt(j);var I=j;return I._p=new Promise(function($,re){I.onload=$,I.onerror=re}),ln(j,"link",u),i.state.loading|=4,Xd(j,c.precedence,s),i.instance=j;case"script":return j=Ul(c.src),(x=s.querySelector(ec(j)))?(i.instance=x,Bt(x),x):(u=c,(x=ha.get(j))&&(u=p({},c),Jh(u,x)),s=s.ownerDocument||s,x=s.createElement("script"),Bt(x),ln(x,"link",u),s.head.appendChild(x),i.instance=x);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Xd(u,c.precedence,s));return i.instance}function Xd(s,i,c){for(var u=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=u.length?u[u.length-1]:null,j=x,I=0;I<u.length;I++){var $=u[I];if($.dataset.precedence===i)j=$;else if(j!==x)break}j?j.parentNode.insertBefore(s,j.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(s,i.firstChild))}function Zh(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function Jh(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Zd=null;function TN(s,i,c){if(Zd===null){var u=new Map,x=Zd=new Map;x.set(c,u)}else x=Zd,u=x.get(c),u||(u=new Map,x.set(c,u));if(u.has(s))return u;for(u.set(s,null),c=c.getElementsByTagName(s),x=0;x<c.length;x++){var j=c[x];if(!(j[$a]||j[Sr]||s==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var I=j.getAttribute(i)||"";I=s+I;var $=u.get(I);$?$.push(j):u.set(I,[j])}}return u}function IN(s,i,c){s=s.ownerDocument||s,s.head.insertBefore(c,i==="title"?s.querySelector("head > title"):null)}function RT(s,i,c){if(c===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function EN(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function LT(s,i,c,u){if(c.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Fl(u.href),j=i.querySelector(Jo(x));if(j){i=j._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Jd.bind(s),i.then(s,s)),c.state.loading|=4,c.instance=j,Bt(j);return}j=i.ownerDocument||i,u=ON(u),(x=ha.get(x))&&Zh(u,x),j=j.createElement("link"),Bt(j);var I=j;I._p=new Promise(function($,re){I.onload=$,I.onerror=re}),ln(j,"link",u),c.instance=j}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=Jd.bind(s),i.addEventListener("load",c),i.addEventListener("error",c))}}var eg=0;function $T(s,i){return s.stylesheets&&s.count===0&&tu(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var u=setTimeout(function(){if(s.stylesheets&&tu(s,s.stylesheets),s.unsuspend){var j=s.unsuspend;s.unsuspend=null,j()}},6e4+i);0<s.imgBytes&&eg===0&&(eg=62500*vT());var x=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&tu(s,s.stylesheets),s.unsuspend)){var j=s.unsuspend;s.unsuspend=null,j()}},(s.imgBytes>eg?50:800)+i);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(x)}}:null}function Jd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tu(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var eu=null;function tu(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,eu=new Map,i.forEach(zT,s),eu=null,Jd.call(s))}function zT(s,i){if(!(i.state.loading&4)){var c=eu.get(s);if(c)var u=c.get(null);else{c=new Map,eu.set(s,c);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<x.length;j++){var I=x[j];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(c.set(I.dataset.precedence,I),u=I)}u&&c.set(null,u)}x=i.instance,I=x.getAttribute("data-precedence"),j=c.get(I)||u,j===u&&c.set(null,x),c.set(I,x),this.count++,u=Jd.bind(this),x.addEventListener("load",u),x.addEventListener("error",u),j?j.parentNode.insertBefore(x,j.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),i.state.loading|=4}}var tc={$$typeof:k,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function BT(s,i,c,u,x,j,I,$,re){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.hiddenUpdates=Pr(null),this.identifierPrefix=u,this.onUncaughtError=x,this.onCaughtError=j,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function MN(s,i,c,u,x,j,I,$,re,he,Se,Oe){return s=new BT(s,i,c,I,re,he,Se,Oe,$),i=1,j===!0&&(i|=24),j=qn(3,null,null,i),s.current=j,j.stateNode=s,i=Mf(),i.refCount++,s.pooledCache=i,i.refCount++,j.memoizedState={element:u,isDehydrated:c,cache:i},Lf(j),s}function PN(s){return s?(s=yl,s):yl}function _N(s,i,c,u,x,j){x=PN(x),u.context===null?u.context=x:u.pendingContext=x,u=Gs(i),u.payload={element:c},j=j===void 0?null:j,j!==null&&(u.callback=j),c=Ys(s,u,i),c!==null&&(Ln(c,s,i),Mo(c,s,i))}function RN(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function tg(s,i){RN(s,i),(s=s.alternate)&&RN(s,i)}function LN(s){if(s.tag===13||s.tag===31){var i=Mi(s,67108864);i!==null&&Ln(i,s,67108864),tg(s,67108864)}}function $N(s){if(s.tag===13||s.tag===31){var i=Yn();i=fn(i);var c=Mi(s,i);c!==null&&Ln(c,s,i),tg(s,i)}}var ru=!0;function FT(s,i,c,u){var x=L.T;L.T=null;var j=V.p;try{V.p=2,rg(s,i,c,u)}finally{V.p=j,L.T=x}}function UT(s,i,c,u){var x=L.T;L.T=null;var j=V.p;try{V.p=8,rg(s,i,c,u)}finally{V.p=j,L.T=x}}function rg(s,i,c,u){if(ru){var x=ng(u);if(x===null)Uh(s,i,u,nu,c),BN(s,u);else if(qT(x,s,i,c,u))u.stopPropagation();else if(BN(s,u),i&4&&-1<VT.indexOf(s)){for(;x!==null;){var j=gn(x);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var I=Ar(j.pendingLanes);if(I!==0){var $=j;for($.pendingLanes|=2,$.entangledLanes|=2;I;){var re=1<<31-oe(I);$.entanglements[1]|=re,I&=~re}qa(j),(Wt&6)===0&&(zd=Ye()+500,Yo(0))}}break;case 31:case 13:$=Mi(j,2),$!==null&&Ln($,j,2),Fd(),tg(j,2)}if(j=ng(u),j===null&&Uh(s,i,u,nu,c),j===x)break;x=j}x!==null&&u.stopPropagation()}else Uh(s,i,u,null,c)}}function ng(s){return s=ot(s),ag(s)}var nu=null;function ag(s){if(nu=null,s=hn(s),s!==null){var i=o(s);if(i===null)s=null;else{var c=i.tag;if(c===13){if(s=d(i),s!==null)return s;s=null}else if(c===31){if(s=m(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return nu=s,null}function zN(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case H:return 2;case Ae:return 8;case Ee:case W:return 32;case me:return 268435456;default:return 32}default:return 32}}var sg=!1,ii=null,li=null,oi=null,rc=new Map,nc=new Map,ci=[],VT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BN(s,i){switch(s){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":oi=null;break;case"pointerover":case"pointerout":rc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(i.pointerId)}}function ac(s,i,c,u,x,j){return s===null||s.nativeEvent!==j?(s={blockedOn:i,domEventName:c,eventSystemFlags:u,nativeEvent:j,targetContainers:[x]},i!==null&&(i=gn(i),i!==null&&LN(i)),s):(s.eventSystemFlags|=u,i=s.targetContainers,x!==null&&i.indexOf(x)===-1&&i.push(x),s)}function qT(s,i,c,u,x){switch(i){case"focusin":return ii=ac(ii,s,i,c,u,x),!0;case"dragenter":return li=ac(li,s,i,c,u,x),!0;case"mouseover":return oi=ac(oi,s,i,c,u,x),!0;case"pointerover":var j=x.pointerId;return rc.set(j,ac(rc.get(j)||null,s,i,c,u,x)),!0;case"gotpointercapture":return j=x.pointerId,nc.set(j,ac(nc.get(j)||null,s,i,c,u,x)),!0}return!1}function FN(s){var i=hn(s.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=d(c),i!==null){s.blockedOn=i,Ht(s.priority,function(){$N(c)});return}}else if(i===31){if(i=m(c),i!==null){s.blockedOn=i,Ht(s.priority,function(){$N(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function au(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=ng(s.nativeEvent);if(c===null){c=s.nativeEvent;var u=new c.constructor(c.type,c);we=u,c.target.dispatchEvent(u),we=null}else return i=gn(c),i!==null&&LN(i),s.blockedOn=c,!1;i.shift()}return!0}function UN(s,i,c){au(s)&&c.delete(i)}function WT(){sg=!1,ii!==null&&au(ii)&&(ii=null),li!==null&&au(li)&&(li=null),oi!==null&&au(oi)&&(oi=null),rc.forEach(UN),nc.forEach(UN)}function su(s,i){s.blockedOn===i&&(s.blockedOn=null,sg||(sg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,WT)))}var iu=null;function VN(s){iu!==s&&(iu=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){iu===s&&(iu=null);for(var i=0;i<s.length;i+=3){var c=s[i],u=s[i+1],x=s[i+2];if(typeof u!="function"){if(ag(u||c)===null)continue;break}var j=gn(c);j!==null&&(s.splice(i,3),i-=3,nh(j,{pending:!0,data:x,method:c.method,action:u},u,x))}}))}function Vl(s){function i(re){return su(re,s)}ii!==null&&su(ii,s),li!==null&&su(li,s),oi!==null&&su(oi,s),rc.forEach(i),nc.forEach(i);for(var c=0;c<ci.length;c++){var u=ci[c];u.blockedOn===s&&(u.blockedOn=null)}for(;0<ci.length&&(c=ci[0],c.blockedOn===null);)FN(c),c.blockedOn===null&&ci.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(u=0;u<c.length;u+=3){var x=c[u],j=c[u+1],I=x[ft]||null;if(typeof j=="function")I||VN(c);else if(I){var $=null;if(j&&j.hasAttribute("formAction")){if(x=j,I=j[ft]||null)$=I.formAction;else if(ag(x)!==null)continue}else $=I.action;typeof $=="function"?c[u+1]=$:(c.splice(u,3),u-=3),VN(c)}}}function qN(){function s(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(I){return x=I})},focusReset:"manual",scroll:"manual"})}function i(){x!==null&&(x(),x=null),u||setTimeout(c,20)}function c(){if(!u&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,x=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),x!==null&&(x(),x=null)}}}function ig(s){this._internalRoot=s}lu.prototype.render=ig.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(a(409));var c=i.current,u=Yn();_N(c,u,s,i,null,null)},lu.prototype.unmount=ig.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;_N(s.current,2,null,s,null,null),Fd(),i[Xt]=null}};function lu(s){this._internalRoot=s}lu.prototype.unstable_scheduleHydration=function(s){if(s){var i=_r();s={blockedOn:null,target:s,priority:i};for(var c=0;c<ci.length&&i!==0&&i<ci[c].priority;c++);ci.splice(c,0,s),c===0&&FN(s)}};var WN=r.version;if(WN!=="19.2.0")throw Error(a(527,WN,"19.2.0"));V.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=h(i),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var HT={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{Fe=ou.inject(HT),F=ou}catch{}}return ic.createRoot=function(s,i){if(!l(s))throw Error(a(299));var c=!1,u="",x=Zb,j=Jb,I=ej;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(x=i.onUncaughtError),i.onCaughtError!==void 0&&(j=i.onCaughtError),i.onRecoverableError!==void 0&&(I=i.onRecoverableError)),i=MN(s,1,!1,null,null,c,u,null,x,j,I,qN),s[Xt]=i.current,Fh(s),new ig(i)},ic.hydrateRoot=function(s,i,c){if(!l(s))throw Error(a(299));var u=!1,x="",j=Zb,I=Jb,$=ej,re=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(j=c.onUncaughtError),c.onCaughtError!==void 0&&(I=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError),c.formState!==void 0&&(re=c.formState)),i=MN(s,1,!0,i,c??null,u,x,re,j,I,$,qN),i.context=PN(null),c=i.current,u=Yn(),u=fn(u),x=Gs(u),x.callback=null,Ys(c,x,u),c=u,i.current.lanes=c,$t(i,c),qa(i),s[Xt]=i.current,Fh(s),new lu(i)},ic.version="19.2.0",ic}var tw;function s6(){if(tw)return dg.exports;tw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),dg.exports=a6(),dg.exports}var i6=s6();const l6=Za(i6);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rw="popstate";function o6(e={}){function r(l,o){let{pathname:d="/",search:m="",hash:f=""}=ml(l.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Zp("",{pathname:d,search:m,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(l,o){let d=l.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let f=l.location.href,h=f.indexOf("#");m=h===-1?f:f.slice(0,h)}return m+"#"+(typeof o=="string"?o:bc(o))}function a(l,o){ja(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return d6(r,n,a,e)}function br(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function ja(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function c6(){return Math.random().toString(36).substring(2,10)}function nw(e,r){return{usr:e.state,key:e.key,idx:r}}function Zp(e,r,n=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof r=="string"?ml(r):r,state:n,key:r&&r.key||a||c6()}}function bc({pathname:e="/",search:r="",hash:n=""}){return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ml(e){let r={};if(e){let n=e.indexOf("#");n>=0&&(r.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(r.search=e.substring(a),e=e.substring(0,a)),e&&(r.pathname=e)}return r}function d6(e,r,n,a={}){let{window:l=document.defaultView,v5Compat:o=!1}=a,d=l.history,m="POP",f=null,h=g();h==null&&(h=0,d.replaceState({...d.state,idx:h},""));function g(){return(d.state||{idx:null}).idx}function p(){m="POP";let S=g(),C=S==null?null:S-h;h=S,f&&f({action:m,location:N.location,delta:C})}function v(S,C){m="PUSH";let O=Zp(N.location,S,C);n&&n(O,S),h=g()+1;let k=nw(O,h),E=N.createHref(O);try{d.pushState(k,"",E)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;l.location.assign(E)}o&&f&&f({action:m,location:N.location,delta:1})}function b(S,C){m="REPLACE";let O=Zp(N.location,S,C);n&&n(O,S),h=g();let k=nw(O,h),E=N.createHref(O);d.replaceState(k,"",E),o&&f&&f({action:m,location:N.location,delta:0})}function w(S){return u6(S)}let N={get action(){return m},get location(){return e(l,d)},listen(S){if(f)throw new Error("A history only accepts one active listener");return l.addEventListener(rw,p),f=S,()=>{l.removeEventListener(rw,p),f=null}},createHref(S){return r(l,S)},createURL:w,encodeLocation(S){let C=w(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:b,go(S){return d.go(S)}};return N}function u6(e,r=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),br(n,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:bc(e);return a=a.replace(/ $/,"%20"),!r&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function bk(e,r,n="/"){return m6(e,r,n,!1)}function m6(e,r,n,a){let l=typeof r=="string"?ml(r):r,o=Os(l.pathname||"/",n);if(o==null)return null;let d=jk(e);f6(d);let m=null;for(let f=0;m==null&&f<d.length;++f){let h=S6(o);m=N6(d[f],h,a)}return m}function jk(e,r=[],n=[],a="",l=!1){let o=(d,m,f=l,h)=>{let g={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(a)&&f)return;br(g.relativePath.startsWith(a),`Absolute route path "${g.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(a.length)}let p=ks([a,g.relativePath]),v=n.concat(g);d.children&&d.children.length>0&&(br(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),jk(d.children,r,v,p,f)),!(d.path==null&&!d.index)&&r.push({path:p,score:b6(p,d.index),routesMeta:v})};return e.forEach((d,m)=>{var f;if(d.path===""||!((f=d.path)!=null&&f.includes("?")))o(d,m);else for(let h of Nk(d.path))o(d,m,!0,h)}),r}function Nk(e){let r=e.split("/");if(r.length===0)return[];let[n,...a]=r,l=n.endsWith("?"),o=n.replace(/\?$/,"");if(a.length===0)return l?[o,""]:[o];let d=Nk(a.join("/")),m=[];return m.push(...d.map(f=>f===""?o:[o,f].join("/"))),l&&m.push(...d),m.map(f=>e.startsWith("/")&&f===""?"/":f)}function f6(e){e.sort((r,n)=>r.score!==n.score?n.score-r.score:j6(r.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var h6=/^:[\w-]+$/,g6=3,p6=2,x6=1,v6=10,y6=-2,aw=e=>e==="*";function b6(e,r){let n=e.split("/"),a=n.length;return n.some(aw)&&(a+=y6),r&&(a+=p6),n.filter(l=>!aw(l)).reduce((l,o)=>l+(h6.test(o)?g6:o===""?x6:v6),a)}function j6(e,r){return e.length===r.length&&e.slice(0,-1).every((a,l)=>a===r[l])?e[e.length-1]-r[r.length-1]:0}function N6(e,r,n=!1){let{routesMeta:a}=e,l={},o="/",d=[];for(let m=0;m<a.length;++m){let f=a[m],h=m===a.length-1,g=o==="/"?r:r.slice(o.length)||"/",p=Mu({path:f.relativePath,caseSensitive:f.caseSensitive,end:h},g),v=f.route;if(!p&&h&&n&&!a[a.length-1].route.index&&(p=Mu({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!p)return null;Object.assign(l,p.params),d.push({params:l,pathname:ks([o,p.pathname]),pathnameBase:O6(ks([o,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(o=ks([o,p.pathnameBase]))}return d}function Mu(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=w6(e.path,e.caseSensitive,e.end),l=r.match(n);if(!l)return null;let o=l[0],d=o.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:a.reduce((h,{paramName:g,isOptional:p},v)=>{if(g==="*"){let w=m[v]||"";d=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const b=m[v];return p&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:d,pattern:e}}function w6(e,r=!1,n=!0){ja(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,f)=>(a.push({paramName:m,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,r?void 0:"i"),a]}function S6(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return ja(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),e}}function Os(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function k6(e,r="/"){let{pathname:n,search:a="",hash:l=""}=typeof e=="string"?ml(e):e;return{pathname:n?n.startsWith("/")?n:C6(n,r):r,search:A6(a),hash:T6(l)}}function C6(e,r){let n=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function hg(e,r,n,a){return`Cannot include a '${e}' character in a manually specified \`to.${r}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function D6(e){return e.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Jx(e){let r=D6(e);return r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase)}function e0(e,r,n,a=!1){let l;typeof e=="string"?l=ml(e):(l={...e},br(!l.pathname||!l.pathname.includes("?"),hg("?","pathname","search",l)),br(!l.pathname||!l.pathname.includes("#"),hg("#","pathname","hash",l)),br(!l.search||!l.search.includes("#"),hg("#","search","hash",l)));let o=e===""||l.pathname==="",d=o?"/":l.pathname,m;if(d==null)m=n;else{let p=r.length-1;if(!a&&d.startsWith("..")){let v=d.split("/");for(;v[0]==="..";)v.shift(),p-=1;l.pathname=v.join("/")}m=p>=0?r[p]:"/"}let f=k6(l,m),h=d&&d!=="/"&&d.endsWith("/"),g=(o||d===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(h||g)&&(f.pathname+="/"),f}var ks=e=>e.join("/").replace(/\/\/+/g,"/"),O6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),A6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,T6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function I6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var wk=["POST","PUT","PATCH","DELETE"];new Set(wk);var E6=["GET",...wk];new Set(E6);var so=y.createContext(null);so.displayName="DataRouter";var bm=y.createContext(null);bm.displayName="DataRouterState";y.createContext(!1);var Sk=y.createContext({isTransitioning:!1});Sk.displayName="ViewTransition";var M6=y.createContext(new Map);M6.displayName="Fetchers";var P6=y.createContext(null);P6.displayName="Await";var Pa=y.createContext(null);Pa.displayName="Navigation";var Pc=y.createContext(null);Pc.displayName="Location";var Ja=y.createContext({outlet:null,matches:[],isDataRoute:!1});Ja.displayName="Route";var t0=y.createContext(null);t0.displayName="RouteError";function _6(e,{relative:r}={}){br(io(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=y.useContext(Pa),{hash:l,pathname:o,search:d}=_c(e,{relative:r}),m=o;return n!=="/"&&(m=o==="/"?n:ks([n,o])),a.createHref({pathname:m,search:d,hash:l})}function io(){return y.useContext(Pc)!=null}function es(){return br(io(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Pc).location}var kk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ck(e){y.useContext(Pa).static||y.useLayoutEffect(e)}function r0(){let{isDataRoute:e}=y.useContext(Ja);return e?G6():R6()}function R6(){br(io(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(so),{basename:r,navigator:n}=y.useContext(Pa),{matches:a}=y.useContext(Ja),{pathname:l}=es(),o=JSON.stringify(Jx(a)),d=y.useRef(!1);return Ck(()=>{d.current=!0}),y.useCallback((f,h={})=>{if(ja(d.current,kk),!d.current)return;if(typeof f=="number"){n.go(f);return}let g=e0(f,JSON.parse(o),l,h.relative==="path");e==null&&r!=="/"&&(g.pathname=g.pathname==="/"?r:ks([r,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[r,n,o,l,e])}y.createContext(null);function _c(e,{relative:r}={}){let{matches:n}=y.useContext(Ja),{pathname:a}=es(),l=JSON.stringify(Jx(n));return y.useMemo(()=>e0(e,JSON.parse(l),a,r==="path"),[e,l,a,r])}function L6(e,r){return Dk(e,r)}function Dk(e,r,n,a,l){var O;br(io(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=y.useContext(Pa),{matches:d}=y.useContext(Ja),m=d[d.length-1],f=m?m.params:{},h=m?m.pathname:"/",g=m?m.pathnameBase:"/",p=m&&m.route;{let k=p&&p.path||"";Ok(h,!p||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let v=es(),b;if(r){let k=typeof r=="string"?ml(r):r;br(g==="/"||((O=k.pathname)==null?void 0:O.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${k.pathname}" was given in the \`location\` prop.`),b=k}else b=v;let w=b.pathname||"/",N=w;if(g!=="/"){let k=g.replace(/^\//,"").split("/");N="/"+w.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=bk(e,{pathname:N});ja(p||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ja(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=U6(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},f,k.params),pathname:ks([g,o.encodeLocation?o.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?g:ks([g,o.encodeLocation?o.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),d,n,a,l);return r&&C?y.createElement(Pc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},C):C}function $6(){let e=K6(),r=I6(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:o},"ErrorBoundary")," or"," ",y.createElement("code",{style:o},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},r),n?y.createElement("pre",{style:l},n):null,d)}var z6=y.createElement($6,null),B6=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){this.props.unstable_onError?this.props.unstable_onError(e,r):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(Ja.Provider,{value:this.props.routeContext},y.createElement(t0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F6({routeContext:e,match:r,children:n}){let a=y.useContext(so);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),y.createElement(Ja.Provider,{value:e},n)}function U6(e,r=[],n=null,a=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(r.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,d=n==null?void 0:n.errors;if(d!=null){let h=o.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);br(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let m=!1,f=-1;if(n)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=h),g.route.id){let{loaderData:p,errors:v}=n,b=g.route.loader&&!p.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){m=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,g,p)=>{let v,b=!1,w=null,N=null;n&&(v=d&&g.route.id?d[g.route.id]:void 0,w=g.route.errorElement||z6,m&&(f<0&&p===0?(Ok("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,N=null):f===p&&(b=!0,N=g.route.hydrateFallbackElement||null)));let S=r.concat(o.slice(0,p+1)),C=()=>{let O;return v?O=w:b?O=N:g.route.Component?O=y.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=h,y.createElement(F6,{match:g,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:O})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?y.createElement(B6,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:a}):C()},null)}function n0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V6(e){let r=y.useContext(so);return br(r,n0(e)),r}function q6(e){let r=y.useContext(bm);return br(r,n0(e)),r}function W6(e){let r=y.useContext(Ja);return br(r,n0(e)),r}function a0(e){let r=W6(e),n=r.matches[r.matches.length-1];return br(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function H6(){return a0("useRouteId")}function K6(){var a;let e=y.useContext(t0),r=q6("useRouteError"),n=a0("useRouteError");return e!==void 0?e:(a=r.errors)==null?void 0:a[n]}function G6(){let{router:e}=V6("useNavigate"),r=a0("useNavigate"),n=y.useRef(!1);return Ck(()=>{n.current=!0}),y.useCallback(async(l,o={})=>{ja(n.current,kk),n.current&&(typeof l=="number"?e.navigate(l):await e.navigate(l,{fromRouteId:r,...o}))},[e,r])}var sw={};function Ok(e,r,n){!r&&!sw[e]&&(sw[e]=!0,ja(!1,n))}y.memo(Y6);function Y6({routes:e,future:r,state:n,unstable_onError:a}){return Dk(e,void 0,n,a,r)}function iw({to:e,replace:r,state:n,relative:a}){br(io(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=y.useContext(Pa);ja(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=y.useContext(Ja),{pathname:d}=es(),m=r0(),f=e0(e,Jx(o),d,a==="path"),h=JSON.stringify(f);return y.useEffect(()=>{m(JSON.parse(h),{replace:r,state:n,relative:a})},[m,h,a,r,n]),null}function pc(e){br(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Q6({basename:e="/",children:r=null,location:n,navigationType:a="POP",navigator:l,static:o=!1}){br(!io(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:d,navigator:l,static:o,future:{}}),[d,l,o]);typeof n=="string"&&(n=ml(n));let{pathname:f="/",search:h="",hash:g="",state:p=null,key:v="default"}=n,b=y.useMemo(()=>{let w=Os(f,d);return w==null?null:{location:{pathname:w,search:h,hash:g,state:p,key:v},navigationType:a}},[d,f,h,g,p,v,a]);return ja(b!=null,`<Router basename="${d}"> is not able to match the URL "${f}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:y.createElement(Pa.Provider,{value:m},y.createElement(Pc.Provider,{children:r,value:b}))}function X6({children:e,location:r}){return L6(Jp(e),r)}function Jp(e,r=[]){let n=[];return y.Children.forEach(e,(a,l)=>{if(!y.isValidElement(a))return;let o=[...r,l];if(a.type===y.Fragment){n.push.apply(n,Jp(a.props.children,o));return}br(a.type===pc,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),br(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Jp(a.props.children,o)),n.push(d)}),n}var Ou="get",Au="application/x-www-form-urlencoded";function jm(e){return e!=null&&typeof e.tagName=="string"}function Z6(e){return jm(e)&&e.tagName.toLowerCase()==="button"}function J6(e){return jm(e)&&e.tagName.toLowerCase()==="form"}function eI(e){return jm(e)&&e.tagName.toLowerCase()==="input"}function tI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rI(e,r){return e.button===0&&(!r||r==="_self")&&!tI(e)}var cu=null;function nI(){if(cu===null)try{new FormData(document.createElement("form"),0),cu=!1}catch{cu=!0}return cu}var aI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gg(e){return e!=null&&!aI.has(e)?(ja(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Au}"`),null):e}function sI(e,r){let n,a,l,o,d;if(J6(e)){let m=e.getAttribute("action");a=m?Os(m,r):null,n=e.getAttribute("method")||Ou,l=gg(e.getAttribute("enctype"))||Au,o=new FormData(e)}else if(Z6(e)||eI(e)&&(e.type==="submit"||e.type==="image")){let m=e.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||m.getAttribute("action");if(a=f?Os(f,r):null,n=e.getAttribute("formmethod")||m.getAttribute("method")||Ou,l=gg(e.getAttribute("formenctype"))||gg(m.getAttribute("enctype"))||Au,o=new FormData(m,e),!nI()){let{name:h,type:g,value:p}=e;if(g==="image"){let v=h?`${h}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else h&&o.append(h,p)}}else{if(jm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ou,a=null,l=Au,d=e}return o&&l==="text/plain"&&(d=o,o=void 0),{action:a,method:n.toLowerCase(),encType:l,formData:o,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function s0(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function iI(e,r,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${n}`:r&&Os(a.pathname,r)==="/"?a.pathname=`${r.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function lI(e,r){if(e.id in r)return r[e.id];try{let n=await import(e.module);return r[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oI(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function cI(e,r,n){let a=await Promise.all(e.map(async l=>{let o=r.routes[l.route.id];if(o){let d=await lI(o,n);return d.links?d.links():[]}return[]}));return fI(a.flat(1).filter(oI).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function lw(e,r,n,a,l,o){let d=(f,h)=>n[h]?f.route.id!==n[h].route.id:!0,m=(f,h)=>{var g;return n[h].pathname!==f.pathname||((g=n[h].route.path)==null?void 0:g.endsWith("*"))&&n[h].params["*"]!==f.params["*"]};return o==="assets"?r.filter((f,h)=>d(f,h)||m(f,h)):o==="data"?r.filter((f,h)=>{var p;let g=a.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(d(f,h)||m(f,h))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function dI(e,r,{includeHydrateFallback:n}={}){return uI(e.map(a=>{let l=r.routes[a.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function uI(e){return[...new Set(e)]}function mI(e){let r={},n=Object.keys(e).sort();for(let a of n)r[a]=e[a];return r}function fI(e,r){let n=new Set;return new Set(r),e.reduce((a,l)=>{let o=JSON.stringify(mI(l));return n.has(o)||(n.add(o),a.push({key:o,link:l})),a},[])}function Ak(){let e=y.useContext(so);return s0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function hI(){let e=y.useContext(bm);return s0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var i0=y.createContext(void 0);i0.displayName="FrameworkContext";function Tk(){let e=y.useContext(i0);return s0(e,"You must render this element inside a <HydratedRouter> element"),e}function gI(e,r){let n=y.useContext(i0),[a,l]=y.useState(!1),[o,d]=y.useState(!1),{onFocus:m,onBlur:f,onMouseEnter:h,onMouseLeave:g,onTouchStart:p}=r,v=y.useRef(null);y.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let N=C=>{C.forEach(O=>{d(O.isIntersecting)})},S=new IntersectionObserver(N,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(a){let N=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(N)}}},[a]);let b=()=>{l(!0)},w=()=>{l(!1),d(!1)};return n?e!=="intent"?[o,v,{}]:[o,v,{onFocus:lc(m,b),onBlur:lc(f,w),onMouseEnter:lc(h,b),onMouseLeave:lc(g,w),onTouchStart:lc(p,b)}]:[!1,v,{}]}function lc(e,r){return n=>{e&&e(n),n.defaultPrevented||r(n)}}function pI({page:e,...r}){let{router:n}=Ak(),a=y.useMemo(()=>bk(n.routes,e,n.basename),[n.routes,e,n.basename]);return a?y.createElement(vI,{page:e,matches:a,...r}):null}function xI(e){let{manifest:r,routeModules:n}=Tk(),[a,l]=y.useState([]);return y.useEffect(()=>{let o=!1;return cI(e,r,n).then(d=>{o||l(d)}),()=>{o=!0}},[e,r,n]),a}function vI({page:e,matches:r,...n}){let a=es(),{manifest:l,routeModules:o}=Tk(),{basename:d}=Ak(),{loaderData:m,matches:f}=hI(),h=y.useMemo(()=>lw(e,r,f,l,a,"data"),[e,r,f,l,a]),g=y.useMemo(()=>lw(e,r,f,l,a,"assets"),[e,r,f,l,a]),p=y.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let w=new Set,N=!1;if(r.forEach(C=>{var k;let O=l.routes[C.route.id];!O||!O.hasLoader||(!h.some(E=>E.route.id===C.route.id)&&C.route.id in m&&((k=o[C.route.id])!=null&&k.shouldRevalidate)||O.hasClientLoader?N=!0:w.add(C.route.id))}),w.size===0)return[];let S=iI(e,d,"data");return N&&w.size>0&&S.searchParams.set("_routes",r.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[S.pathname+S.search]},[d,m,a,l,h,r,e,o]),v=y.useMemo(()=>dI(g,l),[g,l]),b=xI(g);return y.createElement(y.Fragment,null,p.map(w=>y.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>y.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:N})=>y.createElement("link",{key:w,nonce:n.nonce,...N})))}function yI(...e){return r=>{e.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}var Ik=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ik&&(window.__reactRouterVersion="7.9.4")}catch{}function bI({basename:e,children:r,window:n}){let a=y.useRef();a.current==null&&(a.current=o6({window:n,v5Compat:!0}));let l=a.current,[o,d]=y.useState({action:l.action,location:l.location}),m=y.useCallback(f=>{y.startTransition(()=>d(f))},[d]);return y.useLayoutEffect(()=>l.listen(m),[l,m]),y.createElement(Q6,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:l})}var Ek=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mk=y.forwardRef(function({onClick:r,discover:n="render",prefetch:a="none",relative:l,reloadDocument:o,replace:d,state:m,target:f,to:h,preventScrollReset:g,viewTransition:p,...v},b){let{basename:w}=y.useContext(Pa),N=typeof h=="string"&&Ek.test(h),S,C=!1;if(typeof h=="string"&&N&&(S=h,Ik))try{let z=new URL(window.location.href),U=h.startsWith("//")?new URL(z.protocol+h):new URL(h),q=Os(U.pathname,w);U.origin===z.origin&&q!=null?h=q+U.search+U.hash:C=!0}catch{ja(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=_6(h,{relative:l}),[k,E,M]=gI(a,v),D=wI(h,{replace:d,state:m,target:f,preventScrollReset:g,relative:l,viewTransition:p});function R(z){r&&r(z),z.defaultPrevented||D(z)}let P=y.createElement("a",{...v,...M,href:S||O,onClick:C||o?r:R,ref:yI(b,E),target:f,"data-discover":!N&&n==="render"?"true":void 0});return k&&!N?y.createElement(y.Fragment,null,P,y.createElement(pI,{page:O})):P});Mk.displayName="Link";var ex=y.forwardRef(function({"aria-current":r="page",caseSensitive:n=!1,className:a="",end:l=!1,style:o,to:d,viewTransition:m,children:f,...h},g){let p=_c(d,{relative:h.relative}),v=es(),b=y.useContext(bm),{navigator:w,basename:N}=y.useContext(Pa),S=b!=null&&OI(p)&&m===!0,C=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,O=v.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(O=O.toLowerCase(),k=k?k.toLowerCase():null,C=C.toLowerCase()),k&&N&&(k=Os(k,N)||k);const E=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let M=O===C||!l&&O.startsWith(C)&&O.charAt(E)==="/",D=k!=null&&(k===C||!l&&k.startsWith(C)&&k.charAt(C.length)==="/"),R={isActive:M,isPending:D,isTransitioning:S},P=M?r:void 0,z;typeof a=="function"?z=a(R):z=[a,M?"active":null,D?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(R):o;return y.createElement(Mk,{...h,"aria-current":P,className:z,ref:g,style:U,to:d,viewTransition:m},typeof f=="function"?f(R):f)});ex.displayName="NavLink";var jI=y.forwardRef(({discover:e="render",fetcherKey:r,navigate:n,reloadDocument:a,replace:l,state:o,method:d=Ou,action:m,onSubmit:f,relative:h,preventScrollReset:g,viewTransition:p,...v},b)=>{let w=CI(),N=DI(m,{relative:h}),S=d.toLowerCase()==="get"?"get":"post",C=typeof m=="string"&&Ek.test(m),O=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let E=k.nativeEvent.submitter,M=(E==null?void 0:E.getAttribute("formmethod"))||d;w(E||k.currentTarget,{fetcherKey:r,method:M,navigate:n,replace:l,state:o,relative:h,preventScrollReset:g,viewTransition:p})};return y.createElement("form",{ref:b,method:S,action:N,onSubmit:a?f:O,...v,"data-discover":!C&&e==="render"?"true":void 0})});jI.displayName="Form";function NI(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Pk(e){let r=y.useContext(so);return br(r,NI(e)),r}function wI(e,{target:r,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:d}={}){let m=r0(),f=es(),h=_c(e,{relative:o});return y.useCallback(g=>{if(rI(g,r)){g.preventDefault();let p=n!==void 0?n:bc(f)===bc(h);m(e,{replace:p,state:a,preventScrollReset:l,relative:o,viewTransition:d})}},[f,m,h,n,a,r,e,l,o,d])}var SI=0,kI=()=>`__${String(++SI)}__`;function CI(){let{router:e}=Pk("useSubmit"),{basename:r}=y.useContext(Pa),n=H6();return y.useCallback(async(a,l={})=>{let{action:o,method:d,encType:m,formData:f,body:h}=sI(a,r);if(l.navigate===!1){let g=l.fetcherKey||kI();await e.fetch(g,n,l.action||o,{preventScrollReset:l.preventScrollReset,formData:f,body:h,formMethod:l.method||d,formEncType:l.encType||m,flushSync:l.flushSync})}else await e.navigate(l.action||o,{preventScrollReset:l.preventScrollReset,formData:f,body:h,formMethod:l.method||d,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,r,n])}function DI(e,{relative:r}={}){let{basename:n}=y.useContext(Pa),a=y.useContext(Ja);br(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),o={..._c(e||".",{relative:r})},d=es();if(e==null){o.search=d.search;let m=new URLSearchParams(o.search),f=m.getAll("index");if(f.some(g=>g==="")){m.delete("index"),f.filter(p=>p).forEach(p=>m.append("index",p));let g=m.toString();o.search=g?`?${g}`:""}}return(!e||e===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:ks([n,o.pathname])),bc(o)}function OI(e,{relative:r}={}){let n=y.useContext(Sk);br(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Pk("useViewTransitionState"),l=_c(e,{relative:r});if(!n.isTransitioning)return!1;let o=Os(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=Os(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Mu(l.pathname,d)!=null||Mu(l.pathname,o)!=null}var _k=yk(),dt=(e=>(e.DASHBOARD="dashboard",e.INVENTORY="inventory",e.POS="pos",e.WORK_ORDERS="work_orders",e.ACCOUNTING="accounting",e.BOOKKEEPING="bookkeeping",e.CRM="crm",e.HRM="hrm",e.REPORTS="reports",e.PLANNING="planning",e.WEBSHOP="webshop",e.ADMIN_SETTINGS="admin_settings",e))(dt||{});const AI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),TI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),II=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),EI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),MI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),PI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),_I=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),RI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),LI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),$I=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),zI=({className:e="w-6 h-6"})=>t.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),BI=({className:e="w-6 h-6"})=>t.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Rc=[{id:dt.DASHBOARD,name:"Dashboard",description:"Centraal overzicht van uw bedrijfsactiviteiten.",icon:AI},{id:dt.INVENTORY,name:"Voorraadbeheer",description:"Beheer grondstoffen, halffabricaten en eindproducten.",icon:TI},{id:dt.POS,name:"Kassasysteem (POS)",description:"Verwerk betalingen en registreer verkopen.",icon:II},{id:dt.WORK_ORDERS,name:"Werkorders",description:"Stroomlijn productieprocessen en monitor de voortgang.",icon:EI},{id:dt.ACCOUNTING,name:"Facturen en Offerte",description:"Genereer offertes, facturen en beheer financile gegevens.",icon:MI},{id:dt.BOOKKEEPING,name:"Boekhouding & Dossier",description:"Volledig digitaal boekhouddossier - grootboek, BTW-aangifte, journaal en klantdossiers.",icon:PI},{id:dt.CRM,name:"Klantenbeheer (CRM)",description:"Beheer klantgegevens, taken en verkoopkansen.",icon:_I},{id:dt.HRM,name:"Personeelsbeheer (HRM)",description:"Beheer medewerkers, verlof en prestaties.",icon:RI},{id:dt.PLANNING,name:"Planning & Agenda",description:"Plan werkzaamheden, afspraken en monitor deadlines.",icon:$I},{id:dt.REPORTS,name:"Rapportages",description:"Genereer rapporten en analyseer bedrijfsprestaties.",icon:LI},{id:dt.WEBSHOP,name:"Webshop",description:"Beheer producten, categorien en bestellingen voor uw online winkel.",icon:zI}],tx={id:dt.ADMIN_SETTINGS,name:"Admin Instellingen",description:"Beheer de actieve modules voor alle gebruikers.",icon:BI};[...Rc,tx].reduce((e,r)=>(e[r.id]=r,e),{});const FI=({activeModules:e,isAdmin:r,notifications:n,isMobileOpen:a,onMobileClose:l})=>{const o=Rc.filter(b=>e[b.id]),d=n.filter(b=>!b.read).length,m=y.useRef(null),f=y.useRef(null),h=50,g=b=>{f.current=null,m.current=b.touches[0].clientX},p=b=>{f.current=b.touches[0].clientX},v=()=>{if(!m.current||!f.current)return;m.current-f.current>h&&a&&l()};return t.jsxs(t.Fragment,{children:[a&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:l,onTouchStart:g,onTouchMove:p,onTouchEnd:v}),t.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          w-64 bg-neutral text-white flex flex-col
          transform transition-transform duration-300 ease-in-out
          ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        `,onTouchStart:g,onTouchMove:p,onTouchEnd:v,children:[t.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-700",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Bedrijfsbeheer"}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:"Dashboard Systeem"})]}),t.jsx("button",{onClick:l,className:"lg:hidden p-2 hover:bg-gray-700 rounded-lg transition-colors","aria-label":"Sluit menu",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d>0&&t.jsxs("div",{className:"mt-3 px-3 py-2 bg-red-500 rounded-lg flex items-center justify-between",children:[t.jsx("span",{className:"text-xs sm:text-sm font-semibold",children:"Nieuwe meldingen"}),t.jsx("span",{className:"px-2 py-1 bg-white text-red-500 text-xs font-bold rounded-full",children:d})]})]}),t.jsxs("nav",{className:"flex-1 overflow-y-auto py-2 sm:py-4",children:[o.map(b=>{const w=b.icon;return t.jsxs(ex,{to:`/${b.id}`,onClick:l,className:({isActive:N})=>`flex items-center px-4 sm:px-6 py-3 hover:bg-gray-700 transition-colors ${N?"bg-primary text-white":"text-gray-300"}`,children:[t.jsx(w,{className:"w-5 h-5 mr-3 flex-shrink-0"}),t.jsx("span",{className:"font-medium text-sm sm:text-base",children:b.name})]},b.id)}),r&&t.jsxs(ex,{to:`/${dt.ADMIN_SETTINGS}`,onClick:l,className:({isActive:b})=>`flex items-center px-4 sm:px-6 py-3 hover:bg-gray-700 transition-colors mt-4 border-t border-gray-700 ${b?"bg-primary text-white":"text-gray-300"}`,children:[t.jsx(tx.icon,{className:"w-5 h-5 mr-3 flex-shrink-0"}),t.jsx("span",{className:"font-medium text-sm sm:text-base",children:tx.name})]})]}),t.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-700",children:t.jsxs("div",{className:"flex items-center gap-3 px-3 py-2 bg-gray-700 rounded-lg",children:[t.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-400",children:"Versie"}),t.jsx("p",{className:"text-sm font-semibold text-white",children:"4.5.0"})]})]})})]})]})},UI=({quotes:e,invoices:r,workOrders:n,customers:a,onNavigate:l,onClose:o})=>{const[d,m]=y.useState(""),[f,h]=y.useState(!1),[g,p]=y.useState(0),v=y.useRef(null),b=y.useRef(null),w=y.useMemo(()=>{if(!d||d.length<2)return[];const O=d.toLowerCase(),k=[];return e.forEach(E=>{var P;const M=((P=a.find(z=>z.id===E.customerId))==null?void 0:P.name)||"Onbekend",D=E.id.toLowerCase().includes(O),R=M.toLowerCase().includes(O);(D||R)&&k.push({id:E.id,type:"quote",title:`Offerte ${E.id}`,subtitle:M,amount:E.total,status:E.status,date:E.createdDate,module:dt.ACCOUNTING,onClick:()=>{l(dt.ACCOUNTING,E.id),h(!1),m(""),o&&o()}})}),r.forEach(E=>{const M=a.find(z=>z.id===E.customerId),D=(M==null?void 0:M.name)||(M==null?void 0:M.company)||"Onbekend",R=E.invoiceNumber.toLowerCase().includes(O),P=D.toLowerCase().includes(O);(R||P)&&k.push({id:E.id,type:"invoice",title:`Factuur ${E.invoiceNumber}`,subtitle:D,amount:E.total,status:E.status,date:E.issueDate,module:dt.ACCOUNTING,onClick:()=>{l(dt.ACCOUNTING,E.id),h(!1),m(""),o&&o()}})}),n.forEach(E=>{const M=E.customerId?a.find(U=>U.id===E.customerId):null,D=(M==null?void 0:M.name)||(M==null?void 0:M.company)||"Geen klant",R=E.id.toLowerCase().includes(O),P=E.title.toLowerCase().includes(O),z=D.toLowerCase().includes(O);(R||P||z)&&k.push({id:E.id,type:"workorder",title:E.title,subtitle:`${E.id}  ${D}`,status:E.status,date:E.createdDate,module:dt.WORK_ORDERS,onClick:()=>{l(dt.WORK_ORDERS,E.id),h(!1),m(""),o&&o()}})}),a.forEach(E=>{var P,z;const M=E.name.toLowerCase().includes(O),D=(P=E.company)==null?void 0:P.toLowerCase().includes(O),R=(z=E.email)==null?void 0:z.toLowerCase().includes(O);(M||D||R)&&k.push({id:E.id,type:"customer",title:E.name,subtitle:E.company||E.email||"",module:dt.CRM,onClick:()=>{l(dt.CRM,E.id),h(!1),m(""),o&&o()}})}),k.slice(0,10)},[d,e,r,n,a,l,o]);y.useEffect(()=>{const O=k=>{f&&(k.key==="ArrowDown"?(k.preventDefault(),p(E=>E<w.length-1?E+1:E)):k.key==="ArrowUp"?(k.preventDefault(),p(E=>E>0?E-1:0)):k.key==="Enter"&&w[g]?(k.preventDefault(),w[g].onClick()):k.key==="Escape"&&(h(!1),m(""),o&&o()))};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[f,w,g,o]),y.useEffect(()=>{const O=k=>{v.current&&!v.current.contains(k.target)&&h(!1)};if(f)return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[f]),y.useEffect(()=>{p(0)},[w.length]);const N=O=>{switch(O){case"quote":return"";case"invoice":return"";case"workorder":return"";case"customer":return"";default:return""}},S=O=>{switch(O){case"quote":return"bg-blue-50 border-blue-200 text-blue-700";case"invoice":return"bg-purple-50 border-purple-200 text-purple-700";case"workorder":return"bg-green-50 border-green-200 text-green-700";case"customer":return"bg-gray-50 border-gray-200 text-gray-700";default:return"bg-gray-50 border-gray-200"}},C=O=>{if(!O)return"";switch(O.toLowerCase()){case"paid":case"betaald":case"voltooid":case"completed":case"approved":case"geaccepteerd":return"bg-green-100 text-green-800";case"sent":case"verzonden":case"in uitvoering":case"in progress":return"bg-blue-100 text-blue-800";case"overdue":case"verlopen":case"expired":return"bg-red-100 text-red-800";case"draft":case"concept":case"to do":return"bg-gray-100 text-gray-800";default:return"bg-yellow-100 text-yellow-800"}};return t.jsxs("div",{ref:v,className:"relative flex-1 max-w-2xl mx-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{ref:b,type:"text",value:d,onChange:O=>{m(O.target.value),h(!0)},onFocus:()=>h(!0),placeholder:" Zoek offerte, factuur, werkorder of klant...",className:"w-full px-4 py-2 pl-10 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm sm:text-base"}),t.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),d&&t.jsx("button",{onClick:()=>{m(""),h(!1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),f&&d.length>=2&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 max-h-96 overflow-y-auto z-50",children:w.length>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"p-2 border-b border-gray-200 bg-gray-50",children:t.jsxs("p",{className:"text-xs font-semibold text-gray-600",children:[w.length," resultaat",w.length!==1?"en":""," gevonden"]})}),t.jsx("div",{className:"divide-y divide-gray-200",children:w.map((O,k)=>t.jsx("button",{onClick:O.onClick,className:`w-full text-left p-4 hover:bg-gray-50 transition-colors ${k===g?"bg-blue-50 border-l-4 border-blue-500":""} ${S(O.type)}`,onMouseEnter:()=>p(k),children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[t.jsx("span",{className:"text-2xl flex-shrink-0",children:N(O.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold text-sm text-neutral truncate",children:O.title}),t.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:O.subtitle}),t.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[O.status&&t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C(O.status)}`,children:O.status}),O.date&&t.jsx("span",{className:"text-xs text-gray-500",children:O.date})]})]})]}),O.amount!==void 0&&t.jsx("div",{className:"text-right flex-shrink-0",children:t.jsxs("p",{className:"font-bold text-sm text-primary",children:["",O.amount.toFixed(2)]})})]})},`${O.type}-${O.id}`))}),t.jsx("div",{className:"p-2 border-t border-gray-200 bg-gray-50",children:t.jsx("p",{className:"text-xs text-gray-500",children:"Gebruik  om te navigeren, Enter om te selecteren, Esc om te sluiten"})})]}):t.jsxs("div",{className:"p-8 text-center text-gray-500",children:[t.jsxs("p",{className:"text-sm",children:['Geen resultaten gevonden voor "',d,'"']}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Probeer een andere zoekterm"})]})})]})},VI=({isAdmin:e,notifications:r,setNotifications:n,currentUser:a,onLogout:l,onMobileMenuToggle:o,quotes:d=[],invoices:m=[],workOrders:f=[],customers:h=[],onNavigate:g})=>{const[p,v]=y.useState(!1),[b,w]=y.useState(!1),N=r.filter(E=>!E.read).length,S=E=>{n(r.map(M=>M.id===E?{...M,read:!0}:M))},C=()=>{n(r.map(E=>({...E,read:!0})))},O=E=>{switch(E){case"warning":return"border-l-orange-500 bg-orange-50";case"error":return"border-l-red-500 bg-red-50";case"success":return"border-l-green-500 bg-green-50";default:return"border-l-blue-500 bg-blue-50"}},k=E=>E.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2);return t.jsx("header",{className:"bg-white border-b border-base-300 px-4 sm:px-6 lg:px-8 py-3 sm:py-4",children:t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[t.jsx("button",{onClick:o,className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors flex-shrink-0","aria-label":"Open menu",children:t.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsxs("div",{className:"min-w-0",children:[t.jsxs("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-neutral truncate",children:["Welkom, ",a.name.split(" ")[0]]}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 hidden sm:block",children:"Bedrijfsbeheer Dashboard"})]})]}),g&&t.jsx("div",{className:"hidden md:block flex-1 max-w-2xl mx-4",children:t.jsx(UI,{quotes:d,invoices:m,workOrders:f,customers:h,onNavigate:g})}),t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 lg:gap-4 flex-shrink-0",children:[t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>v(!p),className:"relative p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Meldingen",children:[t.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),N>0&&t.jsx("span",{className:"absolute top-0 right-0 w-4 h-4 sm:w-5 sm:h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:N})]}),p&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>v(!1)}),t.jsxs("div",{className:"absolute right-0 mt-2 w-[calc(100vw-2rem)] sm:w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:[t.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200 flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-neutral text-sm sm:text-base",children:"Meldingen"}),N>0&&t.jsx("button",{onClick:C,className:"text-xs sm:text-sm text-primary hover:text-secondary",children:"Alles gelezen"})]}),t.jsx("div",{className:"divide-y divide-gray-200",children:r.length===0?t.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"Geen meldingen"}):r.slice(0,10).map(E=>t.jsxs("div",{className:`p-3 sm:p-4 border-l-4 ${O(E.type)} ${E.read?"bg-white":"bg-blue-50"}`,children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>S(E.id),children:[t.jsx("p",{className:`text-xs sm:text-sm ${E.read?"":"font-semibold"} text-neutral`,children:E.message}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(E.date).toLocaleString("nl-NL")})]}),!E.read&&t.jsx("button",{onClick:M=>{M.stopPropagation(),S(E.id)},className:"text-gray-400 hover:text-gray-600 text-xs",title:"Markeer als gelezen",children:""})]}),E.actions&&E.actions.length>0&&t.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 flex gap-2 flex-wrap",children:E.actions.map((M,D)=>t.jsx("button",{onClick:R=>{R.stopPropagation(),M.action(),S(E.id)},className:`px-3 py-1.5 text-xs rounded-lg font-medium transition-colors ${M.variant==="primary"?"bg-blue-500 text-white hover:bg-blue-600":M.variant==="secondary"?"bg-gray-500 text-white hover:bg-gray-600":M.variant==="danger"?"bg-red-500 text-white hover:bg-red-600":M.variant==="success"?"bg-green-500 text-white hover:bg-green-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:M.label},D))})]},E.id))})]})]})]}),e&&t.jsx("span",{className:"hidden sm:inline-block px-2 sm:px-3 py-1 bg-primary text-white text-xs sm:text-sm rounded-full",children:"Admin"}),t.jsxs("div",{className:"relative",children:[t.jsxs("button",{onClick:()=>w(!b),className:"flex items-center gap-1 sm:gap-2 hover:bg-gray-100 rounded-lg p-1 sm:p-2 transition-colors","aria-label":"Gebruikersmenu",children:[t.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-primary rounded-full flex items-center justify-center text-white font-semibold text-xs sm:text-sm flex-shrink-0",children:k(a.name)}),t.jsxs("div",{className:"text-left hidden md:block",children:[t.jsx("p",{className:"text-sm font-medium text-neutral",children:a.name}),t.jsx("p",{className:"text-xs text-gray-500",children:a.role})]}),t.jsx("svg",{className:"w-4 h-4 text-gray-500 hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>w(!1)}),t.jsxs("div",{className:"absolute right-0 mt-2 w-56 sm:w-64 bg-white rounded-lg shadow-xl border border-gray-200 z-50",children:[t.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-200",children:[t.jsx("p",{className:"font-semibold text-neutral text-sm sm:text-base",children:a.name}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-600 truncate",children:a.email}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a.role}),e&&t.jsx("span",{className:"inline-block sm:hidden mt-2 px-2 py-1 bg-primary text-white text-xs rounded-full",children:"Admin"})]}),t.jsx("div",{className:"p-2",children:t.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 px-3 sm:px-4 py-2 text-left text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[t.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),t.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Uitloggen"})]})})]})]})]})]})]})})},qI=({employees:e,onLogin:r})=>{const[n,a]=y.useState(""),[l,o]=y.useState(""),[d,m]=y.useState(""),f=g=>{g.preventDefault(),m("");const p=e.find(v=>v.email===n);if(!p){m("Gebruiker niet gevonden");return}if(p.password!==l){m("Onjuist wachtwoord");return}r(p)},h=g=>{a(g.email),o(g.password||""),setTimeout(()=>r(g),100)};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center p-4 sm:p-6 lg:p-8",children:t.jsxs("div",{className:"max-w-md w-full",children:[t.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[t.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-white rounded-full mx-auto mb-4 flex items-center justify-center",children:t.jsx("svg",{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-2",children:"Bedrijfsbeheer"}),t.jsx("p",{className:"text-sm sm:text-base text-white opacity-90",children:"Dashboard Systeem"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-6 sm:p-8",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-neutral mb-4 sm:mb-6",children:"Inloggen"}),t.jsxs("form",{onSubmit:f,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:n,onChange:g=>a(g.target.value),autoComplete:"email",className:"w-full px-3 sm:px-4 py-2 sm:py-3 text-sm sm:text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"naam@bedrijf.nl",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wachtwoord"}),t.jsx("input",{type:"password",value:l,onChange:g=>o(g.target.value),autoComplete:"current-password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"",required:!0})]}),d&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-600",children:d})}),t.jsx("button",{type:"submit",className:"w-full bg-primary text-white py-2 sm:py-3 rounded-lg font-semibold hover:bg-secondary transition-colors text-sm sm:text-base touch-manipulation",children:"Inloggen"})]}),t.jsxs("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 text-center",children:"Demo accounts:"}),t.jsx("div",{className:"space-y-2",children:e.slice(0,4).map(g=>t.jsx("button",{onClick:()=>h(g),className:"w-full px-3 sm:px-4 py-2 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 rounded-lg text-sm text-left transition-colors touch-manipulation",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-neutral",children:g.name}),t.jsx("p",{className:"text-xs text-gray-500",children:g.role})]}),g.role==="Manager Productie"&&t.jsx("span",{className:"px-2 py-1 bg-primary text-white text-xs rounded",children:"Admin"})]})},g.id))}),t.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:'Wachtwoord voor alle accounts: "1234"'})]})]}),t.jsx("p",{className:"text-center text-white text-sm mt-6 opacity-75",children:" 2025 Bedrijfsbeheer Dashboard"})]})})},l0="bedrijfsbeheer_analytics",Rk=()=>{try{const e=localStorage.getItem(l0);return e?JSON.parse(e).events||[]:[]}catch(e){return console.error("Error loading analytics:",e),[]}},o0=e=>{try{const r=Rk(),n={...e,id:`event_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()};r.push(n);const a=r.slice(-1e4);localStorage.setItem(l0,JSON.stringify({events:a,lastUpdated:new Date().toISOString()}))}catch(r){console.error("Error saving analytics:",r)}},Ha=(e,r,n,a,l,o)=>{o0({userId:e,userRole:r,module:n,action:a,actionType:l,metadata:o})},ow=(e,r,n,a,l)=>{o0({userId:e,userRole:r,module:a,action:`navigate_to_${a}`,actionType:"navigate",duration:l,metadata:{fromModule:n}})},WI=(e,r,n,a,l,o,d)=>{o0({userId:e,userRole:r,module:n,action:`complete_${a}`,actionType:"complete",duration:l,metadata:{taskType:a,outcome:"success",errors:d}})},cw=(e,r,n)=>{const a=e.filter(d=>{if(!r&&!n)return!0;const m=new Date(d.timestamp);return!(r&&m<r||n&&m>n)}),l=new Map;a.forEach(d=>{const m=l.get(d.module)||{sessions:new Set,time:0,actions:0,errors:0,lastUsed:new Date(0),events:[]},f=`${d.userId}_${d.timestamp.split("T")[0]}`;m.sessions.add(f),d.duration&&(m.time+=d.duration/6e4),m.actions++,d.actionType==="error"&&m.errors++;const h=new Date(d.timestamp);h>m.lastUsed&&(m.lastUsed=h),m.events.push(d),l.set(d.module,m)});const o=[];return l.forEach((d,m)=>{const f=d.sessions.size>0?d.time/d.sessions.size:0,h=new Date,g=new Date(h.getTime()-336*60*60*1e3),p=new Date(h.getTime()-10080*60*1e3),v=new Date(h.getTime()-10080*60*1e3),b=d.events.filter(S=>{const C=new Date(S.timestamp);return C>=g&&C<p}).length,w=d.events.filter(S=>new Date(S.timestamp)>=v).length;let N="stable";if(b>0){const S=(w-b)/b*100;S>10?N="increasing":S<-10&&(N="decreasing")}o.push({module:m,totalSessions:d.sessions.size,totalTime:Math.round(d.time),averageSessionDuration:Math.round(f),uniqueUsers:new Set(d.events.map(S=>S.userId)).size,actionsCount:d.actions,errorCount:d.errors,lastUsed:d.lastUsed.toISOString(),usageTrend:N})}),o.sort((d,m)=>m.actionsCount-d.actionsCount)},dw=(e,r,n)=>{const a=e.filter(d=>{if(!r&&!n)return!0;const m=new Date(d.timestamp);return!(r&&m<r||n&&m>n)}),l=new Map;a.forEach(d=>{const m=l.get(d.userId)||{name:d.userId,role:d.userRole,sessions:new Set,time:0,modules:new Set,actions:0,completedTasks:0,errors:0,lastActive:new Date(0),events:[]},f=`${d.userId}_${d.timestamp.split("T")[0]}`;m.sessions.add(f),d.duration&&(m.time+=d.duration/6e4),m.modules.add(d.module),m.actions++,d.actionType==="complete"&&m.completedTasks++,d.actionType==="error"&&m.errors++;const h=new Date(d.timestamp);h>m.lastActive&&(m.lastActive=h),m.events.push(d),l.set(d.userId,m)});const o=[];return l.forEach((d,m)=>{var w;const f=d.sessions.size>0?d.time/d.sessions.size:0,h=d.actions>0?d.completedTasks/d.actions*100:0,g=d.actions>0?d.errors/d.actions*100:0,p=Math.max(0,Math.min(100,h*.6+(100-g)*.4)),v=new Map;d.events.forEach(N=>{v.set(N.module,(v.get(N.module)||0)+1)});const b=((w=Array.from(v.entries()).sort((N,S)=>S[1]-N[1])[0])==null?void 0:w[0])||dt.DASHBOARD;o.push({userId:m,userName:d.name,role:d.role,totalSessions:d.sessions.size,totalTime:Math.round(d.time),modulesUsed:Array.from(d.modules),mostUsedModule:b,averageSessionDuration:Math.round(f),lastActive:d.lastActive.toISOString(),efficiencyScore:Math.round(p)})}),o.sort((d,m)=>m.efficiencyScore-d.efficiencyScore)},HI=(e,r)=>{const n=[];return r.forEach(a=>{const l=e.filter(E=>a.steps.some(M=>E.action.includes(M)));if(l.length===0)return;const o=new Map;l.sort((E,M)=>new Date(E.timestamp).getTime()-new Date(M.timestamp).getTime()).forEach(E=>{let M=!1;for(const[D,R]of o.entries()){const P=R[R.length-1],z=new Date(P.timestamp).getTime(),q=(new Date(E.timestamp).getTime()-z)/(1e3*60*60);if(P.userId===E.userId&&P.timestamp.split("T")[0]===E.timestamp.split("T")[0]&&q<4){R.push(E),M=!0;break}}if(!M){const D=`${E.userId}_${E.timestamp.split("T")[0]}_${a.name}_${Date.now()}`;o.set(D,[E])}});let m=0,f=0,h=0,g=0;const p=new Map;o.forEach(E=>{if(E.length===0)return;const M=E.sort((U,q)=>new Date(U.timestamp).getTime()-new Date(q.timestamp).getTime()),D=new Date(M[0].timestamp),R=M.find(U=>U.actionType==="complete")||M[M.length-1],z=(new Date(R.timestamp).getTime()-D.getTime())/6e4;m+=z,f+=M.length,R.actionType==="complete"&&h++,M.some(U=>U.actionType==="error")&&g++;for(let U=1;U<M.length;U++){const q=new Date(M[U-1].timestamp),ee=(new Date(M[U].timestamp).getTime()-q.getTime())/6e4,_=M[U].action,G=p.get(_)||{total:0,count:0};G.total+=ee,G.count++,p.set(_,G)}});const v=o.size,b=v>0?m/v:0,w=v>0?f/v:0,N=v>0?h/v*100:0,S=v>0?g/v*100:0;let C=0;o.forEach(E=>{const M=new Map;E.forEach(D=>{M.set(D.action,(M.get(D.action)||0)+1)}),Array.from(M.values()).some(D=>D>1)&&C++});const O=v>0?C/v*100:0,k=Array.from(p.entries()).map(([E,M])=>({step:E,averageWaitTime:M.count>0?M.total/M.count:0,frequency:M.count})).filter(E=>E.averageWaitTime>5).sort((E,M)=>M.averageWaitTime-E.averageWaitTime).slice(0,5);n.push({processName:a.name,averageCycleTime:Math.round(b),averageSteps:Math.round(w),completionRate:Math.round(N*100)/100,errorRate:Math.round(S*100)/100,reworkRate:Math.round(O*100)/100,bottleneckSteps:k})}),n},KI=(e,r,n,a)=>{const l=[];e.filter(f=>f.totalSessions<5&&f.usageTrend==="decreasing").forEach(f=>{l.push({id:`rec_low_usage_${f.module}`,priority:"medium",category:"feature",title:`Module "${f.module}" wordt weinig gebruikt`,description:`Deze module heeft slechts ${f.totalSessions} sessies. Overweeg betere onboarding of visibility verbetering.`,impact:"Verhoog module adoption met 30%",effort:"low",roi:60,metrics:{current:f.totalSessions,target:f.totalSessions*1.3,unit:"sessies"},actions:["Voeg module toe aan quick access menu","Maak onboarding tutorial voor deze module","Verzend awareness notificatie aan gebruikers"]})}),e.filter(f=>f.errorCount>0&&f.errorCount/f.actionsCount>.1).forEach(f=>{const h=Math.round(f.errorCount/f.actionsCount*100);l.push({id:`rec_errors_${f.module}`,priority:"high",category:"quality",title:`Hoge foutmeldingen in module "${f.module}"`,description:`${h}% van de acties resulteren in fouten. Dit wijst op usability of procesproblemen.`,impact:`Verlaag foutpercentage van ${h}% naar <5%`,effort:"medium",roi:85,metrics:{current:h,target:5,unit:"%"},actions:["Analyseer meest voorkomende fouten","Voeg input validatie toe","Verbeter error messages met duidelijke instructies","Overweeg contextuele help"]})}),n.forEach(f=>{if(f.bottleneckSteps.length>0){const h=f.bottleneckSteps[0];l.push({id:`rec_bottleneck_${f.processName}`,priority:"high",category:"process",title:`Bottleneck gedetecteerd in proces "${f.processName}"`,description:`Stap "${h.step}" heeft gemiddeld ${Math.round(h.averageWaitTime)} minuten wachttijd.`,impact:`Verlaag proces tijd met ${Math.round(h.averageWaitTime*.5)} minuten`,effort:"medium",roi:75,metrics:{current:Math.round(h.averageWaitTime),target:Math.round(h.averageWaitTime*.5),unit:"minuten"},actions:[`Automatiseer stap "${h.step}" waar mogelijk`,"Voeg parallel processing toe","Verbeter resource allocation","Implementeer queue management"]})}f.reworkRate>15&&l.push({id:`rec_rework_${f.processName}`,priority:"medium",category:"quality",title:`Hoge rework rate in proces "${f.processName}"`,description:`${Math.round(f.reworkRate)}% van de taken vereisen meerdere pogingen.`,impact:"Verlaag rework rate naar <5%",effort:"medium",roi:70,metrics:{current:Math.round(f.reworkRate),target:5,unit:"%"},actions:["Verbeter first-time-right rate","Voeg validatie toe aan kritieke stappen","Maak templates/standaarden","Train gebruikers op best practices"]})});const m=r.filter(f=>f.efficiencyScore<60);return m.length>0&&l.push({id:"rec_low_efficiency_users",priority:"medium",category:"usability",title:`${m.length} gebruiker(s) met lage efficiency score`,description:"Sommige gebruikers hebben moeite met het systeem. Extra training of UI verbeteringen kunnen helpen.",impact:"Verhoog efficiency score met 20 punten",effort:"low",roi:65,metrics:{current:Math.round(m.reduce((f,h)=>f+h.efficiencyScore,0)/m.length),target:Math.round(m.reduce((f,h)=>f+h.efficiencyScore,0)/m.length)+20,unit:"score"},actions:["Identificeer specifieke problemen per gebruiker","Bied training sessies aan","Verzamel feedback over moeilijke workflows","Overweeg personalized UI/help"]}),n.forEach(f=>{f.averageCycleTime>60&&f.averageSteps>5&&l.push({id:`rec_automation_${f.processName}`,priority:"low",category:"automation",title:`Automatisering mogelijkheid in "${f.processName}"`,description:`Proces duurt gemiddeld ${Math.round(f.averageCycleTime)} minuten met ${Math.round(f.averageSteps)} stappen.`,impact:"Reduceer proces tijd met 50%",effort:"high",roi:55,metrics:{current:Math.round(f.averageCycleTime),target:Math.round(f.averageCycleTime*.5),unit:"minuten"},actions:["Identificeer repetitieve stappen","Automatiseer data entry waar mogelijk","Implementeer workflow automation","Overweeg batch processing"]})}),l.sort((f,h)=>{const g={high:3,medium:2,low:1};return g[f.priority]!==g[h.priority]?g[h.priority]-g[f.priority]:h.roi-f.roi})},GI=(e="month")=>{const r=Rk();if(r.length===0)return{period:e,startDate:new Date().toISOString(),endDate:new Date().toISOString(),totalEvents:0,totalUsers:0,totalTime:0,moduleStats:[],userStats:[],processMetrics:[],recommendations:[],trends:{usageGrowth:0,efficiencyChange:0,errorRateChange:0}};const n=new Date;let a,l=n;switch(e){case"day":a=new Date(n.getTime()-1440*60*1e3);break;case"week":a=new Date(n.getTime()-10080*60*1e3);break;case"month":a=new Date(n.getTime()-720*60*60*1e3);break;case"quarter":a=new Date(n.getTime()-2160*60*60*1e3);break;case"year":a=new Date(n.getTime()-365*24*60*60*1e3);break;default:a=new Date(n.getTime()-720*60*60*1e3)}const o=cw(r,a,l),d=dw(r,a,l),f=HI(r,[{name:"Offerte  Factuur",steps:["create_quote","create_invoice","convert_to_invoice","validate_invoice","send_invoice","complete"]},{name:"Offerte  Werkorder",steps:["create_quote","convert_to_workorder","create_workorder","start_workorder","complete_workorder","complete"]},{name:"Werkorder  Factuur",steps:["create_workorder","complete_workorder","complete","auto_create_invoice","validate_invoice"]},{name:"Werkorder Lifecycle",steps:["create_workorder","start_workorder","update_status","complete_workorder","complete"]},{name:"Factuur Validatie",steps:["create_invoice","view","validate_invoice","send_invoice","complete"]}]),h=KI(o,d,f),g=new Date(a.getTime()-(l.getTime()-a.getTime())),p=cw(r,g,a),v=o.reduce((D,R)=>D+R.actionsCount,0),b=p.reduce((D,R)=>D+R.actionsCount,0),w=b>0?(v-b)/b*100:0,N=d.length>0?d.reduce((D,R)=>D+R.efficiencyScore,0)/d.length:0,S=dw(r,g,a),C=S.length>0?S.reduce((D,R)=>D+R.efficiencyScore,0)/S.length:0,O=C>0?(N-C)/C*100:0,k=o.reduce((D,R)=>D+R.errorCount,0)/(o.reduce((D,R)=>D+R.actionsCount,0)||1)*100,E=p.reduce((D,R)=>D+R.errorCount,0)/(p.reduce((D,R)=>D+R.actionsCount,0)||1)*100,M=E>0?(k-E)/E*100:0;return{period:e,startDate:a.toISOString(),endDate:l.toISOString(),totalEvents:r.length,totalUsers:new Set(r.map(D=>D.userId)).size,totalTime:Math.round(o.reduce((D,R)=>D+R.totalTime,0)),moduleStats:o,userStats:d,processMetrics:f,recommendations:h.slice(0,10),trends:{usageGrowth:Math.round(w*100)/100,efficiencyChange:Math.round(O*100)/100,errorRateChange:Math.round(M*100)/100}}},YI=()=>{localStorage.removeItem(l0)},pg=JSON.parse(`[{"category":"Connection","issue":"Database connection timeout","severity":"high","message":"Connections to Supabase free-tier instances may time out due to connection limits (max 60 connections) and inactive cold instances in NeonDB serverless. Connections exceeding pool size are rejected.","diagnostic_steps":["Check connection pool size in dashboard","Verify region proximity between app and database","Monitor connection count in real-time","Check for connection leaks in application code","Review connection timeout settings"],"suggested_fix":["Upgrade to Pro plan for higher connection limits","Configure PgBouncer connection pooling (transaction mode)","Move database instance closer to application region","Implement connection retry logic with exponential backoff","Use connection pooling library (pg.Pool) instead of direct connections","Set max connection lifetime to prevent stale connections"],"test_action":"retry_connection","latency":120,"occurrences":5,"vendor_specific_info":{"supabase":"Free tier: 60 connections max. Use Supabase Pooler (port 6543) for better pooling.","neondb":"Serverless instances have cold start delays. Consider Provisioned compute for consistent performance.","planetscale":"Connection limits vary by plan. Branch connections count separately."}},{"category":"Auth","issue":"Invalid API Key","severity":"medium","message":"401 Unauthorized errors occur when SUPABASE_ANON_KEY, SUPABASE_SERVICE_ROLE_KEY, or NeonDB connection string credentials are invalid, expired, or missing from environment variables.","diagnostic_steps":["Verify environment variables are set correctly","Check key expiration in Supabase dashboard","Validate key format (should start with eyJ for JWT keys)","Test API key with curl or Postman","Check for key rotation in recent deployments"],"suggested_fix":["Update keys in environment variables (.env file)","Regenerate keys in Supabase dashboard if compromised","Verify service role key is not exposed to frontend","Use Row Level Security (RLS) policies with anon key","Implement key rotation strategy"],"test_action":"validate_keys","occurrences":3},{"category":"Auth","issue":"Row Level Security (RLS) blocking queries","severity":"medium","message":"Queries return empty results or 403 errors when RLS policies are incorrectly configured or missing. Common in Supabase when tables have RLS enabled but no policies defined.","diagnostic_steps":["Check RLS status in table settings (pgadmin or dashboard)","Review existing RLS policies in auth.policies table","Test query with service role key (bypasses RLS)","Check user authentication context (auth.uid())","Verify policy conditions match query filters"],"suggested_fix":["Create appropriate RLS policies for SELECT, INSERT, UPDATE, DELETE","Use service role key for admin operations (server-side only)","Disable RLS on public tables if not needed (not recommended)","Test policies with different user roles","Use Supabase Dashboard to visualize and debug policies"],"test_action":"test_rls_policies","occurrences":8},{"category":"Performance","issue":"Slow query execution (>2s)","severity":"high","message":"Queries take longer than 2 seconds due to missing indexes, full table scans, or inefficient joins. Especially problematic on large tables in NeonDB serverless with cold starts.","diagnostic_steps":["Run EXPLAIN ANALYZE on slow queries","Check for missing indexes on WHERE/FOREIGN KEY columns","Monitor query execution time in dashboard","Identify N+1 query patterns in application code","Review database query logs for slow queries"],"suggested_fix":["Add indexes on frequently queried columns","Create composite indexes for multi-column filters","Use database query planner to optimize joins","Implement query result caching where appropriate","Consider denormalization for frequently joined data","Use prepared statements to improve query plan caching"],"test_action":"analyze_query_performance","latency":3200,"occurrences":12,"vendor_specific_info":{"neondb":"Serverless compute may have cold start delays (2-5s). Use Provisioned compute for consistent performance.","supabase":"Enable query performance monitoring in dashboard. Use Supabase Edge Functions for complex operations."}},{"category":"Performance","issue":"Cold start delay (serverless)","severity":"medium","message":"NeonDB serverless instances experience 2-5 second cold start delays when inactive for >5 minutes. First query after inactivity is significantly slower.","diagnostic_steps":["Measure first query latency after idle period","Monitor instance activation time in Neon dashboard","Check instance suspend settings","Compare cold vs warm query times"],"suggested_fix":["Upgrade to Provisioned compute (no cold starts)","Implement keep-alive queries every 4 minutes","Use connection pooling with persistent connections","Add retry logic with longer timeout for first request","Pre-warm critical endpoints during deployment"],"test_action":"test_cold_start","latency":4500,"occurrences":15,"vendor_specific_info":{"neondb":"Free tier: auto-suspend after 5 min. Pro: 30 min. Provisioned: never suspends.","planetscale":"Serverless branches auto-scale, minimal cold start impact."}},{"category":"Connection","issue":"Connection pool exhausted","severity":"high","message":"All available database connections are in use, causing new connection attempts to fail. Common with connection leaks, too many concurrent requests, or insufficient pool size.","diagnostic_steps":["Check current connection count vs max limit","Identify long-running queries holding connections","Review application connection pool configuration","Check for unclosed database connections in code","Monitor connection duration and idle time"],"suggested_fix":["Increase connection pool size (if plan allows)","Implement connection timeout and retry logic","Use connection pooler (Supabase Pooler, PgBouncer)","Fix connection leaks (always close connections)","Reduce connection lifetime (maxLifetime setting)","Upgrade database plan for higher connection limits"],"test_action":"check_connection_pool","occurrences":7,"vendor_specific_info":{"supabase":"Use port 6543 (Pooler) instead of 5432 (Direct) for better pooling. Pooler supports 200+ connections.","neondb":"Serverless: connection limits depend on compute size. Provisioned: higher limits available."}},{"category":"Schema","issue":"Migration failures on schema changes","severity":"high","message":"Database migrations fail due to foreign key constraints, existing data conflicts, or schema locks. Common when altering columns with data or adding NOT NULL constraints to existing tables.","diagnostic_steps":["Review migration SQL for constraint violations","Check for dependent foreign keys","Verify data compatibility with new schema","Test migration on staging branch first","Check for active transactions blocking DDL statements"],"suggested_fix":["Add default values before NOT NULL constraints","Migrate data in separate steps (add column  populate  make required)","Drop foreign keys temporarily during migration","Use PlanetScale branch workflow for safe schema changes","Run migrations during low-traffic periods","Use transaction-safe migration tools (Prisma, Flyway)"],"test_action":"test_migration","occurrences":4,"vendor_specific_info":{"planetscale":"Use deploy requests to test schema changes on branch before merging to main.","supabase":"Use Supabase CLI for version-controlled migrations. Test on local instance first."}},{"category":"Schema","issue":"Missing foreign key constraints","severity":"low","message":"Tables lack foreign key relationships, leading to orphaned records and data integrity issues. May cause inconsistent data in relationships.","diagnostic_steps":["Audit table relationships for missing foreign keys","Check for orphaned records in related tables","Review application code for data integrity checks","Validate referential integrity with queries"],"suggested_fix":["Add foreign key constraints to enforce relationships","Clean up existing orphaned records","Set CASCADE rules for DELETE/UPDATE operations","Add indexes on foreign key columns","Document schema relationships"],"test_action":"validate_foreign_keys","occurrences":6},{"category":"Config","issue":"SSL/TLS connection requirement","severity":"medium","message":"Database connections fail when SSL is required but not enabled in connection string. Supabase and NeonDB require SSL for secure connections.","diagnostic_steps":["Verify connection string includes ?sslmode=require","Check for SSL certificate errors in logs","Test connection with SSL enabled/disabled","Review connection library SSL settings"],"suggested_fix":["Add ?sslmode=require to connection string","Use ?sslmode=no-verify for development (not production)","Configure SSL certificates for custom domains","Update database client library to support SSL","Verify SSL certificate is not expired"],"test_action":"test_ssl_connection","occurrences":2},{"category":"Platform","issue":"Database storage quota exceeded","severity":"high","message":"Database has reached storage limit (e.g., Supabase free tier: 500MB, NeonDB free: 3GB). Writes are blocked until storage is freed or plan is upgraded.","diagnostic_steps":["Check current storage usage in dashboard","Identify largest tables and indexes","Review table sizes with pg_total_relation_size","Check for unused indexes consuming space","Analyze growth trends"],"suggested_fix":["Delete unused data or archive old records","Drop unused indexes","Vacuum database to reclaim space","Upgrade to higher tier plan","Implement data retention policies","Compress large text/JSON columns","Move historical data to cold storage"],"test_action":"check_storage_usage","occurrences":1,"vendor_specific_info":{"supabase":"Free: 500MB. Pro: 8GB+. Use Supabase Storage for file storage instead of database.","neondb":"Free: 3GB. Pro: 100GB+. Monitor branch storage separately."}},{"category":"Platform","issue":"Rate limit exceeded (API requests)","severity":"medium","message":"Supabase PostgREST API or NeonDB API requests exceed rate limits. Free tiers typically have 500 requests/second limit. Returns 429 Too Many Requests.","diagnostic_steps":["Monitor API request rate in dashboard","Identify endpoints with high request frequency","Check for N+1 query patterns","Review client-side polling intervals","Analyze API usage patterns"],"suggested_fix":["Implement request batching where possible","Add client-side caching to reduce API calls","Use database subscriptions (Supabase Realtime) instead of polling","Implement rate limiting in application code","Upgrade to Pro plan for higher limits","Optimize queries to reduce round trips"],"test_action":"check_rate_limits","occurrences":9,"vendor_specific_info":{"supabase":"Free: 500 req/s. Pro: 2000 req/s. Use Supabase Realtime subscriptions to reduce polling.","neondb":"API limits depend on plan. Consider connection pooling to reduce API calls."}},{"category":"SDK","issue":"SDK version compatibility issues","severity":"low","message":"Outdated Supabase client library or PostgreSQL driver version causes deprecated API warnings, missing features, or connection errors.","diagnostic_steps":["Check installed SDK version vs latest release","Review changelog for breaking changes","Test with latest SDK version in development","Check for deprecation warnings in console","Verify Node.js/Python version compatibility"],"suggested_fix":["Update to latest stable SDK version","Review migration guide for breaking changes","Update dependencies gradually","Test thoroughly after SDK upgrade","Pin versions in production after testing"],"test_action":"check_sdk_version","occurrences":3},{"category":"Security","issue":"Exposed service role key in frontend","severity":"high","message":"SUPABASE_SERVICE_ROLE_KEY or database credentials are exposed in frontend code or environment variables, allowing full database access bypassing RLS.","diagnostic_steps":["Audit frontend code for hardcoded keys","Check browser Network tab for keys in requests","Review environment variable usage","Scan codebase for credential patterns","Check Git history for committed secrets"],"suggested_fix":["Use only ANON key in frontend","Rotate exposed service role key immediately","Move service role key to backend-only environment","Use Supabase Edge Functions for authenticated operations","Implement proper server-side authentication","Add secrets scanning to CI/CD pipeline"],"test_action":"scan_for_exposed_keys","occurrences":2,"vendor_specific_info":{"supabase":"Service role key bypasses RLS - NEVER expose to frontend. Use only in server-side code or Edge Functions."}},{"category":"Security","issue":"Weak or default database passwords","severity":"high","message":"Database user passwords are weak, default, or reused across environments, creating security vulnerabilities.","diagnostic_steps":["Review password complexity requirements","Check for default passwords in connection strings","Audit password storage and rotation policies","Test password strength","Verify passwords are not in version control"],"suggested_fix":["Generate strong, unique passwords (16+ chars, mixed case, numbers, symbols)","Use password manager for credential storage","Implement password rotation policy","Use managed authentication (Supabase Auth) instead of direct DB auth","Enable two-factor authentication where supported","Store passwords only in secure environment variables"],"test_action":"validate_password_strength","occurrences":1},{"category":"Performance","issue":"N+1 query problem","severity":"medium","message":"Application executes one query per related record instead of batch fetching, causing hundreds of queries for list views. Common with Supabase client when fetching related data.","diagnostic_steps":["Monitor query count for list operations","Review application code for loops with database calls","Check for missing JOIN operations","Profile query execution patterns","Count database round trips per page load"],"suggested_fix":["Use JOIN queries to fetch related data in single query","Implement data fetching with relations (Supabase select with joins)","Use GraphQL-style resolvers with batching","Add application-level caching","Fetch all needed data upfront, filter in memory if small"],"test_action":"detect_n_plus_one","latency":850,"occurrences":11},{"category":"Config","issue":"Incorrect timezone configuration","severity":"low","message":"Database timezone differs from application timezone, causing timestamp mismatches. Dates stored in UTC but displayed in wrong timezone, or vice versa.","diagnostic_steps":["Check database timezone setting (SHOW timezone)","Compare with application timezone configuration","Verify timestamp storage format (UTC vs local)","Test date insertion and retrieval","Review client library timezone handling"],"suggested_fix":["Set database timezone to UTC (standard practice)","Configure application to use UTC internally","Convert timezones only in presentation layer","Use TIMESTAMPTZ instead of TIMESTAMP in PostgreSQL","Document timezone handling strategy"],"test_action":"check_timezone_config","occurrences":4},{"category":"Platform","issue":"Branch merge conflicts (PlanetScale)","severity":"medium","message":"Schema changes in development branch conflict with main branch when attempting to create deploy request. Common when multiple developers work on schema simultaneously.","diagnostic_steps":["Review schema differences between branches","Check for conflicting migrations","Verify branch is up to date with main","Compare table structures","Check PlanetScale deploy request status"],"suggested_fix":["Merge main branch changes into dev branch first","Resolve schema conflicts manually","Coordinate schema changes with team","Use branching strategy to isolate schema changes","Test merge in staging before production"],"test_action":"check_branch_conflicts","occurrences":5,"vendor_specific_info":{"planetscale":"Use branching for schema changes. Merge conflicts must be resolved before deploy. Cannot force push to main branch."}},{"category":"Performance","issue":"Inefficient JSON/JSONB queries","severity":"medium","message":"Queries on JSONB columns lack GIN indexes, causing full table scans. JSON path queries without proper indexing are slow on large datasets.","diagnostic_steps":["Identify queries filtering JSONB columns","Check for existing GIN indexes on JSONB columns","Run EXPLAIN on JSONB queries","Measure query performance with/without indexes"],"suggested_fix":["Create GIN indexes on JSONB columns used in WHERE clauses","Use jsonb_path_ops for better index performance","Extract frequently queried JSON fields to regular columns","Optimize JSONB query syntax for index usage","Consider document database for complex JSON structures"],"test_action":"analyze_jsonb_queries","latency":1800,"occurrences":6},{"category":"Connection","issue":"Network latency to database region","severity":"medium","message":"High latency (>100ms) between application and database regions causes slow query responses. Common when app and DB are in different continents.","diagnostic_steps":["Measure ping latency to database host","Compare latency from different application regions","Check database region in dashboard","Test query times from multiple locations","Monitor network hops with traceroute"],"suggested_fix":["Move database to same region as application","Use read replicas in multiple regions","Implement edge caching (CDN) for read-heavy queries","Use connection pooling with keep-alive","Consider multi-region deployment strategy"],"test_action":"measure_latency","latency":250,"occurrences":8,"vendor_specific_info":{"supabase":"Database regions: US, EU, APAC. Choose closest to users. Can migrate regions (downtime required).","neondb":"Multi-region support. Create read replicas in different regions for global apps."}},{"category":"Schema","issue":"Missing indexes on foreign keys","severity":"low","message":"Foreign key columns lack indexes, causing slow JOIN operations and FK constraint checks. PostgreSQL doesn't auto-create indexes on FK columns.","diagnostic_steps":["Identify foreign key columns without indexes","Check index usage statistics","Review slow JOIN queries","Run EXPLAIN on queries joining tables"],"suggested_fix":["Create indexes on all foreign key columns","Use composite indexes for multi-column foreign keys","Review index usage and remove unused indexes","Monitor index maintenance overhead"],"test_action":"check_foreign_key_indexes","latency":600,"occurrences":10},{"category":"Config","issue":"Connection string format errors","severity":"medium","message":"Database connection string is malformed, missing parameters, or contains special characters that break URL parsing. Common with environment variable substitutions.","diagnostic_steps":["Validate connection string format","Check for URL encoding issues with special characters","Verify all required parameters are present","Test connection string with database client","Review environment variable interpolation"],"suggested_fix":["URL-encode special characters in password/connection string","Use connection string builder libraries","Store connection string in secure environment variable","Validate connection string on application startup","Document required connection string format","Use connection URI format: postgresql://user:pass@host:port/db"],"test_action":"validate_connection_string","occurrences":3},{"category":"Misc","issue":"Database backup not configured","severity":"high","message":"No automated backups are configured, risking data loss in case of corruption, accidental deletion, or database failure. Free tiers may have limited backup retention.","diagnostic_steps":["Check backup settings in database dashboard","Verify backup frequency and retention period","Test backup restoration process","Review backup storage location","Check last successful backup timestamp"],"suggested_fix":["Enable automated daily backups","Configure point-in-time recovery (PITR) if available","Test backup restoration regularly","Store backups in separate region for disaster recovery","Document backup and restore procedures","Upgrade plan for longer backup retention if needed"],"test_action":"check_backup_status","occurrences":2,"vendor_specific_info":{"supabase":"Pro plan: 7 days PITR. Free tier: limited backups. Export data manually.","neondb":"Automated backups available. PITR on Pro plan. Branch snapshots for schema changes.","planetscale":"Automatic daily backups. Branch-based backup strategy."}},{"category":"Performance","issue":"Large transaction rollbacks","severity":"medium","message":"Large transactions (updating thousands of rows) take long to rollback on failure, locking resources and blocking other queries. Rollback time can exceed original transaction time.","diagnostic_steps":["Monitor transaction duration and size","Check for long-running transactions in pg_stat_activity","Identify transactions with many row updates","Review application error handling and rollback frequency"],"suggested_fix":["Break large transactions into smaller batches","Use idempotent operations to allow retries","Implement optimistic locking for conflicts","Set appropriate transaction timeout","Use savepoints for partial rollbacks","Consider async processing for large operations"],"test_action":"monitor_transactions","latency":5000,"occurrences":4}]`);function Lk(e){var r,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(r=0;r<l;r++)e[r]&&(n=Lk(e[r]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Vt(){for(var e,r,n=0,a="",l=arguments.length;n<l;n++)(e=arguments[n])&&(r=Lk(e))&&(a&&(a+=" "),a+=r);return a}var QI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function c0(e){if(typeof e!="string")return!1;var r=QI;return r.includes(e)}var XI=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function $k(e){if(typeof e!="string")return!1;var r=XI;return r.includes(e)}function zk(e){return typeof e=="string"&&e.startsWith("data-")}function ra(e){var r=Object.entries(e).filter(n=>{var[a]=n;return $k(a)||zk(a)});return Object.fromEntries(r)}function rl(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var r=e.props;return ra(r)}return typeof e=="object"&&!Array.isArray(e)?ra(e):null}function An(e){var r=Object.entries(e).filter(n=>{var[a]=n;return $k(a)||zk(a)||c0(a)});return Object.fromEntries(r)}function ZI(e){return e==null?null:y.isValidElement(e)?An(e.props):typeof e=="object"&&!Array.isArray(e)?An(e):null}var JI=["children","width","height","viewBox","className","style","title","desc"];function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},rx.apply(null,arguments)}function eE(e,r){if(e==null)return{};var n,a,l=tE(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function tE(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var d0=y.forwardRef((e,r)=>{var{children:n,width:a,height:l,viewBox:o,className:d,style:m,title:f,desc:h}=e,g=eE(e,JI),p=o||{width:a,height:l,x:0,y:0},v=Vt("recharts-surface",d);return y.createElement("svg",rx({},An(g),{className:v,width:a,height:l,style:m,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:r}),y.createElement("title",null,f),y.createElement("desc",null,h),n)}),rE=["children","className"];function nx(){return nx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nx.apply(null,arguments)}function nE(e,r){if(e==null)return{};var n,a,l=aE(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function aE(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var dn=y.forwardRef((e,r)=>{var{children:n,className:a}=e,l=nE(e,rE),o=Vt("recharts-layer",a);return y.createElement("g",nx({className:o},An(l),{ref:r}),n)}),Bk=y.createContext(null),sE=()=>y.useContext(Bk);function cr(e){return function(){return e}}const Fk=Math.cos,Pu=Math.sin,_a=Math.sqrt,_u=Math.PI,Nm=2*_u,ax=Math.PI,sx=2*ax,Hi=1e-6,iE=sx-Hi;function Uk(e){this._+=e[0];for(let r=1,n=e.length;r<n;++r)this._+=arguments[r]+e[r]}function lE(e){let r=Math.floor(e);if(!(r>=0))throw new Error(`invalid digits: ${e}`);if(r>15)return Uk;const n=10**r;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}class oE{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?Uk:lE(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,a,l){this._append`Q${+r},${+n},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(r,n,a,l,o,d){this._append`C${+r},${+n},${+a},${+l},${this._x1=+o},${this._y1=+d}`}arcTo(r,n,a,l,o){if(r=+r,n=+n,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let d=this._x1,m=this._y1,f=a-r,h=l-n,g=d-r,p=m-n,v=g*g+p*p;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(v>Hi)if(!(Math.abs(p*f-h*g)>Hi)||!o)this._append`L${this._x1=r},${this._y1=n}`;else{let b=a-d,w=l-m,N=f*f+h*h,S=b*b+w*w,C=Math.sqrt(N),O=Math.sqrt(v),k=o*Math.tan((ax-Math.acos((N+v-S)/(2*C*O)))/2),E=k/O,M=k/C;Math.abs(E-1)>Hi&&this._append`L${r+E*g},${n+E*p}`,this._append`A${o},${o},0,0,${+(p*b>g*w)},${this._x1=r+M*f},${this._y1=n+M*h}`}}arc(r,n,a,l,o,d){if(r=+r,n=+n,a=+a,d=!!d,a<0)throw new Error(`negative radius: ${a}`);let m=a*Math.cos(l),f=a*Math.sin(l),h=r+m,g=n+f,p=1^d,v=d?l-o:o-l;this._x1===null?this._append`M${h},${g}`:(Math.abs(this._x1-h)>Hi||Math.abs(this._y1-g)>Hi)&&this._append`L${h},${g}`,a&&(v<0&&(v=v%sx+sx),v>iE?this._append`A${a},${a},0,1,${p},${r-m},${n-f}A${a},${a},0,1,${p},${this._x1=h},${this._y1=g}`:v>Hi&&this._append`A${a},${a},0,${+(v>=ax)},${p},${this._x1=r+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(r,n,a,l){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function u0(e){let r=3;return e.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);r=a}return e},()=>new oE(r)}function m0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vk(e){this._context=e}Vk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:this._context.lineTo(e,r);break}}};function wm(e){return new Vk(e)}function qk(e){return e[0]}function Wk(e){return e[1]}function Hk(e,r){var n=cr(!0),a=null,l=wm,o=null,d=u0(m);e=typeof e=="function"?e:e===void 0?qk:cr(e),r=typeof r=="function"?r:r===void 0?Wk:cr(r);function m(f){var h,g=(f=m0(f)).length,p,v=!1,b;for(a==null&&(o=l(b=d())),h=0;h<=g;++h)!(h<g&&n(p=f[h],h,f))===v&&((v=!v)?o.lineStart():o.lineEnd()),v&&o.point(+e(p,h,f),+r(p,h,f));if(b)return o=null,b+""||null}return m.x=function(f){return arguments.length?(e=typeof f=="function"?f:cr(+f),m):e},m.y=function(f){return arguments.length?(r=typeof f=="function"?f:cr(+f),m):r},m.defined=function(f){return arguments.length?(n=typeof f=="function"?f:cr(!!f),m):n},m.curve=function(f){return arguments.length?(l=f,a!=null&&(o=l(a)),m):l},m.context=function(f){return arguments.length?(f==null?a=o=null:o=l(a=f),m):a},m}function du(e,r,n){var a=null,l=cr(!0),o=null,d=wm,m=null,f=u0(h);e=typeof e=="function"?e:e===void 0?qk:cr(+e),r=typeof r=="function"?r:cr(r===void 0?0:+r),n=typeof n=="function"?n:n===void 0?Wk:cr(+n);function h(p){var v,b,w,N=(p=m0(p)).length,S,C=!1,O,k=new Array(N),E=new Array(N);for(o==null&&(m=d(O=f())),v=0;v<=N;++v){if(!(v<N&&l(S=p[v],v,p))===C)if(C=!C)b=v,m.areaStart(),m.lineStart();else{for(m.lineEnd(),m.lineStart(),w=v-1;w>=b;--w)m.point(k[w],E[w]);m.lineEnd(),m.areaEnd()}C&&(k[v]=+e(S,v,p),E[v]=+r(S,v,p),m.point(a?+a(S,v,p):k[v],n?+n(S,v,p):E[v]))}if(O)return m=null,O+""||null}function g(){return Hk().defined(l).curve(d).context(o)}return h.x=function(p){return arguments.length?(e=typeof p=="function"?p:cr(+p),a=null,h):e},h.x0=function(p){return arguments.length?(e=typeof p=="function"?p:cr(+p),h):e},h.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:cr(+p),h):a},h.y=function(p){return arguments.length?(r=typeof p=="function"?p:cr(+p),n=null,h):r},h.y0=function(p){return arguments.length?(r=typeof p=="function"?p:cr(+p),h):r},h.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:cr(+p),h):n},h.lineX0=h.lineY0=function(){return g().x(e).y(r)},h.lineY1=function(){return g().x(e).y(n)},h.lineX1=function(){return g().x(a).y(r)},h.defined=function(p){return arguments.length?(l=typeof p=="function"?p:cr(!!p),h):l},h.curve=function(p){return arguments.length?(d=p,o!=null&&(m=d(o)),h):d},h.context=function(p){return arguments.length?(p==null?o=m=null:m=d(o=p),h):o},h}class Kk{constructor(r,n){this._context=r,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,n){switch(r=+r,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,n,r,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,r,this._y0,r,n);break}}this._x0=r,this._y0=n}}function cE(e){return new Kk(e,!0)}function dE(e){return new Kk(e,!1)}const f0={draw(e,r){const n=_a(r/_u);e.moveTo(n,0),e.arc(0,0,n,0,Nm)}},uE={draw(e,r){const n=_a(r/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Gk=_a(1/3),mE=Gk*2,fE={draw(e,r){const n=_a(r/mE),a=n*Gk;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},hE={draw(e,r){const n=_a(r),a=-n/2;e.rect(a,a,n,n)}},gE=.8908130915292852,Yk=Pu(_u/10)/Pu(7*_u/10),pE=Pu(Nm/10)*Yk,xE=-Fk(Nm/10)*Yk,vE={draw(e,r){const n=_a(r*gE),a=pE*n,l=xE*n;e.moveTo(0,-n),e.lineTo(a,l);for(let o=1;o<5;++o){const d=Nm*o/5,m=Fk(d),f=Pu(d);e.lineTo(f*n,-m*n),e.lineTo(m*a-f*l,f*a+m*l)}e.closePath()}},xg=_a(3),yE={draw(e,r){const n=-_a(r/(xg*3));e.moveTo(0,n*2),e.lineTo(-xg*n,-n),e.lineTo(xg*n,-n),e.closePath()}},ga=-.5,pa=_a(3)/2,ix=1/_a(12),bE=(ix/2+1)*3,jE={draw(e,r){const n=_a(r/bE),a=n/2,l=n*ix,o=a,d=n*ix+n,m=-o,f=d;e.moveTo(a,l),e.lineTo(o,d),e.lineTo(m,f),e.lineTo(ga*a-pa*l,pa*a+ga*l),e.lineTo(ga*o-pa*d,pa*o+ga*d),e.lineTo(ga*m-pa*f,pa*m+ga*f),e.lineTo(ga*a+pa*l,ga*l-pa*a),e.lineTo(ga*o+pa*d,ga*d-pa*o),e.lineTo(ga*m+pa*f,ga*f-pa*m),e.closePath()}};function NE(e,r){let n=null,a=u0(l);e=typeof e=="function"?e:cr(e||f0),r=typeof r=="function"?r:cr(r===void 0?64:+r);function l(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+r.apply(this,arguments)),o)return n=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:cr(o),l):e},l.size=function(o){return arguments.length?(r=typeof o=="function"?o:cr(+o),l):r},l.context=function(o){return arguments.length?(n=o??null,l):n},l}function Ru(){}function Lu(e,r,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+r)/6,(e._y0+4*e._y1+n)/6)}function Qk(e){this._context=e}Qk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lu(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function wE(e){return new Qk(e)}function Xk(e){this._context=e}Xk.prototype={areaStart:Ru,areaEnd:Ru,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._x2=e,this._y2=r;break;case 1:this._point=2,this._x3=e,this._y3=r;break;case 2:this._point=3,this._x4=e,this._y4=r,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+r)/6);break;default:Lu(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function SE(e){return new Xk(e)}function Zk(e){this._context=e}Zk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Lu(this,e,r);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r}};function kE(e){return new Zk(e)}function Jk(e){this._context=e}Jk.prototype={areaStart:Ru,areaEnd:Ru,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,r){e=+e,r=+r,this._point?this._context.lineTo(e,r):(this._point=1,this._context.moveTo(e,r))}};function CE(e){return new Jk(e)}function uw(e){return e<0?-1:1}function mw(e,r,n){var a=e._x1-e._x0,l=r-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),d=(n-e._y1)/(l||a<0&&-0),m=(o*l+d*a)/(a+l);return(uw(o)+uw(d))*Math.min(Math.abs(o),Math.abs(d),.5*Math.abs(m))||0}function fw(e,r){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-r)/2:r}function vg(e,r,n){var a=e._x0,l=e._y0,o=e._x1,d=e._y1,m=(o-a)/3;e._context.bezierCurveTo(a+m,l+m*r,o-m,d-m*n,o,d)}function $u(e){this._context=e}$u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:vg(this,this._t0,fw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,r){var n=NaN;if(e=+e,r=+r,!(e===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;break;case 2:this._point=3,vg(this,fw(this,n=mw(this,e,r)),n);break;default:vg(this,this._t0,n=mw(this,e,r));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=r,this._t0=n}}};function eC(e){this._context=new tC(e)}(eC.prototype=Object.create($u.prototype)).point=function(e,r){$u.prototype.point.call(this,r,e)};function tC(e){this._context=e}tC.prototype={moveTo:function(e,r){this._context.moveTo(r,e)},closePath:function(){this._context.closePath()},lineTo:function(e,r){this._context.lineTo(r,e)},bezierCurveTo:function(e,r,n,a,l,o){this._context.bezierCurveTo(r,e,a,n,o,l)}};function DE(e){return new $u(e)}function OE(e){return new eC(e)}function rC(e){this._context=e}rC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,r=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],r[0]):this._context.moveTo(e[0],r[0]),n===2)this._context.lineTo(e[1],r[1]);else for(var a=hw(e),l=hw(r),o=0,d=1;d<n;++o,++d)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[d],r[d]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,r){this._x.push(+e),this._y.push(+r)}};function hw(e){var r,n=e.length-1,a,l=new Array(n),o=new Array(n),d=new Array(n);for(l[0]=0,o[0]=2,d[0]=e[0]+2*e[1],r=1;r<n-1;++r)l[r]=1,o[r]=4,d[r]=4*e[r]+2*e[r+1];for(l[n-1]=2,o[n-1]=7,d[n-1]=8*e[n-1]+e[n],r=1;r<n;++r)a=l[r]/o[r-1],o[r]-=a,d[r]-=a*d[r-1];for(l[n-1]=d[n-1]/o[n-1],r=n-2;r>=0;--r)l[r]=(d[r]-l[r+1])/o[r];for(o[n-1]=(e[n]+l[n-1])/2,r=0;r<n-1;++r)o[r]=2*e[r+1]-l[r+1];return[l,o]}function AE(e){return new rC(e)}function Sm(e,r){this._context=e,this._t=r}Sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,r){switch(e=+e,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(e,r);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=e,this._y=r}};function TE(e){return new Sm(e,.5)}function IE(e){return new Sm(e,0)}function EE(e){return new Sm(e,1)}function Xl(e,r){if((d=e.length)>1)for(var n=1,a,l,o=e[r[0]],d,m=o.length;n<d;++n)for(l=o,o=e[r[n]],a=0;a<m;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function lx(e){for(var r=e.length,n=new Array(r);--r>=0;)n[r]=r;return n}function ME(e,r){return e[r]}function PE(e){const r=[];return r.key=e,r}function _E(){var e=cr([]),r=lx,n=Xl,a=ME;function l(o){var d=Array.from(e.apply(this,arguments),PE),m,f=d.length,h=-1,g;for(const p of o)for(m=0,++h;m<f;++m)(d[m][h]=[0,+a(p,d[m].key,h,o)]).data=p;for(m=0,g=m0(r(d));m<f;++m)d[g[m]].index=m;return n(d,g),d}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:cr(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:cr(+o),l):a},l.order=function(o){return arguments.length?(r=o==null?lx:typeof o=="function"?o:cr(Array.from(o)),l):r},l.offset=function(o){return arguments.length?(n=o??Xl,l):n},l}function RE(e,r){if((a=e.length)>0){for(var n,a,l=0,o=e[0].length,d;l<o;++l){for(d=n=0;n<a;++n)d+=e[n][l][1]||0;if(d)for(n=0;n<a;++n)e[n][l][1]/=d}Xl(e,r)}}function LE(e,r){if((l=e.length)>0){for(var n=0,a=e[r[0]],l,o=a.length;n<o;++n){for(var d=0,m=0;d<l;++d)m+=e[d][n][1]||0;a[n][1]+=a[n][0]=-m/2}Xl(e,r)}}function $E(e,r){if(!(!((d=e.length)>0)||!((o=(l=e[r[0]]).length)>0))){for(var n=0,a=1,l,o,d;a<o;++a){for(var m=0,f=0,h=0;m<d;++m){for(var g=e[r[m]],p=g[a][1]||0,v=g[a-1][1]||0,b=(p-v)/2,w=0;w<m;++w){var N=e[r[w]],S=N[a][1]||0,C=N[a-1][1]||0;b+=S-C}f+=p,h+=b*p}l[a-1][1]+=l[a-1][0]=n,f&&(n-=h/f)}l[a-1][1]+=l[a-1][0]=n,Xl(e,r)}}var yg={},bg={},gw;function zE(){return gw||(gw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n==="__proto__"}e.isUnsafeProperty=r})(bg)),bg}var jg={},pw;function nC(){return pw||(pw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=r})(jg)),jg}var Ng={},xw;function h0(){return xw||(xw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){var a;return typeof n=="string"||typeof n=="symbol"?n:Object.is((a=n==null?void 0:n.valueOf)==null?void 0:a.call(n),-0)?"-0":String(n)}e.toKey=r})(Ng)),Ng}var wg={},Sg={},vw;function BE(){return vw||(vw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(r).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=r})(Sg)),Sg}var yw;function g0(){return yw||(yw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=BE(),n=h0();function a(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=r.toString(l);const o=[],d=l.length;if(d===0)return o;let m=0,f="",h="",g=!1;for(l.charCodeAt(0)===46&&(o.push(""),m++);m<d;){const p=l[m];h?p==="\\"&&m+1<d?(m++,f+=l[m]):p===h?h="":f+=p:g?p==='"'||p==="'"?h=p:p==="]"?(g=!1,o.push(f),f=""):f+=p:p==="["?(g=!0,f&&(o.push(f),f="")):p==="."?f&&(o.push(f),f=""):f+=p,m++}return f&&o.push(f),o}e.toPath=a})(wg)),wg}var bw;function p0(){return bw||(bw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=zE(),n=nC(),a=h0(),l=g0();function o(m,f,h){if(m==null)return h;switch(typeof f){case"string":{if(r.isUnsafeProperty(f))return h;const g=m[f];return g===void 0?n.isDeepKey(f)?o(m,l.toPath(f),h):h:g}case"number":case"symbol":{typeof f=="number"&&(f=a.toKey(f));const g=m[f];return g===void 0?h:g}default:{if(Array.isArray(f))return d(m,f,h);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),r.isUnsafeProperty(f))return h;const g=m[f];return g===void 0?h:g}}}function d(m,f,h){if(f.length===0)return h;let g=m;for(let p=0;p<f.length;p++){if(g==null||r.isUnsafeProperty(f[p]))return h;g=g[f[p]]}return g===void 0?h:g}e.get=o})(yg)),yg}var kg,jw;function FE(){return jw||(jw=1,kg=p0().get),kg}var UE=FE();const nl=Za(UE);var Jr=e=>e===0?0:e>0?1:-1,Na=e=>typeof e=="number"&&e!=+e,As=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ct=e=>(typeof e=="number"||e instanceof Number)&&!Na(e),Qa=e=>ct(e)||typeof e=="string",VE=0,jc=e=>{var r=++VE;return"".concat(e||"").concat(r)},yn=function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ct(r)&&typeof r!="string")return a;var o;if(As(r)){if(n==null)return a;var d=r.indexOf("%");o=n*parseFloat(r.slice(0,d))/100}else o=+r;return Na(o)&&(o=a),l&&n!=null&&o>n&&(o=n),o},aC=e=>{if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1};function Or(e,r,n){return ct(e)&&ct(r)?e+n*(r-e):r}function sC(e,r,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof r=="function"?r(a):nl(a,r))===n)}var jr=e=>e===null||typeof e>"u",Lc=e=>jr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),qE=["type","size","sizeType"];function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ox.apply(null,arguments)}function Nw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ww(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Nw(Object(n),!0).forEach(function(a){WE(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WE(e,r,n){return(r=HE(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function HE(e){var r=KE(e,"string");return typeof r=="symbol"?r:r+""}function KE(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function GE(e,r){if(e==null)return{};var n,a,l=YE(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function YE(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var iC={symbolCircle:f0,symbolCross:uE,symbolDiamond:fE,symbolSquare:hE,symbolStar:vE,symbolTriangle:yE,symbolWye:jE},QE=Math.PI/180,XE=e=>{var r="symbol".concat(Lc(e));return iC[r]||f0},ZE=(e,r,n)=>{if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*QE;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},JE=(e,r)=>{iC["symbol".concat(Lc(e))]=r},x0=e=>{var{type:r="circle",size:n=64,sizeType:a="area"}=e,l=GE(e,qE),o=ww(ww({},l),{},{type:r,size:n,sizeType:a}),d="circle";typeof r=="string"&&(d=r);var m=()=>{var v=XE(d),b=NE().type(v).size(ZE(n,a,d)),w=b();if(w!==null)return w},{className:f,cx:h,cy:g}=o,p=An(o);return h===+h&&g===+g&&n===+n?y.createElement("path",ox({},p,{className:Vt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(g,")"),d:m()})):null};x0.registerSymbol=JE;var v0=(e,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(l=>{c0(l)&&(a[l]=(o=>n[l](n,o)))}),a},e5=(e,r,n)=>a=>(e(r,n,a),null),$c=(e,r,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];c0(l)&&typeof o=="function"&&(a||(a={}),a[l]=e5(o,r,n))}),a};function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cx.apply(null,arguments)}function Sw(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function t5(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Sw(Object(n),!0).forEach(function(a){y0(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sw(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function y0(e,r,n){return(r=r5(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function r5(e){var r=n5(e,"string");return typeof r=="symbol"?r:r+""}function n5(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var xa=32;class b0 extends y.PureComponent{renderIcon(r,n){var{inactiveColor:a}=this.props,l=xa/2,o=xa/6,d=xa/3,m=r.inactive?a:r.color,f=n??r.type;if(f==="none")return null;if(f==="plainline")return y.createElement("line",{strokeWidth:4,fill:"none",stroke:m,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:l,x2:xa,y2:l,className:"recharts-legend-icon"});if(f==="line")return y.createElement("path",{strokeWidth:4,fill:"none",stroke:m,d:"M0,".concat(l,"h").concat(d,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*d,",").concat(l,`
            H`).concat(xa,"M").concat(2*d,",").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(d,",").concat(l),className:"recharts-legend-icon"});if(f==="rect")return y.createElement("path",{stroke:"none",fill:m,d:"M0,".concat(xa/8,"h").concat(xa,"v").concat(xa*3/4,"h").concat(-xa,"z"),className:"recharts-legend-icon"});if(y.isValidElement(r.legendIcon)){var h=t5({},r);return delete h.legendIcon,y.cloneElement(r.legendIcon,h)}return y.createElement(x0,{fill:m,cx:l,cy:l,size:xa,sizeType:"diameter",type:f})}renderItems(){var{payload:r,iconSize:n,layout:a,formatter:l,inactiveColor:o,iconType:d}=this.props,m={x:0,y:0,width:xa,height:xa},f={display:a==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((g,p)=>{var v=g.formatter||l,b=Vt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:g.inactive});if(g.type==="none")return null;var w=g.inactive?o:g.color,N=v?v(g.value,g,p):g.value;return y.createElement("li",cx({className:b,style:f,key:"legend-item-".concat(p)},$c(this.props,g,p)),y.createElement(d0,{width:n,height:n,viewBox:m,style:h,"aria-label":"".concat(N," legend icon")},this.renderIcon(g,d)),y.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},N))})}render(){var{payload:r,layout:n,align:a}=this.props;if(!r||!r.length)return null;var l={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return y.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}y0(b0,"displayName","Legend");y0(b0,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Cg={},Dg={},kw;function a5(){return kw||(kw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a){const l=new Map;for(let o=0;o<n.length;o++){const d=n[o],m=a(d);l.has(m)||l.set(m,d)}return Array.from(l.values())}e.uniqBy=r})(Dg)),Dg}var Og={},Cw;function lC(){return Cw||(Cw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n}e.identity=r})(Og)),Og}var Ag={},Tg={},Ig={},Dw;function s5(){return Dw||(Dw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=r})(Ig)),Ig}var Ow;function j0(){return Ow||(Ow=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=s5();function n(a){return a!=null&&typeof a!="function"&&r.isLength(a.length)}e.isArrayLike=n})(Tg)),Tg}var Eg={},Aw;function i5(){return Aw||(Aw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="object"&&n!==null}e.isObjectLike=r})(Eg)),Eg}var Tw;function l5(){return Tw||(Tw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=j0(),n=i5();function a(l){return n.isObjectLike(l)&&r.isArrayLike(l)}e.isArrayLikeObject=a})(Ag)),Ag}var Mg={},Pg={},Iw;function o5(){return Iw||(Iw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=p0();function n(a){return function(l){return r.get(l,a)}}e.property=n})(Pg)),Pg}var _g={},Rg={},Lg={},$g={},Ew;function oC(){return Ew||(Ew=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=r})($g)),$g}var zg={},Mw;function cC(){return Mw||(Mw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=r})(zg)),zg}var Bg={},Pw;function dC(){return Pw||(Pw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.eq=r})(Bg)),Bg}var _w;function c5(){return _w||(_w=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=oC(),n=cC(),a=dC();function l(g,p,v){return typeof v!="function"?l(g,p,()=>{}):o(g,p,function b(w,N,S,C,O,k){const E=v(w,N,S,C,O,k);return E!==void 0?!!E:o(w,N,b,k)},new Map)}function o(g,p,v,b){if(p===g)return!0;switch(typeof p){case"object":return d(g,p,v,b);case"function":return Object.keys(p).length>0?o(g,{...p},v,b):a.eq(g,p);default:return r.isObject(g)?typeof p=="string"?p==="":!0:a.eq(g,p)}}function d(g,p,v,b){if(p==null)return!0;if(Array.isArray(p))return f(g,p,v,b);if(p instanceof Map)return m(g,p,v,b);if(p instanceof Set)return h(g,p,v,b);const w=Object.keys(p);if(g==null)return w.length===0;if(w.length===0)return!0;if(b!=null&&b.has(p))return b.get(p)===g;b==null||b.set(p,g);try{for(let N=0;N<w.length;N++){const S=w[N];if(!n.isPrimitive(g)&&!(S in g)||p[S]===void 0&&g[S]!==void 0||p[S]===null&&g[S]!==null||!v(g[S],p[S],S,g,p,b))return!1}return!0}finally{b==null||b.delete(p)}}function m(g,p,v,b){if(p.size===0)return!0;if(!(g instanceof Map))return!1;for(const[w,N]of p.entries()){const S=g.get(w);if(v(S,N,w,g,p,b)===!1)return!1}return!0}function f(g,p,v,b){if(p.length===0)return!0;if(!Array.isArray(g))return!1;const w=new Set;for(let N=0;N<p.length;N++){const S=p[N];let C=!1;for(let O=0;O<g.length;O++){if(w.has(O))continue;const k=g[O];let E=!1;if(v(k,S,N,g,p,b)&&(E=!0),E){w.add(O),C=!0;break}}if(!C)return!1}return!0}function h(g,p,v,b){return p.size===0?!0:g instanceof Set?f([...g],[...p],v,b):!1}e.isMatchWith=l,e.isSetMatch=h})(Lg)),Lg}var Rw;function uC(){return Rw||(Rw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=c5();function n(a,l){return r.isMatchWith(a,l,()=>{})}e.isMatch=n})(Rg)),Rg}var Fg={},Ug={},Vg={},Lw;function d5(){return Lw||(Lw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=r})(Vg)),Vg}var qg={},$w;function mC(){return $w||($w=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=r})(qg)),qg}var Wg={},zw;function fC(){return zw||(zw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",n="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",d="[object Symbol]",m="[object Date]",f="[object Map]",h="[object Set]",g="[object Array]",p="[object Function]",v="[object ArrayBuffer]",b="[object Object]",w="[object Error]",N="[object DataView]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",O="[object Uint16Array]",k="[object Uint32Array]",E="[object BigUint64Array]",M="[object Int8Array]",D="[object Int16Array]",R="[object Int32Array]",P="[object BigInt64Array]",z="[object Float32Array]",U="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=v,e.arrayTag=g,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=E,e.booleanTag=l,e.dataViewTag=N,e.dateTag=m,e.errorTag=w,e.float32ArrayTag=z,e.float64ArrayTag=U,e.functionTag=p,e.int16ArrayTag=D,e.int32ArrayTag=R,e.int8ArrayTag=M,e.mapTag=f,e.numberTag=a,e.objectTag=b,e.regexpTag=r,e.setTag=h,e.stringTag=n,e.symbolTag=d,e.uint16ArrayTag=O,e.uint32ArrayTag=k,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=C})(Wg)),Wg}var Hg={},Bw;function u5(){return Bw||(Bw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=r})(Hg)),Hg}var Fw;function hC(){return Fw||(Fw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=d5(),n=mC(),a=fC(),l=cC(),o=u5();function d(g,p){return m(g,void 0,g,new Map,p)}function m(g,p,v,b=new Map,w=void 0){const N=w==null?void 0:w(g,p,v,b);if(N!==void 0)return N;if(l.isPrimitive(g))return g;if(b.has(g))return b.get(g);if(Array.isArray(g)){const S=new Array(g.length);b.set(g,S);for(let C=0;C<g.length;C++)S[C]=m(g[C],C,v,b,w);return Object.hasOwn(g,"index")&&(S.index=g.index),Object.hasOwn(g,"input")&&(S.input=g.input),S}if(g instanceof Date)return new Date(g.getTime());if(g instanceof RegExp){const S=new RegExp(g.source,g.flags);return S.lastIndex=g.lastIndex,S}if(g instanceof Map){const S=new Map;b.set(g,S);for(const[C,O]of g)S.set(C,m(O,C,v,b,w));return S}if(g instanceof Set){const S=new Set;b.set(g,S);for(const C of g)S.add(m(C,void 0,v,b,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(g))return g.subarray();if(o.isTypedArray(g)){const S=new(Object.getPrototypeOf(g)).constructor(g.length);b.set(g,S);for(let C=0;C<g.length;C++)S[C]=m(g[C],C,v,b,w);return S}if(g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&g instanceof SharedArrayBuffer)return g.slice(0);if(g instanceof DataView){const S=new DataView(g.buffer.slice(0),g.byteOffset,g.byteLength);return b.set(g,S),f(S,g,v,b,w),S}if(typeof File<"u"&&g instanceof File){const S=new File([g],g.name,{type:g.type});return b.set(g,S),f(S,g,v,b,w),S}if(typeof Blob<"u"&&g instanceof Blob){const S=new Blob([g],{type:g.type});return b.set(g,S),f(S,g,v,b,w),S}if(g instanceof Error){const S=new g.constructor;return b.set(g,S),S.message=g.message,S.name=g.name,S.stack=g.stack,S.cause=g.cause,f(S,g,v,b,w),S}if(g instanceof Boolean){const S=new Boolean(g.valueOf());return b.set(g,S),f(S,g,v,b,w),S}if(g instanceof Number){const S=new Number(g.valueOf());return b.set(g,S),f(S,g,v,b,w),S}if(g instanceof String){const S=new String(g.valueOf());return b.set(g,S),f(S,g,v,b,w),S}if(typeof g=="object"&&h(g)){const S=Object.create(Object.getPrototypeOf(g));return b.set(g,S),f(S,g,v,b,w),S}return g}function f(g,p,v=g,b,w){const N=[...Object.keys(p),...r.getSymbols(p)];for(let S=0;S<N.length;S++){const C=N[S],O=Object.getOwnPropertyDescriptor(g,C);(O==null||O.writable)&&(g[C]=m(p[C],C,v,b,w))}}function h(g){switch(n.getTag(g)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=m,e.copyProperties=f})(Ug)),Ug}var Uw;function m5(){return Uw||(Uw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=hC();function n(a){return r.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(Fg)),Fg}var Vw;function f5(){return Vw||(Vw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=uC(),n=m5();function a(l){return l=n.cloneDeep(l),o=>r.isMatch(o,l)}e.matches=a})(_g)),_g}var Kg={},Gg={},Yg={},qw;function h5(){return qw||(qw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=hC(),n=fC();function a(l,o){return r.cloneDeepWith(l,(d,m,f,h)=>{const g=o==null?void 0:o(d,m,f,h);if(g!==void 0)return g;if(typeof l=="object")switch(Object.prototype.toString.call(l)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new l.constructor(l==null?void 0:l.valueOf());return r.copyProperties(p,l),p}case n.argumentsTag:{const p={};return r.copyProperties(p,l),p.length=l.length,p[Symbol.iterator]=l[Symbol.iterator],p}default:return}})}e.cloneDeepWith=a})(Yg)),Yg}var Ww;function g5(){return Ww||(Ww=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=h5();function n(a){return r.cloneDeepWith(a)}e.cloneDeep=n})(Gg)),Gg}var Qg={},Xg={},Hw;function gC(){return Hw||(Hw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function n(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return r.test(a)}}e.isIndex=n})(Xg)),Xg}var Zg={},Kw;function p5(){return Kw||(Kw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=mC();function n(a){return a!==null&&typeof a=="object"&&r.getTag(a)==="[object Arguments]"}e.isArguments=n})(Zg)),Zg}var Gw;function x5(){return Gw||(Gw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=nC(),n=gC(),a=p5(),l=g0();function o(d,m){let f;if(Array.isArray(m)?f=m:typeof m=="string"&&r.isDeepKey(m)&&(d==null?void 0:d[m])==null?f=l.toPath(m):f=[m],f.length===0)return!1;let h=d;for(let g=0;g<f.length;g++){const p=f[g];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||a.isArguments(h))&&n.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}e.has=o})(Qg)),Qg}var Yw;function v5(){return Yw||(Yw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=uC(),n=h0(),a=g5(),l=p0(),o=x5();function d(m,f){switch(typeof m){case"object":{Object.is(m==null?void 0:m.valueOf(),-0)&&(m="-0");break}case"number":{m=n.toKey(m);break}}return f=a.cloneDeep(f),function(h){const g=l.get(h,m);return g===void 0?o.has(h,m):f===void 0?g===void 0:r.isMatch(g,f)}}e.matchesProperty=d})(Kg)),Kg}var Qw;function y5(){return Qw||(Qw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=lC(),n=o5(),a=f5(),l=v5();function o(d){if(d==null)return r.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?l.matchesProperty(d[0],d[1]):a.matches(d);case"string":case"symbol":case"number":return n.property(d)}}e.iteratee=o})(Mg)),Mg}var Xw;function b5(){return Xw||(Xw=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=a5(),n=lC(),a=l5(),l=y5();function o(d,m=n.identity){return a.isArrayLikeObject(d)?r.uniqBy(Array.from(d),l.iteratee(m)):[]}e.uniqBy=o})(Cg)),Cg}var Jg,Zw;function j5(){return Zw||(Zw=1,Jg=b5().uniqBy),Jg}var N5=j5();const Jw=Za(N5);function pC(e,r,n){return r===!0?Jw(e,n):typeof r=="function"?Jw(e,r):e}var ep={exports:{}},tp={},rp={exports:{}},np={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function w5(){if(e2)return np;e2=1;var e=ao();function r(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var n=typeof Object.is=="function"?Object.is:r,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,d=e.useDebugValue;function m(p,v){var b=v(),w=a({inst:{value:b,getSnapshot:v}}),N=w[0].inst,S=w[1];return o(function(){N.value=b,N.getSnapshot=v,f(N)&&S({inst:N})},[p,b,v]),l(function(){return f(N)&&S({inst:N}),p(function(){f(N)&&S({inst:N})})},[p]),d(b),b}function f(p){var v=p.getSnapshot;p=p.value;try{var b=v();return!n(p,b)}catch{return!0}}function h(p,v){return v()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:m;return np.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,np}var t2;function S5(){return t2||(t2=1,rp.exports=w5()),rp.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2;function k5(){if(r2)return tp;r2=1;var e=ao(),r=S5();function n(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var a=typeof Object.is=="function"?Object.is:n,l=r.useSyncExternalStore,o=e.useRef,d=e.useEffect,m=e.useMemo,f=e.useDebugValue;return tp.useSyncExternalStoreWithSelector=function(h,g,p,v,b){var w=o(null);if(w.current===null){var N={hasValue:!1,value:null};w.current=N}else N=w.current;w=m(function(){function C(D){if(!O){if(O=!0,k=D,D=v(D),b!==void 0&&N.hasValue){var R=N.value;if(b(R,D))return E=R}return E=D}if(R=E,a(k,D))return R;var P=v(D);return b!==void 0&&b(R,P)?(k=D,R):(k=D,E=P)}var O=!1,k,E,M=p===void 0?null:p;return[function(){return C(g())},M===null?void 0:function(){return C(M())}]},[g,p,v,b]);var S=l(h,w[0],w[1]);return d(function(){N.hasValue=!0,N.value=S},[S]),f(S),S},tp}var n2;function C5(){return n2||(n2=1,ep.exports=k5()),ep.exports}var D5=C5(),N0=y.createContext(null),O5=e=>e,Nr=()=>{var e=y.useContext(N0);return e?e.store.dispatch:O5},Tu=()=>{},A5=()=>Tu,T5=(e,r)=>e===r;function tt(e){var r=y.useContext(N0);return D5.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:A5,r?r.store.getState:Tu,r?r.store.getState:Tu,r?e:Tu,T5)}function I5(e,r=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(r)}function E5(e,r=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(r)}function M5(e,r="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${r}[${n}]`)}}var a2=e=>Array.isArray(e)?e:[e];function P5(e){const r=Array.isArray(e[0])?e[0]:e;return M5(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function _5(e,r){const n=[],{length:a}=e;for(let l=0;l<a;l++)n.push(e[l].apply(null,r));return n}var R5=class{constructor(e){this.value=e}deref(){return this.value}},L5=typeof WeakRef<"u"?WeakRef:R5,$5=0,s2=1;function uu(){return{s:$5,v:void 0,o:null,p:null}}function xC(e,r={}){let n=uu();const{resultEqualityCheck:a}=r;let l,o=0;function d(){var p;let m=n;const{length:f}=arguments;for(let v=0,b=f;v<b;v++){const w=arguments[v];if(typeof w=="function"||typeof w=="object"&&w!==null){let N=m.o;N===null&&(m.o=N=new WeakMap);const S=N.get(w);S===void 0?(m=uu(),N.set(w,m)):m=S}else{let N=m.p;N===null&&(m.p=N=new Map);const S=N.get(w);S===void 0?(m=uu(),N.set(w,m)):m=S}}const h=m;let g;if(m.s===s2)g=m.v;else if(g=e.apply(null,arguments),o++,a){const v=((p=l==null?void 0:l.deref)==null?void 0:p.call(l))??l;v!=null&&a(v,g)&&(g=v,o!==0&&o--),l=typeof g=="object"&&g!==null||typeof g=="function"?new L5(g):g}return h.s=s2,h.v=g,g}return d.clearCache=()=>{n=uu(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}function z5(e,...r){const n=typeof e=="function"?{memoize:e,memoizeOptions:r}:e,a=(...l)=>{let o=0,d=0,m,f={},h=l.pop();typeof h=="object"&&(f=h,h=l.pop()),I5(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const g={...n,...f},{memoize:p,memoizeOptions:v=[],argsMemoize:b=xC,argsMemoizeOptions:w=[]}=g,N=a2(v),S=a2(w),C=P5(l),O=p(function(){return o++,h.apply(null,arguments)},...N),k=b(function(){d++;const M=_5(C,arguments);return m=O.apply(null,M),m},...S);return Object.assign(k,{resultFunc:h,memoizedResultFunc:O,dependencies:C,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>m,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:b})};return Object.assign(a,{withTypes:()=>a}),a}var pe=z5(xC),B5=Object.assign((e,r=pe)=>{E5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return r(a,(...o)=>o.reduce((d,m,f)=>(d[n[f]]=m,d),{}))},{withTypes:()=>B5}),ap={},sp={},ip={},i2;function F5(){return i2||(i2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,l,o)=>{if(a!==l){const d=r(a),m=r(l);if(d===m&&d===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?m-d:d-m}return 0};e.compareValues=n})(ip)),ip}var lp={},op={},l2;function vC(){return l2||(l2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=r})(op)),op}var o2;function U5(){return o2||(o2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=vC(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,d){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||r.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||d!=null&&Object.hasOwn(d,o)}e.isKey=l})(lp)),lp}var c2;function V5(){return c2||(c2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=F5(),n=U5(),a=g0();function l(o,d,m,f){if(o==null)return[];m=f?void 0:m,Array.isArray(o)||(o=Object.values(o)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(m)||(m=m==null?[]:[m]),m=m.map(b=>String(b));const h=(b,w)=>{let N=b;for(let S=0;S<w.length&&N!=null;++S)N=N[w[S]];return N},g=(b,w)=>w==null||b==null?w:typeof b=="object"&&"key"in b?Object.hasOwn(w,b.key)?w[b.key]:h(w,b.path):typeof b=="function"?b(w):Array.isArray(b)?h(w,b):typeof w=="object"?w[b]:w,p=d.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:a.toPath(b)}));return o.map(b=>({original:b,criteria:p.map(w=>g(w,b))})).slice().sort((b,w)=>{for(let N=0;N<p.length;N++){const S=r.compareValues(b.criteria[N],w.criteria[N],m[N]);if(S!==0)return S}return 0}).map(b=>b.original)}e.orderBy=l})(sp)),sp}var cp={},d2;function q5(){return d2||(d2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a=1){const l=[],o=Math.floor(a),d=(m,f)=>{for(let h=0;h<m.length;h++){const g=m[h];Array.isArray(g)&&f<o?d(g,f+1):l.push(g)}};return d(n,0),l}e.flatten=r})(cp)),cp}var dp={},u2;function yC(){return u2||(u2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=gC(),n=j0(),a=oC(),l=dC();function o(d,m,f){return a.isObject(f)&&(typeof m=="number"&&n.isArrayLike(f)&&r.isIndex(m)&&m<f.length||typeof m=="string"&&m in f)?l.eq(f[m],d):!1}e.isIterateeCall=o})(dp)),dp}var m2;function W5(){return m2||(m2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=V5(),n=q5(),a=yC();function l(o,...d){const m=d.length;return m>1&&a.isIterateeCall(o,d[0],d[1])?d=[]:m>2&&a.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),r.orderBy(o,n.flatten(d),["asc"])}e.sortBy=l})(ap)),ap}var up,f2;function H5(){return f2||(f2=1,up=W5().sortBy),up}var K5=H5();const km=Za(K5);var bC=e=>e.legend.settings,G5=e=>e.legend.size,Y5=e=>e.legend.payload,Q5=pe([Y5,bC],(e,r)=>{var{itemSorter:n}=r,a=e.flat(1);return n?km(a,n):a});function X5(){return tt(Q5)}var mu=1;function jC(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,n]=y.useState({height:0,left:0,top:0,width:0}),a=y.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),d={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(d.height-r.height)>mu||Math.abs(d.left-r.left)>mu||Math.abs(d.top-r.top)>mu||Math.abs(d.width-r.width)>mu)&&n({height:d.height,left:d.left,top:d.top,width:d.width})}},[r.width,r.height,r.top,r.left,...e]);return[r,a]}function on(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Z5=typeof Symbol=="function"&&Symbol.observable||"@@observable",h2=Z5,mp=()=>Math.random().toString(36).substring(7).split("").join("."),J5={INIT:`@@redux/INIT${mp()}`,REPLACE:`@@redux/REPLACE${mp()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mp()}`},zu=J5;function w0(e){if(typeof e!="object"||e===null)return!1;let r=e;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r||Object.getPrototypeOf(e)===null}function NC(e,r,n){if(typeof e!="function")throw new Error(on(2));if(typeof r=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(on(0));if(typeof r=="function"&&typeof n>"u"&&(n=r,r=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(on(1));return n(NC)(e,r)}let a=e,l=r,o=new Map,d=o,m=0,f=!1;function h(){d===o&&(d=new Map,o.forEach((S,C)=>{d.set(C,S)}))}function g(){if(f)throw new Error(on(3));return l}function p(S){if(typeof S!="function")throw new Error(on(4));if(f)throw new Error(on(5));let C=!0;h();const O=m++;return d.set(O,S),function(){if(C){if(f)throw new Error(on(6));C=!1,h(),d.delete(O),o=null}}}function v(S){if(!w0(S))throw new Error(on(7));if(typeof S.type>"u")throw new Error(on(8));if(typeof S.type!="string")throw new Error(on(17));if(f)throw new Error(on(9));try{f=!0,l=a(l,S)}finally{f=!1}return(o=d).forEach(O=>{O()}),S}function b(S){if(typeof S!="function")throw new Error(on(10));a=S,v({type:zu.REPLACE})}function w(){const S=p;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(on(11));function O(){const E=C;E.next&&E.next(g())}return O(),{unsubscribe:S(O)}},[h2](){return this}}}return v({type:zu.INIT}),{dispatch:v,subscribe:p,getState:g,replaceReducer:b,[h2]:w}}function eM(e){Object.keys(e).forEach(r=>{const n=e[r];if(typeof n(void 0,{type:zu.INIT})>"u")throw new Error(on(12));if(typeof n(void 0,{type:zu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(on(13))})}function wC(e){const r=Object.keys(e),n={};for(let o=0;o<r.length;o++){const d=r[o];typeof e[d]=="function"&&(n[d]=e[d])}const a=Object.keys(n);let l;try{eM(n)}catch(o){l=o}return function(d={},m){if(l)throw l;let f=!1;const h={};for(let g=0;g<a.length;g++){const p=a[g],v=n[p],b=d[p],w=v(b,m);if(typeof w>"u")throw m&&m.type,new Error(on(14));h[p]=w,f=f||w!==b}return f=f||a.length!==Object.keys(d).length,f?h:d}}function Bu(...e){return e.length===0?r=>r:e.length===1?e[0]:e.reduce((r,n)=>(...a)=>r(n(...a)))}function tM(...e){return r=>(n,a)=>{const l=r(n,a);let o=()=>{throw new Error(on(15))};const d={getState:l.getState,dispatch:(f,...h)=>o(f,...h)},m=e.map(f=>f(d));return o=Bu(...m)(l.dispatch),{...l,dispatch:o}}}function SC(e){return w0(e)&&"type"in e&&typeof e.type=="string"}var kC=Symbol.for("immer-nothing"),g2=Symbol.for("immer-draftable"),na=Symbol.for("immer-state");function Ea(e,...r){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Nc=Object.getPrototypeOf;function al(e){return!!e&&!!e[na]}function Ts(e){var r;return e?CC(e)||Array.isArray(e)||!!e[g2]||!!((r=e.constructor)!=null&&r[g2])||zc(e)||Dm(e):!1}var rM=Object.prototype.constructor.toString(),p2=new WeakMap;function CC(e){if(!e||typeof e!="object")return!1;const r=Object.getPrototypeOf(e);if(r===null||r===Object.prototype)return!0;const n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=p2.get(n);return a===void 0&&(a=Function.toString.call(n),p2.set(n,a)),a===rM}function Fu(e,r,n=!0){Cm(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{r(l,e[l],e)}):e.forEach((a,l)=>r(l,a,e))}function Cm(e){const r=e[na];return r?r.type_:Array.isArray(e)?1:zc(e)?2:Dm(e)?3:0}function dx(e,r){return Cm(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function DC(e,r,n){const a=Cm(e);a===2?e.set(r,n):a===3?e.add(n):e[r]=n}function nM(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function zc(e){return e instanceof Map}function Dm(e){return e instanceof Set}function Ki(e){return e.copy_||e.base_}function ux(e,r){if(zc(e))return new Map(e);if(Dm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=CC(e);if(r===!0||r==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[na];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const d=l[o],m=a[d];m.writable===!1&&(m.writable=!0,m.configurable=!0),(m.get||m.set)&&(a[d]={configurable:!0,writable:!0,enumerable:m.enumerable,value:e[d]})}return Object.create(Nc(e),a)}else{const a=Nc(e);if(a!==null&&n)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function S0(e,r=!1){return Om(e)||al(e)||!Ts(e)||(Cm(e)>1&&Object.defineProperties(e,{set:fu,add:fu,clear:fu,delete:fu}),Object.freeze(e),r&&Object.values(e).forEach(n=>S0(n,!0))),e}function aM(){Ea(2)}var fu={value:aM};function Om(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var sM={};function sl(e){const r=sM[e];return r||Ea(0,e),r}var wc;function OC(){return wc}function iM(e,r){return{drafts_:[],parent_:e,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function x2(e,r){r&&(sl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=r)}function mx(e){fx(e),e.drafts_.forEach(lM),e.drafts_=null}function fx(e){e===wc&&(wc=e.parent_)}function v2(e){return wc=iM(wc,e)}function lM(e){const r=e[na];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function y2(e,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];return e!==void 0&&e!==n?(n[na].modified_&&(mx(r),Ea(4)),Ts(e)&&(e=Uu(r,e),r.parent_||Vu(r,e)),r.patches_&&sl("Patches").generateReplacementPatches_(n[na].base_,e,r.patches_,r.inversePatches_)):e=Uu(r,n,[]),mx(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),e!==kC?e:void 0}function Uu(e,r,n){if(Om(r))return r;const a=e.immer_.shouldUseStrictIteration(),l=r[na];if(!l)return Fu(r,(o,d)=>b2(e,l,r,o,d,n),a),r;if(l.scope_!==e)return r;if(!l.modified_)return Vu(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let d=o,m=!1;l.type_===3&&(d=new Set(o),o.clear(),m=!0),Fu(d,(f,h)=>b2(e,l,o,f,h,n,m),a),Vu(e,o,!1),n&&e.patches_&&sl("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function b2(e,r,n,a,l,o,d){if(l==null||typeof l!="object"&&!d)return;const m=Om(l);if(!(m&&!d)){if(al(l)){const f=o&&r&&r.type_!==3&&!dx(r.assigned_,a)?o.concat(a):void 0,h=Uu(e,l,f);if(DC(n,a,h),al(h))e.canAutoFreeze_=!1;else return}else d&&n.add(l);if(Ts(l)&&!m){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||r&&r.base_&&r.base_[a]===l&&m)return;Uu(e,l),(!r||!r.scope_.parent_)&&typeof a!="symbol"&&(zc(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&Vu(e,l)}}}function Vu(e,r,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&S0(r,n)}function oM(e,r){const n=Array.isArray(e),a={type_:n?1:0,scope_:r?r.scope_:OC(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=k0;n&&(l=[a],o=Sc);const{revoke:d,proxy:m}=Proxy.revocable(l,o);return a.draft_=m,a.revoke_=d,m}var k0={get(e,r){if(r===na)return e;const n=Ki(e);if(!dx(n,r))return cM(e,n,r);const a=n[r];return e.finalized_||!Ts(a)?a:a===fp(e.base_,r)?(hp(e),e.copy_[r]=gx(a,e)):a},has(e,r){return r in Ki(e)},ownKeys(e){return Reflect.ownKeys(Ki(e))},set(e,r,n){const a=AC(Ki(e),r);if(a!=null&&a.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=fp(Ki(e),r),o=l==null?void 0:l[na];if(o&&o.base_===n)return e.copy_[r]=n,e.assigned_[r]=!1,!0;if(nM(n,l)&&(n!==void 0||dx(e.base_,r)))return!0;hp(e),hx(e)}return e.copy_[r]===n&&(n!==void 0||r in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[r])||(e.copy_[r]=n,e.assigned_[r]=!0),!0},deleteProperty(e,r){return fp(e.base_,r)!==void 0||r in e.base_?(e.assigned_[r]=!1,hp(e),hx(e)):delete e.assigned_[r],e.copy_&&delete e.copy_[r],!0},getOwnPropertyDescriptor(e,r){const n=Ki(e),a=Reflect.getOwnPropertyDescriptor(n,r);return a&&{writable:!0,configurable:e.type_!==1||r!=="length",enumerable:a.enumerable,value:n[r]}},defineProperty(){Ea(11)},getPrototypeOf(e){return Nc(e.base_)},setPrototypeOf(){Ea(12)}},Sc={};Fu(k0,(e,r)=>{Sc[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});Sc.deleteProperty=function(e,r){return Sc.set.call(this,e,r,void 0)};Sc.set=function(e,r,n){return k0.set.call(this,e[0],r,n,e[0])};function fp(e,r){const n=e[na];return(n?Ki(n):e)[r]}function cM(e,r,n){var l;const a=AC(r,n);return a?"value"in a?a.value:(l=a.get)==null?void 0:l.call(e.draft_):void 0}function AC(e,r){if(!(r in e))return;let n=Nc(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,r);if(a)return a;n=Nc(n)}}function hx(e){e.modified_||(e.modified_=!0,e.parent_&&hx(e.parent_))}function hp(e){e.copy_||(e.copy_=ux(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var dM=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(r,n,a)=>{if(typeof r=="function"&&typeof n!="function"){const o=n;n=r;const d=this;return function(f=o,...h){return d.produce(f,g=>n.call(this,g,...h))}}typeof n!="function"&&Ea(6),a!==void 0&&typeof a!="function"&&Ea(7);let l;if(Ts(r)){const o=v2(this),d=gx(r,void 0);let m=!0;try{l=n(d),m=!1}finally{m?mx(o):fx(o)}return x2(o,a),y2(l,o)}else if(!r||typeof r!="object"){if(l=n(r),l===void 0&&(l=r),l===kC&&(l=void 0),this.autoFreeze_&&S0(l,!0),a){const o=[],d=[];sl("Patches").generateReplacementPatches_(r,l,o,d),a(o,d)}return l}else Ea(1,r)},this.produceWithPatches=(r,n)=>{if(typeof r=="function")return(d,...m)=>this.produceWithPatches(d,f=>r(f,...m));let a,l;return[this.produce(r,n,(d,m)=>{a=d,l=m}),a,l]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ts(e)||Ea(8),al(e)&&(e=Cs(e));const r=v2(this),n=gx(e,void 0);return n[na].isManual_=!0,fx(r),n}finishDraft(e,r){const n=e&&e[na];(!n||!n.isManual_)&&Ea(9);const{scope_:a}=n;return x2(a,r),y2(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,r){let n;for(n=r.length-1;n>=0;n--){const l=r[n];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}n>-1&&(r=r.slice(n+1));const a=sl("Patches").applyPatches_;return al(e)?a(e,r):this.produce(e,l=>a(l,r))}};function gx(e,r){const n=zc(e)?sl("MapSet").proxyMap_(e,r):Dm(e)?sl("MapSet").proxySet_(e,r):oM(e,r);return(r?r.scope_:OC()).drafts_.push(n),n}function Cs(e){return al(e)||Ea(10,e),TC(e)}function TC(e){if(!Ts(e)||Om(e))return e;const r=e[na];let n,a=!0;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=ux(e,r.scope_.immer_.useStrictShallowCopy_),a=r.scope_.immer_.shouldUseStrictIteration()}else n=ux(e,!0);return Fu(n,(l,o)=>{DC(n,l,TC(o))},a),r&&(r.finalized_=!1),n}var uM=new dM,IC=uM.produce;function EC(e){return({dispatch:n,getState:a})=>l=>o=>typeof o=="function"?o(n,a,e):l(o)}var mM=EC(),fM=EC,hM=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Bu:Bu.apply(null,arguments)};function wa(e,r){function n(...a){if(r){let l=r(...a);if(!l)throw new Error(ta(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>SC(a)&&a.type===e,n}var MC=class xc extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,xc.prototype)}static get[Symbol.species](){return xc}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new xc(...r[0].concat(this)):new xc(...r.concat(this))}};function j2(e){return Ts(e)?IC(e,()=>{}):e}function hu(e,r,n){return e.has(r)?e.get(r):e.set(r,n(r)).get(r)}function gM(e){return typeof e=="boolean"}var pM=()=>function(r){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=r??{};let d=new MC;return n&&(gM(n)?d.push(mM):d.push(fM(n.extraArgument))),d},PC="RTK_autoBatch",Cn=()=>e=>({payload:e,meta:{[PC]:!0}}),N2=e=>r=>{setTimeout(r,e)},_C=(e={type:"raf"})=>r=>(...n)=>{const a=r(...n);let l=!0,o=!1,d=!1;const m=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:N2(10):e.type==="callback"?e.queueNotification:N2(e.timeout),h=()=>{d=!1,o&&(o=!1,m.forEach(g=>g()))};return Object.assign({},a,{subscribe(g){const p=()=>l&&g(),v=a.subscribe(p);return m.add(g),()=>{v(),m.delete(g)}},dispatch(g){var p;try{return l=!((p=g==null?void 0:g.meta)!=null&&p[PC]),o=!l,o&&(d||(d=!0,f(h))),a.dispatch(g)}finally{l=!0}}})},xM=e=>function(n){const{autoBatch:a=!0}=n??{};let l=new MC(e);return a&&l.push(_C(typeof a=="object"?a:void 0)),l};function vM(e){const r=pM(),{reducer:n=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:d=void 0}=e||{};let m;if(typeof n=="function")m=n;else if(w0(n))m=wC(n);else throw new Error(ta(1));let f;typeof a=="function"?f=a(r):f=r();let h=Bu;l&&(h=hM({trace:!1,...typeof l=="object"&&l}));const g=tM(...f),p=xM(g);let v=typeof d=="function"?d(p):p();const b=h(...v);return NC(m,o,b)}function RC(e){const r={},n=[];let a;const l={addCase(o,d){const m=typeof o=="string"?o:o.type;if(!m)throw new Error(ta(28));if(m in r)throw new Error(ta(29));return r[m]=d,l},addAsyncThunk(o,d){return d.pending&&(r[o.pending.type]=d.pending),d.rejected&&(r[o.rejected.type]=d.rejected),d.fulfilled&&(r[o.fulfilled.type]=d.fulfilled),d.settled&&n.push({matcher:o.settled,reducer:d.settled}),l},addMatcher(o,d){return n.push({matcher:o,reducer:d}),l},addDefaultCase(o){return a=o,l}};return e(l),[r,n,a]}function yM(e){return typeof e=="function"}function bM(e,r){let[n,a,l]=RC(r),o;if(yM(e))o=()=>j2(e());else{const m=j2(e);o=()=>m}function d(m=o(),f){let h=[n[f.type],...a.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return h.filter(g=>!!g).length===0&&(h=[l]),h.reduce((g,p)=>{if(p)if(al(g)){const b=p(g,f);return b===void 0?g:b}else{if(Ts(g))return IC(g,v=>p(v,f));{const v=p(g,f);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return g},m)}return d.getInitialState=o,d}var jM="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",NM=(e=21)=>{let r="",n=e;for(;n--;)r+=jM[Math.random()*64|0];return r},wM=Symbol.for("rtk-slice-createasyncthunk");function SM(e,r){return`${e}/${r}`}function kM({creators:e}={}){var n;const r=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[wM];return function(l){const{name:o,reducerPath:d=o}=l;if(!o)throw new Error(ta(11));const m=(typeof l.reducers=="function"?l.reducers(DM()):l.reducers)||{},f=Object.keys(m),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(E,M){const D=typeof E=="string"?E:E.type;if(!D)throw new Error(ta(12));if(D in h.sliceCaseReducersByType)throw new Error(ta(13));return h.sliceCaseReducersByType[D]=M,g},addMatcher(E,M){return h.sliceMatchers.push({matcher:E,reducer:M}),g},exposeAction(E,M){return h.actionCreators[E]=M,g},exposeCaseReducer(E,M){return h.sliceCaseReducersByName[E]=M,g}};f.forEach(E=>{const M=m[E],D={reducerName:E,type:SM(o,E),createNotation:typeof l.reducers=="function"};AM(M)?IM(D,M,g,r):OM(D,M,g)});function p(){const[E={},M=[],D=void 0]=typeof l.extraReducers=="function"?RC(l.extraReducers):[l.extraReducers],R={...E,...h.sliceCaseReducersByType};return bM(l.initialState,P=>{for(let z in R)P.addCase(z,R[z]);for(let z of h.sliceMatchers)P.addMatcher(z.matcher,z.reducer);for(let z of M)P.addMatcher(z.matcher,z.reducer);D&&P.addDefaultCase(D)})}const v=E=>E,b=new Map,w=new WeakMap;let N;function S(E,M){return N||(N=p()),N(E,M)}function C(){return N||(N=p()),N.getInitialState()}function O(E,M=!1){function D(P){let z=P[E];return typeof z>"u"&&M&&(z=hu(w,D,C)),z}function R(P=v){const z=hu(b,M,()=>new WeakMap);return hu(z,P,()=>{const U={};for(const[q,Y]of Object.entries(l.selectors??{}))U[q]=CM(Y,P,()=>hu(w,P,C),M);return U})}return{reducerPath:E,getSelectors:R,get selectors(){return R(D)},selectSlice:D}}const k={name:o,reducer:S,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:C,...O(d),injectInto(E,{reducerPath:M,...D}={}){const R=M??d;return E.inject({reducerPath:R,reducer:S},D),{...k,...O(R,!0)}}};return k}}function CM(e,r,n,a){function l(o,...d){let m=r(o);return typeof m>"u"&&a&&(m=n()),e(m,...d)}return l.unwrapped=e,l}var aa=kM();function DM(){function e(r,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...n}}return e.withTypes=()=>e,{reducer(r){return Object.assign({[r.name](...n){return r(...n)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:n}},asyncThunk:e}}function OM({type:e,reducerName:r,createNotation:n},a,l){let o,d;if("reducer"in a){if(n&&!TM(a))throw new Error(ta(17));o=a.reducer,d=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(r,o).exposeAction(r,d?wa(e,d):wa(e))}function AM(e){return e._reducerDefinitionType==="asyncThunk"}function TM(e){return e._reducerDefinitionType==="reducerWithPrepare"}function IM({type:e,reducerName:r},n,a,l){if(!l)throw new Error(ta(18));const{payloadCreator:o,fulfilled:d,pending:m,rejected:f,settled:h,options:g}=n,p=l(e,o,g);a.exposeAction(r,p),d&&a.addCase(p.fulfilled,d),m&&a.addCase(p.pending,m),f&&a.addCase(p.rejected,f),h&&a.addMatcher(p.settled,h),a.exposeCaseReducer(r,{fulfilled:d||gu,pending:m||gu,rejected:f||gu,settled:h||gu})}function gu(){}var EM="task",LC="listener",$C="completed",C0="cancelled",MM=`task-${C0}`,PM=`task-${$C}`,px=`${LC}-${C0}`,_M=`${LC}-${$C}`,Am=class{constructor(e){lg(this,"name","TaskAbortError");lg(this,"message");this.code=e,this.message=`${EM} ${C0} (reason: ${e})`}},D0=(e,r)=>{if(typeof e!="function")throw new TypeError(ta(32))},qu=()=>{},zC=(e,r=qu)=>(e.catch(r),e),BC=(e,r)=>(e.addEventListener("abort",r,{once:!0}),()=>e.removeEventListener("abort",r)),Zi=(e,r)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:r,configurable:!0,writable:!0}),e.abort(r))},Ji=e=>{if(e.aborted){const{reason:r}=e;throw new Am(r)}};function FC(e,r){let n=qu;return new Promise((a,l)=>{const o=()=>l(new Am(e.reason));if(e.aborted){o();return}n=BC(e,o),r.finally(()=>n()).then(a,l)}).finally(()=>{n=qu})}var RM=async(e,r)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Am?"cancelled":"rejected",error:n}}finally{r==null||r()}},Wu=e=>r=>zC(FC(e,r).then(n=>(Ji(e),n))),UC=e=>{const r=Wu(e);return n=>r(new Promise(a=>setTimeout(a,n)))},{assign:Yl}=Object,w2={},Tm="listenerMiddleware",LM=(e,r)=>{const n=a=>BC(e,()=>Zi(a,e.reason));return(a,l)=>{D0(a);const o=new AbortController;n(o);const d=RM(async()=>{Ji(e),Ji(o.signal);const m=await a({pause:Wu(o.signal),delay:UC(o.signal),signal:o.signal});return Ji(o.signal),m},()=>Zi(o,PM));return l!=null&&l.autoJoin&&r.push(d.catch(qu)),{result:Wu(e)(d),cancel(){Zi(o,MM)}}}},$M=(e,r)=>{const n=async(a,l)=>{Ji(r);let o=()=>{};const m=[new Promise((f,h)=>{let g=e({predicate:a,effect:(p,v)=>{v.unsubscribe(),f([p,v.getState(),v.getOriginalState()])}});o=()=>{g(),h()}})];l!=null&&m.push(new Promise(f=>setTimeout(f,l,null)));try{const f=await FC(r,Promise.race(m));return Ji(r),f}finally{o()}};return(a,l)=>zC(n(a,l))},VC=e=>{let{type:r,actionCreator:n,matcher:a,predicate:l,effect:o}=e;if(r)l=wa(r).match;else if(n)r=n.type,l=n.match;else if(a)l=a;else if(!l)throw new Error(ta(21));return D0(o),{predicate:l,type:r,effect:o}},qC=Yl(e=>{const{type:r,predicate:n,effect:a}=VC(e);return{id:NM(),effect:a,type:r,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ta(22))}}},{withTypes:()=>qC}),S2=(e,r)=>{const{type:n,effect:a,predicate:l}=VC(r);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===l)&&o.effect===a)},xx=e=>{e.pending.forEach(r=>{Zi(r,px)})},zM=(e,r)=>()=>{for(const n of r.keys())xx(n);e.clear()},k2=(e,r,n)=>{try{e(r,n)}catch(a){setTimeout(()=>{throw a},0)}},WC=Yl(wa(`${Tm}/add`),{withTypes:()=>WC}),BM=wa(`${Tm}/removeAll`),HC=Yl(wa(`${Tm}/remove`),{withTypes:()=>HC}),FM=(...e)=>{console.error(`${Tm}/error`,...e)},Bc=(e={})=>{const r=new Map,n=new Map,a=b=>{const w=n.get(b)??0;n.set(b,w+1)},l=b=>{const w=n.get(b)??1;w===1?n.delete(b):n.set(b,w-1)},{extra:o,onError:d=FM}=e;D0(d);const m=b=>(b.unsubscribe=()=>r.delete(b.id),r.set(b.id,b),w=>{b.unsubscribe(),w!=null&&w.cancelActive&&xx(b)}),f=b=>{const w=S2(r,b)??qC(b);return m(w)};Yl(f,{withTypes:()=>f});const h=b=>{const w=S2(r,b);return w&&(w.unsubscribe(),b.cancelActive&&xx(w)),!!w};Yl(h,{withTypes:()=>h});const g=async(b,w,N,S)=>{const C=new AbortController,O=$M(f,C.signal),k=[];try{b.pending.add(C),a(b),await Promise.resolve(b.effect(w,Yl({},N,{getOriginalState:S,condition:(E,M)=>O(E,M).then(Boolean),take:O,delay:UC(C.signal),pause:Wu(C.signal),extra:o,signal:C.signal,fork:LM(C.signal,k),unsubscribe:b.unsubscribe,subscribe:()=>{r.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((E,M,D)=>{E!==C&&(Zi(E,px),D.delete(E))})},cancel:()=>{Zi(C,px),b.pending.delete(C)},throwIfCancelled:()=>{Ji(C.signal)}})))}catch(E){E instanceof Am||k2(d,E,{raisedBy:"effect"})}finally{await Promise.all(k),Zi(C,_M),l(b),b.pending.delete(C)}},p=zM(r,n);return{middleware:b=>w=>N=>{if(!SC(N))return w(N);if(WC.match(N))return f(N.payload);if(BM.match(N)){p();return}if(HC.match(N))return h(N.payload);let S=b.getState();const C=()=>{if(S===w2)throw new Error(ta(23));return S};let O;try{if(O=w(N),r.size>0){const k=b.getState(),E=Array.from(r.values());for(const M of E){let D=!1;try{D=M.predicate(N,k,S)}catch(R){D=!1,k2(d,R,{raisedBy:"predicate"})}D&&g(M,N,b,C)}}}finally{S=w2}return O},startListening:f,stopListening:h,clearListeners:p}};function ta(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var UM={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},KC=aa({name:"chartLayout",initialState:UM,reducers:{setLayout(e,r){e.layoutType=r.payload},setChartSize(e,r){e.width=r.payload.width,e.height=r.payload.height},setMargin(e,r){var n,a,l,o;e.margin.top=(n=r.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=r.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=r.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=r.payload.left)!==null&&o!==void 0?o:0},setScale(e,r){e.scale=r.payload}}}),{setMargin:VM,setLayout:qM,setChartSize:WM,setScale:HM}=KC.actions,KM=KC.reducer;function C2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function D2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?C2(Object(n),!0).forEach(function(a){GM(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function GM(e,r,n){return(r=YM(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function YM(e){var r=QM(e,"string");return typeof r=="symbol"?r:r+""}function QM(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Hu=Math.PI/180,XM=e=>e*180/Math.PI,Fr=(e,r,n,a)=>({x:e+Math.cos(-Hu*a)*n,y:r+Math.sin(-Hu*a)*n}),GC=function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},ZM=(e,r)=>{var{x:n,y:a}=e,{x:l,y:o}=r;return Math.sqrt((n-l)**2+(a-o)**2)},JM=(e,r)=>{var{x:n,y:a}=e,{cx:l,cy:o}=r,d=ZM({x:n,y:a},{x:l,y:o});if(d<=0)return{radius:d,angle:0};var m=(n-l)/d,f=Math.acos(m);return a>o&&(f=2*Math.PI-f),{radius:d,angle:XM(f),angleInRadian:f}},eP=e=>{var{startAngle:r,endAngle:n}=e,a=Math.floor(r/360),l=Math.floor(n/360),o=Math.min(a,l);return{startAngle:r-o*360,endAngle:n-o*360}},tP=(e,r)=>{var{startAngle:n,endAngle:a}=r,l=Math.floor(n/360),o=Math.floor(a/360),d=Math.min(l,o);return e+d*360},rP=(e,r)=>{var{x:n,y:a}=e,{radius:l,angle:o}=JM({x:n,y:a},r),{innerRadius:d,outerRadius:m}=r;if(l<d||l>m||l===0)return null;var{startAngle:f,endAngle:h}=eP(r),g=o,p;if(f<=h){for(;g>h;)g-=360;for(;g<f;)g+=360;p=g>=f&&g<=h}else{for(;g>f;)g-=360;for(;g<h;)g+=360;p=g>=h&&g<=f}return p?D2(D2({},r),{},{radius:l,angle:tP(g,r)}):null};function YC(e,r,n){return Array.isArray(e)&&e&&r+n!==0?e.slice(r,n+1):e}function O2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ya(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?O2(Object(n),!0).forEach(function(a){nP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nP(e,r,n){return(r=aP(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function aP(e){var r=sP(e,"string");return typeof r=="symbol"?r:r+""}function sP(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function dr(e,r,n){return jr(e)||jr(r)?n:Qa(r)?nl(e,r,n):typeof r=="function"?r(e):n}var iP=(e,r,n,a,l)=>{var o,d=-1,m=(o=r==null?void 0:r.length)!==null&&o!==void 0?o:0;if(m<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var f=0;f<m;f++){var h=f>0?n[f-1].coordinate:n[m-1].coordinate,g=n[f].coordinate,p=f>=m-1?n[0].coordinate:n[f+1].coordinate,v=void 0;if(Jr(g-h)!==Jr(p-g)){var b=[];if(Jr(p-g)===Jr(l[1]-l[0])){v=p;var w=g+l[1]-l[0];b[0]=Math.min(w,(w+h)/2),b[1]=Math.max(w,(w+h)/2)}else{v=h;var N=p+l[1]-l[0];b[0]=Math.min(g,(N+g)/2),b[1]=Math.max(g,(N+g)/2)}var S=[Math.min(g,(v+g)/2),Math.max(g,(v+g)/2)];if(e>S[0]&&e<=S[1]||e>=b[0]&&e<=b[1]){({index:d}=n[f]);break}}else{var C=Math.min(h,p),O=Math.max(h,p);if(e>(C+g)/2&&e<=(O+g)/2){({index:d}=n[f]);break}}}else if(r){for(var k=0;k<m;k++)if(k===0&&e<=(r[k].coordinate+r[k+1].coordinate)/2||k>0&&k<m-1&&e>(r[k].coordinate+r[k-1].coordinate)/2&&e<=(r[k].coordinate+r[k+1].coordinate)/2||k===m-1&&e>(r[k].coordinate+r[k-1].coordinate)/2){({index:d}=r[k]);break}}return d},lP=(e,r,n)=>{if(r&&n){var{width:a,height:l}=n,{align:o,verticalAlign:d,layout:m}=r;if((m==="vertical"||m==="horizontal"&&d==="middle")&&o!=="center"&&ct(e[o]))return ya(ya({},e),{},{[o]:e[o]+(a||0)});if((m==="horizontal"||m==="vertical"&&o==="center")&&d!=="middle"&&ct(e[d]))return ya(ya({},e),{},{[d]:e[d]+(l||0)})}return e},Si=(e,r)=>e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis",QC=(e,r,n,a)=>{if(a)return e.map(m=>m.coordinate);var l,o,d=e.map(m=>(m.coordinate===r&&(l=!0),m.coordinate===n&&(o=!0),m.coordinate));return l||d.push(r),o||d.push(n),d},XC=(e,r,n)=>{if(!e)return null;var{duplicateDomain:a,type:l,range:o,scale:d,realScaleType:m,isCategorical:f,categoricalDomain:h,tickCount:g,ticks:p,niceTicks:v,axisType:b}=e;if(!d)return null;var w=m==="scaleBand"&&d.bandwidth?d.bandwidth()/2:2,N=l==="category"&&d.bandwidth?d.bandwidth()/w:0;if(N=b==="angleAxis"&&o&&o.length>=2?Jr(o[0]-o[1])*2*N:N,p||v){var S=(p||v||[]).map((C,O)=>{var k=a?a.indexOf(C):C;return{coordinate:d(k)+N,value:C,offset:N,index:O}});return S.filter(C=>!Na(C.coordinate))}return f&&h?h.map((C,O)=>({coordinate:d(C)+N,value:C,index:O,offset:N})):d.ticks&&g!=null?d.ticks(g).map((C,O)=>({coordinate:d(C)+N,value:C,offset:N,index:O})):d.domain().map((C,O)=>({coordinate:d(C)+N,value:a?a[C]:C,index:O,offset:N}))},A2=1e-4,oP=e=>{var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),l=Math.min(a[0],a[1])-A2,o=Math.max(a[0],a[1])+A2,d=e(r[0]),m=e(r[n-1]);(d<l||d>o||m<l||m>o)&&e.domain([r[0],r[n-1]])}},cP=(e,r)=>{if(!r||r.length!==2||!ct(r[0])||!ct(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),l=[e[0],e[1]];return(!ct(e[0])||e[0]<n)&&(l[0]=n),(!ct(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<n&&(l[1]=n),l},dP=e=>{var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var l=0,o=0,d=0;d<r;++d){var m=Na(e[d][n][1])?e[d][n][0]:e[d][n][1];m>=0?(e[d][n][0]=l,e[d][n][1]=l+m,l=e[d][n][1]):(e[d][n][0]=o,e[d][n][1]=o+m,o=e[d][n][1])}},uP=e=>{var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var l=0,o=0;o<r;++o){var d=Na(e[o][n][1])?e[o][n][0]:e[o][n][1];d>=0?(e[o][n][0]=l,e[o][n][1]=l+d,l=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},mP={sign:dP,expand:RE,none:Xl,silhouette:LE,wiggle:$E,positive:uP},fP=(e,r,n)=>{var a=mP[n],l=_E().keys(r).value((o,d)=>+dr(o,d,0)).order(lx).offset(a);return l(e)};function hP(e){return e==null?void 0:String(e)}function T2(e){var{axis:r,ticks:n,bandSize:a,entry:l,index:o,dataKey:d}=e;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!jr(l[r.dataKey])){var m=sC(n,"value",l[r.dataKey]);if(m)return m.coordinate+a/2}return n[o]?n[o].coordinate+a/2:null}var f=dr(l,jr(d)?r.dataKey:d);return jr(f)?null:r.scale(f)}var I2=e=>{var{axis:r,ticks:n,offset:a,bandSize:l,entry:o,index:d}=e;if(r.type==="category")return n[d]?n[d].coordinate+a:null;var m=dr(o,r.dataKey,r.scale.domain()[d]);return jr(m)?null:r.scale(m)-l/2+a},gP=e=>{var{numericAxis:r}=e,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return a<=0&&l>=0?0:l<0?l:a}return n[0]},pP=e=>{var r=e.flat(2).filter(ct);return[Math.min(...r),Math.max(...r)]},xP=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],vP=(e,r,n)=>{if(e!=null)return xP(Object.keys(e).reduce((a,l)=>{var o=e[l],{stackedData:d}=o,m=d.reduce((f,h)=>{var g=YC(h,r,n),p=pP(g);return[Math.min(f[0],p[0]),Math.max(f[1],p[1])]},[1/0,-1/0]);return[Math.min(m[0],a[0]),Math.max(m[1],a[1])]},[1/0,-1/0]))},E2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,M2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kc=(e,r,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var l=km(r,g=>g.coordinate),o=1/0,d=1,m=l.length;d<m;d++){var f=l[d],h=l[d-1];o=Math.min((f.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function P2(e){var{tooltipEntrySettings:r,dataKey:n,payload:a,value:l,name:o}=e;return ya(ya({},r),{},{dataKey:n,payload:a,value:l,name:o})}function lo(e,r){if(e)return String(e);if(typeof r=="string")return r}function yP(e,r,n,a,l){if(n==="horizontal"||n==="vertical"){var o=e>=l.left&&e<=l.left+l.width&&r>=l.top&&r<=l.top+l.height;return o?{x:e,y:r}:null}return a?rP({x:e,y:r},a):null}var bP=(e,r,n,a)=>{var l=r.find(h=>h&&h.index===n);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:l.coordinate};if(e==="centric"){var o=l.coordinate,{radius:d}=a;return ya(ya(ya({},a),Fr(a.cx,a.cy,d,o)),{},{angle:o,radius:d})}var m=l.coordinate,{angle:f}=a;return ya(ya(ya({},a),Fr(a.cx,a.cy,m,f)),{},{angle:f,radius:m})}return{x:0,y:0}},jP=(e,r)=>r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius,Ps=e=>e.layout.width,_s=e=>e.layout.height,NP=e=>e.layout.scale,ZC=e=>e.layout.margin,Im=pe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Em=pe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),JC="data-recharts-item-index",e3="data-recharts-item-data-key",Fc=60;function _2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function pu(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_2(Object(n),!0).forEach(function(a){wP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function wP(e,r,n){return(r=SP(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function SP(e){var r=kP(e,"string");return typeof r=="symbol"?r:r+""}function kP(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var CP=e=>e.brush.height;function DP(e){var r=Em(e);return r.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Fc;return n+l}return n},0)}function OP(e){var r=Em(e);return r.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:Fc;return n+l}return n},0)}function AP(e){var r=Im(e);return r.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function TP(e){var r=Im(e);return r.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var Hr=pe([Ps,_s,ZC,CP,DP,OP,AP,TP,bC,G5],(e,r,n,a,l,o,d,m,f,h)=>{var g={left:(n.left||0)+l,right:(n.right||0)+o},p={top:(n.top||0)+d,bottom:(n.bottom||0)+m},v=pu(pu({},p),g),b=v.bottom;v.bottom+=a,v=lP(v,f,h);var w=e-v.left-v.right,N=r-v.top-v.bottom;return pu(pu({brushBottom:b},v),{},{width:Math.max(w,0),height:Math.max(N,0)})}),IP=pe(Hr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),O0=pe(Ps,_s,(e,r)=>({x:0,y:0,width:e,height:r})),EP=y.createContext(null),Tn=()=>y.useContext(EP)!=null,Mm=e=>e.brush,Pm=pe([Mm,Hr,ZC],(e,r,n)=>({height:e.height,x:ct(e.x)?e.x:r.left,y:ct(e.y)?e.y:r.top+r.height+r.brushBottom-((n==null?void 0:n.bottom)||0),width:ct(e.width)?e.width:r.width})),gp={},pp={},xp={},R2;function MP(){return R2||(R2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n,a,{signal:l,edges:o}={}){let d,m=null;const f=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),g=()=>{m!==null&&(n.apply(d,m),d=void 0,m=null)},p=()=>{h&&g(),N()};let v=null;const b=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},a)},w=()=>{v!==null&&(clearTimeout(v),v=null)},N=()=>{w(),d=void 0,m=null},S=()=>{g()},C=function(...O){if(l!=null&&l.aborted)return;d=this,m=O;const k=v==null;b(),f&&k&&g()};return C.schedule=b,C.cancel=N,C.flush=S,l==null||l.addEventListener("abort",N,{once:!0}),C}e.debounce=r})(xp)),xp}var L2;function PP(){return L2||(L2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=MP();function n(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:d=!1,trailing:m=!0,maxWait:f}=o,h=Array(2);d&&(h[0]="leading"),m&&(h[1]="trailing");let g,p=null;const v=r.debounce(function(...N){g=a.apply(this,N),p=null},l,{edges:h}),b=function(...N){return f!=null&&(p===null&&(p=Date.now()),Date.now()-p>=f)?(g=a.apply(this,N),p=Date.now(),v.cancel(),v.schedule(),g):(v.apply(this,N),g)},w=()=>(v.flush(),g);return b.cancel=v.cancel,b.flush=w,b}e.debounce=n})(pp)),pp}var $2;function _P(){return $2||($2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=PP();function n(a,l=0,o={}){const{leading:d=!0,trailing:m=!0}=o;return r.debounce(a,l,{leading:d,maxWait:l,trailing:m})}e.throttle=n})(gp)),gp}var vp,z2;function RP(){return z2||(z2=1,vp=_P().throttle),vp}var LP=RP();const $P=Za(LP);var Ku=function(r,n){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o]},t3=(e,r,n)=>{var{width:a="100%",height:l="100%",aspect:o,maxHeight:d}=n,m=As(a)?e:Number(a),f=As(l)?r:Number(l);return o&&o>0&&(m?f=m/o:f&&(m=f*o),d&&f>d&&(f=d)),{calculatedWidth:m,calculatedHeight:f}},zP={width:0,height:0,overflow:"visible"},BP={width:0,overflowX:"visible"},FP={height:0,overflowY:"visible"},UP={},VP=e=>{var{width:r,height:n}=e,a=As(r),l=As(n);return a&&l?zP:a?BP:l?FP:UP};function qP(e){var{width:r,height:n,aspect:a}=e,l=r,o=n;return l===void 0&&o===void 0?(l="100%",o="100%"):l===void 0?l=a&&a>0?void 0:"100%":o===void 0&&(o=a&&a>0?void 0:"100%"),{width:l,height:o}}function bn(e){return Number.isFinite(e)}function Zl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vx.apply(null,arguments)}function B2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function F2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?B2(Object(n),!0).forEach(function(a){WP(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function WP(e,r,n){return(r=HP(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function HP(e){var r=KP(e,"string");return typeof r=="symbol"?r:r+""}function KP(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var r3=y.createContext({width:-1,height:-1});function n3(e){var{children:r,width:n,height:a}=e,l=y.useMemo(()=>({width:n,height:a}),[n,a]);return n<=0||a<=0?null:y.createElement(r3.Provider,{value:l},r)}var A0=()=>y.useContext(r3),GP=y.forwardRef((e,r)=>{var{aspect:n,initialDimension:a={width:-1,height:-1},width:l,height:o,minWidth:d=0,minHeight:m,maxHeight:f,children:h,debounce:g=0,id:p,className:v,onResize:b,style:w={}}=e,N=y.useRef(null),S=y.useRef();S.current=b,y.useImperativeHandle(r,()=>N.current);var[C,O]=y.useState({containerWidth:a.width,containerHeight:a.height}),k=y.useCallback((P,z)=>{O(U=>{var q=Math.round(P),Y=Math.round(z);return U.containerWidth===q&&U.containerHeight===Y?U:{containerWidth:q,containerHeight:Y}})},[]);y.useEffect(()=>{var P=Y=>{var ee,{width:_,height:G}=Y[0].contentRect;k(_,G),(ee=S.current)===null||ee===void 0||ee.call(S,_,G)};g>0&&(P=$P(P,g,{trailing:!0,leading:!1}));var z=new ResizeObserver(P),{width:U,height:q}=N.current.getBoundingClientRect();return k(U,q),z.observe(N.current),()=>{z.disconnect()}},[k,g]);var{containerWidth:E,containerHeight:M}=C;Ku(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:R}=t3(E,M,{width:l,height:o,aspect:n,maxHeight:f});return Ku(D>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,R,l,o,d,m,n),y.createElement("div",{id:p?"".concat(p):void 0,className:Vt("recharts-responsive-container",v),style:F2(F2({},w),{},{width:l,height:o,minWidth:d,minHeight:m,maxHeight:f}),ref:N},y.createElement("div",{style:VP({width:l,height:o})},y.createElement(n3,{width:D,height:R},h)))}),ys=y.forwardRef((e,r)=>{var n=A0();if(Zl(n.width)&&Zl(n.height))return e.children;var{width:a,height:l}=qP({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:d}=t3(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return ct(o)&&ct(d)?y.createElement(n3,{width:o,height:d},e.children):y.createElement(GP,vx({},e,{width:a,height:l,ref:r}))}),_m=()=>{var e,r=Tn(),n=tt(IP),a=tt(Pm),l=(e=tt(Mm))===null||e===void 0?void 0:e.padding;return!r||!a||!l?n:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},YP={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},a3=()=>{var e;return(e=tt(Hr))!==null&&e!==void 0?e:YP},T0=()=>tt(Ps),I0=()=>tt(_s),QP=()=>tt(e=>e.layout.margin),Lt=e=>e.layout.layoutType,Rm=()=>tt(Lt),Lm=e=>{var r=Nr(),n=Tn(),{width:a,height:l}=e,o=A0(),d=a,m=l;return o&&(d=o.width>0?o.width:a,m=o.height>0?o.height:l),y.useEffect(()=>{!n&&Zl(d)&&Zl(m)&&r(WM({width:d,height:m}))},[r,n,d,m]),null},XP={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},s3=aa({name:"legend",initialState:XP,reducers:{setLegendSize(e,r){e.size.width=r.payload.width,e.size.height=r.payload.height},setLegendSettings(e,r){e.settings.align=r.payload.align,e.settings.layout=r.payload.layout,e.settings.verticalAlign=r.payload.verticalAlign,e.settings.itemSorter=r.payload.itemSorter},addLegendPayload:{reducer(e,r){e.payload.push(r.payload)},prepare:Cn()},removeLegendPayload:{reducer(e,r){var n=Cs(e).payload.indexOf(r.payload);n>-1&&e.payload.splice(n,1)},prepare:Cn()}}}),{setLegendSize:U2,setLegendSettings:ZP,addLegendPayload:i3,removeLegendPayload:l3}=s3.actions,JP=s3.reducer,e_=["contextPayload"];function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yx.apply(null,arguments)}function V2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Jl(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?V2(Object(n),!0).forEach(function(a){E0(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function E0(e,r,n){return(r=t_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function t_(e){var r=r_(e,"string");return typeof r=="symbol"?r:r+""}function r_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function n_(e,r){if(e==null)return{};var n,a,l=a_(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function a_(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function s_(e){return e.value}function i_(e){var{contextPayload:r}=e,n=n_(e,e_),a=pC(r,e.payloadUniqBy,s_),l=Jl(Jl({},n),{},{payload:a});return y.isValidElement(e.content)?y.cloneElement(e.content,l):typeof e.content=="function"?y.createElement(e.content,l):y.createElement(b0,l)}function l_(e,r,n,a,l,o){var{layout:d,align:m,verticalAlign:f}=r,h,g;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(m==="center"&&d==="vertical"?h={left:((a||0)-o.width)/2}:h=m==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?g={top:((l||0)-o.height)/2}:g=f==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Jl(Jl({},h),g)}function o_(e){var r=Nr();return y.useEffect(()=>{r(ZP(e))},[r,e]),null}function c_(e){var r=Nr();return y.useEffect(()=>(r(U2(e)),()=>{r(U2({width:0,height:0}))}),[r,e]),null}function d_(e){var r=X5(),n=sE(),a=QP(),{width:l,height:o,wrapperStyle:d,portal:m}=e,[f,h]=jC([r]),g=T0(),p=I0();if(g==null||p==null)return null;var v=g-(a.left||0)-(a.right||0),b=Ka.getWidthOrHeight(e.layout,o,l,v),w=m?d:Jl(Jl({position:"absolute",width:(b==null?void 0:b.width)||l||"auto",height:(b==null?void 0:b.height)||o||"auto"},l_(d,e,a,g,p,f)),d),N=m??n;if(N==null)return null;var S=y.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:h},y.createElement(o_,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),y.createElement(c_,{width:f.width,height:f.height}),y.createElement(i_,yx({},e,b,{margin:a,chartWidth:g,chartHeight:p,contextPayload:r})));return _k.createPortal(S,N)}class Ka extends y.PureComponent{static getWidthOrHeight(r,n,a,l){return r==="vertical"&&ct(n)?{height:n}:r==="horizontal"?{width:a||l}:null}render(){return y.createElement(d_,this.props)}}E0(Ka,"displayName","Legend");E0(Ka,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function bx(){return bx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bx.apply(null,arguments)}function q2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function yp(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?q2(Object(n),!0).forEach(function(a){u_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function u_(e,r,n){return(r=m_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function m_(e){var r=f_(e,"string");return typeof r=="symbol"?r:r+""}function f_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function h_(e){return Array.isArray(e)&&Qa(e[0])&&Qa(e[1])?e.join(" ~ "):e}var g_=e=>{var{separator:r=" : ",contentStyle:n={},itemStyle:a={},labelStyle:l={},payload:o,formatter:d,itemSorter:m,wrapperClassName:f,labelClassName:h,label:g,labelFormatter:p,accessibilityLayer:v=!1}=e,b=()=>{if(o&&o.length){var M={padding:0,margin:0},D=(m?km(o,m):o).map((R,P)=>{if(R.type==="none")return null;var z=R.formatter||d||h_,{value:U,name:q}=R,Y=U,ee=q;if(z){var _=z(U,q,R,P,o);if(Array.isArray(_))[Y,ee]=_;else if(_!=null)Y=_;else return null}var G=yp({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},a);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:G},Qa(ee)?y.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,Qa(ee)?y.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,y.createElement("span",{className:"recharts-tooltip-item-value"},Y),y.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:M},D)}return null},w=yp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),N=yp({margin:0},l),S=!jr(g),C=S?g:"",O=Vt("recharts-default-tooltip",f),k=Vt("recharts-tooltip-label",h);S&&p&&o!==void 0&&o!==null&&(C=p(g,o));var E=v?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",bx({className:O,style:w},E),y.createElement("p",{className:k,style:N},y.isValidElement(C)?C:"".concat(C)),b())},oc="recharts-tooltip-wrapper",p_={visibility:"hidden"};function x_(e){var{coordinate:r,translateX:n,translateY:a}=e;return Vt(oc,{["".concat(oc,"-right")]:ct(n)&&r&&ct(r.x)&&n>=r.x,["".concat(oc,"-left")]:ct(n)&&r&&ct(r.x)&&n<r.x,["".concat(oc,"-bottom")]:ct(a)&&r&&ct(r.y)&&a>=r.y,["".concat(oc,"-top")]:ct(a)&&r&&ct(r.y)&&a<r.y})}function W2(e){var{allowEscapeViewBox:r,coordinate:n,key:a,offsetTopLeft:l,position:o,reverseDirection:d,tooltipDimension:m,viewBox:f,viewBoxDimension:h}=e;if(o&&ct(o[a]))return o[a];var g=n[a]-m-(l>0?l:0),p=n[a]+l;if(r[a])return d[a]?g:p;var v=f[a];if(v==null)return 0;if(d[a]){var b=g,w=v;return b<w?Math.max(p,v):Math.max(g,v)}if(h==null)return 0;var N=p+m,S=v+h;return N>S?Math.max(g,v):Math.max(p,v)}function v_(e){var{translateX:r,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(r,"px, ").concat(n,"px, 0)"):"translate(".concat(r,"px, ").concat(n,"px)")}}function y_(e){var{allowEscapeViewBox:r,coordinate:n,offsetTopLeft:a,position:l,reverseDirection:o,tooltipBox:d,useTranslate3d:m,viewBox:f}=e,h,g,p;return d.height>0&&d.width>0&&n?(g=W2({allowEscapeViewBox:r,coordinate:n,key:"x",offsetTopLeft:a,position:l,reverseDirection:o,tooltipDimension:d.width,viewBox:f,viewBoxDimension:f.width}),p=W2({allowEscapeViewBox:r,coordinate:n,key:"y",offsetTopLeft:a,position:l,reverseDirection:o,tooltipDimension:d.height,viewBox:f,viewBoxDimension:f.height}),h=v_({translateX:g,translateY:p,useTranslate3d:m})):h=p_,{cssProperties:h,cssClasses:x_({translateX:g,translateY:p,coordinate:n})}}function H2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function xu(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?H2(Object(n),!0).forEach(function(a){jx(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function jx(e,r,n){return(r=b_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function b_(e){var r=j_(e,"string");return typeof r=="symbol"?r:r+""}function j_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class N_ extends y.PureComponent{constructor(){super(...arguments),jx(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),jx(this,"handleKeyDown",r=>{if(r.key==="Escape"){var n,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,n;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:l,children:o,coordinate:d,hasPayload:m,isAnimationActive:f,offset:h,position:g,reverseDirection:p,useTranslate3d:v,viewBox:b,wrapperStyle:w,lastBoundingBox:N,innerRef:S,hasPortalFromProps:C}=this.props,{cssClasses:O,cssProperties:k}=y_({allowEscapeViewBox:n,coordinate:d,offsetTopLeft:h,position:g,reverseDirection:p,tooltipBox:{height:N.height,width:N.width},useTranslate3d:v,viewBox:b}),E=C?{}:xu(xu({transition:f&&r?"transform ".concat(a,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&m?"visible":"hidden",position:"absolute",top:0,left:0}),M=xu(xu({},E),{},{visibility:!this.state.dismissed&&r&&m?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:M,ref:S},o)}}var w_=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ki={devToolsEnabled:!1,isSsr:w_()},o3=()=>tt(e=>e.rootProps.accessibilityLayer);function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nx.apply(null,arguments)}function K2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function G2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?K2(Object(n),!0).forEach(function(a){S_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function S_(e,r,n){return(r=k_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function k_(e){var r=C_(e,"string");return typeof r=="symbol"?r:r+""}function C_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Y2={curveBasisClosed:SE,curveBasisOpen:kE,curveBasis:wE,curveBumpX:cE,curveBumpY:dE,curveLinearClosed:CE,curveLinear:wm,curveMonotoneX:DE,curveMonotoneY:OE,curveNatural:AE,curveStep:TE,curveStepAfter:EE,curveStepBefore:IE},vu=e=>bn(e.x)&&bn(e.y),cc=e=>e.x,dc=e=>e.y,D_=(e,r)=>{if(typeof e=="function")return e;var n="curve".concat(Lc(e));return(n==="curveMonotone"||n==="curveBump")&&r?Y2["".concat(n).concat(r==="vertical"?"Y":"X")]:Y2[n]||wm},O_=e=>{var{type:r="linear",points:n=[],baseLine:a,layout:l,connectNulls:o=!1}=e,d=D_(r,l),m=o?n.filter(vu):n,f;if(Array.isArray(a)){var h=o?a.filter(p=>vu(p)):a,g=m.map((p,v)=>G2(G2({},p),{},{base:h[v]}));return l==="vertical"?f=du().y(dc).x1(cc).x0(p=>p.base.x):f=du().x(cc).y1(dc).y0(p=>p.base.y),f.defined(vu).curve(d),f(g)}return l==="vertical"&&ct(a)?f=du().y(dc).x1(cc).x0(a):ct(a)?f=du().x(cc).y1(dc).y0(a):f=Hk().x(cc).y(dc),f.defined(vu).curve(d),f(m)},M0=e=>{var{className:r,points:n,path:a,pathRef:l}=e;if((!n||!n.length)&&!a)return null;var o=n&&n.length?O_(e):a;return y.createElement("path",Nx({},ra(e),v0(e),{className:Vt("recharts-curve",r),d:o===null?void 0:o,ref:l}))},A_=["x","y","top","left","width","height","className"];function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wx.apply(null,arguments)}function Q2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function T_(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Q2(Object(n),!0).forEach(function(a){I_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function I_(e,r,n){return(r=E_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function E_(e){var r=M_(e,"string");return typeof r=="symbol"?r:r+""}function M_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function P_(e,r){if(e==null)return{};var n,a,l=__(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function __(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var R_=(e,r,n,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n),L_=e=>{var{x:r=0,y:n=0,top:a=0,left:l=0,width:o=0,height:d=0,className:m}=e,f=P_(e,A_),h=T_({x:r,y:n,top:a,left:l,width:o,height:d},f);return!ct(r)||!ct(n)||!ct(o)||!ct(d)||!ct(a)||!ct(l)?null:y.createElement("path",wx({},An(h),{className:Vt("recharts-cross",m),d:R_(r,n,o,d,a,l)}))};function $_(e,r,n,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?r.x-l:n.left+.5,y:e==="horizontal"?n.top+.5:r.y-l,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function X2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function z_(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?X2(Object(n),!0).forEach(function(a){B_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function B_(e,r,n){return(r=F_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function F_(e){var r=U_(e,"string");return typeof r=="symbol"?r:r+""}function U_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function un(e,r){var n=z_({},e),a=r,l=Object.keys(r),o=l.reduce((d,m)=>(d[m]===void 0&&a[m]!==void 0&&(d[m]=a[m]),d),n);return o}function V_(){}function q_(e){return e!=null}function Z2(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function J2(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Z2(Object(n),!0).forEach(function(a){W_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z2(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function W_(e,r,n){return(r=H_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function H_(e){var r=K_(e,"string");return typeof r=="symbol"?r:r+""}function K_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var G_=e=>e.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),c3=(e,r,n)=>e.map(a=>"".concat(G_(a)," ").concat(r,"ms ").concat(n)).join(","),Y_=(e,r)=>[Object.keys(e),Object.keys(r)].reduce((n,a)=>n.filter(l=>a.includes(l))),Cc=(e,r)=>Object.keys(r).reduce((n,a)=>J2(J2({},n),{},{[a]:e(a,r[a])}),{});function e1(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function cn(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?e1(Object(n),!0).forEach(function(a){Q_(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Q_(e,r,n){return(r=X_(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function X_(e){var r=Z_(e,"string");return typeof r=="symbol"?r:r+""}function Z_(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var Gu=(e,r,n)=>e+(r-e)*n,Sx=e=>{var{from:r,to:n}=e;return r!==n},d3=(e,r,n)=>{var a=Cc((l,o)=>{if(Sx(o)){var[d,m]=e(o.from,o.to,o.velocity);return cn(cn({},o),{},{from:d,velocity:m})}return o},r);return n<1?Cc((l,o)=>Sx(o)?cn(cn({},o),{},{velocity:Gu(o.velocity,a[l].velocity,n),from:Gu(o.from,a[l].from,n)}):o,r):d3(e,a,n-1)};function J_(e,r,n,a,l,o){var d,m=a.reduce((v,b)=>cn(cn({},v),{},{[b]:{from:e[b],velocity:0,to:r[b]}}),{}),f=()=>Cc((v,b)=>b.from,m),h=()=>!Object.values(m).filter(Sx).length,g=null,p=v=>{d||(d=v);var b=v-d,w=b/n.dt;m=d3(n,m,w),l(cn(cn(cn({},e),r),f())),d=v,h()||(g=o.setTimeout(p))};return()=>(g=o.setTimeout(p),()=>{g()})}function eR(e,r,n,a,l,o,d){var m=null,f=l.reduce((p,v)=>cn(cn({},p),{},{[v]:[e[v],r[v]]}),{}),h,g=p=>{h||(h=p);var v=(p-h)/a,b=Cc((N,S)=>Gu(...S,n(v)),f);if(o(cn(cn(cn({},e),r),b)),v<1)m=d.setTimeout(g);else{var w=Cc((N,S)=>Gu(...S,n(1)),f);o(cn(cn(cn({},e),r),w))}};return()=>(m=d.setTimeout(g),()=>{m()})}const tR=(e,r,n,a,l,o)=>{var d=Y_(e,r);return n.isStepper===!0?J_(e,r,n,d,l,o):eR(e,r,n,a,d,l,o)};var Yu=1e-4,u3=(e,r)=>[0,3*e,3*r-6*e,3*e-3*r+1],m3=(e,r)=>e.map((n,a)=>n*r**a).reduce((n,a)=>n+a),t1=(e,r)=>n=>{var a=u3(e,r);return m3(a,n)},rR=(e,r)=>n=>{var a=u3(e,r),l=[...a.map((o,d)=>o*d).slice(1),0];return m3(l,n)},r1=function(){for(var r,n,a,l,o=arguments.length,d=new Array(o),m=0;m<o;m++)d[m]=arguments[m];if(d.length===1)switch(d[0]){case"linear":[r,a,n,l]=[0,0,1,1];break;case"ease":[r,a,n,l]=[.25,.1,.25,1];break;case"ease-in":[r,a,n,l]=[.42,0,1,1];break;case"ease-out":[r,a,n,l]=[.42,0,.58,1];break;case"ease-in-out":[r,a,n,l]=[0,0,.58,1];break;default:{var f=d[0].split("(");f[0]==="cubic-bezier"&&f[1].split(")")[0].split(",").length===4&&([r,a,n,l]=f[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else d.length===4&&([r,a,n,l]=d);var h=t1(r,n),g=t1(a,l),p=rR(r,n),v=w=>w>1?1:w<0?0:w,b=w=>{for(var N=w>1?1:w,S=N,C=0;C<8;++C){var O=h(S)-N,k=p(S);if(Math.abs(O-N)<Yu||k<Yu)return g(S);S=v(S-O/k)}return g(S)};return b.isStepper=!1,b},nR=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:l=17}=r,o=(d,m,f)=>{var h=-(d-m)*n,g=f*a,p=f+(h-g)*l/1e3,v=f*l/1e3+d;return Math.abs(v-m)<Yu&&Math.abs(p)<Yu?[m,0]:[v,p]};return o.isStepper=!0,o.dt=l,o},aR=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return r1(e);case"spring":return nR();default:if(e.split("(")[0]==="cubic-bezier")return r1(e)}return typeof e=="function"?e:null};function sR(e){var r,n=()=>null,a=!1,l=null,o=d=>{if(!a){if(Array.isArray(d)){if(!d.length)return;var m=d,[f,...h]=m;if(typeof f=="number"){l=e.setTimeout(o.bind(null,h),f);return}o(f),l=e.setTimeout(o.bind(null,h));return}typeof d=="string"&&(r=d,n(r)),typeof d=="object"&&(r=d,n(r)),typeof d=="function"&&d()}};return{stop:()=>{a=!0},start:d=>{a=!1,l&&(l(),l=null),o(d)},subscribe:d=>(n=d,()=>{n=()=>null}),getTimeoutController:()=>e}}class iR{setTimeout(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=d=>{d-a>=n?r(d):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{cancelAnimationFrame(l)}}}function lR(){return sR(new iR)}var oR=y.createContext(lR);function cR(e,r){var n=y.useContext(oR);return y.useMemo(()=>r??n(e),[e,r,n])}var dR={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},n1={t:0},bp={t:1};function Uc(e){var r=un(e,dR),{isActive:n,canBegin:a,duration:l,easing:o,begin:d,onAnimationEnd:m,onAnimationStart:f,children:h}=r,g=cR(r.animationId,r.animationManager),[p,v]=y.useState(n?n1:bp),b=y.useRef(null);return y.useEffect(()=>{n||v(bp)},[n]),y.useEffect(()=>{if(!n||!a)return V_;var w=tR(n1,bp,aR(o),l,v,g.getTimeoutController()),N=()=>{b.current=w()};return g.start([f,d,N,l,m]),()=>{g.stop(),b.current&&b.current(),m()}},[n,a,l,o,d,f,m,g]),h(p.t)}function Vc(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=y.useRef(jc(r)),a=y.useRef(e);return a.current!==e&&(n.current=jc(r),a.current=e),n.current}var uR=["radius"],mR=["radius"];function a1(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function s1(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?a1(Object(n),!0).forEach(function(a){fR(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function fR(e,r,n){return(r=hR(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function hR(e){var r=gR(e,"string");return typeof r=="symbol"?r:r+""}function gR(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qu.apply(null,arguments)}function i1(e,r){if(e==null)return{};var n,a,l=pR(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function pR(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var l1=(e,r,n,a,l)=>{var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),d=a>=0?1:-1,m=n>=0?1:-1,f=a>=0&&n>=0||a<0&&n<0?1:0,h;if(o>0&&l instanceof Array){for(var g=[0,0,0,0],p=0,v=4;p<v;p++)g[p]=l[p]>o?o:l[p];h="M".concat(e,",").concat(r+d*g[0]),g[0]>0&&(h+="A ".concat(g[0],",").concat(g[0],",0,0,").concat(f,",").concat(e+m*g[0],",").concat(r)),h+="L ".concat(e+n-m*g[1],",").concat(r),g[1]>0&&(h+="A ".concat(g[1],",").concat(g[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(r+d*g[1])),h+="L ".concat(e+n,",").concat(r+a-d*g[2]),g[2]>0&&(h+="A ".concat(g[2],",").concat(g[2],",0,0,").concat(f,`,
        `).concat(e+n-m*g[2],",").concat(r+a)),h+="L ".concat(e+m*g[3],",").concat(r+a),g[3]>0&&(h+="A ".concat(g[3],",").concat(g[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(r+a-d*g[3])),h+="Z"}else if(o>0&&l===+l&&l>0){var b=Math.min(o,l);h="M ".concat(e,",").concat(r+d*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+m*b,",").concat(r,`
            L `).concat(e+n-m*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+n,",").concat(r+d*b,`
            L `).concat(e+n,",").concat(r+a-d*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e+n-m*b,",").concat(r+a,`
            L `).concat(e+m*b,",").concat(r+a,`
            A `).concat(b,",").concat(b,",0,0,").concat(f,",").concat(e,",").concat(r+a-d*b," Z")}else h="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return h},xR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},f3=e=>{var r=un(e,xR),n=y.useRef(null),[a,l]=y.useState(-1);y.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var V=n.current.getTotalLength();V&&l(V)}catch{}},[]);var{x:o,y:d,width:m,height:f,radius:h,className:g}=r,{animationEasing:p,animationDuration:v,animationBegin:b,isAnimationActive:w,isUpdateAnimationActive:N}=r,S=y.useRef(m),C=y.useRef(f),O=y.useRef(o),k=y.useRef(d),E=y.useMemo(()=>({x:o,y:d,width:m,height:f,radius:h}),[o,d,m,f,h]),M=Vc(E,"rectangle-");if(o!==+o||d!==+d||m!==+m||f!==+f||m===0||f===0)return null;var D=Vt("recharts-rectangle",g);if(!N){var R=An(r),{radius:P}=R,z=i1(R,uR);return y.createElement("path",Qu({},z,{radius:typeof h=="number"?h:void 0,className:D,d:l1(o,d,m,f,h)}))}var U=S.current,q=C.current,Y=O.current,ee=k.current,_="0px ".concat(a===-1?1:a,"px"),G="".concat(a,"px 0px"),L=c3(["strokeDasharray"],v,typeof p=="string"?p:void 0);return y.createElement(Uc,{animationId:M,key:M,canBegin:a>0,duration:v,easing:p,isActive:N,begin:b},V=>{var Z=Or(U,m,V),K=Or(q,f,V),de=Or(Y,o,V),B=Or(ee,d,V);n.current&&(S.current=Z,C.current=K,O.current=de,k.current=B);var le;w?V>0?le={transition:L,strokeDasharray:G}:le={strokeDasharray:_}:le={strokeDasharray:G};var ye=An(r),{radius:ge}=ye,Ne=i1(ye,mR);return y.createElement("path",Qu({},Ne,{radius:typeof h=="number"?h:void 0,className:D,d:l1(de,B,Z,K,h),ref:n,style:s1(s1({},le),r.style)}))})};function h3(e){var{cx:r,cy:n,radius:a,startAngle:l,endAngle:o}=e,d=Fr(r,n,a,l),m=Fr(r,n,a,o);return{points:[d,m],cx:r,cy:n,radius:a,startAngle:l,endAngle:o}}function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kx.apply(null,arguments)}var vR=(e,r)=>{var n=Jr(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},yu=e=>{var{cx:r,cy:n,radius:a,angle:l,sign:o,isExternal:d,cornerRadius:m,cornerIsExternal:f}=e,h=m*(d?1:-1)+a,g=Math.asin(m/h)/Hu,p=f?l:l+o*g,v=Fr(r,n,h,p),b=Fr(r,n,a,p),w=f?l-o*g:l,N=Fr(r,n,h*Math.cos(g*Hu),w);return{center:v,circleTangency:b,lineTangency:N,theta:g}},g3=e=>{var{cx:r,cy:n,innerRadius:a,outerRadius:l,startAngle:o,endAngle:d}=e,m=vR(o,d),f=o+m,h=Fr(r,n,l,o),g=Fr(r,n,l,f),p="M ".concat(h.x,",").concat(h.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(m)>180),",").concat(+(o>f),`,
    `).concat(g.x,",").concat(g.y,`
  `);if(a>0){var v=Fr(r,n,a,o),b=Fr(r,n,a,f);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(m)>180),",").concat(+(o<=f),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},yR=e=>{var{cx:r,cy:n,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:d,cornerIsExternal:m,startAngle:f,endAngle:h}=e,g=Jr(h-f),{circleTangency:p,lineTangency:v,theta:b}=yu({cx:r,cy:n,radius:l,angle:f,sign:g,cornerRadius:o,cornerIsExternal:m}),{circleTangency:w,lineTangency:N,theta:S}=yu({cx:r,cy:n,radius:l,angle:h,sign:-g,cornerRadius:o,cornerIsExternal:m}),C=m?Math.abs(f-h):Math.abs(f-h)-b-S;if(C<0)return d?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):g3({cx:r,cy:n,innerRadius:a,outerRadius:l,startAngle:f,endAngle:h});var O="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(g<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(C>180),",").concat(+(g<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(g<0),",").concat(N.x,",").concat(N.y,`
  `);if(a>0){var{circleTangency:k,lineTangency:E,theta:M}=yu({cx:r,cy:n,radius:a,angle:f,sign:g,isExternal:!0,cornerRadius:o,cornerIsExternal:m}),{circleTangency:D,lineTangency:R,theta:P}=yu({cx:r,cy:n,radius:a,angle:h,sign:-g,isExternal:!0,cornerRadius:o,cornerIsExternal:m}),z=m?Math.abs(f-h):Math.abs(f-h)-M-P;if(z<0&&o===0)return"".concat(O,"L").concat(r,",").concat(n,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(g<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(z>180),",").concat(+(g>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(g<0),",").concat(E.x,",").concat(E.y,"Z")}else O+="L".concat(r,",").concat(n,"Z");return O},bR={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},p3=e=>{var r=un(e,bR),{cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:d,forceCornerRadius:m,cornerIsExternal:f,startAngle:h,endAngle:g,className:p}=r;if(o<l||h===g)return null;var v=Vt("recharts-sector",p),b=o-l,w=yn(d,b,0,!0),N;return w>0&&Math.abs(h-g)<360?N=yR({cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(w,b/2),forceCornerRadius:m,cornerIsExternal:f,startAngle:h,endAngle:g}):N=g3({cx:n,cy:a,innerRadius:l,outerRadius:o,startAngle:h,endAngle:g}),y.createElement("path",kx({},An(r),{className:v,d:N}))};function jR(e,r,n){var a,l,o,d;if(e==="horizontal")a=r.x,o=a,l=n.top,d=n.top+n.height;else if(e==="vertical")l=r.y,d=l,a=n.left,o=n.left+n.width;else if(r.cx!=null&&r.cy!=null)if(e==="centric"){var{cx:m,cy:f,innerRadius:h,outerRadius:g,angle:p}=r,v=Fr(m,f,h,p),b=Fr(m,f,g,p);a=v.x,l=v.y,o=b.x,d=b.y}else return h3(r);return[{x:a,y:l},{x:o,y:d}]}var jp={},Np={},wp={},o1;function NR(){return o1||(o1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=vC();function n(a){return r.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(wp)),wp}var c1;function wR(){return c1||(c1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=NR();function n(a){return a?(a=r.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(Np)),Np}var d1;function SR(){return d1||(d1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=yC(),n=wR();function a(l,o,d){d&&typeof d!="number"&&r.isIterateeCall(l,o,d)&&(o=d=void 0),l=n.toFinite(l),o===void 0?(o=l,l=0):o=n.toFinite(o),d=d===void 0?l<o?1:-1:n.toFinite(d);const m=Math.max(Math.ceil((o-l)/(d||1)),0),f=new Array(m);for(let h=0;h<m;h++)f[h]=l,l+=d;return f}e.range=a})(jp)),jp}var Sp,u1;function kR(){return u1||(u1=1,Sp=SR().range),Sp}var CR=kR();const x3=Za(CR);function vi(e,r){return e==null||r==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function DR(e,r){return e==null||r==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function P0(e){let r,n,a;e.length!==2?(r=vi,n=(m,f)=>vi(e(m),f),a=(m,f)=>e(m)-f):(r=e===vi||e===DR?e:OR,n=e,a=e);function l(m,f,h=0,g=m.length){if(h<g){if(r(f,f)!==0)return g;do{const p=h+g>>>1;n(m[p],f)<0?h=p+1:g=p}while(h<g)}return h}function o(m,f,h=0,g=m.length){if(h<g){if(r(f,f)!==0)return g;do{const p=h+g>>>1;n(m[p],f)<=0?h=p+1:g=p}while(h<g)}return h}function d(m,f,h=0,g=m.length){const p=l(m,f,h,g-1);return p>h&&a(m[p-1],f)>-a(m[p],f)?p-1:p}return{left:l,center:d,right:o}}function OR(){return 0}function v3(e){return e===null?NaN:+e}function*AR(e,r){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const TR=P0(vi),qc=TR.right;P0(v3).center;class m1 extends Map{constructor(r,n=MR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(const[a,l]of r)this.set(a,l)}get(r){return super.get(f1(this,r))}has(r){return super.has(f1(this,r))}set(r,n){return super.set(IR(this,r),n)}delete(r){return super.delete(ER(this,r))}}function f1({_intern:e,_key:r},n){const a=r(n);return e.has(a)?e.get(a):n}function IR({_intern:e,_key:r},n){const a=r(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function ER({_intern:e,_key:r},n){const a=r(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function MR(e){return e!==null&&typeof e=="object"?e.valueOf():e}function PR(e=vi){if(e===vi)return y3;if(typeof e!="function")throw new TypeError("compare is not a function");return(r,n)=>{const a=e(r,n);return a||a===0?a:(e(n,n)===0)-(e(r,r)===0)}}function y3(e,r){return(e==null||!(e>=e))-(r==null||!(r>=r))||(e<r?-1:e>r?1:0)}const _R=Math.sqrt(50),RR=Math.sqrt(10),LR=Math.sqrt(2);function Xu(e,r,n){const a=(r-e)/Math.max(0,n),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),d=o>=_R?10:o>=RR?5:o>=LR?2:1;let m,f,h;return l<0?(h=Math.pow(10,-l)/d,m=Math.round(e*h),f=Math.round(r*h),m/h<e&&++m,f/h>r&&--f,h=-h):(h=Math.pow(10,l)*d,m=Math.round(e/h),f=Math.round(r/h),m*h<e&&++m,f*h>r&&--f),f<m&&.5<=n&&n<2?Xu(e,r,n*2):[m,f,h]}function Cx(e,r,n){if(r=+r,e=+e,n=+n,!(n>0))return[];if(e===r)return[e];const a=r<e,[l,o,d]=a?Xu(r,e,n):Xu(e,r,n);if(!(o>=l))return[];const m=o-l+1,f=new Array(m);if(a)if(d<0)for(let h=0;h<m;++h)f[h]=(o-h)/-d;else for(let h=0;h<m;++h)f[h]=(o-h)*d;else if(d<0)for(let h=0;h<m;++h)f[h]=(l+h)/-d;else for(let h=0;h<m;++h)f[h]=(l+h)*d;return f}function Dx(e,r,n){return r=+r,e=+e,n=+n,Xu(e,r,n)[2]}function Ox(e,r,n){r=+r,e=+e,n=+n;const a=r<e,l=a?Dx(r,e,n):Dx(e,r,n);return(a?-1:1)*(l<0?1/-l:l)}function h1(e,r){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function g1(e,r){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function b3(e,r,n=0,a=1/0,l){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=r&&r<=a))return e;for(l=l===void 0?y3:PR(l);a>n;){if(a-n>600){const f=a-n+1,h=r-n+1,g=Math.log(f),p=.5*Math.exp(2*g/3),v=.5*Math.sqrt(g*p*(f-p)/f)*(h-f/2<0?-1:1),b=Math.max(n,Math.floor(r-h*p/f+v)),w=Math.min(a,Math.floor(r+(f-h)*p/f+v));b3(e,r,b,w,l)}const o=e[r];let d=n,m=a;for(uc(e,n,r),l(e[a],o)>0&&uc(e,n,a);d<m;){for(uc(e,d,m),++d,--m;l(e[d],o)<0;)++d;for(;l(e[m],o)>0;)--m}l(e[n],o)===0?uc(e,n,m):(++m,uc(e,m,a)),m<=r&&(n=m+1),r<=m&&(a=m-1)}return e}function uc(e,r,n){const a=e[r];e[r]=e[n],e[n]=a}function $R(e,r,n){if(e=Float64Array.from(AR(e)),!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return g1(e);if(r>=1)return h1(e);var a,l=(a-1)*r,o=Math.floor(l),d=h1(b3(e,o).subarray(0,o+1)),m=g1(e.subarray(o+1));return d+(m-d)*(l-o)}}function zR(e,r,n=v3){if(!(!(a=e.length)||isNaN(r=+r))){if(r<=0||a<2)return+n(e[0],0,e);if(r>=1)return+n(e[a-1],a-1,e);var a,l=(a-1)*r,o=Math.floor(l),d=+n(e[o],o,e),m=+n(e[o+1],o+1,e);return d+(m-d)*(l-o)}}function BR(e,r,n){e=+e,r=+r,n=(l=arguments.length)<2?(r=e,e=0,1):l<3?1:+n;for(var a=-1,l=Math.max(0,Math.ceil((r-e)/n))|0,o=new Array(l);++a<l;)o[a]=e+a*n;return o}function ka(e,r){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(r).domain(e);break}return this}function Rs(e,r){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const Ax=Symbol("implicit");function _0(){var e=new m1,r=[],n=[],a=Ax;function l(o){let d=e.get(o);if(d===void 0){if(a!==Ax)return a;e.set(o,d=r.push(o)-1)}return n[d%n.length]}return l.domain=function(o){if(!arguments.length)return r.slice();r=[],e=new m1;for(const d of o)e.has(d)||e.set(d,r.push(d)-1);return l},l.range=function(o){return arguments.length?(n=Array.from(o),l):n.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return _0(r,n).unknown(a)},ka.apply(l,arguments),l}function R0(){var e=_0().unknown(void 0),r=e.domain,n=e.range,a=0,l=1,o,d,m=!1,f=0,h=0,g=.5;delete e.unknown;function p(){var v=r().length,b=l<a,w=b?l:a,N=b?a:l;o=(N-w)/Math.max(1,v-f+h*2),m&&(o=Math.floor(o)),w+=(N-w-o*(v-f))*g,d=o*(1-f),m&&(w=Math.round(w),d=Math.round(d));var S=BR(v).map(function(C){return w+o*C});return n(b?S.reverse():S)}return e.domain=function(v){return arguments.length?(r(v),p()):r()},e.range=function(v){return arguments.length?([a,l]=v,a=+a,l=+l,p()):[a,l]},e.rangeRound=function(v){return[a,l]=v,a=+a,l=+l,m=!0,p()},e.bandwidth=function(){return d},e.step=function(){return o},e.round=function(v){return arguments.length?(m=!!v,p()):m},e.padding=function(v){return arguments.length?(f=Math.min(1,h=+v),p()):f},e.paddingInner=function(v){return arguments.length?(f=Math.min(1,v),p()):f},e.paddingOuter=function(v){return arguments.length?(h=+v,p()):h},e.align=function(v){return arguments.length?(g=Math.max(0,Math.min(1,v)),p()):g},e.copy=function(){return R0(r(),[a,l]).round(m).paddingInner(f).paddingOuter(h).align(g)},ka.apply(p(),arguments)}function j3(e){var r=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return j3(r())},e}function FR(){return j3(R0.apply(null,arguments).paddingInner(1))}function L0(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function N3(e,r){var n=Object.create(e.prototype);for(var a in r)n[a]=r[a];return n}function Wc(){}var Dc=.7,Zu=1/Dc,Ql="\\s*([+-]?\\d+)\\s*",Oc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ya="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UR=/^#([0-9a-f]{3,8})$/,VR=new RegExp(`^rgb\\(${Ql},${Ql},${Ql}\\)$`),qR=new RegExp(`^rgb\\(${Ya},${Ya},${Ya}\\)$`),WR=new RegExp(`^rgba\\(${Ql},${Ql},${Ql},${Oc}\\)$`),HR=new RegExp(`^rgba\\(${Ya},${Ya},${Ya},${Oc}\\)$`),KR=new RegExp(`^hsl\\(${Oc},${Ya},${Ya}\\)$`),GR=new RegExp(`^hsla\\(${Oc},${Ya},${Ya},${Oc}\\)$`),p1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};L0(Wc,Ac,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:x1,formatHex:x1,formatHex8:YR,formatHsl:QR,formatRgb:v1,toString:v1});function x1(){return this.rgb().formatHex()}function YR(){return this.rgb().formatHex8()}function QR(){return w3(this).formatHsl()}function v1(){return this.rgb().formatRgb()}function Ac(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=UR.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?y1(r):n===3?new zn(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?bu(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?bu(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=VR.exec(e))?new zn(r[1],r[2],r[3],1):(r=qR.exec(e))?new zn(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=WR.exec(e))?bu(r[1],r[2],r[3],r[4]):(r=HR.exec(e))?bu(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=KR.exec(e))?N1(r[1],r[2]/100,r[3]/100,1):(r=GR.exec(e))?N1(r[1],r[2]/100,r[3]/100,r[4]):p1.hasOwnProperty(e)?y1(p1[e]):e==="transparent"?new zn(NaN,NaN,NaN,0):null}function y1(e){return new zn(e>>16&255,e>>8&255,e&255,1)}function bu(e,r,n,a){return a<=0&&(e=r=n=NaN),new zn(e,r,n,a)}function XR(e){return e instanceof Wc||(e=Ac(e)),e?(e=e.rgb(),new zn(e.r,e.g,e.b,e.opacity)):new zn}function Tx(e,r,n,a){return arguments.length===1?XR(e):new zn(e,r,n,a??1)}function zn(e,r,n,a){this.r=+e,this.g=+r,this.b=+n,this.opacity=+a}L0(zn,Tx,N3(Wc,{brighter(e){return e=e==null?Zu:Math.pow(Zu,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zn(el(this.r),el(this.g),el(this.b),Ju(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b1,formatHex:b1,formatHex8:ZR,formatRgb:j1,toString:j1}));function b1(){return`#${Yi(this.r)}${Yi(this.g)}${Yi(this.b)}`}function ZR(){return`#${Yi(this.r)}${Yi(this.g)}${Yi(this.b)}${Yi((isNaN(this.opacity)?1:this.opacity)*255)}`}function j1(){const e=Ju(this.opacity);return`${e===1?"rgb(":"rgba("}${el(this.r)}, ${el(this.g)}, ${el(this.b)}${e===1?")":`, ${e})`}`}function Ju(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function el(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yi(e){return e=el(e),(e<16?"0":"")+e.toString(16)}function N1(e,r,n,a){return a<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new Ma(e,r,n,a)}function w3(e){if(e instanceof Ma)return new Ma(e.h,e.s,e.l,e.opacity);if(e instanceof Wc||(e=Ac(e)),!e)return new Ma;if(e instanceof Ma)return e;e=e.rgb();var r=e.r/255,n=e.g/255,a=e.b/255,l=Math.min(r,n,a),o=Math.max(r,n,a),d=NaN,m=o-l,f=(o+l)/2;return m?(r===o?d=(n-a)/m+(n<a)*6:n===o?d=(a-r)/m+2:d=(r-n)/m+4,m/=f<.5?o+l:2-o-l,d*=60):m=f>0&&f<1?0:d,new Ma(d,m,f,e.opacity)}function JR(e,r,n,a){return arguments.length===1?w3(e):new Ma(e,r,n,a??1)}function Ma(e,r,n,a){this.h=+e,this.s=+r,this.l=+n,this.opacity=+a}L0(Ma,JR,N3(Wc,{brighter(e){return e=e==null?Zu:Math.pow(Zu,e),new Ma(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new Ma(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*r,l=2*n-a;return new zn(kp(e>=240?e-240:e+120,l,a),kp(e,l,a),kp(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new Ma(w1(this.h),ju(this.s),ju(this.l),Ju(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ju(this.opacity);return`${e===1?"hsl(":"hsla("}${w1(this.h)}, ${ju(this.s)*100}%, ${ju(this.l)*100}%${e===1?")":`, ${e})`}`}}));function w1(e){return e=(e||0)%360,e<0?e+360:e}function ju(e){return Math.max(0,Math.min(1,e||0))}function kp(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}const $0=e=>()=>e;function eL(e,r){return function(n){return e+n*r}}function tL(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(a){return Math.pow(e+a*r,n)}}function rL(e){return(e=+e)==1?S3:function(r,n){return n-r?tL(r,n,e):$0(isNaN(r)?n:r)}}function S3(e,r){var n=r-e;return n?eL(e,n):$0(isNaN(e)?r:e)}const S1=(function e(r){var n=rL(r);function a(l,o){var d=n((l=Tx(l)).r,(o=Tx(o)).r),m=n(l.g,o.g),f=n(l.b,o.b),h=S3(l.opacity,o.opacity);return function(g){return l.r=d(g),l.g=m(g),l.b=f(g),l.opacity=h(g),l+""}}return a.gamma=e,a})(1);function nL(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,a=r.slice(),l;return function(o){for(l=0;l<n;++l)a[l]=e[l]*(1-o)+r[l]*o;return a}}function aL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sL(e,r){var n=r?r.length:0,a=e?Math.min(n,e.length):0,l=new Array(a),o=new Array(n),d;for(d=0;d<a;++d)l[d]=oo(e[d],r[d]);for(;d<n;++d)o[d]=r[d];return function(m){for(d=0;d<a;++d)o[d]=l[d](m);return o}}function iL(e,r){var n=new Date;return e=+e,r=+r,function(a){return n.setTime(e*(1-a)+r*a),n}}function em(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function lL(e,r){var n={},a={},l;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(l in r)l in e?n[l]=oo(e[l],r[l]):a[l]=r[l];return function(o){for(l in n)a[l]=n[l](o);return a}}var Ix=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cp=new RegExp(Ix.source,"g");function oL(e){return function(){return e}}function cL(e){return function(r){return e(r)+""}}function dL(e,r){var n=Ix.lastIndex=Cp.lastIndex=0,a,l,o,d=-1,m=[],f=[];for(e=e+"",r=r+"";(a=Ix.exec(e))&&(l=Cp.exec(r));)(o=l.index)>n&&(o=r.slice(n,o),m[d]?m[d]+=o:m[++d]=o),(a=a[0])===(l=l[0])?m[d]?m[d]+=l:m[++d]=l:(m[++d]=null,f.push({i:d,x:em(a,l)})),n=Cp.lastIndex;return n<r.length&&(o=r.slice(n),m[d]?m[d]+=o:m[++d]=o),m.length<2?f[0]?cL(f[0].x):oL(r):(r=f.length,function(h){for(var g=0,p;g<r;++g)m[(p=f[g]).i]=p.x(h);return m.join("")})}function oo(e,r){var n=typeof r,a;return r==null||n==="boolean"?$0(r):(n==="number"?em:n==="string"?(a=Ac(r))?(r=a,S1):dL:r instanceof Ac?S1:r instanceof Date?iL:aL(r)?nL:Array.isArray(r)?sL:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?lL:em)(e,r)}function z0(e,r){return e=+e,r=+r,function(n){return Math.round(e*(1-n)+r*n)}}function uL(e,r){r===void 0&&(r=e,e=oo);for(var n=0,a=r.length-1,l=r[0],o=new Array(a<0?0:a);n<a;)o[n]=e(l,l=r[++n]);return function(d){var m=Math.max(0,Math.min(a-1,Math.floor(d*=a)));return o[m](d-m)}}function mL(e){return function(){return e}}function tm(e){return+e}var k1=[0,1];function On(e){return e}function Ex(e,r){return(r-=e=+e)?function(n){return(n-e)/r}:mL(isNaN(r)?NaN:.5)}function fL(e,r){var n;return e>r&&(n=e,e=r,r=n),function(a){return Math.max(e,Math.min(r,a))}}function hL(e,r,n){var a=e[0],l=e[1],o=r[0],d=r[1];return l<a?(a=Ex(l,a),o=n(d,o)):(a=Ex(a,l),o=n(o,d)),function(m){return o(a(m))}}function gL(e,r,n){var a=Math.min(e.length,r.length)-1,l=new Array(a),o=new Array(a),d=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++d<a;)l[d]=Ex(e[d],e[d+1]),o[d]=n(r[d],r[d+1]);return function(m){var f=qc(e,m,1,a)-1;return o[f](l[f](m))}}function Hc(e,r){return r.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $m(){var e=k1,r=k1,n=oo,a,l,o,d=On,m,f,h;function g(){var v=Math.min(e.length,r.length);return d!==On&&(d=fL(e[0],e[v-1])),m=v>2?gL:hL,f=h=null,p}function p(v){return v==null||isNaN(v=+v)?o:(f||(f=m(e.map(a),r,n)))(a(d(v)))}return p.invert=function(v){return d(l((h||(h=m(r,e.map(a),em)))(v)))},p.domain=function(v){return arguments.length?(e=Array.from(v,tm),g()):e.slice()},p.range=function(v){return arguments.length?(r=Array.from(v),g()):r.slice()},p.rangeRound=function(v){return r=Array.from(v),n=z0,g()},p.clamp=function(v){return arguments.length?(d=v?!0:On,g()):d!==On},p.interpolate=function(v){return arguments.length?(n=v,g()):n},p.unknown=function(v){return arguments.length?(o=v,p):o},function(v,b){return a=v,l=b,g()}}function B0(){return $m()(On,On)}function pL(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rm(e,r){if((n=(e=r?e.toExponential(r-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function eo(e){return e=rm(Math.abs(e)),e?e[1]:NaN}function xL(e,r){return function(n,a){for(var l=n.length,o=[],d=0,m=e[0],f=0;l>0&&m>0&&(f+m+1>a&&(m=Math.max(1,a-f)),o.push(n.substring(l-=m,l+m)),!((f+=m+1)>a));)m=e[d=(d+1)%e.length];return o.reverse().join(r)}}function vL(e){return function(r){return r.replace(/[0-9]/g,function(n){return e[+n]})}}var yL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Tc(e){if(!(r=yL.exec(e)))throw new Error("invalid format: "+e);var r;return new F0({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Tc.prototype=F0.prototype;function F0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}F0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bL(e){e:for(var r=e.length,n=1,a=-1,l;n<r;++n)switch(e[n]){case".":a=l=n;break;case"0":a===0&&(a=n),l=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var k3;function jL(e,r){var n=rm(e,r);if(!n)return e+"";var a=n[0],l=n[1],o=l-(k3=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,d=a.length;return o===d?a:o>d?a+new Array(o-d+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+rm(e,Math.max(0,r+o-1))[0]}function C1(e,r){var n=rm(e,r);if(!n)return e+"";var a=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const D1={"%":(e,r)=>(e*100).toFixed(r),b:e=>Math.round(e).toString(2),c:e=>e+"",d:pL,e:(e,r)=>e.toExponential(r),f:(e,r)=>e.toFixed(r),g:(e,r)=>e.toPrecision(r),o:e=>Math.round(e).toString(8),p:(e,r)=>C1(e*100,r),r:C1,s:jL,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function O1(e){return e}var A1=Array.prototype.map,T1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function NL(e){var r=e.grouping===void 0||e.thousands===void 0?O1:xL(A1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?O1:vL(A1.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",m=e.minus===void 0?"":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function h(p){p=Tc(p);var v=p.fill,b=p.align,w=p.sign,N=p.symbol,S=p.zero,C=p.width,O=p.comma,k=p.precision,E=p.trim,M=p.type;M==="n"?(O=!0,M="g"):D1[M]||(k===void 0&&(k=12),E=!0,M="g"),(S||v==="0"&&b==="=")&&(S=!0,v="0",b="=");var D=N==="$"?n:N==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",R=N==="$"?a:/[%p]/.test(M)?d:"",P=D1[M],z=/[defgprs%]/.test(M);k=k===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function U(q){var Y=D,ee=R,_,G,L;if(M==="c")ee=P(q)+ee,q="";else{q=+q;var V=q<0||1/q<0;if(q=isNaN(q)?f:P(Math.abs(q),k),E&&(q=bL(q)),V&&+q==0&&w!=="+"&&(V=!1),Y=(V?w==="("?w:m:w==="-"||w==="("?"":w)+Y,ee=(M==="s"?T1[8+k3/3]:"")+ee+(V&&w==="("?")":""),z){for(_=-1,G=q.length;++_<G;)if(L=q.charCodeAt(_),48>L||L>57){ee=(L===46?l+q.slice(_+1):q.slice(_))+ee,q=q.slice(0,_);break}}}O&&!S&&(q=r(q,1/0));var Z=Y.length+q.length+ee.length,K=Z<C?new Array(C-Z+1).join(v):"";switch(O&&S&&(q=r(K+q,K.length?C-ee.length:1/0),K=""),b){case"<":q=Y+q+ee+K;break;case"=":q=Y+K+q+ee;break;case"^":q=K.slice(0,Z=K.length>>1)+Y+q+ee+K.slice(Z);break;default:q=K+Y+q+ee;break}return o(q)}return U.toString=function(){return p+""},U}function g(p,v){var b=h((p=Tc(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(eo(v)/3)))*3,N=Math.pow(10,-w),S=T1[8+w/3];return function(C){return b(N*C)+S}}return{format:h,formatPrefix:g}}var Nu,U0,C3;wL({thousands:",",grouping:[3],currency:["$",""]});function wL(e){return Nu=NL(e),U0=Nu.format,C3=Nu.formatPrefix,Nu}function SL(e){return Math.max(0,-eo(Math.abs(e)))}function kL(e,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(eo(r)/3)))*3-eo(Math.abs(e)))}function CL(e,r){return e=Math.abs(e),r=Math.abs(r)-e,Math.max(0,eo(r)-eo(e))+1}function D3(e,r,n,a){var l=Ox(e,r,n),o;switch(a=Tc(a??",f"),a.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(r));return a.precision==null&&!isNaN(o=kL(l,d))&&(a.precision=o),C3(a,d)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=CL(l,Math.max(Math.abs(e),Math.abs(r))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=SL(l))&&(a.precision=o-(a.type==="%")*2);break}}return U0(a)}function Ci(e){var r=e.domain;return e.ticks=function(n){var a=r();return Cx(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var l=r();return D3(l[0],l[l.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=r(),l=0,o=a.length-1,d=a[l],m=a[o],f,h,g=10;for(m<d&&(h=d,d=m,m=h,h=l,l=o,o=h);g-- >0;){if(h=Dx(d,m,n),h===f)return a[l]=d,a[o]=m,r(a);if(h>0)d=Math.floor(d/h)*h,m=Math.ceil(m/h)*h;else if(h<0)d=Math.ceil(d*h)/h,m=Math.floor(m*h)/h;else break;f=h}return e},e}function O3(){var e=B0();return e.copy=function(){return Hc(e,O3())},ka.apply(e,arguments),Ci(e)}function A3(e){var r;function n(a){return a==null||isNaN(a=+a)?r:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,tm),n):e.slice()},n.unknown=function(a){return arguments.length?(r=a,n):r},n.copy=function(){return A3(e).unknown(r)},e=arguments.length?Array.from(e,tm):[0,1],Ci(n)}function T3(e,r){e=e.slice();var n=0,a=e.length-1,l=e[n],o=e[a],d;return o<l&&(d=n,n=a,a=d,d=l,l=o,o=d),e[n]=r.floor(l),e[a]=r.ceil(o),e}function I1(e){return Math.log(e)}function E1(e){return Math.exp(e)}function DL(e){return-Math.log(-e)}function OL(e){return-Math.exp(-e)}function AL(e){return isFinite(e)?+("1e"+e):e<0?0:e}function TL(e){return e===10?AL:e===Math.E?Math.exp:r=>Math.pow(e,r)}function IL(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),r=>Math.log(r)/e)}function M1(e){return(r,n)=>-e(-r,n)}function V0(e){const r=e(I1,E1),n=r.domain;let a=10,l,o;function d(){return l=IL(a),o=TL(a),n()[0]<0?(l=M1(l),o=M1(o),e(DL,OL)):e(I1,E1),r}return r.base=function(m){return arguments.length?(a=+m,d()):a},r.domain=function(m){return arguments.length?(n(m),d()):n()},r.ticks=m=>{const f=n();let h=f[0],g=f[f.length-1];const p=g<h;p&&([h,g]=[g,h]);let v=l(h),b=l(g),w,N;const S=m==null?10:+m;let C=[];if(!(a%1)&&b-v<S){if(v=Math.floor(v),b=Math.ceil(b),h>0){for(;v<=b;++v)for(w=1;w<a;++w)if(N=v<0?w/o(-v):w*o(v),!(N<h)){if(N>g)break;C.push(N)}}else for(;v<=b;++v)for(w=a-1;w>=1;--w)if(N=v>0?w/o(-v):w*o(v),!(N<h)){if(N>g)break;C.push(N)}C.length*2<S&&(C=Cx(h,g,S))}else C=Cx(v,b,Math.min(b-v,S)).map(o);return p?C.reverse():C},r.tickFormat=(m,f)=>{if(m==null&&(m=10),f==null&&(f=a===10?"s":","),typeof f!="function"&&(!(a%1)&&(f=Tc(f)).precision==null&&(f.trim=!0),f=U0(f)),m===1/0)return f;const h=Math.max(1,a*m/r.ticks().length);return g=>{let p=g/o(Math.round(l(g)));return p*a<a-.5&&(p*=a),p<=h?f(g):""}},r.nice=()=>n(T3(n(),{floor:m=>o(Math.floor(l(m))),ceil:m=>o(Math.ceil(l(m)))})),r}function I3(){const e=V0($m()).domain([1,10]);return e.copy=()=>Hc(e,I3()).base(e.base()),ka.apply(e,arguments),e}function P1(e){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/e))}}function _1(e){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*e}}function q0(e){var r=1,n=e(P1(r),_1(r));return n.constant=function(a){return arguments.length?e(P1(r=+a),_1(r)):r},Ci(n)}function E3(){var e=q0($m());return e.copy=function(){return Hc(e,E3()).constant(e.constant())},ka.apply(e,arguments)}function R1(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function EL(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ML(e){return e<0?-e*e:e*e}function W0(e){var r=e(On,On),n=1;function a(){return n===1?e(On,On):n===.5?e(EL,ML):e(R1(n),R1(1/n))}return r.exponent=function(l){return arguments.length?(n=+l,a()):n},Ci(r)}function H0(){var e=W0($m());return e.copy=function(){return Hc(e,H0()).exponent(e.exponent())},ka.apply(e,arguments),e}function PL(){return H0.apply(null,arguments).exponent(.5)}function L1(e){return Math.sign(e)*e*e}function _L(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function M3(){var e=B0(),r=[0,1],n=!1,a;function l(o){var d=_L(e(o));return isNaN(d)?a:n?Math.round(d):d}return l.invert=function(o){return e.invert(L1(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((r=Array.from(o,tm)).map(L1)),l):r.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(n=!!o,l):n},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return M3(e.domain(),r).round(n).clamp(e.clamp()).unknown(a)},ka.apply(l,arguments),Ci(l)}function P3(){var e=[],r=[],n=[],a;function l(){var d=0,m=Math.max(1,r.length);for(n=new Array(m-1);++d<m;)n[d-1]=zR(e,d/m);return o}function o(d){return d==null||isNaN(d=+d)?a:r[qc(n,d)]}return o.invertExtent=function(d){var m=r.indexOf(d);return m<0?[NaN,NaN]:[m>0?n[m-1]:e[0],m<n.length?n[m]:e[e.length-1]]},o.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let m of d)m!=null&&!isNaN(m=+m)&&e.push(m);return e.sort(vi),l()},o.range=function(d){return arguments.length?(r=Array.from(d),l()):r.slice()},o.unknown=function(d){return arguments.length?(a=d,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return P3().domain(e).range(r).unknown(a)},ka.apply(o,arguments)}function _3(){var e=0,r=1,n=1,a=[.5],l=[0,1],o;function d(f){return f!=null&&f<=f?l[qc(a,f,0,n)]:o}function m(){var f=-1;for(a=new Array(n);++f<n;)a[f]=((f+1)*r-(f-n)*e)/(n+1);return d}return d.domain=function(f){return arguments.length?([e,r]=f,e=+e,r=+r,m()):[e,r]},d.range=function(f){return arguments.length?(n=(l=Array.from(f)).length-1,m()):l.slice()},d.invertExtent=function(f){var h=l.indexOf(f);return h<0?[NaN,NaN]:h<1?[e,a[0]]:h>=n?[a[n-1],r]:[a[h-1],a[h]]},d.unknown=function(f){return arguments.length&&(o=f),d},d.thresholds=function(){return a.slice()},d.copy=function(){return _3().domain([e,r]).range(l).unknown(o)},ka.apply(Ci(d),arguments)}function R3(){var e=[.5],r=[0,1],n,a=1;function l(o){return o!=null&&o<=o?r[qc(e,o,0,a)]:n}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,r.length-1),l):e.slice()},l.range=function(o){return arguments.length?(r=Array.from(o),a=Math.min(e.length,r.length-1),l):r.slice()},l.invertExtent=function(o){var d=r.indexOf(o);return[e[d-1],e[d]]},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return R3().domain(e).range(r).unknown(n)},ka.apply(l,arguments)}const Dp=new Date,Op=new Date;function Kr(e,r,n,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),r(o,1),e(o),o),l.round=o=>{const d=l(o),m=l.ceil(o);return o-d<m-o?d:m},l.offset=(o,d)=>(r(o=new Date(+o),d==null?1:Math.floor(d)),o),l.range=(o,d,m)=>{const f=[];if(o=l.ceil(o),m=m==null?1:Math.floor(m),!(o<d)||!(m>0))return f;let h;do f.push(h=new Date(+o)),r(o,m),e(o);while(h<o&&o<d);return f},l.filter=o=>Kr(d=>{if(d>=d)for(;e(d),!o(d);)d.setTime(d-1)},(d,m)=>{if(d>=d)if(m<0)for(;++m<=0;)for(;r(d,-1),!o(d););else for(;--m>=0;)for(;r(d,1),!o(d););}),n&&(l.count=(o,d)=>(Dp.setTime(+o),Op.setTime(+d),e(Dp),e(Op),Math.floor(n(Dp,Op))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?d=>a(d)%o===0:d=>l.count(0,d)%o===0):l)),l}const nm=Kr(()=>{},(e,r)=>{e.setTime(+e+r)},(e,r)=>r-e);nm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Kr(r=>{r.setTime(Math.floor(r/e)*e)},(r,n)=>{r.setTime(+r+n*e)},(r,n)=>(n-r)/e):nm);nm.range;const ws=1e3,ba=ws*60,Ss=ba*60,Is=Ss*24,K0=Is*7,$1=Is*30,Ap=Is*365,Qi=Kr(e=>{e.setTime(e-e.getMilliseconds())},(e,r)=>{e.setTime(+e+r*ws)},(e,r)=>(r-e)/ws,e=>e.getUTCSeconds());Qi.range;const G0=Kr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ws)},(e,r)=>{e.setTime(+e+r*ba)},(e,r)=>(r-e)/ba,e=>e.getMinutes());G0.range;const Y0=Kr(e=>{e.setUTCSeconds(0,0)},(e,r)=>{e.setTime(+e+r*ba)},(e,r)=>(r-e)/ba,e=>e.getUTCMinutes());Y0.range;const Q0=Kr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ws-e.getMinutes()*ba)},(e,r)=>{e.setTime(+e+r*Ss)},(e,r)=>(r-e)/Ss,e=>e.getHours());Q0.range;const X0=Kr(e=>{e.setUTCMinutes(0,0,0)},(e,r)=>{e.setTime(+e+r*Ss)},(e,r)=>(r-e)/Ss,e=>e.getUTCHours());X0.range;const Kc=Kr(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ba)/Is,e=>e.getDate()-1);Kc.range;const zm=Kr(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Is,e=>e.getUTCDate()-1);zm.range;const L3=Kr(e=>{e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r)},(e,r)=>(r-e)/Is,e=>Math.floor(e/Is));L3.range;function fl(e){return Kr(r=>{r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*ba)/K0)}const Bm=fl(0),am=fl(1),RL=fl(2),LL=fl(3),to=fl(4),$L=fl(5),zL=fl(6);Bm.range;am.range;RL.range;LL.range;to.range;$L.range;zL.range;function hl(e){return Kr(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/K0)}const Fm=hl(0),sm=hl(1),BL=hl(2),FL=hl(3),ro=hl(4),UL=hl(5),VL=hl(6);Fm.range;sm.range;BL.range;FL.range;ro.range;UL.range;VL.range;const Z0=Kr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,r)=>{e.setMonth(e.getMonth()+r)},(e,r)=>r.getMonth()-e.getMonth()+(r.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Z0.range;const J0=Kr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCMonth(e.getUTCMonth()+r)},(e,r)=>r.getUTCMonth()-e.getUTCMonth()+(r.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());J0.range;const Es=Kr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r)},(e,r)=>r.getFullYear()-e.getFullYear(),e=>e.getFullYear());Es.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kr(r=>{r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*e)});Es.range;const Ms=Kr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r)},(e,r)=>r.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ms.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kr(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*e)});Ms.range;function $3(e,r,n,a,l,o){const d=[[Qi,1,ws],[Qi,5,5*ws],[Qi,15,15*ws],[Qi,30,30*ws],[o,1,ba],[o,5,5*ba],[o,15,15*ba],[o,30,30*ba],[l,1,Ss],[l,3,3*Ss],[l,6,6*Ss],[l,12,12*Ss],[a,1,Is],[a,2,2*Is],[n,1,K0],[r,1,$1],[r,3,3*$1],[e,1,Ap]];function m(h,g,p){const v=g<h;v&&([h,g]=[g,h]);const b=p&&typeof p.range=="function"?p:f(h,g,p),w=b?b.range(h,+g+1):[];return v?w.reverse():w}function f(h,g,p){const v=Math.abs(g-h)/p,b=P0(([,,S])=>S).right(d,v);if(b===d.length)return e.every(Ox(h/Ap,g/Ap,p));if(b===0)return nm.every(Math.max(Ox(h,g,p),1));const[w,N]=d[v/d[b-1][2]<d[b][2]/v?b-1:b];return w.every(N)}return[m,f]}const[qL,WL]=$3(Ms,J0,Fm,L3,X0,Y0),[HL,KL]=$3(Es,Z0,Bm,Kc,Q0,G0);function Tp(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ip(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mc(e,r,n){return{y:e,m:r,d:n,H:0,M:0,S:0,L:0}}function GL(e){var r=e.dateTime,n=e.date,a=e.time,l=e.periods,o=e.days,d=e.shortDays,m=e.months,f=e.shortMonths,h=fc(l),g=hc(l),p=fc(o),v=hc(o),b=fc(d),w=hc(d),N=fc(m),S=hc(m),C=fc(f),O=hc(f),k={a:V,A:Z,b:K,B:de,c:null,d:q1,e:q1,f:x$,g:D$,G:A$,H:h$,I:g$,j:p$,L:z3,m:v$,M:y$,p:B,q:le,Q:K1,s:G1,S:b$,u:j$,U:N$,V:w$,w:S$,W:k$,x:null,X:null,y:C$,Y:O$,Z:T$,"%":H1},E={a:ye,A:ge,b:Ne,B:Me,c:null,d:W1,e:W1,f:P$,g:q$,G:H$,H:I$,I:E$,j:M$,L:F3,m:_$,M:R$,p:ce,q:Le,Q:K1,s:G1,S:L$,u:$$,U:z$,V:B$,w:F$,W:U$,x:null,X:null,y:V$,Y:W$,Z:K$,"%":H1},M={a:U,A:q,b:Y,B:ee,c:_,d:U1,e:U1,f:d$,g:F1,G:B1,H:V1,I:V1,j:i$,L:c$,m:s$,M:l$,p:z,q:a$,Q:m$,s:f$,S:o$,u:JL,U:e$,V:t$,w:ZL,W:r$,x:G,X:L,y:F1,Y:B1,Z:n$,"%":u$};k.x=D(n,k),k.X=D(a,k),k.c=D(r,k),E.x=D(n,E),E.X=D(a,E),E.c=D(r,E);function D(X,Re){return function(at){var je=[],vt=-1,Xe=0,ut=X.length,pt,bt,nr;for(at instanceof Date||(at=new Date(+at));++vt<ut;)X.charCodeAt(vt)===37&&(je.push(X.slice(Xe,vt)),(bt=z1[pt=X.charAt(++vt)])!=null?pt=X.charAt(++vt):bt=pt==="e"?" ":"0",(nr=Re[pt])&&(pt=nr(at,bt)),je.push(pt),Xe=vt+1);return je.push(X.slice(Xe,vt)),je.join("")}}function R(X,Re){return function(at){var je=mc(1900,void 0,1),vt=P(je,X,at+="",0),Xe,ut;if(vt!=at.length)return null;if("Q"in je)return new Date(je.Q);if("s"in je)return new Date(je.s*1e3+("L"in je?je.L:0));if(Re&&!("Z"in je)&&(je.Z=0),"p"in je&&(je.H=je.H%12+je.p*12),je.m===void 0&&(je.m="q"in je?je.q:0),"V"in je){if(je.V<1||je.V>53)return null;"w"in je||(je.w=1),"Z"in je?(Xe=Ip(mc(je.y,0,1)),ut=Xe.getUTCDay(),Xe=ut>4||ut===0?sm.ceil(Xe):sm(Xe),Xe=zm.offset(Xe,(je.V-1)*7),je.y=Xe.getUTCFullYear(),je.m=Xe.getUTCMonth(),je.d=Xe.getUTCDate()+(je.w+6)%7):(Xe=Tp(mc(je.y,0,1)),ut=Xe.getDay(),Xe=ut>4||ut===0?am.ceil(Xe):am(Xe),Xe=Kc.offset(Xe,(je.V-1)*7),je.y=Xe.getFullYear(),je.m=Xe.getMonth(),je.d=Xe.getDate()+(je.w+6)%7)}else("W"in je||"U"in je)&&("w"in je||(je.w="u"in je?je.u%7:"W"in je?1:0),ut="Z"in je?Ip(mc(je.y,0,1)).getUTCDay():Tp(mc(je.y,0,1)).getDay(),je.m=0,je.d="W"in je?(je.w+6)%7+je.W*7-(ut+5)%7:je.w+je.U*7-(ut+6)%7);return"Z"in je?(je.H+=je.Z/100|0,je.M+=je.Z%100,Ip(je)):Tp(je)}}function P(X,Re,at,je){for(var vt=0,Xe=Re.length,ut=at.length,pt,bt;vt<Xe;){if(je>=ut)return-1;if(pt=Re.charCodeAt(vt++),pt===37){if(pt=Re.charAt(vt++),bt=M[pt in z1?Re.charAt(vt++):pt],!bt||(je=bt(X,at,je))<0)return-1}else if(pt!=at.charCodeAt(je++))return-1}return je}function z(X,Re,at){var je=h.exec(Re.slice(at));return je?(X.p=g.get(je[0].toLowerCase()),at+je[0].length):-1}function U(X,Re,at){var je=b.exec(Re.slice(at));return je?(X.w=w.get(je[0].toLowerCase()),at+je[0].length):-1}function q(X,Re,at){var je=p.exec(Re.slice(at));return je?(X.w=v.get(je[0].toLowerCase()),at+je[0].length):-1}function Y(X,Re,at){var je=C.exec(Re.slice(at));return je?(X.m=O.get(je[0].toLowerCase()),at+je[0].length):-1}function ee(X,Re,at){var je=N.exec(Re.slice(at));return je?(X.m=S.get(je[0].toLowerCase()),at+je[0].length):-1}function _(X,Re,at){return P(X,r,Re,at)}function G(X,Re,at){return P(X,n,Re,at)}function L(X,Re,at){return P(X,a,Re,at)}function V(X){return d[X.getDay()]}function Z(X){return o[X.getDay()]}function K(X){return f[X.getMonth()]}function de(X){return m[X.getMonth()]}function B(X){return l[+(X.getHours()>=12)]}function le(X){return 1+~~(X.getMonth()/3)}function ye(X){return d[X.getUTCDay()]}function ge(X){return o[X.getUTCDay()]}function Ne(X){return f[X.getUTCMonth()]}function Me(X){return m[X.getUTCMonth()]}function ce(X){return l[+(X.getUTCHours()>=12)]}function Le(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var Re=D(X+="",k);return Re.toString=function(){return X},Re},parse:function(X){var Re=R(X+="",!1);return Re.toString=function(){return X},Re},utcFormat:function(X){var Re=D(X+="",E);return Re.toString=function(){return X},Re},utcParse:function(X){var Re=R(X+="",!0);return Re.toString=function(){return X},Re}}}var z1={"-":"",_:" ",0:"0"},en=/^\s*\d+/,YL=/^%/,QL=/[\\^$*+?|[\]().{}]/g;function qt(e,r,n){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<n?new Array(n-o+1).join(r)+l:l)}function XL(e){return e.replace(QL,"\\$&")}function fc(e){return new RegExp("^(?:"+e.map(XL).join("|")+")","i")}function hc(e){return new Map(e.map((r,n)=>[r.toLowerCase(),n]))}function ZL(e,r,n){var a=en.exec(r.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function JL(e,r,n){var a=en.exec(r.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function e$(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function t$(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function r$(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function B1(e,r,n){var a=en.exec(r.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function F1(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function n$(e,r,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function a$(e,r,n){var a=en.exec(r.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function s$(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function U1(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function i$(e,r,n){var a=en.exec(r.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function V1(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function l$(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function o$(e,r,n){var a=en.exec(r.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function c$(e,r,n){var a=en.exec(r.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function d$(e,r,n){var a=en.exec(r.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function u$(e,r,n){var a=YL.exec(r.slice(n,n+1));return a?n+a[0].length:-1}function m$(e,r,n){var a=en.exec(r.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function f$(e,r,n){var a=en.exec(r.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function q1(e,r){return qt(e.getDate(),r,2)}function h$(e,r){return qt(e.getHours(),r,2)}function g$(e,r){return qt(e.getHours()%12||12,r,2)}function p$(e,r){return qt(1+Kc.count(Es(e),e),r,3)}function z3(e,r){return qt(e.getMilliseconds(),r,3)}function x$(e,r){return z3(e,r)+"000"}function v$(e,r){return qt(e.getMonth()+1,r,2)}function y$(e,r){return qt(e.getMinutes(),r,2)}function b$(e,r){return qt(e.getSeconds(),r,2)}function j$(e){var r=e.getDay();return r===0?7:r}function N$(e,r){return qt(Bm.count(Es(e)-1,e),r,2)}function B3(e){var r=e.getDay();return r>=4||r===0?to(e):to.ceil(e)}function w$(e,r){return e=B3(e),qt(to.count(Es(e),e)+(Es(e).getDay()===4),r,2)}function S$(e){return e.getDay()}function k$(e,r){return qt(am.count(Es(e)-1,e),r,2)}function C$(e,r){return qt(e.getFullYear()%100,r,2)}function D$(e,r){return e=B3(e),qt(e.getFullYear()%100,r,2)}function O$(e,r){return qt(e.getFullYear()%1e4,r,4)}function A$(e,r){var n=e.getDay();return e=n>=4||n===0?to(e):to.ceil(e),qt(e.getFullYear()%1e4,r,4)}function T$(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+qt(r/60|0,"0",2)+qt(r%60,"0",2)}function W1(e,r){return qt(e.getUTCDate(),r,2)}function I$(e,r){return qt(e.getUTCHours(),r,2)}function E$(e,r){return qt(e.getUTCHours()%12||12,r,2)}function M$(e,r){return qt(1+zm.count(Ms(e),e),r,3)}function F3(e,r){return qt(e.getUTCMilliseconds(),r,3)}function P$(e,r){return F3(e,r)+"000"}function _$(e,r){return qt(e.getUTCMonth()+1,r,2)}function R$(e,r){return qt(e.getUTCMinutes(),r,2)}function L$(e,r){return qt(e.getUTCSeconds(),r,2)}function $$(e){var r=e.getUTCDay();return r===0?7:r}function z$(e,r){return qt(Fm.count(Ms(e)-1,e),r,2)}function U3(e){var r=e.getUTCDay();return r>=4||r===0?ro(e):ro.ceil(e)}function B$(e,r){return e=U3(e),qt(ro.count(Ms(e),e)+(Ms(e).getUTCDay()===4),r,2)}function F$(e){return e.getUTCDay()}function U$(e,r){return qt(sm.count(Ms(e)-1,e),r,2)}function V$(e,r){return qt(e.getUTCFullYear()%100,r,2)}function q$(e,r){return e=U3(e),qt(e.getUTCFullYear()%100,r,2)}function W$(e,r){return qt(e.getUTCFullYear()%1e4,r,4)}function H$(e,r){var n=e.getUTCDay();return e=n>=4||n===0?ro(e):ro.ceil(e),qt(e.getUTCFullYear()%1e4,r,4)}function K$(){return"+0000"}function H1(){return"%"}function K1(e){return+e}function G1(e){return Math.floor(+e/1e3)}var ql,V3,q3;G$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G$(e){return ql=GL(e),V3=ql.format,ql.parse,q3=ql.utcFormat,ql.utcParse,ql}function Y$(e){return new Date(e)}function Q$(e){return e instanceof Date?+e:+new Date(+e)}function ev(e,r,n,a,l,o,d,m,f,h){var g=B0(),p=g.invert,v=g.domain,b=h(".%L"),w=h(":%S"),N=h("%I:%M"),S=h("%I %p"),C=h("%a %d"),O=h("%b %d"),k=h("%B"),E=h("%Y");function M(D){return(f(D)<D?b:m(D)<D?w:d(D)<D?N:o(D)<D?S:a(D)<D?l(D)<D?C:O:n(D)<D?k:E)(D)}return g.invert=function(D){return new Date(p(D))},g.domain=function(D){return arguments.length?v(Array.from(D,Q$)):v().map(Y$)},g.ticks=function(D){var R=v();return e(R[0],R[R.length-1],D??10)},g.tickFormat=function(D,R){return R==null?M:h(R)},g.nice=function(D){var R=v();return(!D||typeof D.range!="function")&&(D=r(R[0],R[R.length-1],D??10)),D?v(T3(R,D)):g},g.copy=function(){return Hc(g,ev(e,r,n,a,l,o,d,m,f,h))},g}function X$(){return ka.apply(ev(HL,KL,Es,Z0,Bm,Kc,Q0,G0,Qi,V3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Z$(){return ka.apply(ev(qL,WL,Ms,J0,Fm,zm,X0,Y0,Qi,q3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Um(){var e=0,r=1,n,a,l,o,d=On,m=!1,f;function h(p){return p==null||isNaN(p=+p)?f:d(l===0?.5:(p=(o(p)-n)*l,m?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,r]=p,n=o(e=+e),a=o(r=+r),l=n===a?0:1/(a-n),h):[e,r]},h.clamp=function(p){return arguments.length?(m=!!p,h):m},h.interpolator=function(p){return arguments.length?(d=p,h):d};function g(p){return function(v){var b,w;return arguments.length?([b,w]=v,d=p(b,w),h):[d(0),d(1)]}}return h.range=g(oo),h.rangeRound=g(z0),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return o=p,n=p(e),a=p(r),l=n===a?0:1/(a-n),h}}function Di(e,r){return r.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function W3(){var e=Ci(Um()(On));return e.copy=function(){return Di(e,W3())},Rs.apply(e,arguments)}function H3(){var e=V0(Um()).domain([1,10]);return e.copy=function(){return Di(e,H3()).base(e.base())},Rs.apply(e,arguments)}function K3(){var e=q0(Um());return e.copy=function(){return Di(e,K3()).constant(e.constant())},Rs.apply(e,arguments)}function tv(){var e=W0(Um());return e.copy=function(){return Di(e,tv()).exponent(e.exponent())},Rs.apply(e,arguments)}function J$(){return tv.apply(null,arguments).exponent(.5)}function G3(){var e=[],r=On;function n(a){if(a!=null&&!isNaN(a=+a))return r((qc(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(vi),n},n.interpolator=function(a){return arguments.length?(r=a,n):r},n.range=function(){return e.map((a,l)=>r(l/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(l,o)=>$R(e,o/a))},n.copy=function(){return G3(r).domain(e)},Rs.apply(n,arguments)}function Vm(){var e=0,r=.5,n=1,a=1,l,o,d,m,f,h=On,g,p=!1,v;function b(N){return isNaN(N=+N)?v:(N=.5+((N=+g(N))-o)*(a*N<a*o?m:f),h(p?Math.max(0,Math.min(1,N)):N))}b.domain=function(N){return arguments.length?([e,r,n]=N,l=g(e=+e),o=g(r=+r),d=g(n=+n),m=l===o?0:.5/(o-l),f=o===d?0:.5/(d-o),a=o<l?-1:1,b):[e,r,n]},b.clamp=function(N){return arguments.length?(p=!!N,b):p},b.interpolator=function(N){return arguments.length?(h=N,b):h};function w(N){return function(S){var C,O,k;return arguments.length?([C,O,k]=S,h=uL(N,[C,O,k]),b):[h(0),h(.5),h(1)]}}return b.range=w(oo),b.rangeRound=w(z0),b.unknown=function(N){return arguments.length?(v=N,b):v},function(N){return g=N,l=N(e),o=N(r),d=N(n),m=l===o?0:.5/(o-l),f=o===d?0:.5/(d-o),a=o<l?-1:1,b}}function Y3(){var e=Ci(Vm()(On));return e.copy=function(){return Di(e,Y3())},Rs.apply(e,arguments)}function Q3(){var e=V0(Vm()).domain([.1,1,10]);return e.copy=function(){return Di(e,Q3()).base(e.base())},Rs.apply(e,arguments)}function X3(){var e=q0(Vm());return e.copy=function(){return Di(e,X3()).constant(e.constant())},Rs.apply(e,arguments)}function rv(){var e=W0(Vm());return e.copy=function(){return Di(e,rv()).exponent(e.exponent())},Rs.apply(e,arguments)}function ez(){return rv.apply(null,arguments).exponent(.5)}const vc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:R0,scaleDiverging:Y3,scaleDivergingLog:Q3,scaleDivergingPow:rv,scaleDivergingSqrt:ez,scaleDivergingSymlog:X3,scaleIdentity:A3,scaleImplicit:Ax,scaleLinear:O3,scaleLog:I3,scaleOrdinal:_0,scalePoint:FR,scalePow:H0,scaleQuantile:P3,scaleQuantize:_3,scaleRadial:M3,scaleSequential:W3,scaleSequentialLog:H3,scaleSequentialPow:tv,scaleSequentialQuantile:G3,scaleSequentialSqrt:J$,scaleSequentialSymlog:K3,scaleSqrt:PL,scaleSymlog:E3,scaleThreshold:R3,scaleTime:X$,scaleUtc:Z$,tickFormat:D3},Symbol.toStringTag,{value:"Module"}));var Oi=e=>e.chartData,nv=pe([Oi],e=>{var r=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:r,dataStartIndex:0}}),qm=(e,r,n,a)=>a?nv(e):Oi(e);function il(e){if(Array.isArray(e)&&e.length===2){var[r,n]=e;if(bn(r)&&bn(n))return!0}return!1}function Y1(e,r,n){return n?e:[Math.min(e[0],r[0]),Math.max(e[1],r[1])]}function Z3(e,r){if(r&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,l,o;if(bn(n))l=n;else if(typeof n=="function")return;if(bn(a))o=a;else if(typeof a=="function")return;var d=[l,o];if(il(d))return d}}function tz(e,r,n){if(!(!n&&r==null)){if(typeof e=="function"&&r!=null)try{var a=e(r,n);if(il(a))return Y1(a,r,n)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,d,m;if(l==="auto")r!=null&&(d=Math.min(...r));else if(ct(l))d=l;else if(typeof l=="function")try{r!=null&&(d=l(r==null?void 0:r[0]))}catch{}else if(typeof l=="string"&&E2.test(l)){var f=E2.exec(l);if(f==null||r==null)d=void 0;else{var h=+f[1];d=r[0]-h}}else d=r==null?void 0:r[0];if(o==="auto")r!=null&&(m=Math.max(...r));else if(ct(o))m=o;else if(typeof o=="function")try{r!=null&&(m=o(r==null?void 0:r[1]))}catch{}else if(typeof o=="string"&&M2.test(o)){var g=M2.exec(o);if(g==null||r==null)m=void 0;else{var p=+g[1];m=r[1]+p}}else m=r==null?void 0:r[1];var v=[d,m];if(il(v))return r==null?v:Y1(v,r,n)}}}var co=1e9,rz={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},sv,yr=!0,Sa="[DecimalError] ",tl=Sa+"Invalid argument: ",av=Sa+"Exponent out of range: ",uo=Math.floor,Gi=Math.pow,nz=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ea,Zr=1e7,gr=7,J3=9007199254740991,im=uo(J3/gr),He={};He.absoluteValue=He.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};He.comparedTo=He.cmp=function(e){var r,n,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,r=0,n=a<l?a:l;r<n;++r)if(o.d[r]!==e.d[r])return o.d[r]>e.d[r]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};He.decimalPlaces=He.dp=function(){var e=this,r=e.d.length-1,n=(r-e.e)*gr;if(r=e.d[r],r)for(;r%10==0;r/=10)n--;return n<0?0:n};He.dividedBy=He.div=function(e){return Ds(this,new this.constructor(e))};He.dividedToIntegerBy=He.idiv=function(e){var r=this,n=r.constructor;return ir(Ds(r,new n(e),0,1),n.precision)};He.equals=He.eq=function(e){return!this.cmp(e)};He.exponent=function(){return Ur(this)};He.greaterThan=He.gt=function(e){return this.cmp(e)>0};He.greaterThanOrEqualTo=He.gte=function(e){return this.cmp(e)>=0};He.isInteger=He.isint=function(){return this.e>this.d.length-2};He.isNegative=He.isneg=function(){return this.s<0};He.isPositive=He.ispos=function(){return this.s>0};He.isZero=function(){return this.s===0};He.lessThan=He.lt=function(e){return this.cmp(e)<0};He.lessThanOrEqualTo=He.lte=function(e){return this.cmp(e)<1};He.logarithm=He.log=function(e){var r,n=this,a=n.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(ea))throw Error(Sa+"NaN");if(n.s<1)throw Error(Sa+(n.s?"NaN":"-Infinity"));return n.eq(ea)?new a(0):(yr=!1,r=Ds(Ic(n,o),Ic(e,o),o),yr=!0,ir(r,l))};He.minus=He.sub=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?r4(r,e):e4(r,(e.s=-e.s,e))};He.modulo=He.mod=function(e){var r,n=this,a=n.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(Sa+"NaN");return n.s?(yr=!1,r=Ds(n,e,0,1).times(e),yr=!0,n.minus(r)):ir(new a(n),l)};He.naturalExponential=He.exp=function(){return t4(this)};He.naturalLogarithm=He.ln=function(){return Ic(this)};He.negated=He.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};He.plus=He.add=function(e){var r=this;return e=new r.constructor(e),r.s==e.s?e4(r,e):r4(r,(e.s=-e.s,e))};He.precision=He.sd=function(e){var r,n,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(tl+e);if(r=Ur(l)+1,a=l.d.length-1,n=a*gr+1,a=l.d[a],a){for(;a%10==0;a/=10)n--;for(a=l.d[0];a>=10;a/=10)n++}return e&&r>n?r:n};He.squareRoot=He.sqrt=function(){var e,r,n,a,l,o,d,m=this,f=m.constructor;if(m.s<1){if(!m.s)return new f(0);throw Error(Sa+"NaN")}for(e=Ur(m),yr=!1,l=Math.sqrt(+m),l==0||l==1/0?(r=Ga(m.d),(r.length+e)%2==0&&(r+="0"),l=Math.sqrt(r),e=uo((e+1)/2)-(e<0||e%2),l==1/0?r="5e"+e:(r=l.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),a=new f(r)):a=new f(l.toString()),n=f.precision,l=d=n+3;;)if(o=a,a=o.plus(Ds(m,o,d+2)).times(.5),Ga(o.d).slice(0,d)===(r=Ga(a.d)).slice(0,d)){if(r=r.slice(d-3,d+1),l==d&&r=="4999"){if(ir(o,n+1,0),o.times(o).eq(m)){a=o;break}}else if(r!="9999")break;d+=4}return yr=!0,ir(a,n)};He.times=He.mul=function(e){var r,n,a,l,o,d,m,f,h,g=this,p=g.constructor,v=g.d,b=(e=new p(e)).d;if(!g.s||!e.s)return new p(0);for(e.s*=g.s,n=g.e+e.e,f=v.length,h=b.length,f<h&&(o=v,v=b,b=o,d=f,f=h,h=d),o=[],d=f+h,a=d;a--;)o.push(0);for(a=h;--a>=0;){for(r=0,l=f+a;l>a;)m=o[l]+b[a]*v[l-a-1]+r,o[l--]=m%Zr|0,r=m/Zr|0;o[l]=(o[l]+r)%Zr|0}for(;!o[--d];)o.pop();return r?++n:o.shift(),e.d=o,e.e=n,yr?ir(e,p.precision):e};He.toDecimalPlaces=He.todp=function(e,r){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Xa(e,0,co),r===void 0?r=a.rounding:Xa(r,0,8),ir(n,e+Ur(n)+1,r))};He.toExponential=function(e,r){var n,a=this,l=a.constructor;return e===void 0?n=ll(a,!0):(Xa(e,0,co),r===void 0?r=l.rounding:Xa(r,0,8),a=ir(new l(a),e+1,r),n=ll(a,!0,e+1)),n};He.toFixed=function(e,r){var n,a,l=this,o=l.constructor;return e===void 0?ll(l):(Xa(e,0,co),r===void 0?r=o.rounding:Xa(r,0,8),a=ir(new o(l),e+Ur(l)+1,r),n=ll(a.abs(),!1,e+Ur(a)+1),l.isneg()&&!l.isZero()?"-"+n:n)};He.toInteger=He.toint=function(){var e=this,r=e.constructor;return ir(new r(e),Ur(e)+1,r.rounding)};He.toNumber=function(){return+this};He.toPower=He.pow=function(e){var r,n,a,l,o,d,m=this,f=m.constructor,h=12,g=+(e=new f(e));if(!e.s)return new f(ea);if(m=new f(m),!m.s){if(e.s<1)throw Error(Sa+"Infinity");return m}if(m.eq(ea))return m;if(a=f.precision,e.eq(ea))return ir(m,a);if(r=e.e,n=e.d.length-1,d=r>=n,o=m.s,d){if((n=g<0?-g:g)<=J3){for(l=new f(ea),r=Math.ceil(a/gr+4),yr=!1;n%2&&(l=l.times(m),X1(l.d,r)),n=uo(n/2),n!==0;)m=m.times(m),X1(m.d,r);return yr=!0,e.s<0?new f(ea).div(l):ir(l,a)}}else if(o<0)throw Error(Sa+"NaN");return o=o<0&&e.d[Math.max(r,n)]&1?-1:1,m.s=1,yr=!1,l=e.times(Ic(m,a+h)),yr=!0,l=t4(l),l.s=o,l};He.toPrecision=function(e,r){var n,a,l=this,o=l.constructor;return e===void 0?(n=Ur(l),a=ll(l,n<=o.toExpNeg||n>=o.toExpPos)):(Xa(e,1,co),r===void 0?r=o.rounding:Xa(r,0,8),l=ir(new o(l),e,r),n=Ur(l),a=ll(l,e<=n||n<=o.toExpNeg,e)),a};He.toSignificantDigits=He.tosd=function(e,r){var n=this,a=n.constructor;return e===void 0?(e=a.precision,r=a.rounding):(Xa(e,1,co),r===void 0?r=a.rounding:Xa(r,0,8)),ir(new a(n),e,r)};He.toString=He.valueOf=He.val=He.toJSON=He[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,r=Ur(e),n=e.constructor;return ll(e,r<=n.toExpNeg||r>=n.toExpPos)};function e4(e,r){var n,a,l,o,d,m,f,h,g=e.constructor,p=g.precision;if(!e.s||!r.s)return r.s||(r=new g(e)),yr?ir(r,p):r;if(f=e.d,h=r.d,d=e.e,l=r.e,f=f.slice(),o=d-l,o){for(o<0?(a=f,o=-o,m=h.length):(a=h,l=d,m=f.length),d=Math.ceil(p/gr),m=d>m?d+1:m+1,o>m&&(o=m,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(m=f.length,o=h.length,m-o<0&&(o=m,a=h,h=f,f=a),n=0;o;)n=(f[--o]=f[o]+h[o]+n)/Zr|0,f[o]%=Zr;for(n&&(f.unshift(n),++l),m=f.length;f[--m]==0;)f.pop();return r.d=f,r.e=l,yr?ir(r,p):r}function Xa(e,r,n){if(e!==~~e||e<r||e>n)throw Error(tl+e)}function Ga(e){var r,n,a,l=e.length-1,o="",d=e[0];if(l>0){for(o+=d,r=1;r<l;r++)a=e[r]+"",n=gr-a.length,n&&(o+=mi(n)),o+=a;d=e[r],a=d+"",n=gr-a.length,n&&(o+=mi(n))}else if(d===0)return"0";for(;d%10===0;)d/=10;return o+d}var Ds=(function(){function e(a,l){var o,d=0,m=a.length;for(a=a.slice();m--;)o=a[m]*l+d,a[m]=o%Zr|0,d=o/Zr|0;return d&&a.unshift(d),a}function r(a,l,o,d){var m,f;if(o!=d)f=o>d?1:-1;else for(m=f=0;m<o;m++)if(a[m]!=l[m]){f=a[m]>l[m]?1:-1;break}return f}function n(a,l,o){for(var d=0;o--;)a[o]-=d,d=a[o]<l[o]?1:0,a[o]=d*Zr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,d){var m,f,h,g,p,v,b,w,N,S,C,O,k,E,M,D,R,P,z=a.constructor,U=a.s==l.s?1:-1,q=a.d,Y=l.d;if(!a.s)return new z(a);if(!l.s)throw Error(Sa+"Division by zero");for(f=a.e-l.e,R=Y.length,M=q.length,b=new z(U),w=b.d=[],h=0;Y[h]==(q[h]||0);)++h;if(Y[h]>(q[h]||0)&&--f,o==null?O=o=z.precision:d?O=o+(Ur(a)-Ur(l))+1:O=o,O<0)return new z(0);if(O=O/gr+2|0,h=0,R==1)for(g=0,Y=Y[0],O++;(h<M||g)&&O--;h++)k=g*Zr+(q[h]||0),w[h]=k/Y|0,g=k%Y|0;else{for(g=Zr/(Y[0]+1)|0,g>1&&(Y=e(Y,g),q=e(q,g),R=Y.length,M=q.length),E=R,N=q.slice(0,R),S=N.length;S<R;)N[S++]=0;P=Y.slice(),P.unshift(0),D=Y[0],Y[1]>=Zr/2&&++D;do g=0,m=r(Y,N,R,S),m<0?(C=N[0],R!=S&&(C=C*Zr+(N[1]||0)),g=C/D|0,g>1?(g>=Zr&&(g=Zr-1),p=e(Y,g),v=p.length,S=N.length,m=r(p,N,v,S),m==1&&(g--,n(p,R<v?P:Y,v))):(g==0&&(m=g=1),p=Y.slice()),v=p.length,v<S&&p.unshift(0),n(N,p,S),m==-1&&(S=N.length,m=r(Y,N,R,S),m<1&&(g++,n(N,R<S?P:Y,S))),S=N.length):m===0&&(g++,N=[0]),w[h++]=g,m&&N[0]?N[S++]=q[E]||0:(N=[q[E]],S=1);while((E++<M||N[0]!==void 0)&&O--)}return w[0]||w.shift(),b.e=f,ir(b,d?o+Ur(b)+1:o)}})();function t4(e,r){var n,a,l,o,d,m,f=0,h=0,g=e.constructor,p=g.precision;if(Ur(e)>16)throw Error(av+Ur(e));if(!e.s)return new g(ea);for(yr=!1,m=p,d=new g(.03125);e.abs().gte(.1);)e=e.times(d),h+=5;for(a=Math.log(Gi(2,h))/Math.LN10*2+5|0,m+=a,n=l=o=new g(ea),g.precision=m;;){if(l=ir(l.times(e),m),n=n.times(++f),d=o.plus(Ds(l,n,m)),Ga(d.d).slice(0,m)===Ga(o.d).slice(0,m)){for(;h--;)o=ir(o.times(o),m);return g.precision=p,r==null?(yr=!0,ir(o,p)):o}o=d}}function Ur(e){for(var r=e.e*gr,n=e.d[0];n>=10;n/=10)r++;return r}function Ep(e,r,n){if(r>e.LN10.sd())throw yr=!0,n&&(e.precision=n),Error(Sa+"LN10 precision limit exceeded");return ir(new e(e.LN10),r)}function mi(e){for(var r="";e--;)r+="0";return r}function Ic(e,r){var n,a,l,o,d,m,f,h,g,p=1,v=10,b=e,w=b.d,N=b.constructor,S=N.precision;if(b.s<1)throw Error(Sa+(b.s?"NaN":"-Infinity"));if(b.eq(ea))return new N(0);if(r==null?(yr=!1,h=S):h=r,b.eq(10))return r==null&&(yr=!0),Ep(N,h);if(h+=v,N.precision=h,n=Ga(w),a=n.charAt(0),o=Ur(b),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)b=b.times(e),n=Ga(b.d),a=n.charAt(0),p++;o=Ur(b),a>1?(b=new N("0."+n),o++):b=new N(a+"."+n.slice(1))}else return f=Ep(N,h+2,S).times(o+""),b=Ic(new N(a+"."+n.slice(1)),h-v).plus(f),N.precision=S,r==null?(yr=!0,ir(b,S)):b;for(m=d=b=Ds(b.minus(ea),b.plus(ea),h),g=ir(b.times(b),h),l=3;;){if(d=ir(d.times(g),h),f=m.plus(Ds(d,new N(l),h)),Ga(f.d).slice(0,h)===Ga(m.d).slice(0,h))return m=m.times(2),o!==0&&(m=m.plus(Ep(N,h+2,S).times(o+""))),m=Ds(m,new N(p),h),N.precision=S,r==null?(yr=!0,ir(m,S)):m;m=f,l+=2}}function Q1(e,r){var n,a,l;for((n=r.indexOf("."))>-1&&(r=r.replace(".","")),(a=r.search(/e/i))>0?(n<0&&(n=a),n+=+r.slice(a+1),r=r.substring(0,a)):n<0&&(n=r.length),a=0;r.charCodeAt(a)===48;)++a;for(l=r.length;r.charCodeAt(l-1)===48;)--l;if(r=r.slice(a,l),r){if(l-=a,n=n-a-1,e.e=uo(n/gr),e.d=[],a=(n+1)%gr,n<0&&(a+=gr),a<l){for(a&&e.d.push(+r.slice(0,a)),l-=gr;a<l;)e.d.push(+r.slice(a,a+=gr));r=r.slice(a),a=gr-r.length}else a-=l;for(;a--;)r+="0";if(e.d.push(+r),yr&&(e.e>im||e.e<-im))throw Error(av+n)}else e.s=0,e.e=0,e.d=[0];return e}function ir(e,r,n){var a,l,o,d,m,f,h,g,p=e.d;for(d=1,o=p[0];o>=10;o/=10)d++;if(a=r-d,a<0)a+=gr,l=r,h=p[g=0];else{if(g=Math.ceil((a+1)/gr),o=p.length,g>=o)return e;for(h=o=p[g],d=1;o>=10;o/=10)d++;a%=gr,l=a-gr+d}if(n!==void 0&&(o=Gi(10,d-l-1),m=h/o%10|0,f=r<0||p[g+1]!==void 0||h%o,f=n<4?(m||f)&&(n==0||n==(e.s<0?3:2)):m>5||m==5&&(n==4||f||n==6&&(a>0?l>0?h/Gi(10,d-l):0:p[g-1])%10&1||n==(e.s<0?8:7))),r<1||!p[0])return f?(o=Ur(e),p.length=1,r=r-o-1,p[0]=Gi(10,(gr-r%gr)%gr),e.e=uo(-r/gr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(a==0?(p.length=g,o=1,g--):(p.length=g+1,o=Gi(10,gr-a),p[g]=l>0?(h/Gi(10,d-l)%Gi(10,l)|0)*o:0),f)for(;;)if(g==0){(p[0]+=o)==Zr&&(p[0]=1,++e.e);break}else{if(p[g]+=o,p[g]!=Zr)break;p[g--]=0,o=1}for(a=p.length;p[--a]===0;)p.pop();if(yr&&(e.e>im||e.e<-im))throw Error(av+Ur(e));return e}function r4(e,r){var n,a,l,o,d,m,f,h,g,p,v=e.constructor,b=v.precision;if(!e.s||!r.s)return r.s?r.s=-r.s:r=new v(e),yr?ir(r,b):r;if(f=e.d,p=r.d,a=r.e,h=e.e,f=f.slice(),d=h-a,d){for(g=d<0,g?(n=f,d=-d,m=p.length):(n=p,a=h,m=f.length),l=Math.max(Math.ceil(b/gr),m)+2,d>l&&(d=l,n.length=1),n.reverse(),l=d;l--;)n.push(0);n.reverse()}else{for(l=f.length,m=p.length,g=l<m,g&&(m=l),l=0;l<m;l++)if(f[l]!=p[l]){g=f[l]<p[l];break}d=0}for(g&&(n=f,f=p,p=n,r.s=-r.s),m=f.length,l=p.length-m;l>0;--l)f[m++]=0;for(l=p.length;l>d;){if(f[--l]<p[l]){for(o=l;o&&f[--o]===0;)f[o]=Zr-1;--f[o],f[l]+=Zr}f[l]-=p[l]}for(;f[--m]===0;)f.pop();for(;f[0]===0;f.shift())--a;return f[0]?(r.d=f,r.e=a,yr?ir(r,b):r):new v(0)}function ll(e,r,n){var a,l=Ur(e),o=Ga(e.d),d=o.length;return r?(n&&(a=n-d)>0?o=o.charAt(0)+"."+o.slice(1)+mi(a):d>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+mi(-l-1)+o,n&&(a=n-d)>0&&(o+=mi(a))):l>=d?(o+=mi(l+1-d),n&&(a=n-l-1)>0&&(o=o+"."+mi(a))):((a=l+1)<d&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-d)>0&&(l+1===d&&(o+="."),o+=mi(a))),e.s<0?"-"+o:o}function X1(e,r){if(e.length>r)return e.length=r,!0}function n4(e){var r,n,a;function l(o){var d=this;if(!(d instanceof l))return new l(o);if(d.constructor=l,o instanceof l){d.s=o.s,d.e=o.e,d.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(tl+o);if(o>0)d.s=1;else if(o<0)o=-o,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(o===~~o&&o<1e7){d.e=0,d.d=[o];return}return Q1(d,o.toString())}else if(typeof o!="string")throw Error(tl+o);if(o.charCodeAt(0)===45?(o=o.slice(1),d.s=-1):d.s=1,nz.test(o))Q1(d,o);else throw Error(tl+o)}if(l.prototype=He,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=n4,l.config=l.set=az,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<a.length;)e.hasOwnProperty(n=a[r++])||(e[n]=this[n]);return l.config(e),l}function az(e){if(!e||typeof e!="object")throw Error(Sa+"Object expected");var r,n,a,l=["precision",1,co,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<l.length;r+=3)if((a=e[n=l[r]])!==void 0)if(uo(a)===a&&a>=l[r+1]&&a<=l[r+2])this[n]=a;else throw Error(tl+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(tl+n+": "+a);return this}var sv=n4(rz);ea=new sv(1);const Qt=sv;var sz=e=>e,a4={},s4=e=>e===a4,Z1=e=>function r(){return arguments.length===0||arguments.length===1&&s4(arguments.length<=0?void 0:arguments[0])?r:e(...arguments)},i4=(e,r)=>e===1?r:Z1(function(){for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];var o=a.filter(d=>d!==a4).length;return o>=e?r(...a):i4(e-o,Z1(function(){for(var d=arguments.length,m=new Array(d),f=0;f<d;f++)m[f]=arguments[f];var h=a.map(g=>s4(g)?m.shift():g);return r(...h,...m)}))}),Wm=e=>i4(e.length,e),Mx=(e,r)=>{for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},iz=Wm((e,r)=>Array.isArray(r)?r.map(e):Object.keys(r).map(n=>r[n]).map(e)),lz=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];if(!n.length)return sz;var l=n.reverse(),o=l[0],d=l.slice(1);return function(){return d.reduce((m,f)=>f(m),o(...arguments))}},Px=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),l4=e=>{var r=null,n=null;return function(){for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return r&&l.every((d,m)=>{var f;return d===((f=r)===null||f===void 0?void 0:f[m])})||(r=l,n=e(...l)),n}};function o4(e){var r;return e===0?r=1:r=Math.floor(new Qt(e).abs().log(10).toNumber())+1,r}function c4(e,r,n){for(var a=new Qt(e),l=0,o=[];a.lt(r)&&l<1e5;)o.push(a.toNumber()),a=a.add(n),l++;return o}Wm((e,r,n)=>{var a=+e,l=+r;return a+n*(l-a)});Wm((e,r,n)=>{var a=r-+e;return a=a||1/0,(n-e)/a});Wm((e,r,n)=>{var a=r-+e;return a=a||1/0,Math.max(0,Math.min(1,(n-e)/a))});var d4=e=>{var[r,n]=e,[a,l]=[r,n];return r>n&&([a,l]=[n,r]),[a,l]},u4=(e,r,n)=>{if(e.lte(0))return new Qt(0);var a=o4(e.toNumber()),l=new Qt(10).pow(a),o=e.div(l),d=a!==1?.05:.1,m=new Qt(Math.ceil(o.div(d).toNumber())).add(n).mul(d),f=m.mul(l);return r?new Qt(f.toNumber()):new Qt(Math.ceil(f.toNumber()))},oz=(e,r,n)=>{var a=new Qt(1),l=new Qt(e);if(!l.isint()&&n){var o=Math.abs(e);o<1?(a=new Qt(10).pow(o4(e)-1),l=new Qt(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new Qt(Math.floor(e)))}else e===0?l=new Qt(Math.floor((r-1)/2)):n||(l=new Qt(Math.floor(e)));var d=Math.floor((r-1)/2),m=lz(iz(f=>l.add(new Qt(f-d).mul(a)).toNumber()),Mx);return m(0,r)},m4=function(r,n,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-r)/(a-1)))return{step:new Qt(0),tickMin:new Qt(0),tickMax:new Qt(0)};var d=u4(new Qt(n).sub(r).div(a-1),l,o),m;r<=0&&n>=0?m=new Qt(0):(m=new Qt(r).add(n).div(2),m=m.sub(new Qt(m).mod(d)));var f=Math.ceil(m.sub(r).div(d).toNumber()),h=Math.ceil(new Qt(n).sub(m).div(d).toNumber()),g=f+h+1;return g>a?m4(r,n,a,l,o+1):(g<a&&(h=n>0?h+(a-g):h,f=n>0?f:f+(a-g)),{step:d,tickMin:m.sub(new Qt(f).mul(d)),tickMax:m.add(new Qt(h).mul(d))})};function cz(e){var[r,n]=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[d,m]=d4([r,n]);if(d===-1/0||m===1/0){var f=m===1/0?[d,...Mx(0,a-1).map(()=>1/0)]:[...Mx(0,a-1).map(()=>-1/0),m];return r>n?Px(f):f}if(d===m)return oz(d,a,l);var{step:h,tickMin:g,tickMax:p}=m4(d,m,o,l,0),v=c4(g,p.add(new Qt(.1).mul(h)),h);return r>n?Px(v):v}function dz(e,r){var[n,a]=e,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,d]=d4([n,a]);if(o===-1/0||d===1/0)return[n,a];if(o===d)return[o];var m=Math.max(r,2),f=u4(new Qt(d).sub(o).div(m-1),l,0),h=[...c4(new Qt(o),new Qt(d),f),d];return l===!1&&(h=h.map(g=>Math.round(g))),n>a?Px(h):h}var uz=l4(cz),mz=l4(dz),f4=e=>e.rootProps.maxBarSize,fz=e=>e.rootProps.barGap,h4=e=>e.rootProps.barCategoryGap,hz=e=>e.rootProps.barSize,Gc=e=>e.rootProps.stackOffset,iv=e=>e.options.chartName,lv=e=>e.rootProps.syncId,g4=e=>e.rootProps.syncMethod,ov=e=>e.options.eventEmitter,bs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Zn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Hm=(e,r)=>{if(!(!e||!r))return e!=null&&e.reversed?[r[1],r[0]]:r},gz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:bs.angleAxisId,includeHidden:!1,name:void 0,reversed:bs.reversed,scale:bs.scale,tick:bs.tick,tickCount:void 0,ticks:void 0,type:bs.type,unit:void 0},pz={allowDataOverflow:Zn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:Zn.tickCount,ticks:void 0,type:Zn.type,unit:void 0},xz={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:bs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bs.scale,tick:bs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},vz={allowDataOverflow:Zn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zn.scale,tick:Zn.tick,tickCount:Zn.tickCount,ticks:void 0,type:"category",unit:void 0},cv=(e,r)=>e.polarAxis.angleAxis[r]!=null?e.polarAxis.angleAxis[r]:e.layout.layoutType==="radial"?xz:gz,dv=(e,r)=>e.polarAxis.radiusAxis[r]!=null?e.polarAxis.radiusAxis[r]:e.layout.layoutType==="radial"?vz:pz,Km=e=>e.polarOptions,uv=pe([Ps,_s,Hr],GC),p4=pe([Km,uv],(e,r)=>{if(e!=null)return yn(e.innerRadius,r,0)}),x4=pe([Km,uv],(e,r)=>{if(e!=null)return yn(e.outerRadius,r,r*.8)}),yz=e=>{if(e==null)return[0,0];var{startAngle:r,endAngle:n}=e;return[r,n]},v4=pe([Km],yz);pe([cv,v4],Hm);var y4=pe([uv,p4,x4],(e,r,n)=>{if(!(e==null||r==null||n==null))return[r,n]});pe([dv,y4],Hm);var b4=pe([Lt,Km,p4,x4,Ps,_s],(e,r,n,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||r==null||n==null||a==null)){var{cx:d,cy:m,startAngle:f,endAngle:h}=r;return{cx:yn(d,l,l/2),cy:yn(m,o,o/2),innerRadius:n,outerRadius:a,startAngle:f,endAngle:h,clockWise:!1}}}),wr=(e,r)=>r,Yc=(e,r,n)=>n;function mv(e){return e==null?void 0:e.id}var Gr=e=>{var r=Lt(e);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},mo=e=>e.tooltip.settings.axisId,Yr=e=>{var r=Gr(e),n=mo(e);return Qc(e,r,n)},j4=pe([Yr],e=>e==null?void 0:e.dataKey);function N4(e,r,n){var{chartData:a=[]}=r,{allowDuplicatedCategory:l,dataKey:o}=n,d=new Map;return e.forEach(m=>{var f,h=(f=m.data)!==null&&f!==void 0?f:a;if(!(h==null||h.length===0)){var g=mv(m);h.forEach((p,v)=>{var b=o==null||l?v:String(dr(p,o,null)),w=dr(p,m.dataKey,0),N;d.has(b)?N=d.get(b):N={},Object.assign(N,{[g]:w}),d.set(b,N)})}}),Array.from(d.values())}function Gm(e){return e.stackId!=null&&e.dataKey!=null}var Ym=(e,r)=>e===r?!0:e==null||r==null?!1:e[0]===r[0]&&e[1]===r[1];function Qm(e,r){return Array.isArray(e)&&Array.isArray(r)&&e.length===0&&r.length===0?!0:e===r}function J1(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function lm(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?J1(Object(n),!0).forEach(function(a){bz(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J1(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function bz(e,r,n){return(r=jz(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function jz(e){var r=Nz(e,"string");return typeof r=="symbol"?r:r+""}function Nz(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var _x=[0,"auto"],Qn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},w4=(e,r)=>e.cartesianAxis.xAxis[r],Ls=(e,r)=>{var n=w4(e,r);return n??Qn},Xn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:_x,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Fc},S4=(e,r)=>e.cartesianAxis.yAxis[r],$s=(e,r)=>{var n=S4(e,r);return n??Xn},wz={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},fv=(e,r)=>{var n=e.cartesianAxis.zAxis[r];return n??wz},kr=(e,r,n)=>{switch(r){case"xAxis":return Ls(e,n);case"yAxis":return $s(e,n);case"zAxis":return fv(e,n);case"angleAxis":return cv(e,n);case"radiusAxis":return dv(e,n);default:throw new Error("Unexpected axis type: ".concat(r))}},Sz=(e,r,n)=>{switch(r){case"xAxis":return Ls(e,n);case"yAxis":return $s(e,n);default:throw new Error("Unexpected axis type: ".concat(r))}},Qc=(e,r,n)=>{switch(r){case"xAxis":return Ls(e,n);case"yAxis":return $s(e,n);case"angleAxis":return cv(e,n);case"radiusAxis":return dv(e,n);default:throw new Error("Unexpected axis type: ".concat(r))}},k4=e=>e.graphicalItems.cartesianItems.some(r=>r.type==="bar")||e.graphicalItems.polarItems.some(r=>r.type==="radialBar");function hv(e,r){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===r;case"yAxis":return"yAxisId"in n&&n.yAxisId===r;case"zAxis":return"zAxisId"in n&&n.zAxisId===r;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===r;default:return!1}}}var Xm=e=>e.graphicalItems.cartesianItems,kz=pe([wr,Yc],hv),gv=(e,r,n)=>e.filter(n).filter(a=>(r==null?void 0:r.includeHidden)===!0?!0:!a.hide),Xc=pe([Xm,kr,kz],gv,{memoizeOptions:{resultEqualityCheck:Qm}}),C4=pe([Xc],e=>e.filter(r=>r.type==="area"||r.type==="bar").filter(Gm)),D4=e=>e.filter(r=>!("stackId"in r)||r.stackId===void 0),Cz=pe([Xc],D4),pv=e=>e.map(r=>r.data).filter(Boolean).flat(1),Dz=pe([Xc],pv,{memoizeOptions:{resultEqualityCheck:Qm}}),xv=(e,r)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:l}=r;return e.length>0?e:n.slice(a,l+1)},vv=pe([Dz,qm],xv),yv=(e,r,n)=>(r==null?void 0:r.dataKey)!=null?e.map(a=>({value:dr(a,r.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:dr(l,a)}))):e.map(a=>({value:a})),Zm=pe([vv,kr,Xc],yv);function O4(e,r){switch(e){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function Iu(e){if(Qa(e)||e instanceof Date){var r=Number(e);if(bn(r))return r}}function eS(e){if(Array.isArray(e)){var r=[Iu(e[0]),Iu(e[1])];return il(r)?r:void 0}var n=Iu(e);if(n!=null)return[n,n]}function fo(e){return e.map(Iu).filter(q_)}function Oz(e,r,n){return!n||typeof r!="number"||Na(r)?[]:n.length?fo(n.flatMap(a=>{var l=dr(e,a.dataKey),o,d;if(Array.isArray(l)?[o,d]=l:o=d=l,!(!bn(o)||!bn(d)))return[r-o,r+d]})):[]}var Az=pe([C4,qm,Yr],N4),A4=(e,r,n)=>{var a={},l=r.reduce((o,d)=>(d.stackId==null||(o[d.stackId]==null&&(o[d.stackId]=[]),o[d.stackId].push(d)),o),a);return Object.fromEntries(Object.entries(l).map(o=>{var[d,m]=o,f=m.map(mv);return[d,{stackedData:fP(e,f,n),graphicalItems:m}]}))},Rx=pe([Az,C4,Gc],A4),T4=(e,r,n,a)=>{var{dataStartIndex:l,dataEndIndex:o}=r;if(a==null&&n!=="zAxis"){var d=vP(e,l,o);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},Tz=pe([kr],e=>e.allowDataOverflow),bv=e=>{var r;if(e==null||!("domain"in e))return _x;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=fo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(r=e==null?void 0:e.domain)!==null&&r!==void 0?r:_x},jv=pe([kr],bv),Nv=pe([jv,Tz],Z3),Iz=pe([Rx,Oi,wr,Nv],T4,{memoizeOptions:{resultEqualityCheck:Ym}}),Jm=e=>e.errorBars,Ez=(e,r,n)=>e.flatMap(a=>r[a.id]).filter(Boolean).filter(a=>O4(n,a)),om=function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var l=n.filter(Boolean);if(l.length!==0){var o=l.flat(),d=Math.min(...o),m=Math.max(...o);return[d,m]}},wv=(e,r,n,a,l)=>{var o,d;if(n.length>0&&e.forEach(m=>{n.forEach(f=>{var h,g,p=(h=a[f.id])===null||h===void 0?void 0:h.filter(C=>O4(l,C)),v=dr(m,(g=r.dataKey)!==null&&g!==void 0?g:f.dataKey),b=Oz(m,v,p);if(b.length>=2){var w=Math.min(...b),N=Math.max(...b);(o==null||w<o)&&(o=w),(d==null||N>d)&&(d=N)}var S=eS(v);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),d=d==null?S[1]:Math.max(d,S[1]))})}),(r==null?void 0:r.dataKey)!=null&&e.forEach(m=>{var f=eS(dr(m,r.dataKey));f!=null&&(o=o==null?f[0]:Math.min(o,f[0]),d=d==null?f[1]:Math.max(d,f[1]))}),bn(o)&&bn(d))return[o,d]},Mz=pe([vv,kr,Cz,Jm,wr],wv,{memoizeOptions:{resultEqualityCheck:Ym}});function Pz(e){var{value:r}=e;if(Qa(r)||r instanceof Date)return r}var _z=(e,r,n)=>{var a=e.map(Pz).filter(l=>l!=null);return n&&(r.dataKey==null||r.allowDuplicatedCategory&&aC(a))?x3(0,e.length):r.allowDuplicatedCategory?a:Array.from(new Set(a))},I4=e=>e.referenceElements.dots,ho=(e,r,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>r==="xAxis"?a.xAxisId===n:a.yAxisId===n),Rz=pe([I4,wr,Yc],ho),E4=e=>e.referenceElements.areas,Lz=pe([E4,wr,Yc],ho),M4=e=>e.referenceElements.lines,$z=pe([M4,wr,Yc],ho),P4=(e,r)=>{var n=fo(e.map(a=>r==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},zz=pe(Rz,wr,P4),_4=(e,r)=>{var n=fo(e.flatMap(a=>[r==="xAxis"?a.x1:a.y1,r==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Bz=pe([Lz,wr],_4),R4=(e,r)=>{var n=fo(e.map(a=>r==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Fz=pe($z,wr,R4),Uz=pe(zz,Fz,Bz,(e,r,n)=>om(e,n,r)),Sv=(e,r,n,a,l,o,d,m)=>{if(n!=null)return n;var f=d==="vertical"&&m==="xAxis"||d==="horizontal"&&m==="yAxis",h=f?om(a,o,l):om(o,l);return tz(r,h,e.allowDataOverflow)},Vz=pe([kr,jv,Nv,Iz,Mz,Uz,Lt,wr],Sv,{memoizeOptions:{resultEqualityCheck:Ym}}),qz=[0,1],kv=(e,r,n,a,l,o,d)=>{if(!((e==null||n==null||n.length===0)&&d===void 0)){var{dataKey:m,type:f}=e,h=Si(r,o);return h&&m==null?x3(0,n.length):f==="category"?_z(a,e,h):l==="expand"?qz:d}},Cv=pe([kr,Lt,vv,Zm,Gc,wr,Vz],kv),L4=(e,r,n,a,l)=>{if(e!=null){var{scale:o,type:d}=e;if(o==="auto")return r==="radial"&&l==="radiusAxis"?"band":r==="radial"&&l==="angleAxis"?"linear":d==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!n)?"point":d==="category"?"band":"linear";if(typeof o=="string"){var m="scale".concat(Lc(o));return m in vc?m:"point"}}},go=pe([kr,Lt,k4,iv,wr],L4);function Wz(e){if(e!=null){if(e in vc)return vc[e]();var r="scale".concat(Lc(e));if(r in vc)return vc[r]()}}function Dv(e,r,n,a){if(!(n==null||a==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(a);var l=Wz(r);if(l!=null){var o=l.domain(n).range(a);return oP(o),o}}}var Ov=(e,r,n)=>{var a=bv(r);if(!(n!=="auto"&&n!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&il(e))return uz(e,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&il(e))return mz(e,r.tickCount,r.allowDecimals)}},Av=pe([Cv,Qc,go],Ov),Tv=(e,r,n,a)=>{if(a!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&il(r)&&Array.isArray(n)&&n.length>0){var l=r[0],o=n[0],d=r[1],m=n[n.length-1];return[Math.min(l,o),Math.max(d,m)]}return r},Hz=pe([kr,Cv,Av,wr],Tv),Kz=pe(Zm,kr,(e,r)=>{if(!(!r||r.type!=="number")){var n=1/0,a=Array.from(fo(e.map(m=>m.value))).sort((m,f)=>m-f);if(a.length<2)return 1/0;var l=a[a.length-1]-a[0];if(l===0)return 1/0;for(var o=0;o<a.length-1;o++){var d=a[o+1]-a[o];n=Math.min(n,d)}return n/l}}),$4=pe(Kz,Lt,h4,Hr,(e,r,n,a)=>a,(e,r,n,a,l)=>{if(!bn(e))return 0;var o=r==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var d=yn(n,e*o),m=e*o/2;return m-d-(m-d)/o*d}return 0}),Gz=(e,r)=>{var n=Ls(e,r);return n==null||typeof n.padding!="string"?0:$4(e,"xAxis",r,n.padding)},Yz=(e,r)=>{var n=$s(e,r);return n==null||typeof n.padding!="string"?0:$4(e,"yAxis",r,n.padding)},Qz=pe(Ls,Gz,(e,r)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:r,right:r}:{left:((n=l.left)!==null&&n!==void 0?n:0)+r,right:((a=l.right)!==null&&a!==void 0?a:0)+r}}),Xz=pe($s,Yz,(e,r)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:r,bottom:r}:{top:((n=l.top)!==null&&n!==void 0?n:0)+r,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+r}}),Zz=pe([Hr,Qz,Pm,Mm,(e,r,n)=>n],(e,r,n,a,l)=>{var{padding:o}=a;return l?[o.left,n.width-o.right]:[e.left+r.left,e.left+e.width-r.right]}),Jz=pe([Hr,Lt,Xz,Pm,Mm,(e,r,n)=>n],(e,r,n,a,l,o)=>{var{padding:d}=l;return o?[a.height-d.bottom,d.top]:r==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Zc=(e,r,n,a)=>{var l;switch(r){case"xAxis":return Zz(e,n,a);case"yAxis":return Jz(e,n,a);case"zAxis":return(l=fv(e,n))===null||l===void 0?void 0:l.range;case"angleAxis":return v4(e);case"radiusAxis":return y4(e,n);default:return}},z4=pe([kr,Zc],Hm),po=pe([kr,go,Hz,z4],Dv);pe([Xc,Jm,wr],Ez);function B4(e,r){return e.id<r.id?-1:e.id>r.id?1:0}var ef=(e,r)=>r,tf=(e,r,n)=>n,eB=pe(Im,ef,tf,(e,r,n)=>e.filter(a=>a.orientation===r).filter(a=>a.mirror===n).sort(B4)),tB=pe(Em,ef,tf,(e,r,n)=>e.filter(a=>a.orientation===r).filter(a=>a.mirror===n).sort(B4)),F4=(e,r)=>({width:e.width,height:r.height}),rB=(e,r)=>{var n=typeof r.width=="number"?r.width:Fc;return{width:n,height:e.height}},U4=pe(Hr,Ls,F4),nB=(e,r,n)=>{switch(r){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},aB=(e,r,n)=>{switch(r){case"left":return e.left;case"right":return n-e.right;default:return 0}},sB=pe(_s,Hr,eB,ef,tf,(e,r,n,a,l)=>{var o={},d;return n.forEach(m=>{var f=F4(r,m);d==null&&(d=nB(r,a,e));var h=a==="top"&&!l||a==="bottom"&&l;o[m.id]=d-Number(h)*f.height,d+=(h?-1:1)*f.height}),o}),iB=pe(Ps,Hr,tB,ef,tf,(e,r,n,a,l)=>{var o={},d;return n.forEach(m=>{var f=rB(r,m);d==null&&(d=aB(r,a,e));var h=a==="left"&&!l||a==="right"&&l;o[m.id]=d-Number(h)*f.width,d+=(h?-1:1)*f.width}),o}),lB=(e,r)=>{var n=Ls(e,r);if(n!=null)return sB(e,n.orientation,n.mirror)},oB=pe([Hr,Ls,lB,(e,r)=>r],(e,r,n,a)=>{if(r!=null){var l=n==null?void 0:n[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),cB=(e,r)=>{var n=$s(e,r);if(n!=null)return iB(e,n.orientation,n.mirror)},dB=pe([Hr,$s,cB,(e,r)=>r],(e,r,n,a)=>{if(r!=null){var l=n==null?void 0:n[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),V4=pe(Hr,$s,(e,r)=>{var n=typeof r.width=="number"?r.width:Fc;return{width:n,height:e.height}}),tS=(e,r,n)=>{switch(r){case"xAxis":return U4(e,n).width;case"yAxis":return V4(e,n).height;default:return}},q4=(e,r,n,a)=>{if(n!=null){var{allowDuplicatedCategory:l,type:o,dataKey:d}=n,m=Si(e,a),f=r.map(h=>h.value);if(d&&m&&o==="category"&&l&&aC(f))return f}},Iv=pe([Lt,Zm,kr,wr],q4),W4=(e,r,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:o}=n,d=Si(e,a);if(d&&(l==="number"||o!=="auto"))return r.map(m=>m.value)}},Ev=pe([Lt,Zm,Qc,wr],W4),rS=pe([Lt,Sz,go,po,Iv,Ev,Zc,Av,wr],(e,r,n,a,l,o,d,m,f)=>{if(r==null)return null;var h=Si(e,f);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:f,categoricalDomain:o,duplicateDomain:l,isCategorical:h,niceTicks:m,range:d,realScaleType:n,scale:a}}),uB=(e,r,n,a,l,o,d,m,f)=>{if(!(r==null||a==null)){var h=Si(e,f),{type:g,ticks:p,tickCount:v}=r,b=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,w=g==="category"&&a.bandwidth?a.bandwidth()/b:0;w=f==="angleAxis"&&o!=null&&o.length>=2?Jr(o[0]-o[1])*2*w:w;var N=p||l;if(N){var S=N.map((C,O)=>{var k=d?d.indexOf(C):C;return{index:O,coordinate:a(k)+w,value:C,offset:w}});return S.filter(C=>!Na(C.coordinate))}return h&&m?m.map((C,O)=>({coordinate:a(C)+w,value:C,index:O,offset:w})):a.ticks?a.ticks(v).map(C=>({coordinate:a(C)+w,value:C,offset:w})):a.domain().map((C,O)=>({coordinate:a(C)+w,value:d?d[C]:C,index:O,offset:w}))}},H4=pe([Lt,Qc,go,po,Av,Zc,Iv,Ev,wr],uB),mB=(e,r,n,a,l,o,d)=>{if(!(r==null||n==null||a==null||a[0]===a[1])){var m=Si(e,d),{tickCount:f}=r,h=0;return h=d==="angleAxis"&&(a==null?void 0:a.length)>=2?Jr(a[0]-a[1])*2*h:h,m&&o?o.map((g,p)=>({coordinate:n(g)+h,value:g,index:p,offset:h})):n.ticks?n.ticks(f).map(g=>({coordinate:n(g)+h,value:g,offset:h})):n.domain().map((g,p)=>({coordinate:n(g)+h,value:l?l[g]:g,index:p,offset:h}))}},yi=pe([Lt,Qc,po,Zc,Iv,Ev,wr],mB),bi=pe(kr,po,(e,r)=>{if(!(e==null||r==null))return lm(lm({},e),{},{scale:r})}),fB=pe([kr,go,Cv,z4],Dv);pe((e,r,n)=>fv(e,n),fB,(e,r)=>{if(!(e==null||r==null))return lm(lm({},e),{},{scale:r})});var hB=pe([Lt,Im,Em],(e,r,n)=>{switch(e){case"horizontal":return r.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),K4=e=>e.options.defaultTooltipEventType,G4=e=>e.options.validateTooltipEventTypes;function Y4(e,r,n){if(e==null)return r;var a=e?"axis":"item";return n==null?r:n.includes(a)?a:r}function Mv(e,r){var n=K4(e),a=G4(e);return Y4(r,n,a)}function gB(e){return tt(r=>Mv(r,e))}var Q4=(e,r)=>{var n,a=Number(r);if(!(Na(a)||r==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},pB=e=>e.tooltip.settings,hi={active:!1,index:null,dataKey:void 0,coordinate:void 0},xB={itemInteraction:{click:hi,hover:hi},axisInteraction:{click:hi,hover:hi},keyboardInteraction:hi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},X4=aa({name:"tooltip",initialState:xB,reducers:{addTooltipEntrySettings:{reducer(e,r){e.tooltipItemPayloads.push(r.payload)},prepare:Cn()},removeTooltipEntrySettings:{reducer(e,r){var n=Cs(e).tooltipItemPayloads.indexOf(r.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:Cn()},setTooltipSettingsState(e,r){e.settings=r.payload},setActiveMouseOverItemIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=r.payload.activeIndex,e.itemInteraction.hover.dataKey=r.payload.activeDataKey,e.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,r){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=r.payload.activeIndex,e.itemInteraction.click.dataKey=r.payload.activeDataKey,e.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(e,r){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=r.payload.activeIndex,e.axisInteraction.hover.dataKey=r.payload.activeDataKey,e.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(e,r){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=r.payload.activeIndex,e.axisInteraction.click.dataKey=r.payload.activeDataKey,e.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(e,r){e.syncInteraction=r.payload},setKeyboardInteraction(e,r){e.keyboardInteraction.active=r.payload.active,e.keyboardInteraction.index=r.payload.activeIndex,e.keyboardInteraction.coordinate=r.payload.activeCoordinate,e.keyboardInteraction.dataKey=r.payload.activeDataKey}}}),{addTooltipEntrySettings:vB,removeTooltipEntrySettings:yB,setTooltipSettingsState:bB,setActiveMouseOverItemIndex:Z4,mouseLeaveItem:jB,mouseLeaveChart:J4,setActiveClickItemIndex:NB,setMouseOverAxisIndex:eD,setMouseClickAxisIndex:wB,setSyncInteraction:Lx,setKeyboardInteraction:$x}=X4.actions,SB=X4.reducer;function nS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function wu(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?nS(Object(n),!0).forEach(function(a){kB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kB(e,r,n){return(r=CB(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function CB(e){var r=DB(e,"string");return typeof r=="symbol"?r:r+""}function DB(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function OB(e,r,n){return r==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function AB(e){return e.index!=null}var tD=(e,r,n,a)=>{if(r==null)return hi;var l=OB(e,r,n);if(l==null)return hi;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(AB(l)){if(o)return wu(wu({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a};return wu(wu({},hi),{},{coordinate:l.coordinate})},Pv=(e,r)=>{var n=e==null?void 0:e.index;if(n==null)return null;var a=Number(n);if(!bn(a))return n;var l=0,o=1/0;return r.length>0&&(o=r.length-1),String(Math.max(l,Math.min(a,o)))},rD=(e,r,n,a,l,o,d,m)=>{if(!(o==null||m==null)){var f=d[0],h=f==null?void 0:m(f.positions,o);if(h!=null)return h;var g=l==null?void 0:l[Number(o)];if(g)switch(n){case"horizontal":return{x:g.coordinate,y:(a.top+r)/2};default:return{x:(a.left+e)/2,y:g.coordinate}}}},nD=(e,r,n,a)=>{if(r==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;return n==="hover"?l=e.itemInteraction.hover.dataKey:l=e.itemInteraction.click.dataKey,l==null&&a!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(o=>{var d;return((d=o.settings)===null||d===void 0?void 0:d.dataKey)===l})},Jc=e=>e.options.tooltipPayloadSearcher,xo=e=>e.tooltip;function aS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sS(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?aS(Object(n),!0).forEach(function(a){TB(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TB(e,r,n){return(r=IB(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function IB(e){var r=EB(e,"string");return typeof r=="symbol"?r:r+""}function EB(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function MB(e,r){return e??r}var aD=(e,r,n,a,l,o,d)=>{if(!(r==null||o==null)){var{chartData:m,computedData:f,dataStartIndex:h,dataEndIndex:g}=n,p=[];return e.reduce((v,b)=>{var w,{dataDefinedOnItem:N,settings:S}=b,C=MB(N,m),O=Array.isArray(C)?YC(C,h,g):C,k=(w=S==null?void 0:S.dataKey)!==null&&w!==void 0?w:a,E=S==null?void 0:S.nameKey,M;if(a&&Array.isArray(O)&&!Array.isArray(O[0])&&d==="axis"?M=sC(O,a,l):M=o(O,r,f,E),Array.isArray(M))M.forEach(R=>{var P=sS(sS({},S),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});v.push(P2({tooltipEntrySettings:P,dataKey:R.dataKey,payload:R.payload,value:dr(R.payload,R.dataKey),name:R.name}))});else{var D;v.push(P2({tooltipEntrySettings:S,dataKey:k,payload:M,value:dr(M,k),name:(D=dr(M,E))!==null&&D!==void 0?D:S==null?void 0:S.name}))}return v},p)}},_v=pe([Yr,Lt,k4,iv,Gr],L4),PB=pe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,r)=>[...e,...r]),_B=pe([Gr,mo],hv),ed=pe([PB,Yr,_B],gv,{memoizeOptions:{resultEqualityCheck:Qm}}),RB=pe([ed],e=>e.filter(Gm)),LB=pe([ed],pv,{memoizeOptions:{resultEqualityCheck:Qm}}),vo=pe([LB,Oi],xv),$B=pe([RB,Oi,Yr],N4),Rv=pe([vo,Yr,ed],yv),sD=pe([Yr],bv),zB=pe([Yr],e=>e.allowDataOverflow),iD=pe([sD,zB],Z3),BB=pe([ed],e=>e.filter(Gm)),FB=pe([$B,BB,Gc],A4),UB=pe([FB,Oi,Gr,iD],T4),VB=pe([ed],D4),qB=pe([vo,Yr,VB,Jm,Gr],wv,{memoizeOptions:{resultEqualityCheck:Ym}}),WB=pe([I4,Gr,mo],ho),HB=pe([WB,Gr],P4),KB=pe([E4,Gr,mo],ho),GB=pe([KB,Gr],_4),YB=pe([M4,Gr,mo],ho),QB=pe([YB,Gr],R4),XB=pe([HB,QB,GB],om),ZB=pe([Yr,sD,iD,UB,qB,XB,Lt,Gr],Sv),lD=pe([Yr,Lt,vo,Rv,Gc,Gr,ZB],kv),JB=pe([lD,Yr,_v],Ov),e8=pe([Yr,lD,JB,Gr],Tv),oD=e=>{var r=Gr(e),n=mo(e),a=!1;return Zc(e,r,n,a)},cD=pe([Yr,oD],Hm),dD=pe([Yr,_v,e8,cD],Dv),t8=pe([Lt,Rv,Yr,Gr],q4),r8=pe([Lt,Rv,Yr,Gr],W4),n8=(e,r,n,a,l,o,d,m)=>{if(r){var{type:f}=r,h=Si(e,m);if(a){var g=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,p=f==="category"&&a.bandwidth?a.bandwidth()/g:0;return p=m==="angleAxis"&&l!=null&&(l==null?void 0:l.length)>=2?Jr(l[0]-l[1])*2*p:p,h&&d?d.map((v,b)=>({coordinate:a(v)+p,value:v,index:b,offset:p})):a.domain().map((v,b)=>({coordinate:a(v)+p,value:o?o[v]:v,index:b,offset:p}))}}},zs=pe([Lt,Yr,_v,dD,oD,t8,r8,Gr],n8),Lv=pe([K4,G4,pB],(e,r,n)=>Y4(n.shared,e,r)),uD=e=>e.tooltip.settings.trigger,$v=e=>e.tooltip.settings.defaultIndex,rf=pe([xo,Lv,uD,$v],tD),ji=pe([rf,vo],Pv),mD=pe([zs,ji],Q4),fD=pe([rf],e=>{if(e)return e.dataKey}),hD=pe([xo,Lv,uD,$v],nD),a8=pe([Ps,_s,Lt,Hr,zs,$v,hD,Jc],rD),s8=pe([rf,a8],(e,r)=>e!=null&&e.coordinate?e.coordinate:r),i8=pe([rf],e=>e.active),l8=pe([hD,ji,Oi,j4,mD,Jc,Lv],aD),o8=pe([l8],e=>{if(e!=null){var r=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(r))}});function iS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function lS(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?iS(Object(n),!0).forEach(function(a){c8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function c8(e,r,n){return(r=d8(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function d8(e){var r=u8(e,"string");return typeof r=="symbol"?r:r+""}function u8(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var m8=()=>tt(Yr),f8=()=>{var e=m8(),r=tt(zs),n=tt(dD);return kc(lS(lS({},e),{},{scale:n}),r)},h8=()=>tt(iv),zv=(e,r)=>r,gD=(e,r,n)=>n,Bv=(e,r,n,a)=>a,g8=pe(zs,e=>km(e,r=>r.coordinate)),Fv=pe([xo,zv,gD,Bv],tD),pD=pe([Fv,vo],Pv),p8=(e,r,n)=>{if(r!=null){var a=xo(e);return r==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},xD=pe([xo,zv,gD,Bv],nD),cm=pe([Ps,_s,Lt,Hr,zs,Bv,xD,Jc],rD),x8=pe([Fv,cm],(e,r)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:r}),vD=pe(zs,pD,Q4),v8=pe([xD,pD,Oi,j4,vD,Jc,zv],aD),y8=pe([Fv],e=>({isActive:e.active,activeIndex:e.index})),b8=(e,r,n,a,l,o,d,m)=>{if(!(!e||!r||!a||!l||!o)){var f=yP(e.chartX,e.chartY,r,n,m);if(f){var h=jP(f,r),g=iP(h,d,o,a,l),p=bP(r,o,g,f);return{activeIndex:String(g),activeCoordinate:p}}}};function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zx.apply(null,arguments)}function oS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Su(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?oS(Object(n),!0).forEach(function(a){j8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function j8(e,r,n){return(r=N8(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function N8(e){var r=w8(e,"string");return typeof r=="symbol"?r:r+""}function w8(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function S8(e){var{coordinate:r,payload:n,index:a,offset:l,tooltipAxisBandSize:o,layout:d,cursor:m,tooltipEventType:f,chartName:h}=e,g=r,p=n,v=a;if(!m||!g||h!=="ScatterChart"&&f!=="axis")return null;var b,w;if(h==="ScatterChart")b=g,w=L_;else if(h==="BarChart")b=$_(d,g,l,o),w=f3;else if(d==="radial"){var{cx:N,cy:S,radius:C,startAngle:O,endAngle:k}=h3(g);b={cx:N,cy:S,startAngle:O,endAngle:k,innerRadius:C,outerRadius:C},w=p3}else b={points:jR(d,g,l)},w=M0;var E=typeof m=="object"&&"className"in m?m.className:void 0,M=Su(Su(Su(Su({stroke:"#ccc",pointerEvents:"none"},l),b),rl(m)),{},{payload:p,payloadIndex:v,className:Vt("recharts-tooltip-cursor",E)});return y.isValidElement(m)?y.cloneElement(m,M):y.createElement(w,M)}function k8(e){var r=f8(),n=a3(),a=Rm(),l=h8();return y.createElement(S8,zx({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:a,tooltipAxisBandSize:r,chartName:l}))}var yD=y.createContext(null),C8=()=>y.useContext(yD),Mp={exports:{}},cS;function D8(){return cS||(cS=1,(function(e){var r=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function l(f,h,g){this.fn=f,this.context=h,this.once=g||!1}function o(f,h,g,p,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new l(g,p||f,v),w=n?n+h:h;return f._events[w]?f._events[w].fn?f._events[w]=[f._events[w],b]:f._events[w].push(b):(f._events[w]=b,f._eventsCount++),f}function d(f,h){--f._eventsCount===0?f._events=new a:delete f._events[h]}function m(){this._events=new a,this._eventsCount=0}m.prototype.eventNames=function(){var h=[],g,p;if(this._eventsCount===0)return h;for(p in g=this._events)r.call(g,p)&&h.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},m.prototype.listeners=function(h){var g=n?n+h:h,p=this._events[g];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,b=p.length,w=new Array(b);v<b;v++)w[v]=p[v].fn;return w},m.prototype.listenerCount=function(h){var g=n?n+h:h,p=this._events[g];return p?p.fn?1:p.length:0},m.prototype.emit=function(h,g,p,v,b,w){var N=n?n+h:h;if(!this._events[N])return!1;var S=this._events[N],C=arguments.length,O,k;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,g),!0;case 3:return S.fn.call(S.context,g,p),!0;case 4:return S.fn.call(S.context,g,p,v),!0;case 5:return S.fn.call(S.context,g,p,v,b),!0;case 6:return S.fn.call(S.context,g,p,v,b,w),!0}for(k=1,O=new Array(C-1);k<C;k++)O[k-1]=arguments[k];S.fn.apply(S.context,O)}else{var E=S.length,M;for(k=0;k<E;k++)switch(S[k].once&&this.removeListener(h,S[k].fn,void 0,!0),C){case 1:S[k].fn.call(S[k].context);break;case 2:S[k].fn.call(S[k].context,g);break;case 3:S[k].fn.call(S[k].context,g,p);break;case 4:S[k].fn.call(S[k].context,g,p,v);break;default:if(!O)for(M=1,O=new Array(C-1);M<C;M++)O[M-1]=arguments[M];S[k].fn.apply(S[k].context,O)}}return!0},m.prototype.on=function(h,g,p){return o(this,h,g,p,!1)},m.prototype.once=function(h,g,p){return o(this,h,g,p,!0)},m.prototype.removeListener=function(h,g,p,v){var b=n?n+h:h;if(!this._events[b])return this;if(!g)return d(this,b),this;var w=this._events[b];if(w.fn)w.fn===g&&(!v||w.once)&&(!p||w.context===p)&&d(this,b);else{for(var N=0,S=[],C=w.length;N<C;N++)(w[N].fn!==g||v&&!w[N].once||p&&w[N].context!==p)&&S.push(w[N]);S.length?this._events[b]=S.length===1?S[0]:S:d(this,b)}return this},m.prototype.removeAllListeners=function(h){var g;return h?(g=n?n+h:h,this._events[g]&&d(this,g)):(this._events=new a,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=n,m.EventEmitter=m,e.exports=m})(Mp)),Mp.exports}var O8=D8();const A8=Za(O8);var Ec=new A8,Bx="recharts.syncEvent.tooltip",dS="recharts.syncEvent.brush";function Uv(e,r){if(r){var n=Number.parseInt(r,10);if(!Na(n))return e==null?void 0:e[n]}}var T8={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},bD=aa({name:"options",initialState:T8,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),I8=bD.reducer,{createEventEmitter:E8}=bD.actions;function M8(e){return e.tooltip.syncInteraction}var P8={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},jD=aa({name:"chartData",initialState:P8,reducers:{setChartData(e,r){if(e.chartData=r.payload,r.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}r.payload.length>0&&e.dataEndIndex!==r.payload.length-1&&(e.dataEndIndex=r.payload.length-1)},setComputedData(e,r){e.computedData=r.payload},setDataStartEndIndexes(e,r){var{startIndex:n,endIndex:a}=r.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:uS,setDataStartEndIndexes:_8,setComputedData:DK}=jD.actions,R8=jD.reducer,L8=["x","y"];function mS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Wl(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?mS(Object(n),!0).forEach(function(a){$8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $8(e,r,n){return(r=z8(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function z8(e){var r=B8(e,"string");return typeof r=="symbol"?r:r+""}function B8(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function F8(e,r){if(e==null)return{};var n,a,l=U8(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function U8(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var ND=()=>{};function V8(){var e=tt(lv),r=tt(ov),n=Nr(),a=tt(g4),l=tt(zs),o=Rm(),d=_m(),m=tt(f=>f.rootProps.className);y.useEffect(()=>{if(e==null)return ND;var f=(h,g,p)=>{if(r!==p&&e===h){if(a==="index"){var v;if(d&&g!==null&&g!==void 0&&(v=g.payload)!==null&&v!==void 0&&v.coordinate&&g.payload.sourceViewBox){var b=g.payload.coordinate,{x:w,y:N}=b,S=F8(b,L8),{x:C,y:O,width:k,height:E}=g.payload.sourceViewBox,M=Wl(Wl({},S),{},{x:d.x+(k?(w-C)/k:0)*d.width,y:d.y+(E?(N-O)/E:0)*d.height});n(Wl(Wl({},g),{},{payload:Wl(Wl({},g.payload),{},{coordinate:M})}))}else n(g);return}if(l!=null){var D;if(typeof a=="function"){var R={activeTooltipIndex:g.payload.index==null?void 0:Number(g.payload.index),isTooltipActive:g.payload.active,activeIndex:g.payload.index==null?void 0:Number(g.payload.index),activeLabel:g.payload.label,activeDataKey:g.payload.dataKey,activeCoordinate:g.payload.coordinate},P=a(l,R);D=l[P]}else a==="value"&&(D=l.find(L=>String(L.value)===g.payload.label));var{coordinate:z}=g.payload;if(D==null||g.payload.active===!1||z==null||d==null){n(Lx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:U,y:q}=z,Y=Math.min(U,d.x+d.width),ee=Math.min(q,d.y+d.height),_={x:o==="horizontal"?D.coordinate:Y,y:o==="horizontal"?ee:D.coordinate},G=Lx({active:g.payload.active,coordinate:_,dataKey:g.payload.dataKey,index:String(D.index),label:g.payload.label,sourceViewBox:g.payload.sourceViewBox});n(G)}}};return Ec.on(Bx,f),()=>{Ec.off(Bx,f)}},[m,n,r,e,a,l,o,d])}function q8(){var e=tt(lv),r=tt(ov),n=Nr();y.useEffect(()=>{if(e==null)return ND;var a=(l,o,d)=>{r!==d&&e===l&&n(_8(o))};return Ec.on(dS,a),()=>{Ec.off(dS,a)}},[n,r,e])}function W8(){var e=Nr();y.useEffect(()=>{e(E8())},[e]),V8(),q8()}function H8(e,r,n,a,l,o){var d=tt(b=>p8(b,e,r)),m=tt(ov),f=tt(lv),h=tt(g4),g=tt(M8),p=g==null?void 0:g.active,v=_m();y.useEffect(()=>{if(!p&&f!=null&&m!=null){var b=Lx({active:o,coordinate:n,dataKey:d,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:v});Ec.emit(Bx,f,b,m)}},[p,n,d,l,a,m,f,h,o,v])}function fS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function hS(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?fS(Object(n),!0).forEach(function(a){K8(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function K8(e,r,n){return(r=G8(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function G8(e){var r=Y8(e,"string");return typeof r=="symbol"?r:r+""}function Y8(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Q8(e){return e.dataKey}function X8(e,r){return y.isValidElement(e)?y.cloneElement(e,r):typeof e=="function"?y.createElement(e,r):y.createElement(g_,r)}var gS=[],Z8={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ki.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function js(e){var r=un(e,Z8),{active:n,allowEscapeViewBox:a,animationDuration:l,animationEasing:o,content:d,filterNull:m,isAnimationActive:f,offset:h,payloadUniqBy:g,position:p,reverseDirection:v,useTranslate3d:b,wrapperStyle:w,cursor:N,shared:S,trigger:C,defaultIndex:O,portal:k,axisId:E}=r,M=Nr(),D=typeof O=="number"?String(O):O;y.useEffect(()=>{M(bB({shared:S,trigger:C,axisId:E,active:n,defaultIndex:D}))},[M,S,C,E,n,D]);var R=_m(),P=o3(),z=gB(S),{activeIndex:U,isActive:q}=tt(Ne=>y8(Ne,z,C,D)),Y=tt(Ne=>v8(Ne,z,C,D)),ee=tt(Ne=>vD(Ne,z,C,D)),_=tt(Ne=>x8(Ne,z,C,D)),G=Y,L=C8(),V=n??q,[Z,K]=jC([G,V]),de=z==="axis"?ee:void 0;H8(z,C,_,de,U,V);var B=k??L;if(B==null)return null;var le=G??gS;V||(le=gS),m&&le.length&&(le=pC(G.filter(Ne=>Ne.value!=null&&(Ne.hide!==!0||r.includeHidden)),g,Q8));var ye=le.length>0,ge=y.createElement(N_,{allowEscapeViewBox:a,animationDuration:l,animationEasing:o,isAnimationActive:f,active:V,coordinate:_,hasPayload:ye,offset:h,position:p,reverseDirection:v,useTranslate3d:b,viewBox:R,wrapperStyle:w,lastBoundingBox:Z,innerRef:K,hasPortalFromProps:!!k},X8(d,hS(hS({},r),{},{payload:le,label:de,active:V,coordinate:_,accessibilityLayer:P})));return y.createElement(y.Fragment,null,_k.createPortal(ge,B),V&&y.createElement(k8,{cursor:N,tooltipEventType:z,coordinate:_,payload:G,index:U}))}var ol=e=>null;ol.displayName="Cell";function J8(e,r,n){return(r=e7(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function e7(e){var r=t7(e,"string");return typeof r=="symbol"?r:r+""}function t7(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class r7{constructor(r){J8(this,"cache",new Map),this.maxSize=r}get(r){var n=this.cache.get(r);return n!==void 0&&(this.cache.delete(r),this.cache.set(r,n)),n}set(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;this.cache.delete(a)}this.cache.set(r,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function pS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function n7(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?pS(Object(n),!0).forEach(function(a){a7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function a7(e,r,n){return(r=s7(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function s7(e){var r=i7(e,"string");return typeof r=="symbol"?r:r+""}function i7(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var l7={cacheSize:2e3,enableCache:!0},wD=n7({},l7),xS=new r7(wD.cacheSize),o7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vS="recharts_measurement_span";function c7(e,r){var n=r.fontSize||"",a=r.fontFamily||"",l=r.fontWeight||"",o=r.fontStyle||"",d=r.letterSpacing||"",m=r.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(d,"|").concat(m)}var yS=(e,r)=>{try{var n=document.getElementById(vS);n||(n=document.createElement("span"),n.setAttribute("id",vS),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,o7,r),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},yc=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||ki.isSsr)return{width:0,height:0};if(!wD.enableCache)return yS(r,n);var a=c7(r,n),l=xS.get(a);if(l)return l;var o=yS(r,n);return xS.set(a,o),o},bS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,u7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,SD={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},m7=Object.keys(SD),Kl="NaN";function f7(e,r){return e*SD[r]}class $n{static parse(r){var n,[,a,l]=(n=u7.exec(r))!==null&&n!==void 0?n:[];return new $n(parseFloat(a),l??"")}constructor(r,n){this.num=r,this.unit=n,this.num=r,this.unit=n,Na(r)&&(this.unit=""),n!==""&&!d7.test(n)&&(this.num=NaN,this.unit=""),m7.includes(n)&&(this.num=f7(r,n),this.unit="px")}add(r){return this.unit!==r.unit?new $n(NaN,""):new $n(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new $n(NaN,""):new $n(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new $n(NaN,""):new $n(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new $n(NaN,""):new $n(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Na(this.num)}}function kD(e){if(e.includes(Kl))return Kl;for(var r=e;r.includes("*")||r.includes("/");){var n,[,a,l,o]=(n=bS.exec(r))!==null&&n!==void 0?n:[],d=$n.parse(a??""),m=$n.parse(o??""),f=l==="*"?d.multiply(m):d.divide(m);if(f.isNaN())return Kl;r=r.replace(bS,f.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var h,[,g,p,v]=(h=jS.exec(r))!==null&&h!==void 0?h:[],b=$n.parse(g??""),w=$n.parse(v??""),N=p==="+"?b.add(w):b.subtract(w);if(N.isNaN())return Kl;r=r.replace(jS,N.toString())}return r}var NS=/\(([^()]*)\)/;function h7(e){for(var r=e,n;(n=NS.exec(r))!=null;){var[,a]=n;r=r.replace(NS,kD(a))}return r}function g7(e){var r=e.replace(/\s+/g,"");return r=h7(r),r=kD(r),r}function p7(e){try{return g7(e)}catch{return Kl}}function Pp(e){var r=p7(e.slice(5,-1));return r===Kl?"":r}var x7=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],v7=["dx","dy","angle","className","breakAll"];function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fx.apply(null,arguments)}function wS(e,r){if(e==null)return{};var n,a,l=y7(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function y7(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var CD=/[ \f\n\r\t\v\u2028\u2029]+/,DD=e=>{var{children:r,breakAll:n,style:a}=e;try{var l=[];jr(r)||(n?l=r.toString().split(""):l=r.toString().split(CD));var o=l.map(m=>({word:m,width:yc(m,a).width})),d=n?0:yc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:d}}catch{return null}},b7=(e,r,n,a,l)=>{var{maxLines:o,children:d,style:m,breakAll:f}=e,h=ct(o),g=d,p=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce((Y,ee)=>{var{word:_,width:G}=ee,L=Y[Y.length-1];if(L&&(a==null||l||L.width+G+n<Number(a)))L.words.push(_),L.width+=G+n;else{var V={words:[_],width:G};Y.push(V)}return Y},[])},v=p(r),b=U=>U.reduce((q,Y)=>q.width>Y.width?q:Y);if(!h||l)return v;var w=v.length>o||b(v).width>Number(a);if(!w)return v;for(var N="",S=U=>{var q=g.slice(0,U),Y=DD({breakAll:f,style:m,children:q+N}).wordsWithComputedWidth,ee=p(Y),_=ee.length>o||b(ee).width>Number(a);return[_,ee]},C=0,O=g.length-1,k=0,E;C<=O&&k<=g.length-1;){var M=Math.floor((C+O)/2),D=M-1,[R,P]=S(D),[z]=S(M);if(!R&&!z&&(C=M+1),R&&z&&(O=M-1),!R&&z){E=P;break}k++}return E||v},SS=e=>{var r=jr(e)?[]:e.toString().split(CD);return[{words:r}]},j7=e=>{var{width:r,scaleToFit:n,children:a,style:l,breakAll:o,maxLines:d}=e;if((r||n)&&!ki.isSsr){var m,f,h=DD({breakAll:o,children:a,style:l});if(h){var{wordsWithComputedWidth:g,spaceWidth:p}=h;m=g,f=p}else return SS(a);return b7({breakAll:o,children:a,maxLines:d,style:l},m,f,r,n)}return SS(a)},kS="#808080",nf=y.forwardRef((e,r)=>{var{x:n=0,y:a=0,lineHeight:l="1em",capHeight:o="0.71em",scaleToFit:d=!1,textAnchor:m="start",verticalAnchor:f="end",fill:h=kS}=e,g=wS(e,x7),p=y.useMemo(()=>j7({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),{dx:v,dy:b,angle:w,className:N,breakAll:S}=g,C=wS(g,v7);if(!Qa(n)||!Qa(a)||p.length===0)return null;var O=n+(ct(v)?v:0),k=a+(ct(b)?b:0),E;switch(f){case"start":E=Pp("calc(".concat(o,")"));break;case"middle":E=Pp("calc(".concat((p.length-1)/2," * -").concat(l," + (").concat(o," / 2))"));break;default:E=Pp("calc(".concat(p.length-1," * -").concat(l,")"));break}var M=[];if(d){var D=p[0].width,{width:R}=g;M.push("scale(".concat(ct(R)?R/D:1,")"))}return w&&M.push("rotate(".concat(w,", ").concat(O,", ").concat(k,")")),M.length&&(C.transform=M.join(" ")),y.createElement("text",Fx({},An(C),{ref:r,x:O,y:k,className:Vt("recharts-text",N),textAnchor:m,fill:h.includes("url")?kS:h}),p.map((P,z)=>{var U=P.words.join(S?"":" ");return y.createElement("tspan",{x:O,dy:z===0?E:l,key:"".concat(U,"-").concat(z)},U)}))});nf.displayName="Text";var N7=["labelRef"];function w7(e,r){if(e==null)return{};var n,a,l=S7(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function S7(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function CS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Mr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?CS(Object(n),!0).forEach(function(a){k7(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function k7(e,r,n){return(r=C7(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function C7(e){var r=D7(e,"string");return typeof r=="symbol"?r:r+""}function D7(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ns(){return Ns=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ns.apply(null,arguments)}var OD=y.createContext(null),O7=e=>{var{x:r,y:n,width:a,height:l,children:o}=e,d=y.useMemo(()=>({x:r,y:n,width:a,height:l}),[r,n,a,l]);return y.createElement(OD.Provider,{value:d},o)},AD=()=>{var e=y.useContext(OD),r=_m();return e||r},A7=y.createContext(null),T7=()=>{var e=y.useContext(A7),r=tt(b4);return e||r},I7=e=>{var{value:r,formatter:n}=e,a=jr(e.children)?r:e.children;return typeof n=="function"?n(a):a},Vv=e=>e!=null&&typeof e=="function",E7=(e,r)=>{var n=Jr(r-e),a=Math.min(Math.abs(r-e),360);return n*a},M7=(e,r,n,a,l)=>{var{offset:o,className:d}=e,{cx:m,cy:f,innerRadius:h,outerRadius:g,startAngle:p,endAngle:v,clockWise:b}=l,w=(h+g)/2,N=E7(p,v),S=N>=0?1:-1,C,O;switch(r){case"insideStart":C=p+S*o,O=b;break;case"insideEnd":C=v-S*o,O=!b;break;case"end":C=v+S*o,O=b;break;default:throw new Error("Unsupported position ".concat(r))}O=N<=0?O:!O;var k=Fr(m,f,w,C),E=Fr(m,f,w,C+(O?1:-1)*359),M="M".concat(k.x,",").concat(k.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(O?0:1,`,
    `).concat(E.x,",").concat(E.y),D=jr(e.id)?jc("recharts-radial-line-"):e.id;return y.createElement("text",Ns({},a,{dominantBaseline:"central",className:Vt("recharts-radial-bar-label",d)}),y.createElement("defs",null,y.createElement("path",{id:D,d:M})),y.createElement("textPath",{xlinkHref:"#".concat(D)},n))},P7=(e,r,n)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:d,startAngle:m,endAngle:f}=e,h=(m+f)/2;if(n==="outside"){var{x:g,y:p}=Fr(a,l,d+r,h);return{x:g,y:p,textAnchor:g>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(o+d)/2,{x:b,y:w}=Fr(a,l,v,h);return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},TD=e=>"cx"in e&&ct(e.cx),_7=(e,r)=>{var{parentViewBox:n,offset:a,position:l}=e,o;n!=null&&!TD(n)&&(o=n);var{x:d,y:m,width:f,height:h}=r,g=h>=0?1:-1,p=g*a,v=g>0?"end":"start",b=g>0?"start":"end",w=f>=0?1:-1,N=w*a,S=w>0?"end":"start",C=w>0?"start":"end";if(l==="top"){var O={x:d+f/2,y:m-g*a,textAnchor:"middle",verticalAnchor:v};return Mr(Mr({},O),o?{height:Math.max(m-o.y,0),width:f}:{})}if(l==="bottom"){var k={x:d+f/2,y:m+h+p,textAnchor:"middle",verticalAnchor:b};return Mr(Mr({},k),o?{height:Math.max(o.y+o.height-(m+h),0),width:f}:{})}if(l==="left"){var E={x:d-N,y:m+h/2,textAnchor:S,verticalAnchor:"middle"};return Mr(Mr({},E),o?{width:Math.max(E.x-o.x,0),height:h}:{})}if(l==="right"){var M={x:d+f+N,y:m+h/2,textAnchor:C,verticalAnchor:"middle"};return Mr(Mr({},M),o?{width:Math.max(o.x+o.width-M.x,0),height:h}:{})}var D=o?{width:f,height:h}:{};return l==="insideLeft"?Mr({x:d+N,y:m+h/2,textAnchor:C,verticalAnchor:"middle"},D):l==="insideRight"?Mr({x:d+f-N,y:m+h/2,textAnchor:S,verticalAnchor:"middle"},D):l==="insideTop"?Mr({x:d+f/2,y:m+p,textAnchor:"middle",verticalAnchor:b},D):l==="insideBottom"?Mr({x:d+f/2,y:m+h-p,textAnchor:"middle",verticalAnchor:v},D):l==="insideTopLeft"?Mr({x:d+N,y:m+p,textAnchor:C,verticalAnchor:b},D):l==="insideTopRight"?Mr({x:d+f-N,y:m+p,textAnchor:S,verticalAnchor:b},D):l==="insideBottomLeft"?Mr({x:d+N,y:m+h-p,textAnchor:C,verticalAnchor:v},D):l==="insideBottomRight"?Mr({x:d+f-N,y:m+h-p,textAnchor:S,verticalAnchor:v},D):l&&typeof l=="object"&&(ct(l.x)||As(l.x))&&(ct(l.y)||As(l.y))?Mr({x:d+yn(l.x,f),y:m+yn(l.y,h),textAnchor:"end",verticalAnchor:"end"},D):Mr({x:d+f/2,y:m+h/2,textAnchor:"middle",verticalAnchor:"middle"},D)},R7={offset:5};function fi(e){var r=un(e,R7),{viewBox:n,position:a,value:l,children:o,content:d,className:m="",textBreakAll:f,labelRef:h}=r,g=T7(),p=AD(),v=a==="center"?p:g??p,b=n||v;if(!b||jr(l)&&jr(o)&&!y.isValidElement(d)&&typeof d!="function")return null;var w=Mr(Mr({},r),{},{viewBox:b});if(y.isValidElement(d)){var{labelRef:N}=w,S=w7(w,N7);return y.cloneElement(d,S)}var C;if(typeof d=="function"){if(C=y.createElement(d,w),y.isValidElement(C))return C}else C=I7(r);var O=TD(b),k=An(r);if(O&&(a==="insideStart"||a==="insideEnd"||a==="end"))return M7(r,a,C,k,b);var E=O?P7(b,r.offset,r.position):_7(r,b);return y.createElement(nf,Ns({ref:h,className:Vt("recharts-label",m)},k,E,{breakAll:f}),C)}fi.displayName="Label";var L7=(e,r,n)=>{if(!e)return null;var a={viewBox:r,labelRef:n};return e===!0?y.createElement(fi,Ns({key:"label-implicit"},a)):Qa(e)?y.createElement(fi,Ns({key:"label-implicit",value:e},a)):y.isValidElement(e)?e.type===fi?y.cloneElement(e,Mr({key:"label-implicit"},a)):y.createElement(fi,Ns({key:"label-implicit",content:e},a)):Vv(e)?y.createElement(fi,Ns({key:"label-implicit",content:e},a)):e&&typeof e=="object"?y.createElement(fi,Ns({},e,{key:"label-implicit"},a)):null};function $7(e){var{label:r,labelRef:n}=e,a=AD();return L7(r,a,n)||null}var _p={},Rp={},DS;function z7(){return DS||(DS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return n[n.length-1]}e.last=r})(Rp)),Rp}var Lp={},OS;function B7(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=r})(Lp)),Lp}var AS;function F7(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const r=z7(),n=B7(),a=j0();function l(o){if(a.isArrayLike(o))return r.last(n.toArray(o))}e.last=l})(_p)),_p}var $p,TS;function U7(){return TS||(TS=1,$p=F7().last),$p}var V7=U7();const q7=Za(V7);var W7=["valueAccessor"],H7=["dataKey","clockWise","id","textBreakAll"];function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dm.apply(null,arguments)}function IS(e,r){if(e==null)return{};var n,a,l=K7(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function K7(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var G7=e=>Array.isArray(e.value)?q7(e.value):e.value,ID=y.createContext(void 0),ED=ID.Provider,MD=y.createContext(void 0),Y7=MD.Provider;function Q7(){return y.useContext(ID)}function X7(){return y.useContext(MD)}function Eu(e){var{valueAccessor:r=G7}=e,n=IS(e,W7),{dataKey:a,clockWise:l,id:o,textBreakAll:d}=n,m=IS(n,H7),f=Q7(),h=X7(),g=f||h;return!g||!g.length?null:y.createElement(dn,{className:"recharts-label-list"},g.map((p,v)=>{var b,w=jr(a)?r(p,v):dr(p&&p.payload,a),N=jr(o)?{}:{id:"".concat(o,"-").concat(v)};return y.createElement(fi,dm({key:"label-".concat(v)},An(p),m,N,{fill:(b=n.fill)!==null&&b!==void 0?b:p.fill,parentViewBox:p.parentViewBox,value:w,textBreakAll:d,viewBox:p.viewBox,index:v}))}))}Eu.displayName="LabelList";function qv(e){var{label:r}=e;return r?r===!0?y.createElement(Eu,{key:"labelList-implicit"}):y.isValidElement(r)||Vv(r)?y.createElement(Eu,{key:"labelList-implicit",content:r}):typeof r=="object"?y.createElement(Eu,dm({key:"labelList-implicit"},r,{type:String(r.type)})):null:null}function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ux.apply(null,arguments)}var PD=e=>{var{cx:r,cy:n,r:a,className:l}=e,o=Vt("recharts-dot",l);return r===+r&&n===+n&&a===+a?y.createElement("circle",Ux({},ra(e),v0(e),{className:o,cx:r,cy:n,r:a})):null},_D=e=>e.graphicalItems.polarItems,Z7=pe([wr,Yc],hv),af=pe([_D,kr,Z7],gv),J7=pe([af],pv),sf=pe([J7,nv],xv),e9=pe([sf,kr,af],yv);pe([sf,kr,af],(e,r,n)=>n.length>0?e.flatMap(a=>n.flatMap(l=>{var o,d=dr(a,(o=r.dataKey)!==null&&o!==void 0?o:l.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):(r==null?void 0:r.dataKey)!=null?e.map(a=>({value:dr(a,r.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})));var ES=()=>{},t9=pe([sf,kr,af,Jm,wr],wv),r9=pe([kr,jv,Nv,ES,t9,ES,Lt,wr],Sv),RD=pe([kr,Lt,sf,e9,Gc,wr,r9],kv),n9=pe([RD,kr,go],Ov);pe([kr,RD,n9,wr],Tv);var a9={radiusAxis:{},angleAxis:{}},LD=aa({name:"polarAxis",initialState:a9,reducers:{addRadiusAxis(e,r){e.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(e,r){delete e.radiusAxis[r.payload.id]},addAngleAxis(e,r){e.angleAxis[r.payload.id]=r.payload},removeAngleAxis(e,r){delete e.angleAxis[r.payload.id]}}}),{addRadiusAxis:OK,removeRadiusAxis:AK,addAngleAxis:TK,removeAngleAxis:IK}=LD.actions,s9=LD.reducer;function MS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function PS(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?MS(Object(n),!0).forEach(function(a){i9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function i9(e,r,n){return(r=l9(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l9(e){var r=o9(e,"string");return typeof r=="symbol"?r:r+""}function o9(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var c9=(e,r)=>r,Wv=pe([_D,c9],(e,r)=>e.filter(n=>n.type==="pie").find(n=>n.id===r)),d9=[],Hv=(e,r,n)=>(n==null?void 0:n.length)===0?d9:n,$D=pe([nv,Wv,Hv],(e,r,n)=>{var{chartData:a}=e;if(r!=null){var l;if((r==null?void 0:r.data)!=null&&r.data.length>0?l=r.data:l=a,(!l||!l.length)&&n!=null&&(l=n.map(o=>PS(PS({},r.presentationProps),o.props))),l!=null)return l}}),u9=pe([$D,Wv,Hv],(e,r,n)=>{if(!(e==null||r==null))return e.map((a,l)=>{var o,d=dr(a,r.nameKey,r.name),m;return n!=null&&(o=n[l])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?m=n[l].props.fill:typeof a=="object"&&a!=null&&"fill"in a?m=a.fill:m=r.fill,{value:lo(d,r.dataKey),color:m,payload:a,type:r.legendType}})}),m9=pe([$D,Wv,Hv,Hr],(e,r,n,a)=>{if(!(r==null||e==null))return mF({offset:a,pieSettings:r,displayedData:e,cells:n})}),zp={exports:{}},rr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _S;function f9(){if(_S)return rr;_S=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function w(N){if(typeof N=="object"&&N!==null){var S=N.$$typeof;switch(S){case e:switch(N=N.type,N){case n:case l:case a:case f:case h:case v:return N;default:switch(N=N&&N.$$typeof,N){case d:case m:case p:case g:return N;case o:return N;default:return S}}case r:return S}}}return rr.ContextConsumer=o,rr.ContextProvider=d,rr.Element=e,rr.ForwardRef=m,rr.Fragment=n,rr.Lazy=p,rr.Memo=g,rr.Portal=r,rr.Profiler=l,rr.StrictMode=a,rr.Suspense=f,rr.SuspenseList=h,rr.isContextConsumer=function(N){return w(N)===o},rr.isContextProvider=function(N){return w(N)===d},rr.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},rr.isForwardRef=function(N){return w(N)===m},rr.isFragment=function(N){return w(N)===n},rr.isLazy=function(N){return w(N)===p},rr.isMemo=function(N){return w(N)===g},rr.isPortal=function(N){return w(N)===r},rr.isProfiler=function(N){return w(N)===l},rr.isStrictMode=function(N){return w(N)===a},rr.isSuspense=function(N){return w(N)===f},rr.isSuspenseList=function(N){return w(N)===h},rr.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===l||N===a||N===f||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===p||N.$$typeof===g||N.$$typeof===d||N.$$typeof===o||N.$$typeof===m||N.$$typeof===b||N.getModuleId!==void 0)},rr.typeOf=w,rr}var RS;function h9(){return RS||(RS=1,zp.exports=f9()),zp.exports}var g9=h9(),LS=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",$S=null,Bp=null,zD=e=>{if(e===$S&&Array.isArray(Bp))return Bp;var r=[];return y.Children.forEach(e,n=>{jr(n)||(g9.isFragment(n)?r=r.concat(zD(n.props.children)):r.push(n))}),Bp=r,$S=e,r};function Kv(e,r){var n=[],a=[];return Array.isArray(r)?a=r.map(l=>LS(l)):a=[LS(r)],zD(e).forEach(l=>{var o=nl(l,"type.displayName")||nl(l,"type.name");a.indexOf(o)!==-1&&n.push(l)}),n}var BD=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Fp={},zS;function p9(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(n){var l;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const o=n[Symbol.toStringTag];return o==null||!((l=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&l.writable)?!1:n.toString()===`[object ${o}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=r})(Fp)),Fp}var Up,BS;function x9(){return BS||(BS=1,Up=p9().isPlainObject),Up}var v9=x9();const y9=Za(v9);function FS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function US(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?FS(Object(n),!0).forEach(function(a){b9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function b9(e,r,n){return(r=j9(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function j9(e){var r=N9(e,"string");return typeof r=="symbol"?r:r+""}function N9(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},um.apply(null,arguments)}var VS=(e,r,n,a,l)=>{var o=n-a,d;return d="M ".concat(e,",").concat(r),d+="L ".concat(e+n,",").concat(r),d+="L ".concat(e+n-o/2,",").concat(r+l),d+="L ".concat(e+n-o/2-a,",").concat(r+l),d+="L ".concat(e,",").concat(r," Z"),d},w9={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},S9=e=>{var r=un(e,w9),{x:n,y:a,upperWidth:l,lowerWidth:o,height:d,className:m}=r,{animationEasing:f,animationDuration:h,animationBegin:g,isUpdateAnimationActive:p}=r,v=y.useRef(null),[b,w]=y.useState(-1),N=y.useRef(l),S=y.useRef(o),C=y.useRef(d),O=y.useRef(n),k=y.useRef(a),E=Vc(e,"trapezoid-");if(y.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var _=v.current.getTotalLength();_&&w(_)}catch{}},[]),n!==+n||a!==+a||l!==+l||o!==+o||d!==+d||l===0&&o===0||d===0)return null;var M=Vt("recharts-trapezoid",m);if(!p)return y.createElement("g",null,y.createElement("path",um({},An(r),{className:M,d:VS(n,a,l,o,d)})));var D=N.current,R=S.current,P=C.current,z=O.current,U=k.current,q="0px ".concat(b===-1?1:b,"px"),Y="".concat(b,"px 0px"),ee=c3(["strokeDasharray"],h,f);return y.createElement(Uc,{animationId:E,key:E,canBegin:b>0,duration:h,easing:f,isActive:p,begin:g},_=>{var G=Or(D,l,_),L=Or(R,o,_),V=Or(P,d,_),Z=Or(z,n,_),K=Or(U,a,_);v.current&&(N.current=G,S.current=L,C.current=V,O.current=Z,k.current=K);var de=_>0?{transition:ee,strokeDasharray:Y}:{strokeDasharray:q};return y.createElement("path",um({},An(r),{className:M,d:VS(Z,K,G,L,V),ref:v,style:US(US({},de),r.style)}))})},k9=["option","shapeType","propTransformer","activeClassName","isActive"];function C9(e,r){if(e==null)return{};var n,a,l=D9(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function D9(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function qS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function mm(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?qS(Object(n),!0).forEach(function(a){O9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function O9(e,r,n){return(r=A9(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function A9(e){var r=T9(e,"string");return typeof r=="symbol"?r:r+""}function T9(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function I9(e,r){return mm(mm({},r),e)}function E9(e,r){return e==="symbols"}function WS(e){var{shapeType:r,elementProps:n}=e;switch(r){case"rectangle":return y.createElement(f3,n);case"trapezoid":return y.createElement(S9,n);case"sector":return y.createElement(p3,n);case"symbols":if(E9(r))return y.createElement(x0,n);break;default:return null}}function M9(e){return y.isValidElement(e)?e.props:e}function FD(e){var{option:r,shapeType:n,propTransformer:a=I9,activeClassName:l="recharts-active-shape",isActive:o}=e,d=C9(e,k9),m;if(y.isValidElement(r))m=y.cloneElement(r,mm(mm({},d),M9(r)));else if(typeof r=="function")m=r(d);else if(y9(r)&&typeof r!="boolean"){var f=a(r,d);m=y.createElement(WS,{shapeType:n,elementProps:f})}else{var h=d;m=y.createElement(WS,{shapeType:n,elementProps:h})}return o?y.createElement(dn,{className:l},m):m}var Gv=(e,r)=>{var n=Nr();return(a,l)=>o=>{e==null||e(a,l,o),n(Z4({activeIndex:String(l),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}},Yv=e=>{var r=Nr();return(n,a)=>l=>{e==null||e(n,a,l),r(jB())}},Qv=(e,r)=>{var n=Nr();return(a,l)=>o=>{e==null||e(a,l,o),n(NB({activeIndex:String(l),activeDataKey:r,activeCoordinate:a.tooltipPosition}))}};function Xv(e){var{fn:r,args:n}=e,a=Nr(),l=Tn();return y.useLayoutEffect(()=>{if(!l){var o=r(n);return a(vB(o)),()=>{a(yB(o))}}},[r,n,a,l]),null}var UD=()=>{};function VD(e){var{legendPayload:r}=e,n=Nr(),a=Tn();return y.useLayoutEffect(()=>a?UD:(n(i3(r)),()=>{n(l3(r))}),[n,a,r]),null}function P9(e){var{legendPayload:r}=e,n=Nr(),a=tt(Lt);return y.useLayoutEffect(()=>a!=="centric"&&a!=="radial"?UD:(n(i3(r)),()=>{n(l3(r))}),[n,a,r]),null}var Vp,_9=()=>{var[e]=y.useState(()=>jc("uid-"));return e},R9=(Vp=e6.useId)!==null&&Vp!==void 0?Vp:_9;function L9(e,r){var n=R9();return r||(e?"".concat(e,"-").concat(n):n)}var $9=y.createContext(void 0),Zv=e=>{var{id:r,type:n,children:a}=e,l=L9("recharts-".concat(n),r);return y.createElement($9.Provider,{value:l},a(l))},z9={cartesianItems:[],polarItems:[]},qD=aa({name:"graphicalItems",initialState:z9,reducers:{addCartesianGraphicalItem:{reducer(e,r){e.cartesianItems.push(r.payload)},prepare:Cn()},replaceCartesianGraphicalItem:{reducer(e,r){var{prev:n,next:a}=r.payload,l=Cs(e).cartesianItems.indexOf(n);l>-1&&(e.cartesianItems[l]=a)},prepare:Cn()},removeCartesianGraphicalItem:{reducer(e,r){var n=Cs(e).cartesianItems.indexOf(r.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:Cn()},addPolarGraphicalItem:{reducer(e,r){e.polarItems.push(r.payload)},prepare:Cn()},removePolarGraphicalItem:{reducer(e,r){var n=Cs(e).polarItems.indexOf(r.payload);n>-1&&e.polarItems.splice(n,1)},prepare:Cn()}}}),{addCartesianGraphicalItem:B9,replaceCartesianGraphicalItem:F9,removeCartesianGraphicalItem:U9,addPolarGraphicalItem:V9,removePolarGraphicalItem:q9}=qD.actions,W9=qD.reducer;function WD(e){var r=Nr(),n=y.useRef(null);return y.useLayoutEffect(()=>{n.current===null?r(B9(e)):n.current!==e&&r(F9({prev:n.current,next:e})),n.current=e},[r,e]),y.useLayoutEffect(()=>()=>{n.current&&(r(U9(n.current)),n.current=null)},[r]),null}function H9(e){var r=Nr();return y.useLayoutEffect(()=>(r(V9(e)),()=>{r(q9(e))}),[r,e]),null}var K9=["onMouseEnter","onClick","onMouseLeave"],G9=["id"],Y9=["id"];function Jv(e,r){if(e==null)return{};var n,a,l=Q9(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Q9(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function HS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function vr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?HS(Object(n),!0).forEach(function(a){X9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function X9(e,r,n){return(r=Z9(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Z9(e){var r=J9(e,"string");return typeof r=="symbol"?r:r+""}function J9(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Ni(){return Ni=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ni.apply(null,arguments)}function eF(e){var r=y.useMemo(()=>Kv(e.children,ol),[e.children]),n=tt(a=>u9(a,e.id,r));return n==null?null:y.createElement(P9,{legendPayload:n})}function tF(e){var{dataKey:r,nameKey:n,sectors:a,stroke:l,strokeWidth:o,fill:d,name:m,hide:f,tooltipType:h}=e;return{dataDefinedOnItem:a.map(g=>g.tooltipPayload),positions:a.map(g=>g.tooltipPosition),settings:{stroke:l,strokeWidth:o,fill:d,dataKey:r,nameKey:n,name:lo(m,r),hide:f,type:h,color:d,unit:""}}}var rF=(e,r)=>e>r?"start":e<r?"end":"middle",nF=(e,r,n)=>yn(typeof r=="function"?r(e):r,n,n*.8),aF=(e,r,n)=>{var{top:a,left:l,width:o,height:d}=r,m=GC(o,d),f=l+yn(e.cx,o,o/2),h=a+yn(e.cy,d,d/2),g=yn(e.innerRadius,m,0),p=nF(n,e.outerRadius,m),v=e.maxRadius||Math.sqrt(o*o+d*d)/2;return{cx:f,cy:h,innerRadius:g,outerRadius:p,maxRadius:v}},sF=(e,r)=>{var n=Jr(r-e),a=Math.min(Math.abs(r-e),360);return n*a};function iF(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var lF=(e,r)=>{if(y.isValidElement(e))return y.cloneElement(e,r);if(typeof e=="function")return e(r);var n=Vt("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return y.createElement(M0,Ni({},r,{type:"linear",className:n}))},oF=(e,r,n)=>{if(y.isValidElement(e))return y.cloneElement(e,r);var a=n;if(typeof e=="function"&&(a=e(r),y.isValidElement(a)))return a;var l=Vt("recharts-pie-label-text",iF(e));return y.createElement(nf,Ni({},r,{alignmentBaseline:"middle",className:l}),a)};function cF(e){var{sectors:r,props:n,showLabels:a}=e,{label:l,labelLine:o,dataKey:d}=n;if(!a||!l||!r)return null;var m=ra(n),f=rl(l),h=rl(o),g=typeof l=="object"&&"offsetRadius"in l&&typeof l.offsetRadius=="number"&&l.offsetRadius||20,p=r.map((v,b)=>{var w=(v.startAngle+v.endAngle)/2,N=Fr(v.cx,v.cy,v.outerRadius+g,w),S=vr(vr(vr(vr({},m),v),{},{stroke:"none"},f),{},{index:b,textAnchor:rF(N.x,v.cx)},N),C=vr(vr(vr(vr({},m),v),{},{fill:"none",stroke:v.fill},h),{},{index:b,points:[Fr(v.cx,v.cy,v.outerRadius,w),N],key:"line"});return y.createElement(dn,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(b)},o&&lF(o,C),oF(l,S,dr(v,d)))});return y.createElement(dn,{className:"recharts-pie-labels"},p)}function dF(e){var{sectors:r,props:n,showLabels:a}=e,{label:l}=n;return typeof l=="object"&&l!=null&&"position"in l?y.createElement(qv,{label:l}):y.createElement(cF,{sectors:r,props:n,showLabels:a})}function uF(e){var{sectors:r,activeShape:n,inactiveShape:a,allOtherPieProps:l}=e,o=tt(ji),{onMouseEnter:d,onClick:m,onMouseLeave:f}=l,h=Jv(l,K9),g=Gv(d,l.dataKey),p=Yv(f),v=Qv(m,l.dataKey);return r==null||r.length===0?null:y.createElement(y.Fragment,null,r.map((b,w)=>{if((b==null?void 0:b.startAngle)===0&&(b==null?void 0:b.endAngle)===0&&r.length!==1)return null;var N=n&&String(w)===o,S=o?a:null,C=N?n:S,O=vr(vr({},b),{},{stroke:b.stroke,tabIndex:-1,[JC]:w,[e3]:l.dataKey});return y.createElement(dn,Ni({key:"sector-".concat(b==null?void 0:b.startAngle,"-").concat(b==null?void 0:b.endAngle,"-").concat(b.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},$c(h,b,w),{onMouseEnter:g(b,w),onMouseLeave:p(b,w),onClick:v(b,w)}),y.createElement(FD,Ni({option:C,isActive:N,shapeType:"sector"},O)))}))}function mF(e){var r,{pieSettings:n,displayedData:a,cells:l,offset:o}=e,{cornerRadius:d,startAngle:m,endAngle:f,dataKey:h,nameKey:g,tooltipType:p}=n,v=Math.abs(n.minAngle),b=sF(m,f),w=Math.abs(b),N=a.length<=1?0:(r=n.paddingAngle)!==null&&r!==void 0?r:0,S=a.filter(D=>dr(D,h,0)!==0).length,C=(w>=360?S:S-1)*N,O=w-S*v-C,k=a.reduce((D,R)=>{var P=dr(R,h,0);return D+(ct(P)?P:0)},0),E;if(k>0){var M;E=a.map((D,R)=>{var P=dr(D,h,0),z=dr(D,g,R),U=aF(n,o,D),q=(ct(P)?P:0)/k,Y,ee=vr(vr({},D),l&&l[R]&&l[R].props);R?Y=M.endAngle+Jr(b)*N*(P!==0?1:0):Y=m;var _=Y+Jr(b)*((P!==0?v:0)+q*O),G=(Y+_)/2,L=(U.innerRadius+U.outerRadius)/2,V=[{name:z,value:P,payload:ee,dataKey:h,type:p}],Z=Fr(U.cx,U.cy,L,G);return M=vr(vr(vr(vr({},n.presentationProps),{},{percent:q,cornerRadius:d,name:z,tooltipPayload:V,midAngle:G,middleRadius:L,tooltipPosition:Z},ee),U),{},{value:P,startAngle:Y,endAngle:_,payload:ee,paddingAngle:Jr(b)*N}),M})}return E}function fF(e){var{showLabels:r,sectors:n,children:a}=e,l=y.useMemo(()=>!r||!n?[]:n.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[n,r]);return y.createElement(Y7,{value:r?l:void 0},a)}function hF(e){var{props:r,previousSectorsRef:n}=e,{sectors:a,isAnimationActive:l,animationBegin:o,animationDuration:d,animationEasing:m,activeShape:f,inactiveShape:h,onAnimationStart:g,onAnimationEnd:p}=r,v=Vc(r,"recharts-pie-"),b=n.current,[w,N]=y.useState(!1),S=y.useCallback(()=>{typeof p=="function"&&p(),N(!1)},[p]),C=y.useCallback(()=>{typeof g=="function"&&g(),N(!0)},[g]);return y.createElement(fF,{showLabels:!w,sectors:a},y.createElement(Uc,{animationId:v,begin:o,duration:d,isActive:l,easing:m,onAnimationStart:C,onAnimationEnd:S,key:v},O=>{var k=[],E=a&&a[0],M=E==null?void 0:E.startAngle;return a==null||a.forEach((D,R)=>{var P=b&&b[R],z=R>0?nl(D,"paddingAngle",0):0;if(P){var U=Or(P.endAngle-P.startAngle,D.endAngle-D.startAngle,O),q=vr(vr({},D),{},{startAngle:M+z,endAngle:M+U+z});k.push(q),M=q.endAngle}else{var{endAngle:Y,startAngle:ee}=D,_=Or(0,Y-ee,O),G=vr(vr({},D),{},{startAngle:M+z,endAngle:M+_+z});k.push(G),M=G.endAngle}}),n.current=k,y.createElement(dn,null,y.createElement(uF,{sectors:k,activeShape:f,inactiveShape:h,allOtherPieProps:r}))}),y.createElement(dF,{showLabels:!w,sectors:a,props:r}),r.children)}var gF={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!ki.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function pF(e){var{id:r}=e,n=Jv(e,G9),{hide:a,className:l,rootTabIndex:o}=e,d=y.useMemo(()=>Kv(e.children,ol),[e.children]),m=tt(g=>m9(g,r,d)),f=y.useRef(null),h=Vt("recharts-pie",l);return a||m==null?(f.current=null,y.createElement(dn,{tabIndex:o,className:h})):y.createElement(y.Fragment,null,y.createElement(Xv,{fn:tF,args:vr(vr({},e),{},{sectors:m})}),y.createElement(dn,{tabIndex:o,className:h},y.createElement(hF,{props:vr(vr({},n),{},{sectors:m}),previousSectorsRef:f})))}function Vx(e){var r=un(e,gF),{id:n}=r,a=Jv(r,Y9),l=ra(a);return y.createElement(Zv,{id:n,type:"pie"},o=>y.createElement(y.Fragment,null,y.createElement(H9,{type:"pie",id:o,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:l,maxRadius:r.maxRadius}),y.createElement(eF,Ni({},a,{id:o})),y.createElement(pF,Ni({},a,{id:o}))))}Vx.displayName="Pie";function KS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function GS(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?KS(Object(n),!0).forEach(function(a){xF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xF(e,r,n){return(r=vF(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function vF(e){var r=yF(e,"string");return typeof r=="symbol"?r:r+""}function yF(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var bF={xAxis:{},yAxis:{},zAxis:{}},HD=aa({name:"cartesianAxis",initialState:bF,reducers:{addXAxis:{reducer(e,r){e.xAxis[r.payload.id]=r.payload},prepare:Cn()},removeXAxis:{reducer(e,r){delete e.xAxis[r.payload.id]},prepare:Cn()},addYAxis:{reducer(e,r){e.yAxis[r.payload.id]=r.payload},prepare:Cn()},removeYAxis:{reducer(e,r){delete e.yAxis[r.payload.id]},prepare:Cn()},addZAxis:{reducer(e,r){e.zAxis[r.payload.id]=r.payload},prepare:Cn()},removeZAxis:{reducer(e,r){delete e.zAxis[r.payload.id]},prepare:Cn()},updateYAxisWidth(e,r){var{id:n,width:a}=r.payload,l=e.yAxis[n];if(l){var o=l.widthHistory||[];if(o.length===3&&o[0]===o[2]&&a===o[1]&&a!==l.width&&Math.abs(a-o[0])<=1)return;var d=[...o,a].slice(-3);e.yAxis[n]=GS(GS({},e.yAxis[n]),{},{width:a,widthHistory:d})}}}}),{addXAxis:jF,removeXAxis:NF,addYAxis:wF,removeYAxis:SF,addZAxis:EK,removeZAxis:MK,updateYAxisWidth:kF}=HD.actions,CF=HD.reducer,DF=pe([Hr],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),OF=pe([DF,Ps,_s],(e,r,n)=>{if(!(!e||r==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,r-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),ey=()=>tt(OF),AF=()=>tt(o8);function YS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function QS(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?YS(Object(n),!0).forEach(function(a){TF(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TF(e,r,n){return(r=IF(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function IF(e){var r=EF(e,"string");return typeof r=="symbol"?r:r+""}function EF(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var MF=e=>{var{point:r,childIndex:n,mainColor:a,activeDot:l,dataKey:o}=e;if(l===!1||r.x==null||r.y==null)return null;var d=QS(QS({index:n,dataKey:o,cx:r.x,cy:r.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},rl(l)),v0(l)),m;return y.isValidElement(l)?m=y.cloneElement(l,d):typeof l=="function"?m=l(d):m=y.createElement(PD,d),y.createElement(dn,{className:"recharts-active-dot"},m)};function PF(e){var{points:r,mainColor:n,activeDot:a,itemDataKey:l}=e,o=tt(ji),d=AF();if(r==null||d==null)return null;var m=r.find(f=>d.includes(f.payload));return jr(m)?null:MF({point:m,childIndex:Number(o),mainColor:n,dataKey:l,activeDot:a})}var _F="Invariant failed";function RF(e,r){throw new Error(_F)}var LF=["x","y"];function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qx.apply(null,arguments)}function XS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function gc(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?XS(Object(n),!0).forEach(function(a){$F(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $F(e,r,n){return(r=zF(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function zF(e){var r=BF(e,"string");return typeof r=="symbol"?r:r+""}function BF(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function FF(e,r){if(e==null)return{};var n,a,l=UF(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function UF(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function VF(e,r){var{x:n,y:a}=e,l=FF(e,LF),o="".concat(n),d=parseInt(o,10),m="".concat(a),f=parseInt(m,10),h="".concat(r.height||l.height),g=parseInt(h,10),p="".concat(r.width||l.width),v=parseInt(p,10);return gc(gc(gc(gc(gc({},r),l),d?{x:d}:{}),f?{y:f}:{}),{},{height:g,width:v,name:r.name,radius:r.radius})}function ty(e){return y.createElement(FD,qx({shapeType:"rectangle",propTransformer:VF,activeClassName:"recharts-active-bar"},e))}var qF=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(ct(r))return r;var o=ct(a)||jr(a);return o?r(a,l):(o||RF(),n)}},WF={},KD=aa({name:"errorBars",initialState:WF,reducers:{addErrorBar:(e,r)=>{var{itemId:n,errorBar:a}=r.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,r)=>{var{itemId:n,prev:a,next:l}=r.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,r)=>{var{itemId:n,errorBar:a}=r.payload;e[n]&&(e[n]=e[n].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:PK,replaceErrorBar:_K,removeErrorBar:RK}=KD.actions,HF=KD.reducer,KF=["children"];function GF(e,r){if(e==null)return{};var n,a,l=YF(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function YF(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var QF={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},XF=y.createContext(QF);function GD(e){var{children:r}=e,n=GF(e,KF);return y.createElement(XF.Provider,{value:n},r)}function ry(e,r){var n,a,l=tt(h=>Ls(h,e)),o=tt(h=>$s(h,r)),d=(n=l==null?void 0:l.allowDataOverflow)!==null&&n!==void 0?n:Qn.allowDataOverflow,m=(a=o==null?void 0:o.allowDataOverflow)!==null&&a!==void 0?a:Xn.allowDataOverflow,f=d||m;return{needClip:f,needClipX:d,needClipY:m}}function YD(e){var{xAxisId:r,yAxisId:n,clipPathId:a}=e,l=ey(),{needClipX:o,needClipY:d,needClip:m}=ry(r,n);if(!m)return null;var{x:f,y:h,width:g,height:p}=l;return y.createElement("clipPath",{id:"clipPath-".concat(a)},y.createElement("rect",{x:o?f:f-g/2,y:d?h:h-p/2,width:o?g:g*2,height:d?p:p*2}))}var ZF=["onMouseEnter","onMouseLeave","onClick"],JF=["value","background","tooltipPosition"],eU=["id"],tU=["onMouseEnter","onClick","onMouseLeave"];function wi(){return wi=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wi.apply(null,arguments)}function ZS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Dn(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ZS(Object(n),!0).forEach(function(a){rU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function rU(e,r,n){return(r=nU(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function nU(e){var r=aU(e,"string");return typeof r=="symbol"?r:r+""}function aU(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function fm(e,r){if(e==null)return{};var n,a,l=sU(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function sU(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var iU=e=>{var{dataKey:r,name:n,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:r,type:l,color:a,value:lo(n,r),payload:e}]};function lU(e){var{dataKey:r,stroke:n,strokeWidth:a,fill:l,name:o,hide:d,unit:m}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:l,dataKey:r,nameKey:void 0,name:lo(o,r),hide:d,type:e.tooltipType,color:e.fill,unit:m}}}function oU(e){var r=tt(ji),{data:n,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:d,onMouseLeave:m,onClick:f}=o,h=fm(o,ZF),g=Gv(d,a),p=Yv(m),v=Qv(f,a);if(!l||n==null)return null;var b=rl(l);return y.createElement(y.Fragment,null,n.map((w,N)=>{var{value:S,background:C,tooltipPosition:O}=w,k=fm(w,JF);if(!C)return null;var E=g(w,N),M=p(w,N),D=v(w,N),R=Dn(Dn(Dn(Dn(Dn({option:l,isActive:String(N)===r},k),{},{fill:"#eee"},C),b),$c(h,w,N)),{},{onMouseEnter:E,onMouseLeave:M,onClick:D,dataKey:a,index:N,className:"recharts-bar-background-rectangle"});return y.createElement(ty,wi({key:"background-bar-".concat(N)},R))}))}function cU(e){var{showLabels:r,children:n,rects:a}=e,l=a==null?void 0:a.map(o=>{var d={x:o.x,y:o.y,width:o.width,height:o.height};return Dn(Dn({},d),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:d,fill:o.fill})});return y.createElement(ED,{value:r?l:void 0},n)}function dU(e){var{shape:r,activeBar:n,baseProps:a,entry:l,index:o,dataKey:d}=e,m=tt(ji),f=tt(fD),h=n&&String(o)===m&&(f==null||d===f),g=h?n:r;return y.createElement(ty,wi({},a,{name:String(a.name)},l,{isActive:h,option:g,index:o,dataKey:d}))}function uU(e){var{shape:r,baseProps:n,entry:a,index:l,dataKey:o}=e;return y.createElement(ty,wi({},n,{name:String(n.name)},a,{isActive:!1,option:r,index:l,dataKey:o}))}function mU(e){var{data:r,props:n}=e,a=ra(n),{id:l}=a,o=fm(a,eU),{shape:d,dataKey:m,activeBar:f}=n,{onMouseEnter:h,onClick:g,onMouseLeave:p}=n,v=fm(n,tU),b=Gv(h,m),w=Yv(p),N=Qv(g,m);return r?y.createElement(y.Fragment,null,r.map((S,C)=>y.createElement(dn,wi({key:"rectangle-".concat(S==null?void 0:S.x,"-").concat(S==null?void 0:S.y,"-").concat(S==null?void 0:S.value,"-").concat(C),className:"recharts-bar-rectangle"},$c(v,S,C),{onMouseEnter:b(S,C),onMouseLeave:w(S,C),onClick:N(S,C)}),f?y.createElement(dU,{shape:d,activeBar:f,baseProps:o,entry:S,index:C,dataKey:m}):y.createElement(uU,{shape:d,baseProps:o,entry:S,index:C,dataKey:m})))):null}function fU(e){var{props:r,previousRectanglesRef:n}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:d,animationDuration:m,animationEasing:f,onAnimationEnd:h,onAnimationStart:g}=r,p=n.current,v=Vc(r,"recharts-bar-"),[b,w]=y.useState(!1),N=!b,S=y.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),C=y.useCallback(()=>{typeof g=="function"&&g(),w(!0)},[g]);return y.createElement(cU,{showLabels:N,rects:a},y.createElement(Uc,{animationId:v,begin:d,duration:m,isActive:o,easing:f,onAnimationEnd:S,onAnimationStart:C,key:v},O=>{var k=O===1?a:a==null?void 0:a.map((E,M)=>{var D=p&&p[M];if(D)return Dn(Dn({},E),{},{x:Or(D.x,E.x,O),y:Or(D.y,E.y,O),width:Or(D.width,E.width,O),height:Or(D.height,E.height,O)});if(l==="horizontal"){var R=Or(0,E.height,O);return Dn(Dn({},E),{},{y:E.y+E.height-R,height:R})}var P=Or(0,E.width,O);return Dn(Dn({},E),{},{width:P})});return O>0&&(n.current=k??null),k==null?null:y.createElement(dn,null,y.createElement(mU,{props:r,data:k}))}),y.createElement(qv,{label:r.label}),r.children)}function hU(e){var r=y.useRef(null);return y.createElement(fU,{previousRectanglesRef:r,props:e})}var QD=0,gU=(e,r)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:dr(e,r)}};class pU extends y.PureComponent{render(){var{hide:r,data:n,dataKey:a,className:l,xAxisId:o,yAxisId:d,needClip:m,background:f,id:h}=this.props;if(r||n==null)return null;var g=Vt("recharts-bar",l),p=h;return y.createElement(dn,{className:g,id:h},m&&y.createElement("defs",null,y.createElement(YD,{clipPathId:p,xAxisId:o,yAxisId:d})),y.createElement(dn,{className:"recharts-bar-rectangles",clipPath:m?"url(#clipPath-".concat(p,")"):void 0},y.createElement(oU,{data:n,dataKey:a,background:f,allOtherBarProps:this.props}),y.createElement(hU,this.props)))}}var xU={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!ki.isSsr,legendType:"rect",minPointSize:QD,xAxisId:0,yAxisId:0};function vU(e){var{xAxisId:r,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:d,animationBegin:m,animationDuration:f,animationEasing:h,isAnimationActive:g}=e,{needClip:p}=ry(r,n),v=Rm(),b=Tn(),w=Kv(e.children,ol),N=tt(O=>HU(O,r,n,b,e.id,w));if(v!=="vertical"&&v!=="horizontal")return null;var S,C=N==null?void 0:N[0];return C==null||C.height==null||C.width==null?S=0:S=v==="vertical"?C.height/2:C.width/2,y.createElement(GD,{xAxisId:r,yAxisId:n,data:N,dataPointFormatter:gU,errorBarOffset:S},y.createElement(pU,wi({},e,{layout:v,needClip:p,data:N,xAxisId:r,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:d,animationBegin:m,animationDuration:f,animationEasing:h,isAnimationActive:g})))}function yU(e){var{layout:r,barSettings:{dataKey:n,minPointSize:a},pos:l,bandSize:o,xAxis:d,yAxis:m,xAxisTicks:f,yAxisTicks:h,stackedData:g,displayedData:p,offset:v,cells:b,parentViewBox:w}=e,N=r==="horizontal"?m:d,S=g?N.scale.domain():null,C=gP({numericAxis:N});return p.map((O,k)=>{var E,M,D,R,P,z;g?E=cP(g[k],S):(E=dr(O,n),Array.isArray(E)||(E=[C,E]));var U=qF(a,QD)(E[1],k);if(r==="horizontal"){var q,[Y,ee]=[m.scale(E[0]),m.scale(E[1])];M=I2({axis:d,ticks:f,bandSize:o,offset:l.offset,entry:O,index:k}),D=(q=ee??Y)!==null&&q!==void 0?q:void 0,R=l.size;var _=Y-ee;if(P=Na(_)?0:_,z={x:M,y:v.top,width:R,height:v.height},Math.abs(U)>0&&Math.abs(P)<Math.abs(U)){var G=Jr(P||U)*(Math.abs(U)-Math.abs(P));D-=G,P+=G}}else{var[L,V]=[d.scale(E[0]),d.scale(E[1])];if(M=L,D=I2({axis:m,ticks:h,bandSize:o,offset:l.offset,entry:O,index:k}),R=V-L,P=l.size,z={x:v.left,y:D,width:v.width,height:P},Math.abs(U)>0&&Math.abs(R)<Math.abs(U)){var Z=Jr(R||U)*(Math.abs(U)-Math.abs(R));R+=Z}}if(M==null||D==null||R==null||P==null)return null;var K=Dn(Dn({},O),{},{x:M,y:D,width:R,height:P,value:g?E:E[1],payload:O,background:z,tooltipPosition:{x:M+R/2,y:D+P/2},parentViewBox:w},b&&b[k]&&b[k].props);return K}).filter(Boolean)}function bU(e){var r=un(e,xU),n=Tn();return y.createElement(Zv,{id:r.id,type:"bar"},a=>y.createElement(y.Fragment,null,y.createElement(VD,{legendPayload:iU(r)}),y.createElement(Xv,{fn:lU,args:r}),y.createElement(WD,{type:"bar",id:a,data:void 0,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,stackId:hP(r.stackId),hide:r.hide,barSize:r.barSize,minPointSize:r.minPointSize,maxBarSize:r.maxBarSize,isPanorama:n}),y.createElement(vU,wi({},r,{id:a}))))}var Wa=y.memo(bU);Wa.displayName="Bar";function JS(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ku(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?JS(Object(n),!0).forEach(function(a){jU(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JS(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function jU(e,r,n){return(r=NU(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function NU(e){var r=wU(e,"string");return typeof r=="symbol"?r:r+""}function wU(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var SU=(e,r)=>r,kU=(e,r,n)=>n,CU=(e,r,n,a)=>a,DU=(e,r,n,a,l)=>l,td=pe([Xm,DU],(e,r)=>e.filter(n=>n.type==="bar").find(n=>n.id===r)),OU=pe([td],e=>e==null?void 0:e.maxBarSize),AU=(e,r,n,a,l,o)=>o,ek=(e,r,n)=>{var a=n??e;if(!jr(a))return yn(a,r,0)},TU=pe([Lt,Xm,SU,kU,CU],(e,r,n,a,l)=>r.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),IU=(e,r,n,a)=>{var l=Lt(e);return l==="horizontal"?Rx(e,"yAxis",n,a):Rx(e,"xAxis",r,a)},EU=(e,r,n)=>{var a=Lt(e);return a==="horizontal"?tS(e,"xAxis",r):tS(e,"yAxis",n)},MU=(e,r,n)=>{var a={},l=e.filter(Gm),o=e.filter(h=>h.stackId==null),d=l.reduce((h,g)=>(h[g.stackId]||(h[g.stackId]=[]),h[g.stackId].push(g),h),a),m=Object.entries(d).map(h=>{var[g,p]=h,v=p.map(w=>w.dataKey),b=ek(r,n,p[0].barSize);return{stackId:g,dataKeys:v,barSize:b}}),f=o.map(h=>{var g=[h.dataKey].filter(v=>v!=null),p=ek(r,n,h.barSize);return{stackId:void 0,dataKeys:g,barSize:p}});return[...m,...f]},PU=pe([TU,hz,EU],MU),_U=(e,r,n,a,l)=>{var o,d,m=td(e,r,n,a,l);if(m!=null){var f=Lt(e),h=f4(e),{maxBarSize:g}=m,p=jr(g)?h:g,v,b;return f==="horizontal"?(v=bi(e,"xAxis",r,a),b=yi(e,"xAxis",r,a)):(v=bi(e,"yAxis",n,a),b=yi(e,"yAxis",n,a)),(o=(d=kc(v,b,!0))!==null&&d!==void 0?d:p)!==null&&o!==void 0?o:0}},XD=(e,r,n,a)=>{var l=Lt(e),o,d;return l==="horizontal"?(o=bi(e,"xAxis",r,a),d=yi(e,"xAxis",r,a)):(o=bi(e,"yAxis",n,a),d=yi(e,"yAxis",n,a)),kc(o,d)};function RU(e,r,n,a,l){var o=a.length;if(!(o<1)){var d=yn(e,n,0,!0),m,f=[];if(bn(a[0].barSize)){var h=!1,g=n/o,p=a.reduce((C,O)=>C+(O.barSize||0),0);p+=(o-1)*d,p>=n&&(p-=(o-1)*d,d=0),p>=n&&g>0&&(h=!0,g*=.9,p=o*g);var v=(n-p)/2>>0,b={offset:v-d,size:0};m=a.reduce((C,O)=>{var k,E={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:b.offset+b.size+d,size:h?g:(k=O.barSize)!==null&&k!==void 0?k:0}},M=[...C,E];return b=M[M.length-1].position,M},f)}else{var w=yn(r,n,0,!0);n-2*w-(o-1)*d<=0&&(d=0);var N=(n-2*w-(o-1)*d)/o;N>1&&(N>>=0);var S=bn(l)?Math.min(N,l):N;m=a.reduce((C,O,k)=>[...C,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:w+(N+d)*k+(N-S)/2,size:S}}],f)}return m}}var LU=(e,r,n,a,l,o,d)=>{var m=jr(d)?r:d,f=RU(n,a,l!==o?l:o,e,m);return l!==o&&f!=null&&(f=f.map(h=>ku(ku({},h),{},{position:ku(ku({},h.position),{},{offset:h.position.offset-l/2})}))),f},$U=pe([PU,f4,fz,h4,_U,XD,OU],LU),zU=(e,r,n,a)=>bi(e,"xAxis",r,a),BU=(e,r,n,a)=>bi(e,"yAxis",n,a),FU=(e,r,n,a)=>yi(e,"xAxis",r,a),UU=(e,r,n,a)=>yi(e,"yAxis",n,a),VU=pe([$U,td],(e,r)=>{if(!(e==null||r==null)){var n=e.find(a=>a.stackId===r.stackId&&r.dataKey!=null&&a.dataKeys.includes(r.dataKey));if(n!=null)return n.position}}),qU=(e,r)=>{var n=mv(r);if(!(!e||n==null||r==null)){var{stackId:a}=r;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(d=>d.key===n)}}}},WU=pe([IU,td],qU),HU=pe([Hr,O0,zU,BU,FU,UU,VU,Lt,qm,XD,WU,td,AU],(e,r,n,a,l,o,d,m,f,h,g,p,v)=>{var{chartData:b,dataStartIndex:w,dataEndIndex:N}=f;if(!(p==null||d==null||r==null||m!=="horizontal"&&m!=="vertical"||n==null||a==null||l==null||o==null||h==null)){var{data:S}=p,C;if(S!=null&&S.length>0?C=S:C=b==null?void 0:b.slice(w,N+1),C!=null)return yU({layout:m,barSettings:p,pos:d,parentViewBox:r,bandSize:h,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:g,displayedData:C,offset:e,cells:v})}}),ZD=e=>{var{chartData:r}=e,n=Nr(),a=Tn();return y.useEffect(()=>a?()=>{}:(n(uS(r)),()=>{n(uS(void 0))}),[r,n,a]),null},tk={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},JD=aa({name:"brush",initialState:tk,reducers:{setBrushSettings(e,r){return r.payload==null?tk:r.payload}}}),{setBrushSettings:LK}=JD.actions,KU=JD.reducer;function GU(e,r,n){return(r=YU(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function YU(e){var r=QU(e,"string");return typeof r=="symbol"?r:r+""}function QU(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}class ny{static create(r){return new ny(r)}constructor(r){this.scale=r}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(r){var{bandAware:n,position:a}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+l}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(n){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}isInRange(r){var n=this.range(),a=n[0],l=n[n.length-1];return a<=l?r>=a&&r<=l:r>=l&&r<=a}}GU(ny,"EPS",1e-4);function XU(e){return(e%180+180)%180}var ZU=function(r){var{width:n,height:a}=r,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=XU(l),d=o*Math.PI/180,m=Math.atan(a/n),f=d>m&&d<Math.PI-m?a/Math.sin(d):n/Math.cos(d);return Math.abs(f)},JU={dots:[],areas:[],lines:[]},eO=aa({name:"referenceElements",initialState:JU,reducers:{addDot:(e,r)=>{e.dots.push(r.payload)},removeDot:(e,r)=>{var n=Cs(e).dots.findIndex(a=>a===r.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,r)=>{e.areas.push(r.payload)},removeArea:(e,r)=>{var n=Cs(e).areas.findIndex(a=>a===r.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,r)=>{e.lines.push(r.payload)},removeLine:(e,r)=>{var n=Cs(e).lines.findIndex(a=>a===r.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:$K,removeDot:zK,addArea:BK,removeArea:FK,addLine:UK,removeLine:VK}=eO.actions,eV=eO.reducer,tV=y.createContext(void 0),rV=e=>{var{children:r}=e,[n]=y.useState("".concat(jc("recharts"),"-clip")),a=ey();if(a==null)return null;var{x:l,y:o,width:d,height:m}=a;return y.createElement(tV.Provider,{value:n},y.createElement("defs",null,y.createElement("clipPath",{id:n},y.createElement("rect",{x:l,y:o,height:m,width:d}))),r)};function no(e,r){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(r,n)||e[n]!==r[n]))return!1;for(var a in r)if({}.hasOwnProperty.call(r,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function tO(e,r,n){if(r<1)return[];if(r===1&&n===void 0)return e;for(var a=[],l=0;l<e.length;l+=r)a.push(e[l]);return a}function nV(e,r,n){var a={width:e.width+r.width,height:e.height+r.height};return ZU(a,n)}function aV(e,r,n){var a=n==="width",{x:l,y:o,width:d,height:m}=e;return r===1?{start:a?l:o,end:a?l+d:o+m}:{start:a?l+d:o+m,end:a?l:o}}function hm(e,r,n,a,l){if(e*r<e*a||e*r>e*l)return!1;var o=n();return e*(r-e*o/2-a)>=0&&e*(r+e*o/2-l)<=0}function sV(e,r){return tO(e,r+1)}function iV(e,r,n,a,l){for(var o=(a||[]).slice(),{start:d,end:m}=r,f=0,h=1,g=d,p=function(){var w=a==null?void 0:a[f];if(w===void 0)return{v:tO(a,h)};var N=f,S,C=()=>(S===void 0&&(S=n(w,N)),S),O=w.coordinate,k=f===0||hm(e,O,C,g,m);k||(f=0,g=d,h+=1),k&&(g=O+e*(C()/2+l),f+=h)},v;h<=o.length;)if(v=p(),v)return v.v;return[]}function rk(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function xn(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?rk(Object(n),!0).forEach(function(a){lV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function lV(e,r,n){return(r=oV(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function oV(e){var r=cV(e,"string");return typeof r=="symbol"?r:r+""}function cV(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function dV(e,r,n,a,l){for(var o=(a||[]).slice(),d=o.length,{start:m}=r,{end:f}=r,h=function(v){var b=o[v],w,N=()=>(w===void 0&&(w=n(b,v)),w);if(v===d-1){var S=e*(b.coordinate+e*N()/2-f);o[v]=b=xn(xn({},b),{},{tickCoord:S>0?b.coordinate-S*e:b.coordinate})}else o[v]=b=xn(xn({},b),{},{tickCoord:b.coordinate});var C=hm(e,b.tickCoord,N,m,f);C&&(f=b.tickCoord-e*(N()/2+l),o[v]=xn(xn({},b),{},{isShow:!0}))},g=d-1;g>=0;g--)h(g);return o}function uV(e,r,n,a,l,o){var d=(a||[]).slice(),m=d.length,{start:f,end:h}=r;if(o){var g=a[m-1],p=n(g,m-1),v=e*(g.coordinate+e*p/2-h);d[m-1]=g=xn(xn({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate});var b=hm(e,g.tickCoord,()=>p,f,h);b&&(h=g.tickCoord-e*(p/2+l),d[m-1]=xn(xn({},g),{},{isShow:!0}))}for(var w=o?m-1:m,N=function(O){var k=d[O],E,M=()=>(E===void 0&&(E=n(k,O)),E);if(O===0){var D=e*(k.coordinate-e*M()/2-f);d[O]=k=xn(xn({},k),{},{tickCoord:D<0?k.coordinate-D*e:k.coordinate})}else d[O]=k=xn(xn({},k),{},{tickCoord:k.coordinate});var R=hm(e,k.tickCoord,M,f,h);R&&(f=k.tickCoord+e*(M()/2+l),d[O]=xn(xn({},k),{},{isShow:!0}))},S=0;S<w;S++)N(S);return d}function ay(e,r,n){var{tick:a,ticks:l,viewBox:o,minTickGap:d,orientation:m,interval:f,tickFormatter:h,unit:g,angle:p}=e;if(!l||!l.length||!a)return[];if(ct(f)||ki.isSsr){var v;return(v=sV(l,ct(f)?f:0))!==null&&v!==void 0?v:[]}var b=[],w=m==="top"||m==="bottom"?"width":"height",N=g&&w==="width"?yc(g,{fontSize:r,letterSpacing:n}):{width:0,height:0},S=(k,E)=>{var M=typeof h=="function"?h(k.value,E):k.value;return w==="width"?nV(yc(M,{fontSize:r,letterSpacing:n}),N,p):yc(M,{fontSize:r,letterSpacing:n})[w]},C=l.length>=2?Jr(l[1].coordinate-l[0].coordinate):1,O=aV(o,C,w);return f==="equidistantPreserveStart"?iV(C,O,S,l,d):(f==="preserveStart"||f==="preserveStartEnd"?b=uV(C,O,S,l,d,f==="preserveStartEnd"):b=dV(C,O,S,l,d),b.filter(k=>k.isShow))}var mV=e=>{var{ticks:r,label:n,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,d=0;if(r){Array.from(r).forEach(g=>{if(g){var p=g.getBoundingClientRect();p.width>d&&(d=p.width)}});var m=n?n.getBoundingClientRect().width:0,f=l+o,h=d+f+m+(n?a:0);return Math.round(h)}return 0},fV=["axisLine","width","height","className","hide","ticks"],hV=["viewBox"],gV=["viewBox"];function Wx(e,r){if(e==null)return{};var n,a,l=pV(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function pV(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cl.apply(null,arguments)}function nk(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Wr(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?nk(Object(n),!0).forEach(function(a){xV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xV(e,r,n){return(r=vV(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function vV(e){var r=yV(e,"string");return typeof r=="symbol"?r:r+""}function yV(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}var sy={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function bV(e){var{x:r,y:n,width:a,height:l,orientation:o,mirror:d,axisLine:m,otherSvgProps:f}=e;if(!m)return null;var h=Wr(Wr(Wr({},f),ra(m)),{},{fill:"none"});if(o==="top"||o==="bottom"){var g=+(o==="top"&&!d||o==="bottom"&&d);h=Wr(Wr({},h),{},{x1:r,y1:n+g*l,x2:r+a,y2:n+g*l})}else{var p=+(o==="left"&&!d||o==="right"&&d);h=Wr(Wr({},h),{},{x1:r+p*a,y1:n,x2:r+p*a,y2:n+l})}return y.createElement("line",cl({},h,{className:Vt("recharts-cartesian-axis-line",nl(m,"className"))}))}function jV(e,r,n,a,l,o,d,m,f){var h,g,p,v,b,w,N=m?-1:1,S=e.tickSize||d,C=ct(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=g=e.coordinate,v=n+ +!m*l,p=v-N*S,w=p-N*f,b=C;break;case"left":p=v=e.coordinate,g=r+ +!m*a,h=g-N*S,b=h-N*f,w=C;break;case"right":p=v=e.coordinate,g=r+ +m*a,h=g+N*S,b=h+N*f,w=C;break;default:h=g=e.coordinate,v=n+ +m*l,p=v+N*S,w=p+N*f,b=C;break}return{line:{x1:h,y1:p,x2:g,y2:v},tick:{x:b,y:w}}}function NV(e,r){switch(e){case"left":return r?"start":"end";case"right":return r?"end":"start";default:return"middle"}}function wV(e,r){switch(e){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}function SV(e){var{option:r,tickProps:n,value:a}=e,l,o=Vt(n.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(r))l=y.cloneElement(r,Wr(Wr({},n),{},{className:o}));else if(typeof r=="function")l=r(Wr(Wr({},n),{},{className:o}));else{var d="recharts-cartesian-axis-tick-value";typeof r!="boolean"&&(d=Vt(d,r==null?void 0:r.className)),l=y.createElement(nf,cl({},n,{className:d}),a)}return l}function kV(e){var{ticks:r=[],tick:n,tickLine:a,stroke:l,tickFormatter:o,unit:d,padding:m,tickTextProps:f,orientation:h,mirror:g,x:p,y:v,width:b,height:w,tickSize:N,tickMargin:S,fontSize:C,letterSpacing:O,getTicksConfig:k,events:E}=e,M=ay(Wr(Wr({},k),{},{ticks:r}),C,O),D=NV(h,g),R=wV(h,g),P=ra(k),z=rl(n),U={};typeof a=="object"&&(U=a);var q=Wr(Wr({},P),{},{fill:"none"},U),Y=M.map((ee,_)=>{var{line:G,tick:L}=jV(ee,p,v,b,w,h,N,g,S),V=Wr(Wr(Wr(Wr({textAnchor:D,verticalAnchor:R},P),{},{stroke:"none",fill:l},z),L),{},{index:_,payload:ee,visibleTicksCount:M.length,tickFormatter:o,padding:m},f);return y.createElement(dn,cl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},$c(E,ee,_)),a&&y.createElement("line",cl({},q,G,{className:Vt("recharts-cartesian-axis-tick-line",nl(a,"className"))})),n&&y.createElement(SV,{option:n,tickProps:V,value:"".concat(typeof o=="function"?o(ee.value,_):ee.value).concat(d||"")}))});return Y.length>0?y.createElement("g",{className:"recharts-cartesian-axis-ticks"},Y):null}var CV=y.forwardRef((e,r)=>{var{axisLine:n,width:a,height:l,className:o,hide:d,ticks:m}=e,f=Wx(e,fV),[h,g]=y.useState(""),[p,v]=y.useState(""),b=y.useRef(null);y.useImperativeHandle(r,()=>({getCalculatedWidth:()=>{var N;return mV({ticks:b.current,label:(N=e.labelRef)===null||N===void 0?void 0:N.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=y.useCallback(N=>{if(N){var S=N.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=S;var C=S[0];if(C){var O=window.getComputedStyle(C),k=O.fontSize,E=O.letterSpacing;(k!==h||E!==p)&&(g(k),v(E))}}},[h,p]);return d||a!=null&&a<=0||l!=null&&l<=0?null:y.createElement(dn,{className:Vt("recharts-cartesian-axis",o),ref:w},y.createElement(bV,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:ra(e)}),y.createElement(kV,{ticks:m,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:h,letterSpacing:p,getTicksConfig:e,events:f}),y.createElement(O7,{x:e.x,y:e.y,width:e.width,height:e.height},y.createElement($7,{label:e.label,labelRef:e.labelRef}),e.children))}),DV=y.memo(CV,(e,r)=>{var{viewBox:n}=e,a=Wx(e,hV),{viewBox:l}=r,o=Wx(r,gV);return no(n,l)&&no(a,o)}),iy=y.forwardRef((e,r)=>{var n=un(e,sy);return y.createElement(DV,cl({},n,{ref:r}))});iy.displayName="CartesianAxis";var OV=["x1","y1","x2","y2","key"],AV=["offset"],TV=["xAxisId","yAxisId"],IV=["xAxisId","yAxisId"];function ak(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function vn(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ak(Object(n),!0).forEach(function(a){EV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function EV(e,r,n){return(r=MV(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function MV(e){var r=PV(e,"string");return typeof r=="symbol"?r:r+""}function PV(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xi.apply(null,arguments)}function gm(e,r){if(e==null)return{};var n,a,l=_V(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function _V(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var RV=e=>{var{fill:r}=e;if(!r||r==="none")return null;var{fillOpacity:n,x:a,y:l,width:o,height:d,ry:m}=e;return y.createElement("rect",{x:a,y:l,ry:m,width:o,height:d,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function rO(e,r){var n;if(y.isValidElement(e))n=y.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var{x1:a,y1:l,x2:o,y2:d,key:m}=r,f=gm(r,OV),h=ra(f),{offset:g}=h,p=gm(h,AV);n=y.createElement("line",Xi({},p,{x1:a,y1:l,x2:o,y2:d,fill:"none",key:m}))}return n}function LV(e){var{x:r,width:n,horizontal:a=!0,horizontalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:d}=e,m=gm(e,TV),f=l.map((h,g)=>{var p=vn(vn({},m),{},{x1:r,y1:h,x2:r+n,y2:h,key:"line-".concat(g),index:g});return rO(a,p)});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},f)}function $V(e){var{y:r,height:n,vertical:a=!0,verticalPoints:l}=e;if(!a||!l||!l.length)return null;var{xAxisId:o,yAxisId:d}=e,m=gm(e,IV),f=l.map((h,g)=>{var p=vn(vn({},m),{},{x1:h,y1:r,x2:h,y2:r+n,key:"line-".concat(g),index:g});return rO(a,p)});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},f)}function zV(e){var{horizontalFill:r,fillOpacity:n,x:a,y:l,width:o,height:d,horizontalPoints:m,horizontal:f=!0}=e;if(!f||!r||!r.length)return null;var h=m.map(p=>Math.round(p+l-l)).sort((p,v)=>p-v);l!==h[0]&&h.unshift(0);var g=h.map((p,v)=>{var b=!h[v+1],w=b?l+d-p:h[v+1]-p;if(w<=0)return null;var N=v%r.length;return y.createElement("rect",{key:"react-".concat(v),y:p,x:a,height:w,width:o,stroke:"none",fill:r[N],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function BV(e){var{vertical:r=!0,verticalFill:n,fillOpacity:a,x:l,y:o,width:d,height:m,verticalPoints:f}=e;if(!r||!n||!n.length)return null;var h=f.map(p=>Math.round(p+l-l)).sort((p,v)=>p-v);l!==h[0]&&h.unshift(0);var g=h.map((p,v)=>{var b=!h[v+1],w=b?l+d-p:h[v+1]-p;if(w<=0)return null;var N=v%n.length;return y.createElement("rect",{key:"react-".concat(v),x:p,y:o,width:w,height:m,stroke:"none",fill:n[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var FV=(e,r)=>{var{xAxis:n,width:a,height:l,offset:o}=e;return QC(ay(vn(vn(vn({},sy),n),{},{ticks:XC(n),viewBox:{x:0,y:0,width:a,height:l}})),o.left,o.left+o.width,r)},UV=(e,r)=>{var{yAxis:n,width:a,height:l,offset:o}=e;return QC(ay(vn(vn(vn({},sy),n),{},{ticks:XC(n),viewBox:{x:0,y:0,width:a,height:l}})),o.top,o.top+o.height,r)},VV={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function gi(e){var r=T0(),n=I0(),a=a3(),l=vn(vn({},un(e,VV)),{},{x:ct(e.x)?e.x:a.left,y:ct(e.y)?e.y:a.top,width:ct(e.width)?e.width:a.width,height:ct(e.height)?e.height:a.height}),{xAxisId:o,yAxisId:d,x:m,y:f,width:h,height:g,syncWithTicks:p,horizontalValues:v,verticalValues:b}=l,w=Tn(),N=tt(z=>rS(z,"xAxis",o,w)),S=tt(z=>rS(z,"yAxis",d,w));if(!ct(h)||h<=0||!ct(g)||g<=0||!ct(m)||m!==+m||!ct(f)||f!==+f)return null;var C=l.verticalCoordinatesGenerator||FV,O=l.horizontalCoordinatesGenerator||UV,{horizontalPoints:k,verticalPoints:E}=l;if((!k||!k.length)&&typeof O=="function"){var M=v&&v.length,D=O({yAxis:S?vn(vn({},S),{},{ticks:M?v:S.ticks}):void 0,width:r,height:n,offset:a},M?!0:p);Ku(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(k=D)}if((!E||!E.length)&&typeof C=="function"){var R=b&&b.length,P=C({xAxis:N?vn(vn({},N),{},{ticks:R?b:N.ticks}):void 0,width:r,height:n,offset:a},R?!0:p);Ku(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(E=P)}return y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(RV,{fill:l.fill,fillOpacity:l.fillOpacity,x:l.x,y:l.y,width:l.width,height:l.height,ry:l.ry}),y.createElement(zV,Xi({},l,{horizontalPoints:k})),y.createElement(BV,Xi({},l,{verticalPoints:E})),y.createElement(LV,Xi({},l,{offset:a,horizontalPoints:k,xAxis:N,yAxis:S})),y.createElement($V,Xi({},l,{offset:a,verticalPoints:E,xAxis:N,yAxis:S})))}gi.displayName="CartesianGrid";var nO=(e,r,n,a)=>bi(e,"xAxis",r,a),aO=(e,r,n,a)=>yi(e,"xAxis",r,a),sO=(e,r,n,a)=>bi(e,"yAxis",n,a),iO=(e,r,n,a)=>yi(e,"yAxis",n,a),qV=pe([Lt,nO,sO,aO,iO],(e,r,n,a,l)=>Si(e,"xAxis")?kc(r,a,!1):kc(n,l,!1)),WV=(e,r,n,a,l)=>l;function HV(e){return e.type==="line"}var KV=pe([Xm,WV],(e,r)=>e.filter(HV).find(n=>n.id===r)),GV=pe([Lt,nO,sO,aO,iO,KV,qV,qm],(e,r,n,a,l,o,d,m)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:g}=m;if(!(o==null||r==null||n==null||a==null||l==null||a.length===0||l.length===0||d==null)){var{dataKey:p,data:v}=o,b;if(v!=null&&v.length>0?b=v:b=f==null?void 0:f.slice(h,g+1),b!=null)return xq({layout:e,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:l,dataKey:p,bandSize:d,displayedData:b})}});function YV(e){var r=rl(e),n=3,a=2;if(r!=null){var{r:l,strokeWidth:o}=r,d=Number(l),m=Number(o);return(Number.isNaN(d)||d<0)&&(d=n),(Number.isNaN(m)||m<0)&&(m=a),{r:d,strokeWidth:m}}return{r:n,strokeWidth:a}}var QV=["id"],XV=["type","layout","connectNulls","needClip"],ZV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function sk(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Jn(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?sk(Object(n),!0).forEach(function(a){JV(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function JV(e,r,n){return(r=eq(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function eq(e){var r=tq(e,"string");return typeof r=="symbol"?r:r+""}function tq(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ly(e,r){if(e==null)return{};var n,a,l=rq(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function rq(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dl.apply(null,arguments)}var nq=e=>{var{dataKey:r,name:n,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:r,type:l,color:a,value:lo(n,r),payload:e}]};function aq(e){var{dataKey:r,data:n,stroke:a,strokeWidth:l,fill:o,name:d,hide:m,unit:f}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:r,nameKey:void 0,name:lo(d,r),hide:m,type:e.tooltipType,color:e.stroke,unit:f}}}var lO=(e,r)=>"".concat(r,"px ").concat(e-r,"px");function sq(e,r){for(var n=e.length%2!==0?[...e,0]:e,a=[],l=0;l<r;++l)a=[...a,...n];return a}var iq=(e,r,n)=>{var a=n.reduce((p,v)=>p+v);if(!a)return lO(r,e);for(var l=Math.floor(e/a),o=e%a,d=r-e,m=[],f=0,h=0;f<n.length;h+=n[f],++f)if(h+n[f]>o){m=[...n.slice(0,f),o-h];break}var g=m.length%2===0?[0,d]:[d];return[...sq(n,l),...m,...g].map(p=>"".concat(p,"px")).join(", ")};function lq(e,r){var n;if(y.isValidElement(e))n=y.cloneElement(e,r);else if(typeof e=="function")n=e(r);else{var a=Vt("recharts-line-dot",typeof e!="boolean"?e.className:"");n=y.createElement(PD,dl({},r,{className:a}))}return n}function oq(e,r){return e==null?!1:r?!0:e.length===1}function cq(e){var{clipPathId:r,points:n,props:a}=e,{dot:l,dataKey:o,needClip:d}=a;if(!oq(n,l))return null;var{id:m}=a,f=ly(a,QV),h=BD(l),g=ra(f),p=ZI(l),v=n.map((w,N)=>{var S=Jn(Jn(Jn({key:"dot-".concat(N),r:3},g),p),{},{index:N,cx:w.x,cy:w.y,dataKey:o,value:w.value,payload:w.payload,points:n});return lq(l,S)}),b={clipPath:d?"url(#clipPath-".concat(h?"":"dots-").concat(r,")"):void 0};return y.createElement(dn,dl({className:"recharts-line-dots",key:"dots"},b),v)}function dq(e){var{showLabels:r,children:n,points:a}=e,l=y.useMemo(()=>a==null?void 0:a.map(o=>{var d={x:o.x,y:o.y,width:0,height:0};return Jn(Jn({},d),{},{value:o.value,payload:o.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[a]);return y.createElement(ED,{value:r?l:null},n)}function ik(e){var{clipPathId:r,pathRef:n,points:a,strokeDasharray:l,props:o}=e,{type:d,layout:m,connectNulls:f,needClip:h}=o,g=ly(o,XV),p=Jn(Jn({},An(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(r,")"):void 0,points:a,type:d,layout:m,connectNulls:f,strokeDasharray:l??o.strokeDasharray});return y.createElement(y.Fragment,null,(a==null?void 0:a.length)>1&&y.createElement(M0,dl({},p,{pathRef:n})),y.createElement(cq,{points:a,clipPathId:r,props:o}))}function uq(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function mq(e){var{clipPathId:r,props:n,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:d,strokeDasharray:m,isAnimationActive:f,animationBegin:h,animationDuration:g,animationEasing:p,animateNewValues:v,width:b,height:w,onAnimationEnd:N,onAnimationStart:S}=n,C=l.current,O=Vc(n,"recharts-line-"),[k,E]=y.useState(!1),M=!k,D=y.useCallback(()=>{typeof N=="function"&&N(),E(!1)},[N]),R=y.useCallback(()=>{typeof S=="function"&&S(),E(!0)},[S]),P=uq(a.current),z=o.current;return y.createElement(dq,{points:d,showLabels:M},n.children,y.createElement(Uc,{animationId:O,begin:h,duration:g,isActive:f,easing:p,onAnimationEnd:D,onAnimationStart:R,key:O},U=>{var q=Or(z,P+z,U),Y=Math.min(q,P),ee;if(f)if(m){var _="".concat(m).split(/[,\s]+/gim).map(V=>parseFloat(V));ee=iq(Y,P,_)}else ee=lO(P,Y);else ee=m==null?void 0:String(m);if(C){var G=C.length/d.length,L=U===1?d:d.map((V,Z)=>{var K=Math.floor(Z*G);if(C[K]){var de=C[K];return Jn(Jn({},V),{},{x:Or(de.x,V.x,U),y:Or(de.y,V.y,U)})}return v?Jn(Jn({},V),{},{x:Or(b*2,V.x,U),y:Or(w/2,V.y,U)}):Jn(Jn({},V),{},{x:V.x,y:V.y})});return l.current=L,y.createElement(ik,{props:n,points:L,clipPathId:r,pathRef:a,strokeDasharray:ee})}return U>0&&P>0&&(l.current=d,o.current=Y),y.createElement(ik,{props:n,points:d,clipPathId:r,pathRef:a,strokeDasharray:ee})}),y.createElement(qv,{label:n.label}))}function fq(e){var{clipPathId:r,props:n}=e,a=y.useRef(null),l=y.useRef(0),o=y.useRef(null);return y.createElement(mq,{props:n,clipPathId:r,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var hq=(e,r)=>({x:e.x,y:e.y,value:e.value,errorVal:dr(e.payload,r)});class gq extends y.Component{render(){var{hide:r,dot:n,points:a,className:l,xAxisId:o,yAxisId:d,top:m,left:f,width:h,height:g,id:p,needClip:v}=this.props;if(r)return null;var b=Vt("recharts-line",l),w=p,{r:N,strokeWidth:S}=YV(n),C=BD(n),O=N*2+S;return y.createElement(y.Fragment,null,y.createElement(dn,{className:b},v&&y.createElement("defs",null,y.createElement(YD,{clipPathId:w,xAxisId:o,yAxisId:d}),!C&&y.createElement("clipPath",{id:"clipPath-dots-".concat(w)},y.createElement("rect",{x:f-O/2,y:m-O/2,width:h+O,height:g+O}))),y.createElement(GD,{xAxisId:o,yAxisId:d,data:a,dataPointFormatter:hq,errorBarOffset:0},y.createElement(fq,{props:this.props,clipPathId:w}))),y.createElement(PF,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var oO={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!ki.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function pq(e){var r=un(e,oO),{activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:d,connectNulls:m,dot:f,hide:h,isAnimationActive:g,label:p,legendType:v,xAxisId:b,yAxisId:w,id:N}=r,S=ly(r,ZV),{needClip:C}=ry(b,w),O=ey(),k=Rm(),E=Tn(),M=tt(U=>GV(U,b,w,E,N));if(k!=="horizontal"&&k!=="vertical"||M==null||O==null)return null;var{height:D,width:R,x:P,y:z}=O;return y.createElement(gq,dl({},S,{id:N,connectNulls:m,dot:f,activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:d,isAnimationActive:g,hide:h,label:p,legendType:v,xAxisId:b,yAxisId:w,points:M,layout:k,height:D,width:R,left:P,top:z,needClip:C}))}function xq(e){var{layout:r,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:d,bandSize:m,displayedData:f}=e;return f.map((h,g)=>{var p=dr(h,d);if(r==="horizontal"){var v=T2({axis:n,ticks:l,bandSize:m,entry:h,index:g}),b=jr(p)?null:a.scale(p);return{x:v,y:b,value:p,payload:h}}var w=jr(p)?null:n.scale(p),N=T2({axis:a,ticks:o,bandSize:m,entry:h,index:g});return w==null||N==null?null:{x:w,y:N,value:p,payload:h}}).filter(Boolean)}function vq(e){var r=un(e,oO),n=Tn();return y.createElement(Zv,{id:r.id,type:"line"},a=>y.createElement(y.Fragment,null,y.createElement(VD,{legendPayload:nq(r)}),y.createElement(Xv,{fn:aq,args:r}),y.createElement(WD,{type:"line",id:a,data:r.data,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,hide:r.hide,isPanorama:n}),y.createElement(pq,dl({},r,{id:a}))))}var cO=y.memo(vq);cO.displayName="Line";var yq=["dangerouslySetInnerHTML","ticks"],bq=["id"],jq=["domain"],Nq=["domain"];function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hx.apply(null,arguments)}function pm(e,r){if(e==null)return{};var n,a,l=wq(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function wq(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Sq(e){var r=Nr();return y.useLayoutEffect(()=>(r(jF(e)),()=>{r(NF(e))}),[e,r]),null}var kq=e=>{var{xAxisId:r,className:n}=e,a=tt(O0),l=Tn(),o="xAxis",d=tt(S=>po(S,o,r,l)),m=tt(S=>H4(S,o,r,l)),f=tt(S=>U4(S,r)),h=tt(S=>oB(S,r)),g=tt(S=>w4(S,r));if(f==null||h==null||g==null)return null;var{dangerouslySetInnerHTML:p,ticks:v}=e,b=pm(e,yq),{id:w}=g,N=pm(g,bq);return y.createElement(iy,Hx({},b,N,{scale:d,x:h.x,y:h.y,width:f.width,height:f.height,className:Vt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:m}))},Cq={allowDataOverflow:Qn.allowDataOverflow,allowDecimals:Qn.allowDecimals,allowDuplicatedCategory:Qn.allowDuplicatedCategory,height:Qn.height,hide:!1,mirror:Qn.mirror,orientation:Qn.orientation,padding:Qn.padding,reversed:Qn.reversed,scale:Qn.scale,tickCount:Qn.tickCount,type:Qn.type,xAxisId:0},Dq=e=>{var r,n,a,l,o,d=un(e,Cq);return y.createElement(y.Fragment,null,y.createElement(Sq,{interval:(r=d.interval)!==null&&r!==void 0?r:"preserveEnd",id:d.xAxisId,scale:d.scale,type:d.type,padding:d.padding,allowDataOverflow:d.allowDataOverflow,domain:d.domain,dataKey:d.dataKey,allowDuplicatedCategory:d.allowDuplicatedCategory,allowDecimals:d.allowDecimals,tickCount:d.tickCount,includeHidden:(n=d.includeHidden)!==null&&n!==void 0?n:!1,reversed:d.reversed,ticks:d.ticks,height:d.height,orientation:d.orientation,mirror:d.mirror,hide:d.hide,unit:d.unit,name:d.name,angle:(a=d.angle)!==null&&a!==void 0?a:0,minTickGap:(l=d.minTickGap)!==null&&l!==void 0?l:5,tick:(o=d.tick)!==null&&o!==void 0?o:!0,tickFormatter:d.tickFormatter}),y.createElement(kq,d))},Oq=(e,r)=>{var{domain:n}=e,a=pm(e,jq),{domain:l}=r,o=pm(r,Nq);return no(a,o)?Array.isArray(n)&&n.length===2&&Array.isArray(l)&&l.length===2?n[0]===l[0]&&n[1]===l[1]:no({domain:n},{domain:l}):!1},pi=y.memo(Dq,Oq);pi.displayName="XAxis";var Aq=["dangerouslySetInnerHTML","ticks"],Tq=["id"],Iq=["domain"],Eq=["domain"];function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kx.apply(null,arguments)}function xm(e,r){if(e==null)return{};var n,a,l=Mq(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Mq(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Pq(e){var r=Nr();return y.useLayoutEffect(()=>(r(wF(e)),()=>{r(SF(e))}),[e,r]),null}var _q=e=>{var{yAxisId:r,className:n,width:a,label:l}=e,o=y.useRef(null),d=y.useRef(null),m=tt(O0),f=Tn(),h=Nr(),g="yAxis",p=tt(M=>po(M,g,r,f)),v=tt(M=>V4(M,r)),b=tt(M=>dB(M,r)),w=tt(M=>H4(M,g,r,f)),N=tt(M=>S4(M,r));if(y.useLayoutEffect(()=>{if(!(a!=="auto"||!v||Vv(l)||y.isValidElement(l)||N==null)){var M=o.current;if(M){var D=M.getCalculatedWidth();Math.round(v.width)!==Math.round(D)&&h(kF({id:r,width:D}))}}},[w,v,h,l,r,a,N]),v==null||b==null||N==null)return null;var{dangerouslySetInnerHTML:S,ticks:C}=e,O=xm(e,Aq),{id:k}=N,E=xm(N,Tq);return y.createElement(iy,Kx({},O,E,{ref:o,labelRef:d,scale:p,x:b.x,y:b.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:v.width,height:v.height,className:Vt("recharts-".concat(g," ").concat(g),n),viewBox:m,ticks:w}))},Rq={allowDataOverflow:Xn.allowDataOverflow,allowDecimals:Xn.allowDecimals,allowDuplicatedCategory:Xn.allowDuplicatedCategory,hide:!1,mirror:Xn.mirror,orientation:Xn.orientation,padding:Xn.padding,reversed:Xn.reversed,scale:Xn.scale,tickCount:Xn.tickCount,type:Xn.type,width:Xn.width,yAxisId:0},Lq=e=>{var r,n,a,l,o,d=un(e,Rq);return y.createElement(y.Fragment,null,y.createElement(Pq,{interval:(r=d.interval)!==null&&r!==void 0?r:"preserveEnd",id:d.yAxisId,scale:d.scale,type:d.type,domain:d.domain,allowDataOverflow:d.allowDataOverflow,dataKey:d.dataKey,allowDuplicatedCategory:d.allowDuplicatedCategory,allowDecimals:d.allowDecimals,tickCount:d.tickCount,padding:d.padding,includeHidden:(n=d.includeHidden)!==null&&n!==void 0?n:!1,reversed:d.reversed,ticks:d.ticks,width:d.width,orientation:d.orientation,mirror:d.mirror,hide:d.hide,unit:d.unit,name:d.name,angle:(a=d.angle)!==null&&a!==void 0?a:0,minTickGap:(l=d.minTickGap)!==null&&l!==void 0?l:5,tick:(o=d.tick)!==null&&o!==void 0?o:!0,tickFormatter:d.tickFormatter}),y.createElement(_q,d))},$q=(e,r)=>{var{domain:n}=e,a=xm(e,Iq),{domain:l}=r,o=xm(r,Eq);return no(a,o)?Array.isArray(n)&&n.length===2&&Array.isArray(l)&&l.length===2?n[0]===l[0]&&n[1]===l[1]:no({domain:n},{domain:l}):!1},xi=y.memo(Lq,$q);xi.displayName="YAxis";var qp={exports:{}},Wp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk;function zq(){if(lk)return Wp;lk=1;var e=ao();function r(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:r,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,d=e.useMemo,m=e.useDebugValue;return Wp.useSyncExternalStoreWithSelector=function(f,h,g,p,v){var b=l(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=d(function(){function S(M){if(!C){if(C=!0,O=M,M=p(M),v!==void 0&&w.hasValue){var D=w.value;if(v(D,M))return k=D}return k=M}if(D=k,n(O,M))return D;var R=p(M);return v!==void 0&&v(D,R)?(O=M,D):(O=M,k=R)}var C=!1,O,k,E=g===void 0?null:g;return[function(){return S(h())},E===null?void 0:function(){return S(E())}]},[h,g,p,v]);var N=a(f,b[0],b[1]);return o(function(){w.hasValue=!0,w.value=N},[N]),m(N),N},Wp}var ok;function Bq(){return ok||(ok=1,qp.exports=zq()),qp.exports}Bq();function Fq(e){e()}function Uq(){let e=null,r=null;return{clear(){e=null,r=null},notify(){Fq(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const l=r={callback:n,next:null,prev:r};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:r=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var ck={notify(){},get:()=>[]};function Vq(e,r){let n,a=ck,l=0,o=!1;function d(N){g();const S=a.subscribe(N);let C=!1;return()=>{C||(C=!0,S(),p())}}function m(){a.notify()}function f(){w.onStateChange&&w.onStateChange()}function h(){return o}function g(){l++,n||(n=e.subscribe(f),a=Uq())}function p(){l--,n&&l===0&&(n(),n=void 0,a.clear(),a=ck)}function v(){o||(o=!0,g())}function b(){o&&(o=!1,p())}const w={addNestedSub:d,notifyNestedSubs:m,handleChangeWrapper:f,isSubscribed:h,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>a};return w}var qq=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wq=qq(),Hq=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Kq=Hq(),Gq=()=>Wq||Kq?y.useLayoutEffect:y.useEffect,Yq=Gq(),Hp=Symbol.for("react-redux-context"),Kp=typeof globalThis<"u"?globalThis:{};function Qq(){if(!y.createContext)return{};const e=Kp[Hp]??(Kp[Hp]=new Map);let r=e.get(y.createContext);return r||(r=y.createContext(null),e.set(y.createContext,r)),r}var Xq=Qq();function Zq(e){const{children:r,context:n,serverState:a,store:l}=e,o=y.useMemo(()=>{const f=Vq(l);return{store:l,subscription:f,getServerState:a?()=>a:void 0}},[l,a]),d=y.useMemo(()=>l.getState(),[l]);Yq(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),d!==l.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,d]);const m=n||Xq;return y.createElement(m.Provider,{value:o},r)}var Jq=Zq,eW=(e,r)=>r,oy=pe([eW,Lt,b4,Gr,cD,zs,g8,Hr],b8),cy=e=>{var r=e.currentTarget.getBoundingClientRect(),n=r.width/e.currentTarget.offsetWidth,a=r.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-r.left)/n),chartY:Math.round((e.clientY-r.top)/a)}},dO=wa("mouseClick"),uO=Bc();uO.startListening({actionCreator:dO,effect:(e,r)=>{var n=e.payload,a=oy(r.getState(),cy(n));(a==null?void 0:a.activeIndex)!=null&&r.dispatch(wB({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var Gx=wa("mouseMove"),mO=Bc();mO.startListening({actionCreator:Gx,effect:(e,r)=>{var n=e.payload,a=r.getState(),l=Mv(a,a.tooltip.settings.shared),o=oy(a,cy(n));l==="axis"&&((o==null?void 0:o.activeIndex)!=null?r.dispatch(eD({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):r.dispatch(J4()))}});var dk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},fO=aa({name:"rootProps",initialState:dk,reducers:{updateOptions:(e,r)=>{var n;e.accessibilityLayer=r.payload.accessibilityLayer,e.barCategoryGap=r.payload.barCategoryGap,e.barGap=(n=r.payload.barGap)!==null&&n!==void 0?n:dk.barGap,e.barSize=r.payload.barSize,e.maxBarSize=r.payload.maxBarSize,e.stackOffset=r.payload.stackOffset,e.syncId=r.payload.syncId,e.syncMethod=r.payload.syncMethod,e.className=r.payload.className}}}),tW=fO.reducer,{updateOptions:rW}=fO.actions,hO=aa({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,r)=>r.payload}}),{updatePolarOptions:nW}=hO.actions,aW=hO.reducer,gO=wa("keyDown"),pO=wa("focus"),dy=Bc();dy.startListening({actionCreator:gO,effect:(e,r)=>{var n=r.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var d=Number(Pv(l,vo(n))),m=zs(n);if(o==="Enter"){var f=cm(n,"axis","hover",String(l.index));r.dispatch($x({active:!l.active,activeIndex:l.index,activeDataKey:l.dataKey,activeCoordinate:f}));return}var h=hB(n),g=h==="left-to-right"?1:-1,p=o==="ArrowRight"?1:-1,v=d+p*g;if(!(m==null||v>=m.length||v<0)){var b=cm(n,"axis","hover",String(v));r.dispatch($x({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});dy.startListening({actionCreator:pO,effect:(e,r)=>{var n=r.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var o="0",d=cm(n,"axis","hover",String(o));r.dispatch($x({activeDataKey:void 0,active:!0,activeIndex:o,activeCoordinate:d}))}}}});var va=wa("externalEvent"),xO=Bc();xO.startListening({actionCreator:va,effect:(e,r)=>{if(e.payload.handler!=null){var n=r.getState(),a={activeCoordinate:s8(n),activeDataKey:fD(n),activeIndex:ji(n),activeLabel:mD(n),activeTooltipIndex:ji(n),isTooltipActive:i8(n)};e.payload.handler(a,e.payload.reactEvent)}}});var sW=pe([xo],e=>e.tooltipItemPayloads),iW=pe([sW,Jc,(e,r,n)=>r,(e,r,n)=>n],(e,r,n,a)=>{var l=e.find(m=>m.settings.dataKey===a);if(l!=null){var{positions:o}=l;if(o!=null){var d=r(o,n);return d}}}),vO=wa("touchMove"),yO=Bc();yO.startListening({actionCreator:vO,effect:(e,r)=>{var n=e.payload,a=r.getState(),l=Mv(a,a.tooltip.settings.shared);if(l==="axis"){var o=oy(a,cy({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&r.dispatch(eD({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(l==="item"){var d,m=n.touches[0],f=document.elementFromPoint(m.clientX,m.clientY);if(!f||!f.getAttribute)return;var h=f.getAttribute(JC),g=(d=f.getAttribute(e3))!==null&&d!==void 0?d:void 0,p=iW(r.getState(),h,g);r.dispatch(Z4({activeDataKey:g,activeIndex:h,activeCoordinate:p}))}}});var lW=wC({brush:KU,cartesianAxis:CF,chartData:R8,errorBars:HF,graphicalItems:W9,layout:KM,legend:JP,options:I8,polarAxis:s9,polarOptions:aW,referenceElements:eV,rootProps:tW,tooltip:SB}),oW=function(r){return vM({reducer:lW,preloadedState:r,middleware:n=>n({serializableCheck:!1}).concat([uO.middleware,mO.middleware,dy.middleware,xO.middleware,yO.middleware]),enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(_C({type:"raf"}))},devTools:ki.devToolsEnabled})};function bO(e){var{preloadedState:r,children:n,reduxStoreName:a}=e,l=Tn(),o=y.useRef(null);if(l)return n;o.current==null&&(o.current=oW(r));var d=N0;return y.createElement(Jq,{context:d,store:o.current},n)}function jO(e){var{layout:r,margin:n}=e,a=Nr(),l=Tn();return y.useEffect(()=>{l||(a(qM(r)),a(VM(n)))},[a,l,r,n]),null}function NO(e){var r=Nr();return y.useEffect(()=>{r(rW(e))},[r,e]),null}var cW=["children"];function dW(e,r){if(e==null)return{};var n,a,l=uW(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function uW(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vm.apply(null,arguments)}var mW={width:"100%",height:"100%",display:"block"},fW=y.forwardRef((e,r)=>{var n=T0(),a=I0(),l=o3();if(!Zl(n)||!Zl(a))return null;var{children:o,otherAttributes:d,title:m,desc:f}=e,h,g;return typeof d.tabIndex=="number"?h=d.tabIndex:h=l?0:void 0,typeof d.role=="string"?g=d.role:g=l?"application":void 0,y.createElement(d0,vm({},d,{title:m,desc:f,role:g,tabIndex:h,width:n,height:a,style:mW,ref:r}),o)}),hW=e=>{var{children:r}=e,n=tt(Pm);if(!n)return null;var{width:a,height:l,y:o,x:d}=n;return y.createElement(d0,{width:a,height:l,x:d,y:o},r)},uk=y.forwardRef((e,r)=>{var{children:n}=e,a=dW(e,cW),l=Tn();return l?y.createElement(hW,null,n):y.createElement(fW,vm({ref:r},a),n)});function gW(){var e=Nr(),[r,n]=y.useState(null),a=tt(NP);return y.useEffect(()=>{if(r!=null){var l=r.getBoundingClientRect(),o=l.width/r.offsetWidth;bn(o)&&o!==a&&e(HM(o))}},[r,e,a]),n}function mk(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function pW(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?mk(Object(n),!0).forEach(function(a){xW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xW(e,r,n){return(r=vW(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function vW(e){var r=yW(e,"string");return typeof r=="symbol"?r:r+""}function yW(e,r){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ul.apply(null,arguments)}var bW=()=>(W8(),null);function ym(e){if(typeof e=="number")return e;if(typeof e=="string"){var r=parseFloat(e);if(!Number.isNaN(r))return r}return 0}var jW=y.forwardRef((e,r)=>{var n,a,l=y.useRef(null),[o,d]=y.useState({containerWidth:ym((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:ym((a=e.style)===null||a===void 0?void 0:a.height)}),m=y.useCallback((h,g)=>{d(p=>{var v=Math.round(h),b=Math.round(g);return p.containerWidth===v&&p.containerHeight===b?p:{containerWidth:v,containerHeight:b}})},[]),f=y.useCallback(h=>{if(typeof r=="function"&&r(h),h!=null){var{width:g,height:p}=h.getBoundingClientRect();m(g,p);var v=w=>{var{width:N,height:S}=w[0].contentRect;m(N,S)},b=new ResizeObserver(v);b.observe(h),l.current=b}},[r,m]);return y.useEffect(()=>()=>{var h=l.current;h!=null&&h.disconnect()},[m]),y.createElement(y.Fragment,null,y.createElement(Lm,{width:o.containerWidth,height:o.containerHeight}),y.createElement("div",ul({ref:f},e)))}),NW=y.forwardRef((e,r)=>{var{width:n,height:a}=e,[l,o]=y.useState({containerWidth:ym(n),containerHeight:ym(a)}),d=y.useCallback((f,h)=>{o(g=>{var p=Math.round(f),v=Math.round(h);return g.containerWidth===p&&g.containerHeight===v?g:{containerWidth:p,containerHeight:v}})},[]),m=y.useCallback(f=>{if(typeof r=="function"&&r(f),f!=null){var{width:h,height:g}=f.getBoundingClientRect();d(h,g)}},[r,d]);return y.createElement(y.Fragment,null,y.createElement(Lm,{width:l.containerWidth,height:l.containerHeight}),y.createElement("div",ul({ref:m},e)))}),wW=y.forwardRef((e,r)=>{var{width:n,height:a}=e;return y.createElement(y.Fragment,null,y.createElement(Lm,{width:n,height:a}),y.createElement("div",ul({ref:r},e)))}),SW=y.forwardRef((e,r)=>{var{width:n,height:a}=e;return As(n)||As(a)?y.createElement(NW,ul({},e,{ref:r})):y.createElement(wW,ul({},e,{ref:r}))});function kW(e){return e===!0?jW:SW}var CW=y.forwardRef((e,r)=>{var{children:n,className:a,height:l,onClick:o,onContextMenu:d,onDoubleClick:m,onMouseDown:f,onMouseEnter:h,onMouseLeave:g,onMouseMove:p,onMouseUp:v,onTouchEnd:b,onTouchMove:w,onTouchStart:N,style:S,width:C,responsive:O,dispatchTouchEvents:k=!0}=e,E=y.useRef(null),M=Nr(),[D,R]=y.useState(null),[P,z]=y.useState(null),U=gW(),q=A0(),Y=(q==null?void 0:q.width)>0?q.width:C,ee=(q==null?void 0:q.height)>0?q.height:l,_=y.useCallback(X=>{U(X),typeof r=="function"&&r(X),R(X),z(X),X!=null&&(E.current=X)},[U,r,R,z]),G=y.useCallback(X=>{M(dO(X)),M(va({handler:o,reactEvent:X}))},[M,o]),L=y.useCallback(X=>{M(Gx(X)),M(va({handler:h,reactEvent:X}))},[M,h]),V=y.useCallback(X=>{M(J4()),M(va({handler:g,reactEvent:X}))},[M,g]),Z=y.useCallback(X=>{M(Gx(X)),M(va({handler:p,reactEvent:X}))},[M,p]),K=y.useCallback(()=>{M(pO())},[M]),de=y.useCallback(X=>{M(gO(X.key))},[M]),B=y.useCallback(X=>{M(va({handler:d,reactEvent:X}))},[M,d]),le=y.useCallback(X=>{M(va({handler:m,reactEvent:X}))},[M,m]),ye=y.useCallback(X=>{M(va({handler:f,reactEvent:X}))},[M,f]),ge=y.useCallback(X=>{M(va({handler:v,reactEvent:X}))},[M,v]),Ne=y.useCallback(X=>{M(va({handler:N,reactEvent:X}))},[M,N]),Me=y.useCallback(X=>{k&&M(vO(X)),M(va({handler:w,reactEvent:X}))},[M,k,w]),ce=y.useCallback(X=>{M(va({handler:b,reactEvent:X}))},[M,b]),Le=kW(O);return y.createElement(yD.Provider,{value:D},y.createElement(Bk.Provider,{value:P},y.createElement(Le,{width:Y??(S==null?void 0:S.width),height:ee??(S==null?void 0:S.height),className:Vt("recharts-wrapper",a),style:pW({position:"relative",cursor:"default",width:Y,height:ee},S),onClick:G,onContextMenu:B,onDoubleClick:le,onFocus:K,onKeyDown:de,onMouseDown:ye,onMouseEnter:L,onMouseLeave:V,onMouseMove:Z,onMouseUp:ge,onTouchEnd:ce,onTouchMove:Me,onTouchStart:Ne,ref:_},y.createElement(bW,null),n)))}),DW=["width","height","responsive","children","className","style","compact","title","desc"];function OW(e,r){if(e==null)return{};var n,a,l=AW(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function AW(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var wO=y.forwardRef((e,r)=>{var{width:n,height:a,responsive:l,children:o,className:d,style:m,compact:f,title:h,desc:g}=e,p=OW(e,DW),v=ra(p);return f?y.createElement(y.Fragment,null,y.createElement(Lm,{width:n,height:a}),y.createElement(uk,{otherAttributes:v,title:h,desc:g},o)):y.createElement(CW,{className:d,style:m,width:n,height:a,responsive:l,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(uk,{otherAttributes:v,title:h,desc:g,ref:r},y.createElement(rV,null,o)))});function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yx.apply(null,arguments)}var TW={top:5,right:5,bottom:5,left:5},IW={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:TW,reverseStackOrder:!1,syncMethod:"index",responsive:!1},SO=y.forwardRef(function(r,n){var a,l=un(r.categoricalChartProps,IW),{chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:m,tooltipPayloadSearcher:f,categoricalChartProps:h}=r,g={chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:m,tooltipPayloadSearcher:f,eventEmitter:void 0};return y.createElement(bO,{preloadedState:{options:g},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:o},y.createElement(ZD,{chartData:h.data}),y.createElement(jO,{layout:l.layout,margin:l.margin}),y.createElement(NO,{accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className}),y.createElement(wO,Yx({},l,{ref:n})))}),EW=["axis"],MW=y.forwardRef((e,r)=>y.createElement(SO,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:EW,tooltipPayloadSearcher:Uv,categoricalChartProps:e,ref:r})),PW=["axis","item"],Gl=y.forwardRef((e,r)=>y.createElement(SO,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:PW,tooltipPayloadSearcher:Uv,categoricalChartProps:e,ref:r}));function _W(e){var r=Nr();return y.useEffect(()=>{r(nW(e))},[r,e]),null}var RW=["layout"];function Qx(){return Qx=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qx.apply(null,arguments)}function LW(e,r){if(e==null)return{};var n,a,l=$W(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function $W(e,r){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var zW={top:5,right:5,bottom:5,left:5},BW={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:zW,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},FW=y.forwardRef(function(r,n){var a,l=un(r.categoricalChartProps,BW),{layout:o}=l,d=LW(l,RW),{chartName:m,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g}=r,p={chartName:m,defaultTooltipEventType:f,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return y.createElement(bO,{preloadedState:{options:p},reduxStoreName:(a=l.id)!==null&&a!==void 0?a:m},y.createElement(ZD,{chartData:l.data}),y.createElement(jO,{layout:o,margin:l.margin}),y.createElement(NO,{accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className}),y.createElement(_W,{cx:l.cx,cy:l.cy,startAngle:l.startAngle,endAngle:l.endAngle,innerRadius:l.innerRadius,outerRadius:l.outerRadius}),y.createElement(wO,Qx({},d,{ref:n})))}),UW=["item"],VW={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},fk=y.forwardRef((e,r)=>{var n=un(e,VW);return y.createElement(FW,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:UW,tooltipPayloadSearcher:Uv,categoricalChartProps:n,ref:r})});const qW=({activeModules:e,setActiveModules:r})=>{const[n,a]=y.useState("modules"),[l,o]=y.useState("month"),[d,m]=y.useState("all"),f=y.useMemo(()=>GI(l),[l]),h=pg.default||pg||pg,g=y.useMemo(()=>{const k=Array.isArray(h)?h:[];return d==="all"?k:k.filter(E=>E.category.toLowerCase()===d.toLowerCase())},[d,h]),p=y.useMemo(()=>{const k=Array.isArray(h)?h:[];return{total:k.length,high:k.filter(E=>E.severity==="high").length,medium:k.filter(E=>E.severity==="medium").length,low:k.filter(E=>E.severity==="low").length,categories:Array.from(new Set(k.map(E=>E.category))),avgLatency:k.filter(E=>E.latency).reduce((E,M)=>E+(M.latency||0),0)/(k.filter(E=>E.latency).length||1)}},[h]),v=k=>{r(E=>({...E,[k]:!E[k]}))},b=k=>{switch(k){case"high":return"bg-red-500";case"medium":return"bg-orange-500";case"low":return"bg-blue-500"}},w=k=>{switch(k){case"process":return"";case"feature":return"";case"usability":return"";case"automation":return"";case"quality":return""}},N=k=>{switch(k){case"low":return"Laag";case"medium":return"Gemiddeld";case"high":return"Hoog"}},S=f.moduleStats.map(k=>({name:k.module,sessies:k.totalSessions,tijd:k.totalTime,acties:k.actionsCount,fouten:k.errorCount})),C=f.processMetrics.map(k=>({name:k.processName,gemiddelde:k.averageCycleTime,stappen:k.averageSteps})),O=f.userStats.sort((k,E)=>E.efficiencyScore-k.efficiencyScore).slice(0,10).map(k=>({name:k.userName.split(" ")[0],score:k.efficiencyScore,rol:k.role}));return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral mb-2",children:"Admin Instellingen"}),t.jsx("p",{className:"text-gray-600 mb-6 sm:mb-8 text-sm sm:text-base",children:"Beheer modules en analyseer systeem gebruik voor optimalisatie."}),t.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200 overflow-x-auto",children:[t.jsx("button",{onClick:()=>a("modules"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${n==="modules"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:" Module Beheer"}),t.jsx("button",{onClick:()=>a("analytics"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${n==="analytics"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:" Systeem Analytics"}),t.jsx("button",{onClick:()=>a("database"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${n==="database"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:" Database Diagnostics"})]}),n==="modules"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-6",children:"Module Beheer"}),t.jsx("div",{className:"space-y-4",children:Rc.map(k=>{const E=k.icon,M=e[k.id];return t.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border-2 transition-all ${M?"border-primary bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`p-2 rounded-lg ${M?"bg-primary text-white":"bg-gray-200 text-gray-600"}`,children:t.jsx(E,{className:"w-6 h-6"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-neutral",children:k.name}),t.jsx("p",{className:"text-sm text-gray-600",children:k.description})]})]}),t.jsx("button",{onClick:()=>v(k.id),className:`px-6 py-2 rounded-lg font-medium transition-colors ${M?"bg-red-500 text-white hover:bg-red-600":"bg-primary text-white hover:bg-secondary"}`,children:M?"Uitschakelen":"Inschakelen"})]},k.id)})}),t.jsx("div",{className:"mt-8 p-4 bg-blue-100 border-l-4 border-primary rounded",children:t.jsxs("p",{className:"text-sm text-blue-900",children:[t.jsx("strong",{children:"Let op:"})," Uitgeschakelde modules zijn niet zichtbaar in de navigatie en zijn niet toegankelijk voor gebruikers."]})})]}),n==="analytics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-neutral mb-2",children:" Systeem Analytics Dashboard"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Lean Six Sigma analyse voor data-driven optimalisatie beslissingen"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Periode:"}),t.jsxs("select",{value:l,onChange:k=>o(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"day",children:"Vandaag"}),t.jsx("option",{value:"week",children:"Laatste Week"}),t.jsx("option",{value:"month",children:"Laatste Maand"}),t.jsx("option",{value:"quarter",children:"Laatste Kwartaal"}),t.jsx("option",{value:"year",children:"Laatste Jaar"})]}),t.jsx("button",{onClick:()=>{confirm("Weet u zeker dat u alle analytics data wilt wissen?")&&(YI(),window.location.reload())},className:"px-3 py-2 text-sm bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Wis alle analytics data",children:" Reset"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totale Events"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.totalEvents.toLocaleString()}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[f.trends.usageGrowth>0?"":""," ",Math.abs(f.trends.usageGrowth).toFixed(1),"% vs vorige periode"]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Actieve Gebruikers"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.totalUsers}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unieke gebruikers"})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totale Gebruikstijd"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[f.totalTime,"h"]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["In ",f.period]})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Efficiency Verandering"}),t.jsxs("p",{className:`text-2xl font-bold ${f.trends.efficiencyChange>=0?"text-green-600":"text-red-600"}`,children:[f.trends.efficiencyChange>=0?"+":"",f.trends.efficiencyChange.toFixed(1),"%"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"vs vorige periode"})]})]})]}),f.moduleStats.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral mb-4",children:"Module Gebruik Statistieken"}),t.jsx("div",{className:"mb-6",children:t.jsx(ys,{width:"100%",height:300,children:t.jsxs(Gl,{data:S,children:[t.jsx(gi,{strokeDasharray:"3 3"}),t.jsx(pi,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),t.jsx(xi,{fontSize:12}),t.jsx(js,{}),t.jsx(Ka,{}),t.jsx(Wa,{dataKey:"sessies",fill:"#0088FE",name:"Sessies"}),t.jsx(Wa,{dataKey:"acties",fill:"#00C49F",name:"Acties"}),t.jsx(Wa,{dataKey:"fouten",fill:"#FF8042",name:"Fouten"})]})})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-200",children:[t.jsx("th",{className:"text-left py-2 px-2",children:"Module"}),t.jsx("th",{className:"text-right py-2 px-2",children:"Sessies"}),t.jsx("th",{className:"text-right py-2 px-2",children:"Tijd (min)"}),t.jsx("th",{className:"text-right py-2 px-2",children:"Acties"}),t.jsx("th",{className:"text-right py-2 px-2",children:"Fouten"}),t.jsx("th",{className:"text-center py-2 px-2",children:"Trend"})]})}),t.jsx("tbody",{children:f.moduleStats.map(k=>t.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[t.jsx("td",{className:"py-2 px-2 font-medium",children:k.module}),t.jsx("td",{className:"text-right py-2 px-2",children:k.totalSessions}),t.jsx("td",{className:"text-right py-2 px-2",children:k.totalTime}),t.jsx("td",{className:"text-right py-2 px-2",children:k.actionsCount}),t.jsx("td",{className:"text-right py-2 px-2",children:t.jsx("span",{className:k.errorCount>0?"text-red-600 font-semibold":"",children:k.errorCount})}),t.jsxs("td",{className:"text-center py-2 px-2",children:[k.usageTrend==="increasing"&&t.jsx("span",{className:"text-green-600",children:""}),k.usageTrend==="decreasing"&&t.jsx("span",{className:"text-red-600",children:""}),k.usageTrend==="stable"&&t.jsx("span",{className:"text-gray-400",children:""})]})]},k.module))})]})})]}),f.processMetrics.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral mb-4",children:"Proces Efficintie Metrics"}),t.jsx("div",{className:"mb-6",children:t.jsx(ys,{width:"100%",height:250,children:t.jsxs(Gl,{data:C,children:[t.jsx(gi,{strokeDasharray:"3 3"}),t.jsx(pi,{dataKey:"name",fontSize:12}),t.jsx(xi,{fontSize:12}),t.jsx(js,{}),t.jsx(Ka,{}),t.jsx(Wa,{dataKey:"gemiddelde",fill:"#8884d8",name:"Gemiddelde Cyclus Tijd (min)"})]})})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.processMetrics.map(k=>t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[t.jsx("h4",{className:"font-semibold text-neutral mb-3",children:k.processName}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Gemiddelde Cyclus Tijd:"}),t.jsxs("span",{className:"font-medium",children:[k.averageCycleTime," min"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Gemiddeld Aantal Stappen:"}),t.jsx("span",{className:"font-medium",children:k.averageSteps.toFixed(1)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Completion Rate:"}),t.jsxs("span",{className:`font-medium ${k.completionRate>80?"text-green-600":k.completionRate>50?"text-orange-600":"text-red-600"}`,children:[k.completionRate.toFixed(1),"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Error Rate:"}),t.jsxs("span",{className:`font-medium ${k.errorRate<5?"text-green-600":k.errorRate<15?"text-orange-600":"text-red-600"}`,children:[k.errorRate.toFixed(1),"%"]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Rework Rate:"}),t.jsxs("span",{className:`font-medium ${k.reworkRate<5?"text-green-600":k.reworkRate<15?"text-orange-600":"text-red-600"}`,children:[k.reworkRate.toFixed(1),"%"]})]}),k.bottleneckSteps.length>0&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs font-semibold text-red-600 mb-2",children:" Bottlenecks:"}),t.jsx("ul",{className:"text-xs space-y-1",children:k.bottleneckSteps.slice(0,3).map((E,M)=>t.jsxs("li",{className:"text-gray-700",children:[" ",E.step,": ",Math.round(E.averageWaitTime)," min wachttijd"]},M))})]})]})]},k.processName))})]}),f.userStats.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral mb-4",children:"Gebruiker Efficiency Scores"}),t.jsx("div",{className:"mb-6",children:t.jsx(ys,{width:"100%",height:300,children:t.jsxs(Gl,{data:O,layout:"vertical",children:[t.jsx(gi,{strokeDasharray:"3 3"}),t.jsx(pi,{type:"number",domain:[0,100],fontSize:12}),t.jsx(xi,{dataKey:"name",type:"category",fontSize:12,width:80}),t.jsx(js,{}),t.jsx(Ka,{}),t.jsx(Wa,{dataKey:"score",fill:"#00C49F",name:"Efficiency Score (0-100)"})]})})})]}),f.recommendations.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral mb-4",children:" Optimalisatie Aanbevelingen (Lean Six Sigma)"}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Data-driven aanbevelingen voor procesverbetering gebaseerd op gebruikspatronen"}),t.jsx("div",{className:"space-y-4",children:f.recommendations.map(k=>t.jsxs("div",{className:"border-l-4 border-gray-300 rounded-lg p-4 bg-gray-50 hover:bg-gray-100 transition-colors",style:{borderLeftColor:k.priority==="high"?"#ef4444":k.priority==="medium"?"#f97316":"#3b82f6"},children:[t.jsx("div",{className:"flex items-start justify-between gap-4 mb-3",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-xl",children:w(k.category)}),t.jsx("h4",{className:"font-semibold text-neutral",children:k.title}),t.jsx("span",{className:`px-2 py-1 text-xs font-semibold text-white rounded ${b(k.priority)}`,children:k.priority.toUpperCase()}),t.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-200 text-gray-700 rounded",children:["ROI: ",k.roi]})]}),t.jsx("p",{className:"text-sm text-gray-700 mb-3",children:k.description}),t.jsxs("div",{className:"flex flex-wrap gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Impact: "}),t.jsx("span",{className:"font-medium text-green-600",children:k.impact})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Inspanning: "}),t.jsx("span",{className:"font-medium",children:N(k.effort)})]}),t.jsxs("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Metric: "}),t.jsxs("span",{className:"font-medium",children:[k.metrics.current," ",k.metrics.unit,"  ",k.metrics.target," ",k.metrics.unit]})]})]})]})}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Aanbevolen Acties:"}),t.jsx("ul",{className:"text-xs space-y-1",children:k.actions.map((E,M)=>t.jsxs("li",{className:"text-gray-600 flex items-start gap-2",children:[t.jsx("span",{className:"text-primary",children:""}),t.jsx("span",{children:E})]},M))})]})]},k.id))})]}),f.totalEvents===0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[t.jsx("p",{className:"text-gray-500 text-lg mb-4",children:" Geen analytics data beschikbaar"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Begin met gebruik van het systeem om analytics data te verzamelen voor optimalisatie analyses."})]})]}),n==="database"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-neutral mb-2",children:" Database Diagnostics Dashboard"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Baseline diagnostics voor Supabase, NeonDB, PlanetScale en andere managed databases"})]})}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border-l-4 border-red-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"High Severity"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:p.high})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Medium Severity"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:p.medium})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Low Severity"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p.low})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Issues"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:p.total})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter op Categorie:"}),t.jsxs("select",{value:d,onChange:k=>m(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary w-full sm:w-auto",children:[t.jsx("option",{value:"all",children:"Alle Categorien"}),p.categories.map(k=>t.jsx("option",{value:k.toLowerCase(),children:k},k))]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:"Severity Distributie"}),t.jsx(ys,{width:"100%",height:200,children:t.jsxs(Gl,{data:[{name:"High",value:p.high,color:"#ef4444"},{name:"Medium",value:p.medium,color:"#f97316"},{name:"Low",value:p.low,color:"#3b82f6"}],children:[t.jsx(gi,{strokeDasharray:"3 3"}),t.jsx(pi,{dataKey:"name",fontSize:12}),t.jsx(xi,{fontSize:12}),t.jsx(js,{}),t.jsx(Wa,{dataKey:"value",children:[{name:"High",value:p.high,color:"#ef4444"},{name:"Medium",value:p.medium,color:"#f97316"},{name:"Low",value:p.low,color:"#3b82f6"}].map((k,E)=>t.jsx(ol,{fill:k.color},`cell-${E}`))})]})})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-neutral mb-4",children:["Gedetecteerde Issues (",g.length,")"]}),t.jsx("div",{className:"space-y-4",children:g.map((k,E)=>{const M={high:"border-red-500 bg-red-50",medium:"border-orange-500 bg-orange-50",low:"border-blue-500 bg-blue-50"},D={high:"text-red-700",medium:"text-orange-700",low:"text-blue-700"};return t.jsxs("div",{className:`border-l-4 rounded-lg p-4 ${M[k.severity]} hover:shadow-md transition-shadow`,children:[t.jsx("div",{className:"flex items-start justify-between gap-4 mb-3",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[t.jsx("h4",{className:"font-semibold text-neutral text-base sm:text-lg",children:k.issue}),t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${D[k.severity]} bg-white border`,children:k.severity.toUpperCase()}),t.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-200 text-gray-700 rounded",children:k.category}),k.latency&&t.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-700 rounded",children:[" ",k.latency,"ms"]}),k.occurrences&&t.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded",children:[" ",k.occurrences,"x"]})]}),t.jsx("p",{className:"text-sm text-gray-700 mb-4",children:k.message})]})}),t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-1",children:" Diagnostische Stappen:"}),t.jsx("ul",{className:"text-xs space-y-1 ml-4",children:k.diagnostic_steps.map((R,P)=>t.jsx("li",{className:"text-gray-600 list-disc",children:R},P))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2 flex items-center gap-1",children:" Voorgestelde Oplossingen:"}),t.jsx("ul",{className:"text-xs space-y-1 ml-4",children:k.suggested_fix.map((R,P)=>t.jsx("li",{className:"text-gray-600 list-disc",children:R},P))})]}),k.vendor_specific_info&&t.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-2",children:" Platform-specifieke Informatie:"}),t.jsx("div",{className:"text-xs text-yellow-700 space-y-1",children:Object.entries(k.vendor_specific_info).map(([R,P])=>t.jsxs("div",{children:[t.jsxs("span",{className:"font-medium",children:[R,":"]})," ",String(P)]},R))})]}),t.jsx("div",{className:"flex justify-end pt-3 border-t border-gray-200",children:t.jsxs("button",{onClick:()=>{alert(`Test actie "${k.test_action}" zou worden uitgevoerd.

In productie zou dit een backend API call zijn naar:
POST /api/diagnostics/${k.test_action}`)},className:"px-4 py-2 bg-primary text-white text-sm rounded-lg hover:bg-secondary transition-colors font-medium",children:[" Test: ",k.test_action.replace(/_/g," ")]})})]},E)})}),g.length===0&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"Geen issues gevonden voor de geselecteerde categorie."})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsx("h3",{className:"text-lg sm:text-xl font-bold text-neutral mb-4",children:"Issues per Categorie"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:p.categories.map(k=>{const E=(Array.isArray(h)?h:[]).filter(D=>D.category===k),M=E.filter(D=>D.severity==="high").length;return t.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>m(k.toLowerCase()),children:[t.jsx("p",{className:"text-sm font-semibold text-neutral mb-1",children:k}),t.jsx("p",{className:"text-2xl font-bold text-primary",children:E.length}),M>0&&t.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[" ",M," high severity"]})]},k)})})]})]})]})},Gp=e=>{const r=e.replace("/","").trim();return r?Object.values(dt).find(l=>l===r)||null:dt.DASHBOARD},WW=({userId:e,userRole:r})=>{const n=es(),a=y.useRef(null),l=y.useRef(Date.now());return y.useEffect(()=>{const o=n.pathname,d=Gp(o);if(!d)return;const m=a.current,f=m?Gp(m):null;if(f!==d){const h=f?Date.now()-l.current:void 0;ow(e,r,f,d,h),l.current=Date.now(),a.current=o}},[n.pathname,e,r]),y.useEffect(()=>{const o=Gp(n.pathname);o&&!a.current&&(ow(e,r,null,o),a.current=n.pathname,l.current=Date.now())},[n.pathname,e,r]),null},HW=[{id:"1",name:"Staal plaat",sku:"STL-001",quantity:150,reorderLevel:50,supplier:"Staal B.V.",location:"A1",purchasePrice:35,salePrice:45.5,margin:30,vatRate:"21",syncEnabled:!1,unit:"stuk",price:45.5,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"2",name:"Aluminium staaf",sku:"ALU-002",quantity:80,reorderLevel:30,supplier:"MetaalGigant",location:"A2",purchasePrice:20,salePrice:28.75,margin:43.75,vatRate:"21",syncEnabled:!1,unit:"meter",price:28.75,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"3",name:"Schroeven M8",sku:"SCH-003",quantity:5e3,reorderLevel:1e3,supplier:"Bouten & Co",location:"B1",purchasePrice:.1,salePrice:.15,margin:50,vatRate:"21",syncEnabled:!0,unit:"stuk",price:.15,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"4",name:"Verfspuit",sku:"VRF-004",quantity:12,reorderLevel:5,supplier:"Verf Wereld",location:"C1",purchasePrice:180,salePrice:245,margin:36.11,vatRate:"21",syncEnabled:!1,unit:"stuk",price:245,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"5",name:"Lasstaaf",sku:"LAS-005",quantity:200,reorderLevel:50,supplier:"Las Totaal",location:"A3",purchasePrice:2.5,salePrice:3.25,margin:30,vatRate:"21",syncEnabled:!1,unit:"stuk",price:3.25,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],KW=[{id:"p1",name:"Metalen Frame",price:125,inventoryItemId:"1"},{id:"p2",name:"Aluminium Behuizing",price:89.5,inventoryItemId:"2"},{id:"p3",name:"Schroefset (100st)",price:15,inventoryItemId:"3"},{id:"p4",name:"Verfspuit Professioneel",price:245,inventoryItemId:"4"}],GW=[{id:"s1",items:[{id:"p1",name:"Metalen Frame",price:125,inventoryItemId:"1",quantity:2},{id:"p3",name:"Schroefset (100st)",price:15,inventoryItemId:"3",quantity:5}],total:325,customerId:"c1",date:"2024-10-01"},{id:"s2",items:[{id:"p2",name:"Aluminium Behuizing",price:89.5,inventoryItemId:"2",quantity:3}],total:268.5,customerId:"c2",date:"2024-10-05"},{id:"s3",items:[{id:"p4",name:"Verfspuit Professioneel",price:245,inventoryItemId:"4",quantity:1}],total:245,customerId:null,date:"2024-10-07"}],Yp=["website","referral","cold-call","advertisement","social-media","trade-show","email-campaign","walk-in","other"],Qp=[{value:"call",label:"Telefoongesprek",icon:""},{value:"email",label:"E-mail",icon:""},{value:"meeting",label:"Meeting",icon:""},{value:"note",label:"Notitie",icon:""},{value:"sms",label:"SMS",icon:""}],YW=[{id:"wo1",title:"Frame Assemblage",description:"Assembleer 10 metalen frames voor order #1234",status:"In Progress",assignedTo:"e1",requiredInventory:[{itemId:"1",quantity:20},{itemId:"3",quantity:200}],createdDate:"2024-09-28",customerId:"c1",location:"Werkplaats A",scheduledDate:"2024-10-10",hoursSpent:4,notes:"Lassen moet met precisie gebeuren"},{id:"wo2",title:"Lassen Constructie",description:"Las werk voor industrile constructie",status:"Pending",assignedTo:"e2",requiredInventory:[{itemId:"5",quantity:50}],createdDate:"2024-10-01",customerId:"c3",location:"Lasstation",scheduledDate:"2024-10-12",pendingReason:"Wacht op levering extra lasstaaf"},{id:"wo3",title:"Verfwerk Behuizingen",description:"Spuit 15 aluminium behuizingen",status:"Completed",assignedTo:"e3",requiredInventory:[{itemId:"2",quantity:15},{itemId:"4",quantity:2}],createdDate:"2024-09-20",completedDate:"2024-09-25",customerId:"c2",location:"Spuitcabine",hoursSpent:8},{id:"wo4",title:"Schroefverbindingen controleren",description:"Kwaliteitscontrole op alle schroefverbindingen van project #5678",status:"To Do",assignedTo:"e1",requiredInventory:[],createdDate:"2024-10-08",customerId:"c1",location:"Werkplaats B",scheduledDate:"2024-10-15"},{id:"wo5",title:"Nieuwe frame productie",description:"Productie van 5 nieuwe metalen frames volgens tekening",status:"To Do",assignedTo:"e2",requiredInventory:[{itemId:"1",quantity:10},{itemId:"3",quantity:100}],createdDate:"2024-10-09",customerId:"c2",location:"Werkplaats A",scheduledDate:"2024-10-16"}],QW=[{id:"c1",name:"TechBouw B.V.",email:"info@techbouw.nl",phone:"020-1234567",since:"2022-03-15",type:"business",address:"Techniekstraat 15, Amsterdam",notes:"Vaste klant, altijd op tijd betalen",source:"referral",company:"TechBouw B.V."},{id:"c2",name:"Industriaal Partners",email:"contact@industriaal.nl",phone:"010-9876543",since:"2023-01-10",type:"business",address:"Industrieweg 44, Rotterdam",source:"website",company:"Industriaal Partners"},{id:"c3",name:"Metaal Constructies",email:"sales@metaalcon.nl",phone:"030-5555555",since:"2021-11-22",type:"business",address:"Staalstraat 8, Utrecht",source:"advertisement",company:"Metaal Constructies"},{id:"c4",name:"Jan Jansen",email:"jan@email.nl",phone:"06-11223344",since:"2023-06-05",type:"private",address:"Dorpsstraat 12, Den Haag",source:"walk-in"}],XW=[{id:"l1",name:"Emma van der Berg",email:"emma@constructiebv.nl",phone:"06-11223344",company:"Constructie B.V.",status:"qualified",source:"website",estimatedValue:5e3,notes:"Genteresseerd in maandelijkse samenwerking voor meerdere projecten",createdDate:"2024-10-05",lastContactDate:"2024-10-08",nextFollowUpDate:"2024-10-12"},{id:"l2",name:"Thomas de Groot",email:"thomas@innovatielab.nl",phone:"06-22334455",company:"Innovatie Lab",status:"proposal",source:"referral",estimatedValue:8500,notes:"Offerte verstuurd voor prototype ontwikkeling",createdDate:"2024-09-28",lastContactDate:"2024-10-06",nextFollowUpDate:"2024-10-13"},{id:"l3",name:"Lisa Vermeulen",email:"lisa@designstudio.nl",phone:"06-33445566",company:"Design Studio",status:"negotiation",source:"cold-call",estimatedValue:3200,notes:"In onderhandeling over prijzen en levertijd",createdDate:"2024-09-20",lastContactDate:"2024-10-07",nextFollowUpDate:"2024-10-11"},{id:"l4",name:"Mark Hendriks",email:"mark@bouwmaatschappij.nl",phone:"06-44556677",company:"Bouwmaatschappij NL",status:"new",source:"advertisement",estimatedValue:12e3,notes:"Contact opgenomen via LinkedIn advertentie",createdDate:"2024-10-09",nextFollowUpDate:"2024-10-11"},{id:"l5",name:"Sarah Bakker",email:"sarah@projectbureau.nl",phone:"06-55667788",company:"Projectbureau",status:"contacted",source:"website",estimatedValue:6500,notes:"Eerste telefoongesprek gehad, wacht op specificaties",createdDate:"2024-10-03",lastContactDate:"2024-10-04",nextFollowUpDate:"2024-10-10"},{id:"l6",name:"Kevin Smit",email:"kevin@architecten.nl",phone:"06-66778899",company:"Architecten & Co",status:"lost",source:"referral",estimatedValue:4500,notes:"Prijs te hoog, gekozen voor concurrent",createdDate:"2024-09-15",lastContactDate:"2024-09-30"}],ZW=[{id:"int1",leadId:"l1",type:"call",subject:"Eerste kennismakingsgesprek",description:"Telefoongesprek over behoeftes en mogelijke samenwerking. Emma is zeer genteresseerd.",date:"2024-10-08T10:30:00",employeeId:"e4",followUpRequired:!0,followUpDate:"2024-10-12"},{id:"int2",leadId:"l2",type:"email",subject:"Offerte verstuurd",description:"Offerte voor prototype ontwikkeling verstuurd per email. Wacht op reactie.",date:"2024-10-06T14:15:00",employeeId:"e4",followUpRequired:!0,followUpDate:"2024-10-13"},{id:"int3",customerId:"c1",type:"meeting",subject:"Project bespreking",description:"Bespreking nieuwe projecten voor Q4. Positief verlopen.",date:"2024-10-07T11:00:00",employeeId:"e4",followUpRequired:!1},{id:"int4",leadId:"l3",type:"call",subject:"Prijsonderhandeling",description:"Telefoongesprek over prijsaanpassingen. Lisa vraagt om 10% korting.",date:"2024-10-07T15:30:00",employeeId:"e4",followUpRequired:!0,followUpDate:"2024-10-11"},{id:"int5",customerId:"c2",type:"email",subject:"Factuur verzonden",description:"Factuur voor order #1235 verzonden. Betaling verwacht binnen 30 dagen.",date:"2024-10-05T16:45:00",followUpRequired:!1},{id:"int6",leadId:"l4",type:"note",subject:"LinkedIn contact",description:"Mark heeft gereageerd op advertentie. Wil graag meer informatie over onze diensten.",date:"2024-10-09T09:00:00",followUpRequired:!0,followUpDate:"2024-10-11"},{id:"int7",customerId:"c3",type:"meeting",subject:"Kwartaal review",description:"Review van geleverde diensten dit kwartaal. Zeer tevreden.",date:"2024-10-01T13:00:00",employeeId:"e4",followUpRequired:!1}],JW=[{id:"e1",name:"Jan de Vries",role:"Productiemedewerker",email:"jan@bedrijf.nl",phone:"06-12345678",hireDate:"2020-05-01",vacationDays:25,usedVacationDays:12,availability:"available",password:"1234"},{id:"e2",name:"Maria Jansen",role:"Lasser",email:"maria@bedrijf.nl",phone:"06-23456789",hireDate:"2019-08-15",vacationDays:25,usedVacationDays:8,availability:"available",password:"1234"},{id:"e3",name:"Peter Bakker",role:"Spuiter",email:"peter@bedrijf.nl",phone:"06-34567890",hireDate:"2021-02-20",vacationDays:25,usedVacationDays:15,availability:"vacation",password:"1234"},{id:"e4",name:"Sophie van Dam",role:"Manager Productie",email:"sophie@bedrijf.nl",phone:"06-45678901",hireDate:"2018-11-10",vacationDays:28,usedVacationDays:10,availability:"available",password:"1234"}],eH=[{id:"t1",type:"income",description:"Verkoop order #1234",amount:325,date:"2024-10-01",relatedTo:"s1"},{id:"t2",type:"expense",description:"Inkoop staal",amount:-450,date:"2024-09-28"},{id:"t3",type:"income",description:"Verkoop order #1235",amount:268.5,date:"2024-10-05",relatedTo:"s2"},{id:"t4",type:"expense",description:"Elektriciteit factuur",amount:-125,date:"2024-10-03"},{id:"t5",type:"income",description:"Verkoop order #1236",amount:245,date:"2024-10-07",relatedTo:"s3"},{id:"t6",type:"expense",description:"Salarissen",amount:-5200,date:"2024-09-30"},{id:"t7",type:"income",description:"Offerte Q001 geaccepteerd",amount:1500,date:"2024-10-08",relatedTo:"q1"}],tH=[{id:"Q001",customerId:"c1",items:[{inventoryItemId:"1",description:"Staal plaat",quantity:20,pricePerUnit:45.5,total:910},{inventoryItemId:"3",description:"Schroeven M8",quantity:200,pricePerUnit:.15,total:30}],labor:[{description:"Montage en installatie",hours:8,hourlyRate:65,total:520}],subtotal:1460,vatRate:21,vatAmount:306.6,total:1766.6,status:"approved",createdDate:"2024-10-01",validUntil:"2024-10-31",notes:"Inclusief transport"},{id:"Q002",customerId:"c2",items:[{inventoryItemId:"2",description:"Aluminium staaf",quantity:25,pricePerUnit:28.75,total:718.75}],labor:[{description:"Zagen en afwerken",hours:6,hourlyRate:55,total:330}],subtotal:1048.75,vatRate:21,vatAmount:220.24,total:1268.99,status:"sent",createdDate:"2024-10-05",validUntil:"2024-11-05"},{id:"Q003",customerId:"c3",items:[{inventoryItemId:"5",description:"Lasstaaf",quantity:100,pricePerUnit:3.25,total:325},{description:"Extra materialen en verbruiksgoederen",quantity:1,pricePerUnit:175,total:175}],labor:[{description:"Laswerk industrile constructie",hours:40,hourlyRate:75,total:3e3}],subtotal:3500,vatRate:21,vatAmount:735,total:4235,status:"draft",createdDate:"2024-10-08",validUntil:"2024-11-08"}],rH=[{id:"task1",title:"Follow-up offerte TechBouw",description:"Bellen voor status offerte Q001",customerId:"c1",priority:"high",status:"todo",dueDate:"2024-10-12",createdDate:"2024-10-08"},{id:"task2",title:"Materialen bestellen",description:"Aluminium staaf bestellen bij MetaalGigant",employeeId:"e4",priority:"medium",status:"in_progress",dueDate:"2024-10-10",createdDate:"2024-10-07"},{id:"task3",title:"Klantoverleg Metaal Constructies",description:"Bespreken project planning en deadlines",customerId:"c3",priority:"high",status:"todo",dueDate:"2024-10-15",createdDate:"2024-10-08"}],nH=[{id:"cal1",title:"Frame Assemblage - TechBouw",description:"Werkorder wo1",start:"2024-10-10T09:00:00",end:"2024-10-10T17:00:00",type:"workorder",relatedId:"wo1",employeeId:"e1",customerId:"c1"},{id:"cal2",title:"Lassen Constructie",start:"2024-10-12T08:00:00",end:"2024-10-12T16:00:00",type:"workorder",relatedId:"wo2",employeeId:"e2",customerId:"c3"},{id:"cal3",title:"Vakantie Peter Bakker",start:"2024-10-14T00:00:00",end:"2024-10-20T23:59:59",type:"vacation",employeeId:"e3"},{id:"cal4",title:"Team Meeting",description:"Wekelijkse productie bespreking",start:"2024-10-11T14:00:00",end:"2024-10-11T15:00:00",type:"meeting"}],aH=[{id:"notif1",type:"warning",message:"Verfspuit voorraad onder herbestel niveau (12/5)",date:"2024-10-08T10:30:00",read:!1,relatedModule:"inventory",relatedId:"4"},{id:"notif2",type:"success",message:"Offerte Q001 door TechBouw B.V. geaccepteerd",date:"2024-10-08T09:15:00",read:!1,relatedModule:"accounting",relatedId:"q1"},{id:"notif3",type:"info",message:"Werkorder wo3 succesvol afgerond door Peter Bakker",date:"2024-10-07T16:45:00",read:!0,relatedModule:"work_orders",relatedId:"wo3"},{id:"notif4",type:"warning",message:'Taak "Follow-up offerte TechBouw" vervalt over 4 dagen',date:"2024-10-08T08:00:00",read:!1,relatedModule:"crm",relatedId:"task1"}],sH=[{id:"inv1",invoiceNumber:"2025-001",customerId:"c1",quoteId:"Q001",items:[{inventoryItemId:"1",description:"Staal plaat",quantity:20,pricePerUnit:45.5,total:910},{inventoryItemId:"3",description:"Schroeven M8",quantity:200,pricePerUnit:.15,total:30}],labor:[{description:"Montage en installatie",hours:8,hourlyRate:65,total:520}],subtotal:1460,vatRate:21,vatAmount:306.6,total:1766.6,status:"paid",issueDate:"2024-10-08",dueDate:"2024-10-22",paidDate:"2024-10-15",notes:"Inclusief transport",paymentTerms:"14 dagen"},{id:"inv2",invoiceNumber:"2025-002",customerId:"c2",items:[{inventoryItemId:"2",description:"Aluminium staaf",quantity:15,pricePerUnit:28.75,total:431.25}],labor:[{description:"Zagen en afwerken",hours:4,hourlyRate:55,total:220}],subtotal:651.25,vatRate:21,vatAmount:136.76,total:788.01,status:"sent",issueDate:"2024-10-06",dueDate:"2024-11-06",paymentTerms:"30 dagen"},{id:"inv3",invoiceNumber:"2025-003",customerId:"c3",items:[{inventoryItemId:"5",description:"Lasstaaf",quantity:50,pricePerUnit:3.25,total:162.5}],labor:[{description:"Laswerk reparatie",hours:6,hourlyRate:75,total:450}],subtotal:612.5,vatRate:21,vatAmount:128.63,total:741.13,status:"overdue",issueDate:"2024-09-15",dueDate:"2024-09-29",paymentTerms:"14 dagen",notes:"Herinnering verstuurd"}],iH=[{id:"email1",from:"klant@bedrijf.nl",to:["info@jouwbedrijf.nl"],subject:"Vraag over offerte #Q001",body:"Beste team, ik heb een vraag over de offerte die jullie hebben gestuurd. Kunnen we hierover bellen?",status:"received",priority:"normal",receivedDate:new Date(Date.now()-2880*60*1e3).toISOString(),customerId:"c1",quoteId:"Q001",employeeId:"emp1",isRead:!1,createdAt:new Date(Date.now()-2880*60*1e3).toISOString(),updatedAt:new Date(Date.now()-2880*60*1e3).toISOString()},{id:"email2",from:"info@jouwbedrijf.nl",to:["nieuweklant@example.com"],subject:"Offerte voor installatie",body:"Beste, bijgevoegd vindt u onze offerte voor de installatie. Laat het weten als u vragen heeft.",status:"sent",priority:"normal",sentDate:new Date(Date.now()-1440*60*1e3).toISOString(),customerId:"c2",quoteId:"Q002",employeeId:"emp1",isRead:!0,createdAt:new Date(Date.now()-1440*60*1e3).toISOString(),updatedAt:new Date(Date.now()-1440*60*1e3).toISOString()},{id:"email3",from:"lead@potentie.nl",to:["info@jouwbedrijf.nl"],subject:"Vraag over jullie diensten",body:"Hallo, ik ben genteresseerd in jullie diensten. Kunnen jullie mij meer informatie sturen?",status:"received",priority:"high",receivedDate:new Date(Date.now()-300*60*1e3).toISOString(),leadId:"l1",employeeId:"emp1",isRead:!1,createdAt:new Date(Date.now()-300*60*1e3).toISOString(),updatedAt:new Date(Date.now()-300*60*1e3).toISOString()},{id:"email4",from:"info@jouwbedrijf.nl",to:["klant@bedrijf.nl"],subject:"Factuur #2025-001",body:"Beste klant, bijgevoegd vindt u de factuur voor de geleverde diensten. Betaaltermijn: 14 dagen.",status:"sent",priority:"normal",sentDate:new Date(Date.now()-4320*60*1e3).toISOString(),customerId:"c1",invoiceId:"inv1",employeeId:"emp1",isRead:!0,createdAt:new Date(Date.now()-4320*60*1e3).toISOString(),updatedAt:new Date(Date.now()-4320*60*1e3).toISOString()}],lH=[{id:"template1",name:"Offerte versturen",subject:"Offerte {{quoteNumber}} - {{customerName}}",body:`Beste {{customerName}},

Bijgevoegd vindt u onze offerte {{quoteNumber}} voor {{projectDescription}}.

Deze offerte is geldig tot {{validUntil}}.

Laat het weten als u vragen heeft.

Met vriendelijke groet,
{{employeeName}}`,category:"quote",isDefault:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"template2",name:"Factuur versturen",subject:"Factuur {{invoiceNumber}} - {{customerName}}",body:`Beste {{customerName}},

Bijgevoegd vindt u factuur {{invoiceNumber}} voor een totaalbedrag van {{totalAmount}}.

Betaaltermijn: {{paymentTerms}}.

Met vriendelijke groet,
{{employeeName}}`,category:"invoice",isDefault:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"template3",name:"Follow-up na offerte",subject:"Vervolg op offerte {{quoteNumber}}",body:`Beste {{customerName}},

Ik wilde even contact opnemen over de offerte {{quoteNumber}} die we hebben gestuurd.

Heeft u nog vragen of kunnen we u ergens mee helpen?

Met vriendelijke groet,
{{employeeName}}`,category:"followup",isDefault:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];function Xx(e){var k;const n=e.split(/\r?\n\r?\n/)[0],a=e.indexOf(`

`)!==-1?e.indexOf(`

`)+2:e.indexOf(`\r
\r
`)!==-1?e.indexOf(`\r
\r
`)+4:n.length,l=n.split(/\r?\n/),o={};let d="",m="";for(const E of l)if(/^\s/.test(E))m+=" "+E.trim();else{d&&(o[d.toLowerCase()]=m.trim());const M=E.indexOf(":");M!==-1&&(d=E.substring(0,M).trim().toLowerCase(),m=E.substring(M+1).trim())}d&&(o[d.toLowerCase()]=m.trim());function f(E){if(!E)return[];const M=/<?([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})>?/g,D=E.matchAll(M);return Array.from(D,R=>R[1])}const h=f(o.from||"")[0]||o.from||"",g=f(o.to||""),p=o.cc?f(o.cc):void 0,v=o.bcc?f(o.bcc):void 0,b=oH(o.subject||""),w=o.date||void 0,N=e.substring(a).trim(),S=o["content-type"]||"";let C="",O;if(S.includes("multipart/alternative")||S.includes("multipart/mixed")){const E=S.match(/boundary="?([^";\s]+)"?/);if(E){const M=E[1],D=N.split(`--${M}`);for(const R of D){if(R.trim()===""||R.trim()==="--")continue;const P=R.indexOf(`

`)!==-1?R.indexOf(`

`):R.indexOf(`\r
\r
`)!==-1?R.indexOf(`\r
\r
`):0,z=R.substring(0,P),U=R.substring(P).trim(),q=((k=z.match(/content-type:\s*([^\r\n]+)/i))==null?void 0:k[1])||"";q.includes("text/plain")&&!C?C=Cu(U,q):q.includes("text/html")&&!O&&(O=Cu(U,q))}}}else S.includes("text/html")?(O=Cu(N,S),C=hk(O)):C=Cu(N,S);return!C&&O&&(C=hk(O)),C=C.replace(/--[a-zA-Z0-9_-]+--?\s*$/gm,"").trim(),{from:h,to:g,cc:p,bcc:v,subject:b,body:C,htmlBody:O,date:w}}function oH(e){const r=/=\?([^?]+)\?([BQ])\?([^?]+)\?=/gi;return e.replace(r,(n,a,l,o)=>{try{if(l.toUpperCase()==="B")return atob(o);if(l.toUpperCase()==="Q")return o.replace(/=([0-9A-F]{2})/gi,(d,m)=>String.fromCharCode(parseInt(m,16))).replace(/_/g," ")}catch{console.warn("Failed to decode header:",n)}return n})}function Cu(e,r){let n=e;const a=r.match(/charset=([^;\s]+)/i);if(a&&a[1],r.includes("quoted-printable")&&(n=n.replace(/=\r?\n/g,""),n=n.replace(/=([0-9A-F]{2})/gi,(l,o)=>String.fromCharCode(parseInt(o,16)))),r.includes("base64"))try{n=atob(n.replace(/\s/g,""))}catch{console.warn("Failed to decode base64 body")}return n.trim()}function hk(e){return e.replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim()}const kO="email_customer_mappings";function CO(){try{const e=localStorage.getItem(kO);if(e)return JSON.parse(e)}catch(e){console.error("Error loading email mappings:",e)}return[]}function Xp(e,r){try{const a=CO().filter(l=>l.email.toLowerCase()!==e.toLowerCase());a.push({email:e.toLowerCase(),customerId:r,createdAt:new Date().toISOString()}),localStorage.setItem(kO,JSON.stringify(a))}catch(n){console.error("Error saving email mapping:",n)}}function DO(e){const n=CO().find(a=>a.email.toLowerCase()===e.toLowerCase());return n?n.customerId:null}const OO=({onCreateTask:e,onCreateOrder:r,onCreateNotification:n,onCreateInteraction:a,existingTasks:l=[],existingQuotes:o=[],existingInvoices:d=[],existingCustomers:m=[],existingLeads:f=[],currentUserId:h,onShowEmailPreview:g})=>{var q,Y,ee;const[p,v]=y.useState(!1),[b,w]=y.useState(!1),[N,S]=y.useState([]),C=y.useRef(null),O=y.useCallback(_=>{const G=_.subject.toLowerCase(),L=_.body.toLowerCase(),V=["order","bestel","bestelling","offerte","quote","prijs","prijsofferte","factuur","invoice"],Z=["vraag","question","help","hulp","follow-up","followup","herinnering","reminder","actie","action"],K=V.some(B=>G.includes(B)||L.includes(B)),de=Z.some(B=>G.includes(B)||L.includes(B));return K?"order":de?"task":"notification"},[]),k=y.useCallback(_=>{const G=DO(_);if(G){const Z=m==null?void 0:m.find(K=>K.id===G);if(Z)return{customerId:Z.id}}const L=m==null?void 0:m.find(Z=>{var K;return Z.email.toLowerCase()===_.toLowerCase()||((K=Z.emailAddresses)==null?void 0:K.some(de=>de.toLowerCase()===_.toLowerCase()))});if(L)return{customerId:L.id};const V=f==null?void 0:f.find(Z=>Z.email.toLowerCase()===_.toLowerCase());return V?{leadId:V.id}:{}},[m,f]),E=y.useCallback(async _=>{const G=new Date().toISOString(),L=`email_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{if(g)return g(_),{id:L,email:_,workflowType:"notification",timestamp:G,status:"success",message:`Email voorbereid voor verwerking: ${_.subject}`};const V=O(_);let Z,K="";const de=k(_.from);switch(V){case"order":if(r){const B={customerEmail:_.from,customerId:de.customerId,leadId:de.leadId,description:_.body,subject:_.subject,date:_.date||new Date().toISOString()};Z=await r(B),K=`Order ontvangen van ${_.from}`}else K=`Order gedetecteerd van ${_.from} (createOrder callback niet beschikbaar)`;break;case"task":if(e){const B={title:_.subject||"Nieuwe taak",description:`Email van ${_.from}:

${_.body}`,priority:"medium",status:"todo",dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],customerId:de.customerId};Z=await e(B),K=`Taak aangemaakt van email: ${_.subject}`}else K=`Taak gedetecteerd: ${_.subject} (createTask callback niet beschikbaar)`;break;case"notification":if(n){const B={message:`${_.subject}: Van ${_.from}: ${_.body.substring(0,200)}${_.body.length>200?"...":""}`,type:"info",read:!1,date:new Date().toISOString()};Z=await n(B),K=`Notificatie aangemaakt van ${_.from}`}else K=`Notificatie: ${_.subject} (createNotification callback niet beschikbaar)`;break}return a&&h&&await a({type:"email",subject:_.subject,description:_.body,date:new Date().toISOString(),employeeId:h,customerId:de.customerId,leadId:de.leadId}),{id:L,email:_,workflowType:V,workflowItemId:Z,timestamp:G,status:"success",message:K}}catch(V){return console.error("Error processing email:",V),{id:L,email:_,workflowType:"notification",timestamp:G,status:"error",message:`Fout bij verwerken: ${V instanceof Error?V.message:"Onbekende fout"}`}}},[O,r,e,n,a,k,h,g]);y.useEffect(()=>{var _,G;if(console.log(" EmailDropZone: Checking for Electron..."),console.log(" window.electronAPI:",window.electronAPI),console.log(" isElectron:",(_=window.electronAPI)==null?void 0:_.isElectron),typeof window<"u"&&((G=window.electronAPI)!=null&&G.isElectron)){console.log(" Electron detected! Setting up event listeners...");const L=de=>{var le,ye,ge,Ne;console.log(" Document drop event!");const B=Array.from(((le=de.dataTransfer)==null?void 0:le.types)||[]);if(console.log(" Document drop types:",B),B.includes("maillistrow")||B.includes("application/x-outlook-item")){console.log(" Document: Outlook drag detected!");try{const Me=((ye=de.dataTransfer)==null?void 0:ye.getData("maillistrow"))||((ge=de.dataTransfer)==null?void 0:ge.getData("application/x-outlook-item"));console.log(" Document: Outlook data:",Me?Me.substring(0,200):"NO DATA"),Me&&((Ne=window.electronAPI)!=null&&Ne.isElectron)&&(console.log(" Document: Calling handleOutlookDrag"),de.preventDefault(),de.stopPropagation(),window.electronAPI.handleOutlookDrag(Me))}catch(Me){console.error(" Document: Error handling Outlook drag:",Me)}}},V=de=>{var B;(B=de.dataTransfer)!=null&&B.types.includes("maillistrow")&&(de.preventDefault(),de.stopPropagation())};document.addEventListener("drop",L),document.addEventListener("dragover",V),console.log(" Document-level drop listeners added");const Z=async de=>{console.log(" React: email-dropped event received!"),console.log(" Event detail:",de.detail),console.log(" Event type:",de.detail.type),w(!0);try{if(de.detail.type==="eml"){console.log(" Processing .eml file...");const B=Xx(de.detail.content);if(console.log(" Parsed email:",B.from,B.subject),B.from&&B.subject){const le=await E(B);console.log(" Email processed successfully:",le.status),S(ye=>[le,...ye])}else console.error(" Parsed email missing from or subject")}else if(de.detail.type==="outlook"){console.log(" Processing Outlook email...");const B=de.detail.emailData;if(console.log(" Email data:",B),B.from||B.subject){const le={from:B.from||"unknown@example.com",to:Array.isArray(B.to)?B.to:B.to?[B.to]:[],subject:B.subject||"Geen onderwerp",body:B.body||"",date:B.date};console.log(" Created ParsedEmail:",le);const ye=await E(le);console.log(" Email processed successfully:",ye.status),S(ge=>[ye,...ge])}else console.error(" Email data missing from and subject")}else console.error(" Unknown event detail type:",de.detail.type)}catch(B){console.error(" Error handling dropped email:",B),S(le=>[{id:`error_${Date.now()}`,email:{from:"",to:[],subject:"Error",body:""},workflowType:"notification",timestamp:new Date().toISOString(),status:"error",message:`Fout bij verwerken: ${B instanceof Error?B.message:"Onbekende fout"}`},...le])}finally{w(!1)}},K=de=>{console.error(" React: email-error event received:",de.detail.error),S(B=>[{id:`error_${Date.now()}`,email:{from:"",to:[],subject:"Error",body:""},workflowType:"notification",timestamp:new Date().toISOString(),status:"error",message:de.detail.error||"Onbekende fout"},...B])};return window.addEventListener("email-dropped",Z),window.addEventListener("email-error",K),console.log(" Event listeners registered"),()=>{window.removeEventListener("email-dropped",Z),window.removeEventListener("email-error",K),document.removeEventListener("drop",L),document.removeEventListener("dragover",V)}}else console.log(" Not running in Electron, skipping Electron event listeners")},[E]);const M=y.useCallback(async _=>{w(!0);const G=[];for(const L of Array.from(_))if(L.name.endsWith(".eml")||L.type==="message/rfc822"||L.type==="")try{const V=await L.text(),Z=Xx(V);if(!Z.from||!Z.subject){G.push({id:`error_${Date.now()}`,email:Z,workflowType:"notification",timestamp:new Date().toISOString(),status:"error",message:`Ongeldig email formaat in ${L.name}. Van of onderwerp ontbreekt.`});continue}const K=await E(Z);G.push(K)}catch(V){G.push({id:`error_${Date.now()}`,email:{from:"",to:[],subject:L.name,body:""},workflowType:"notification",timestamp:new Date().toISOString(),status:"error",message:`Fout bij lezen van ${L.name}: ${V instanceof Error?V.message:"Onbekende fout"}`})}else G.push({id:`error_${Date.now()}`,email:{from:"",to:[],subject:L.name,body:""},workflowType:"notification",timestamp:new Date().toISOString(),status:"error",message:`${L.name} is geen .eml bestand. Sleep een email vanuit Outlook naar je desktop en gebruik dat bestand.`});S(L=>[...G,...L]),w(!1)},[E]),D=y.useCallback(_=>{_.preventDefault(),_.stopPropagation(),v(!0)},[]),R=y.useCallback(_=>{_.preventDefault(),_.stopPropagation(),!_.currentTarget.contains(_.relatedTarget)&&v(!1)},[]),P=y.useCallback(_=>{_.preventDefault(),_.stopPropagation(),_.dataTransfer.dropEffect="copy"},[]),z=y.useCallback(async _=>{var L;console.log(" EmailDropZone: handleDrop called"),console.log(" DataTransfer types:",Array.from(_.dataTransfer.types)),console.log(" Files:",_.dataTransfer.files.length);const G=Array.from(_.dataTransfer.types);if(console.log(" Checking types:",G),G.includes("maillistrow")||G.includes("application/x-outlook-item")){console.log(" EmailDropZone: Outlook drag detected!");try{const V=_.dataTransfer.getData("maillistrow")||_.dataTransfer.getData("application/x-outlook-item");if(console.log(" EmailDropZone: Outlook data:",V?V.substring(0,200):"NO DATA"),V&&((L=window.electronAPI)!=null&&L.isElectron)){console.log(" EmailDropZone: Calling handleOutlookDrag"),_.preventDefault(),_.stopPropagation(),v(!1),await window.electronAPI.handleOutlookDrag(V);return}else V||console.error(" EmailDropZone: No data received from Outlook drag")}catch(V){console.error(" EmailDropZone: Error handling Outlook drag:",V)}}_.preventDefault(),_.stopPropagation(),v(!1),_.dataTransfer.files&&_.dataTransfer.files.length>0?(console.log(" EmailDropZone: File drop detected"),await M(_.dataTransfer.files)):console.log(" EmailDropZone: No files and no Outlook data")},[M]),U=y.useCallback(async _=>{_.target.files&&(await M(_.target.files),_.target.value="")},[M]);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{onDragEnter:D,onDragLeave:R,onDragOver:_=>{_.preventDefault(),_.stopPropagation(),P(_)},onDrop:z,className:`
          relative p-8 border-2 rounded-lg text-center transition-all duration-200
          ${p?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-300 bg-gray-50 hover:border-gray-400"}
        `,style:{minHeight:"200px",pointerEvents:"auto"},children:[t.jsx("div",{className:"text-5xl mb-4",children:p?"":""}),t.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:p?"Laat maar vallen!":typeof window<"u"&&((q=window.electronAPI)!=null&&q.isElectron)?"Sleep hier je Outlook email":"Sleep hier je .eml bestanden"}),t.jsx("p",{className:"text-gray-600 mb-2",children:typeof window<"u"&&((Y=window.electronAPI)!=null&&Y.isElectron)?"Sleep direct een email vanuit Outlook hierheen!":"Sleep n of meerdere .eml bestanden hierheen."}),(typeof window>"u"||!((ee=window.electronAPI)!=null&&ee.isElectron))&&t.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[" ",t.jsx("strong",{children:"Tip:"})," Sleep een email vanuit Outlook naar je desktop om een .eml bestand te krijgen, sleep dat bestand dan hierheen. Of gebruik de Electron app voor directe Outlook integratie."]}),t.jsx("input",{ref:C,type:"file",accept:".eml,message/rfc822",multiple:!0,onChange:U,className:"hidden"}),t.jsx("button",{onClick:()=>{var _;return(_=C.current)==null?void 0:_.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",disabled:b,children:" Selecteer .eml Bestand"}),b&&t.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center rounded-lg",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Email verwerken..."})]})})]}),N.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("h4",{className:"font-semibold text-gray-800",children:["Verwerkte Emails (",N.length,")"]}),t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:N.map(_=>t.jsx("div",{className:`
                  p-4 rounded-lg border-l-4
                  ${_.status==="success"?"bg-green-50 border-green-500":"bg-red-50 border-red-500"}
                `,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-lg",children:_.status==="success"?"":""}),t.jsx("span",{className:"font-semibold text-gray-800",children:_.email.subject||"Geen onderwerp"}),t.jsxs("span",{className:`
                        px-2 py-1 rounded text-xs font-medium
                        ${_.workflowType==="order"?"bg-blue-100 text-blue-800":""}
                        ${_.workflowType==="task"?"bg-yellow-100 text-yellow-800":""}
                        ${_.workflowType==="notification"?"bg-purple-100 text-purple-800":""}
                      `,children:[_.workflowType==="order"?" Order":"",_.workflowType==="task"?" Taak":"",_.workflowType==="notification"?" Notificatie":""]})]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[t.jsx("strong",{children:"Van:"})," ",_.email.from]}),_.email.to&&t.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[t.jsx("strong",{children:"Naar:"})," ",Array.isArray(_.email.to)?_.email.to.join(", "):_.email.to]}),t.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[_.email.body.substring(0,150),_.email.body.length>150?"...":""]}),t.jsx("p",{className:"text-xs text-gray-500",children:_.message}),_.workflowItemId&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Workflow ID: ",_.workflowItemId]})]}),t.jsx("span",{className:"text-xs text-gray-400 ml-4",children:new Date(_.timestamp).toLocaleTimeString()})]})},_.id))})]})]})},cH=({inventory:e,sales:r,workOrders:n,notifications:a,setNotifications:l})=>{const o=e.filter(v=>v.quantity<=v.reorderLevel),d=r.reduce((v,b)=>v+b.total,0),m=n.filter(v=>v.status==="Pending").length,f=n.filter(v=>v.status==="In Progress").length,h=a.filter(v=>!v.read),g=v=>{l(a.map(b=>b.id===v?{...b,read:!0}:b))},p=v=>{switch(v){case"warning":return t.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"error":return t.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"success":return t.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral mb-2",children:"Dashboard"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-6",children:"Overzicht van uw bedrijfsactiviteiten"}),t.jsx("div",{className:"mb-8",children:t.jsx(OO,{})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Totale Verkopen"}),t.jsxs("p",{className:"text-2xl font-bold text-neutral mt-1",children:["",d.toFixed(2)]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Lage Voorraad"}),t.jsx("p",{className:"text-2xl font-bold text-neutral mt-1",children:o.length})]}),t.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Orders In Uitvoering"}),t.jsx("p",{className:"text-2xl font-bold text-neutral mt-1",children:f})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Orders In Wacht"}),t.jsx("p",{className:"text-2xl font-bold text-neutral mt-1",children:m})]}),t.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),h.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral",children:"Meldingen"}),t.jsxs("span",{className:"px-3 py-1 bg-red-100 text-red-800 text-sm font-semibold rounded-full",children:[h.length," nieuw"]})]}),t.jsx("div",{className:"space-y-3",children:h.slice(0,5).map(v=>t.jsx("div",{className:`p-4 rounded-lg border-l-4 ${v.type==="warning"?"bg-orange-50 border-orange-500":v.type==="error"?"bg-red-50 border-red-500":v.type==="success"?"bg-green-50 border-green-500":"bg-blue-50 border-blue-500"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[p(v.type),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-neutral",children:v.message}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(v.date).toLocaleString("nl-NL")})]})]}),t.jsx("button",{onClick:()=>g(v.id),className:"text-sm text-gray-600 hover:text-gray-800",children:""})]})},v.id))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Lage Voorraad Waarschuwingen"}),t.jsx("div",{className:"space-y-3",children:o.length===0?t.jsx("p",{className:"text-gray-500 text-sm",children:"Alle voorraad niveaus zijn voldoende."}):o.map(v=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-neutral",children:v.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",v.sku]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-sm font-semibold text-orange-600",children:[v.quantity," stuks"]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",v.reorderLevel]})]})]},v.id))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Recente Werkorders"}),t.jsx("div",{className:"space-y-3",children:n.slice(0,5).map(v=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-neutral",children:v.title}),t.jsx("p",{className:"text-sm text-gray-600",children:v.description})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${v.status==="Completed"?"bg-green-100 text-green-800":v.status==="In Progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:v.status})]},v.id))})]})]})]})},dH=({inventory:e,setInventory:r,isAdmin:n,webshopProducts:a=[],setWebshopProducts:l,categories:o=[],setCategories:d})=>{var Fe;const[m,f]=y.useState(""),[h,g]=y.useState(!1),[p,v]=y.useState(null),[b,w]=y.useState(!1),[N,S]=y.useState(!1),[C,O]=y.useState("items"),[k,E]=y.useState(""),[M,D]=y.useState(""),[R,P]=y.useState(!1),[z,U]=y.useState([]),q=o.length>0?o:z,Y=d||U,[ee,_]=y.useState(!1),[G,L]=y.useState(null),[V,Z]=y.useState({name:"",description:"",color:"#3B82F6"}),[K,de]=y.useState(!1),[B,le]=y.useState([]),[ye,ge]=y.useState(!1),[Ne,Me]=y.useState(null),[ce,Le]=y.useState({name:"",contactPerson:"",email:"",phone:"",address:"",averageLeadTime:7,notes:""}),[X,Re]=y.useState({name:"",sku:"",quantity:0,reorderLevel:0,supplierId:void 0,supplier:"",purchasePrice:0,salePrice:0,margin:0,vatRate:"21",customVatRate:void 0,syncEnabled:!1,webshopId:void 0,webshopProductId:void 0,unit:"stuk",price:0,posAlertNote:void 0,supplierSku:"",autoSku:"",customSku:"",categoryId:void 0}),at=(F,se)=>!F||F===0?0:Math.round((se-F)/F*100*10)/10,je=(F,se,oe)=>{const Pe=se==="custom"?oe||0:parseFloat(se);return F*(1+Pe/100)},vt=F=>F.vatRate==="custom"?F.customVatRate||0:parseFloat(F.vatRate),Xe=()=>`INV-${(e.reduce((oe,Pe)=>{const $e=Pe.autoSku||Pe.sku;if($e&&$e.startsWith("INV-")){const Ct=parseInt($e.replace("INV-",""))||0;return Math.max(oe,Ct)}return oe},0)+1).toString().padStart(4,"0")}`,ut=y.useMemo(()=>{let F=e;if(k&&(F=F.filter(se=>se.categoryId===k)),m){const se=m.toLowerCase();F=F.filter(oe=>{var Pe,$e,Ct,it,Ke,xt,Ar,ur,jn,mn,Tt,Pr;return!!(oe.name.toLowerCase().includes(se)||(Pe=oe.sku)!=null&&Pe.toLowerCase().includes(se)||($e=oe.supplierSku)!=null&&$e.toLowerCase().includes(se)||(Ct=oe.autoSku)!=null&&Ct.toLowerCase().includes(se)||(it=oe.customSku)!=null&&it.toLowerCase().includes(se)||(Ke=oe.location)!=null&&Ke.toLowerCase().includes(se)||(xt=oe.unit)!=null&&xt.toLowerCase().includes(se)||(Ar=oe.supplier)!=null&&Ar.toLowerCase().includes(se)||oe.supplierId&&((ur=B.find($t=>$t.id===oe.supplierId))!=null&&ur.name.toLowerCase().includes(se))||oe.categoryId&&((jn=q.find($t=>$t.id===oe.categoryId))!=null&&jn.name.toLowerCase().includes(se))||(mn=oe.purchasePrice)!=null&&mn.toString().includes(se)||(Tt=oe.salePrice)!=null&&Tt.toString().includes(se)||(Pr=oe.posAlertNote)!=null&&Pr.toLowerCase().includes(se))})}return F},[e,m,k,B,q]),pt=y.useMemo(()=>{if(!M)return q;const F=M.toLowerCase();return q.filter(se=>{var oe;return se.name.toLowerCase().includes(F)||((oe=se.description)==null?void 0:oe.toLowerCase().includes(F))})},[q,M]),bt=y.useMemo(()=>{const F=new Date;F.getMonth(),F.getFullYear();const se=e.filter($e=>$e.vatRate==="21"&&$e.salePrice).reduce(($e,Ct)=>{const it=Ct.salePrice*.21;return $e+it},0),oe=e.filter($e=>$e.vatRate==="9"&&$e.salePrice).reduce(($e,Ct)=>{const it=Ct.salePrice*.09;return $e+it},0),Pe=e.filter($e=>$e.vatRate==="0"&&$e.salePrice).reduce(($e,Ct)=>Ct.salePrice||0,0);return{vat21:Math.round(se*100)/100,vat9:Math.round(oe*100)/100,vat0:Math.round(Pe*100)/100,total:Math.round((se+oe)*100)/100}},[e]),nr=F=>{const se=e.find(Pe=>Pe.id===F);if(!se||!l||!a){alert(" Webshop sync is niet beschikbaar (webshop module niet geladen)");return}const oe=a.find(Pe=>Pe.inventoryItemId===F||Pe.sku===se.sku);if(oe){const Pe=a.map($e=>$e.id===oe.id?{...$e,stockQuantity:se.quantity,price:je(se.salePrice,se.vatRate,se.customVatRate),updatedAt:new Date().toISOString()}:$e);l(Pe),r(e.map($e=>$e.id===F?{...$e,webshopProductId:oe.id,webshopId:oe.id,syncEnabled:!0}:$e)),alert(` Webshop product "${oe.name}" bijgewerkt met nieuwe voorraad: ${se.quantity} stuks`)}else{const Pe={id:Date.now().toString(),name:se.name,slug:se.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),description:`${se.name} - ${se.unit||"stuk"}`,shortDescription:se.name,sku:se.sku,price:je(se.salePrice,se.vatRate,se.customVatRate),stockQuantity:se.quantity,lowStockThreshold:se.reorderLevel||5,trackInventory:!0,inventoryItemId:F,categoryIds:[],hasVariants:!1,variants:[],images:[],status:"draft",visibility:"public",tags:[],shippingRequired:!0,requireShipping:!0,digitalProduct:!1,allowReviews:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};l([...a,Pe]),r(e.map($e=>$e.id===F?{...$e,webshopProductId:Pe.id,webshopId:Pe.id,syncEnabled:!0}:$e)),alert(` Nieuw webshop product aangemaakt: "${se.name}" met voorraad: ${se.quantity} stuks`)}};y.useEffect(()=>{if(!l||!a)return;e.filter(se=>se.syncEnabled&&se.webshopProductId).forEach(se=>{a.find(Pe=>Pe.id===se.webshopProductId)&&l(a.map(Pe=>Pe.id===se.webshopProductId?{...Pe,stockQuantity:se.quantity,updatedAt:new Date().toISOString()}:Pe))})},[e.filter(F=>F.syncEnabled).map(F=>F.quantity).join(",")]);const zt=()=>{if(!V.name){alert(" Vul ten minste een categorienaam in.");return}const F={id:Date.now().toString(),name:V.name,description:V.description,color:V.color||"#3B82F6",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},se=K;Y([...q,F]),se&&Re({...X,categoryId:F.id}),Z({name:"",description:"",color:"#3B82F6"}),_(!1),de(!1),alert(` Categorie "${F.name}" toegevoegd!${se?" Categorie is automatisch geselecteerd voor dit item.":""}`)},te=()=>{if(!G||!G.name){alert(" Vul ten minste een categorienaam in.");return}Y(q.map(F=>F.id===G.id?{...G,updatedAt:new Date().toISOString()}:F)),L(null),_(!1),alert(" Categorie bijgewerkt!")},Te=F=>{const se=q.find(Pe=>Pe.id===F);if(!se)return;const oe=e.filter(Pe=>Pe.categoryId===F);if(oe.length>0){if(!window.confirm(` Deze categorie wordt gebruikt door ${oe.length} item(s). Wil je de categorie toch verwijderen? De items verliezen hun categorie koppeling.`))return;r(e.map($e=>$e.categoryId===F?{...$e,categoryId:void 0}:$e))}Y(q.filter(Pe=>Pe.id!==F)),alert(` Categorie "${se.name}" verwijderd!`)},_e=()=>{if(!X.name||!X.salePrice){alert(" Vul ten minste naam en verkoopprijs in.");return}const F=X.autoSku||Xe(),se=X.purchasePrice&&X.purchasePrice>0?at(X.purchasePrice,X.salePrice):0,oe={...X,id:Date.now().toString(),sku:F,autoSku:F,salePrice:X.salePrice||0,margin:se,vatRate:X.vatRate||"21",syncEnabled:X.syncEnabled||!1,quantity:X.quantity||0,reorderLevel:X.reorderLevel||0,unit:X.unit||"stuk",price:X.salePrice,supplier:X.supplier||"",posAlertNote:X.posAlertNote||void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([...e,oe]),Re({name:"",sku:"",quantity:0,reorderLevel:0,salePrice:0,purchasePrice:0,vatRate:"21",syncEnabled:!1,unit:"stuk",posAlertNote:void 0,supplierSku:"",autoSku:"",customSku:"",categoryId:void 0}),g(!1),de(!1),alert(` Item "${oe.name}" succesvol toegevoegd!`)},qe=F=>{v(F),Re({...F,purchasePrice:F.purchasePrice||0,salePrice:F.salePrice||F.price||0,supplierSku:F.supplierSku||"",autoSku:F.autoSku||F.sku||Xe(),customSku:F.customSku||"",categoryId:F.categoryId||void 0}),g(!0)},Ye=()=>{if(!p||!X.name||!X.salePrice){alert(" Vul ten minste naam en verkoopprijs in.");return}const F=X.purchasePrice&&X.purchasePrice>0?at(X.purchasePrice,X.salePrice):0,se={...p,...X,salePrice:X.salePrice||0,margin:F,price:X.salePrice,updatedAt:new Date().toISOString()};r(e.map(oe=>oe.id===p.id?se:oe)),v(null),g(!1),Re({name:"",sku:"",quantity:0,reorderLevel:0,salePrice:0,purchasePrice:0,vatRate:"21",syncEnabled:!1,unit:"stuk",posAlertNote:void 0,supplierSku:"",autoSku:"",customSku:"",categoryId:void 0}),alert(` Item "${se.name}" succesvol bijgewerkt!`)},st=(F,se)=>{r(e.map(oe=>oe.id===F?{...oe,quantity:Math.max(0,oe.quantity+se),updatedAt:new Date().toISOString()}:oe))},H=F=>{const se=e.find(oe=>oe.id===F);se&&confirm(`Weet u zeker dat u "${se.name}" wilt verwijderen?`)&&(r(e.filter(oe=>oe.id!==F)),alert(" Item verwijderd."))},Ae=()=>{if(!ce.name){alert(" Vul ten minste de naam in.");return}const F={id:Date.now().toString(),name:ce.name,contactPerson:ce.contactPerson,email:ce.email,phone:ce.phone,address:ce.address,averageLeadTime:ce.averageLeadTime||7,notes:ce.notes,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};le([...B,F]),Le({name:"",contactPerson:"",email:"",phone:"",address:"",averageLeadTime:7,notes:""}),ge(!1),alert(` Leverancier "${F.name}" toegevoegd!`)},Ee=F=>{Me(F),Le({...F}),ge(!0)},W=()=>{if(!Ne||!ce.name){alert(" Vul ten minste de naam in.");return}const F={...Ne,...ce,updatedAt:new Date().toISOString()};le(B.map(se=>se.id===Ne.id?F:se)),Me(null),ge(!1),Le({name:"",contactPerson:"",email:"",phone:"",address:"",averageLeadTime:7,notes:""}),alert(` Leverancier "${F.name}" bijgewerkt!`)},me=F=>{const se=B.find(oe=>oe.id===F);if(se){const oe=e.filter(Pe=>Pe.supplierId===F||Pe.supplier===se.name);if(oe.length>0){alert(` Deze leverancier wordt gebruikt door ${oe.length} item(s). Verwijder eerst de koppelingen.`);return}confirm(`Weet u zeker dat u "${se.name}" wilt verwijderen?`)&&(le(B.filter(Pe=>Pe.id!==F)),alert(" Leverancier verwijderd."))}},Ve=(F,se)=>{if(F){const oe=B.find(Pe=>Pe.id===F);return(oe==null?void 0:oe.name)||"Onbekend"}return se||"Geen leverancier"},We=y.useMemo(()=>e.filter(F=>F.quantity<=F.reorderLevel),[e]);return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 sm:mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral",children:"Voorraadbeheer"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"NL-Compliant voorraadbeheer met BTW-instellingen en webshop sync"})]}),n&&C==="items"&&t.jsx("button",{onClick:()=>{v(null),Re({name:"",sku:"",quantity:0,reorderLevel:0,salePrice:0,purchasePrice:0,vatRate:"21",syncEnabled:!1,unit:"stuk",posAlertNote:void 0,supplierSku:"",autoSku:"",customSku:"",categoryId:void 0}),g(!h),de(!1)},className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors whitespace-nowrap",children:"+ Nieuw Item"})]}),t.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4 mb-6",children:t.jsx("div",{className:"flex items-start gap-3",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-green-800 mb-1",children:" BTW Overzicht Deze Maand"}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mt-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-600",children:"BTW 21%"}),t.jsxs("p",{className:"text-lg font-bold text-green-700",children:["",bt.vat21.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-600",children:"BTW 9%"}),t.jsxs("p",{className:"text-lg font-bold text-green-700",children:["",bt.vat9.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-600",children:"BTW Vrij"}),t.jsxs("p",{className:"text-lg font-bold text-green-700",children:["",bt.vat0.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-green-600",children:"Totaal BTW"}),t.jsxs("p",{className:"text-lg font-bold text-green-800",children:["",bt.total.toFixed(2)]})]})]}),t.jsx("p",{className:"text-xs text-green-600 mt-2",children:" Klaar voor BTW-aangifte - Alle bedragen zijn berekend conform NL-regels"})]})})}),t.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>O("items"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${C==="items"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:[" Items (",e.length,")"]}),t.jsxs("button",{onClick:()=>O("suppliers"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${C==="suppliers"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:[" Leveranciers (",B.length,")"]}),t.jsx("button",{onClick:()=>O("reports"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${C==="reports"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:" Rapportages"}),t.jsxs("button",{onClick:()=>O("categories"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${C==="categories"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:[" Categorien (",q.length,")"]})]}),C==="items"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",style:{minWidth:"200px",maxWidth:"300px"},children:[t.jsx("button",{type:"button",onClick:()=>{P(!R),D("")},className:`w-full px-4 py-2 text-left border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors ${k?"bg-primary text-white border-primary":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:k?((Fe=q.find(F=>F.id===k))==null?void 0:Fe.name)||"Categorie":" Filter op categorie..."}),t.jsx("span",{className:"text-xs",children:""})]})}),R&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>P(!1)}),t.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsx("input",{type:"text",placeholder:"Zoek categorie...",value:M,onChange:F=>D(F.target.value),onClick:F=>F.stopPropagation(),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})}),t.jsxs("div",{className:"overflow-y-auto max-h-48",children:[t.jsx("button",{type:"button",onClick:()=>{E(""),P(!1),D("")},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 transition-colors ${k?"":"bg-blue-50 font-semibold"}`,children:t.jsx("span",{className:"text-gray-600",children:"Alle categorien"})}),pt.length===0?t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Geen categorien gevonden"}):pt.map(F=>t.jsxs("button",{type:"button",onClick:()=>{E(F.id),P(!1),D("")},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 transition-colors flex items-center gap-2 ${k===F.id?"bg-blue-50 font-semibold":""}`,children:[t.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:F.color||"#3B82F6"}}),t.jsx("span",{children:F.name}),t.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["(",e.filter(se=>se.categoryId===F.id).length,")"]})]},F.id))]})]})]})]}),k&&t.jsx("button",{type:"button",onClick:()=>{E(""),D("")},className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:" Wis filter"})]}),t.jsx("div",{className:"mb-6",children:t.jsx("input",{type:"text",placeholder:"Zoek op naam, SKU, locatie, leverancier, categorie, prijs, etc...",value:m,onChange:F=>f(F.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})}),We.length>0&&t.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-semibold text-orange-800 mb-2",children:[" ",We.length," Item(s) met Lage Voorraad"]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[We.slice(0,5).map(F=>t.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:[F.name," (",F.quantity," ",F.unit,")"]},F.id)),We.length>5&&t.jsxs("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:["+",We.length-5," meer..."]})]})]}),n&&t.jsx("button",{onClick:()=>{const F=We.map(se=>`${se.name}: ${se.reorderLevel*2} ${se.unit} nodig, leverancier: ${Ve(se.supplierId,se.supplier)}`).join(`
`);alert(` Bestel Suggestie:

${F}

(In productie: PDF export functionaliteit)`)},className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium whitespace-nowrap",children:" Bestel Suggestie"})]})}),(h||p)&&n&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:p?" Item Bewerken":" Nieuw Item Toevoegen"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Basis Informatie"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Naam ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:X.name||"",onChange:F=>Re({...X,name:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Bijv. Staal plaat 10mm"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU Leverancier"}),t.jsx("input",{type:"text",value:X.supplierSku||"",onChange:F=>Re({...X,supplierSku:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"SKU van leverancier (optioneel)"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"SKU zoals leverancier deze gebruikt"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Automatische SKU (Project)"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",value:X.autoSku||Xe(),onChange:F=>Re({...X,autoSku:F.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-gray-50",placeholder:"INV-0001",readOnly:!p}),!p&&t.jsx("button",{type:"button",onClick:()=>Re({...X,autoSku:Xe()}),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm",children:" Genereer"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatisch gegenereerde SKU (INV-XXXX)"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aangepaste SKU"}),t.jsx("input",{type:"text",value:X.customSku||"",onChange:F=>Re({...X,customSku:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Vrij invulbare SKU (optioneel)"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Extra SKU voor eigen gebruik"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categorie"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:X.categoryId||"",onChange:F=>Re({...X,categoryId:F.target.value||void 0}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen categorie"}),q.map(F=>t.jsx("option",{value:F.id,children:F.name},F.id))]}),t.jsx("button",{type:"button",onClick:()=>{de(!0),Z({name:"",description:"",color:"#3B82F6"})},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary text-sm whitespace-nowrap",children:"+ Nieuwe Categorie"})]}),K&&t.jsxs("div",{className:"mt-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Nieuwe Categorie Aanmaken"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("input",{type:"text",placeholder:"Categorienaam *",value:V.name||"",onChange:F=>Z({...V,name:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm"}),t.jsx("input",{type:"text",placeholder:"Beschrijving (optioneel)",value:V.description||"",onChange:F=>Z({...V,description:F.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"color",value:V.color||"#3B82F6",onChange:F=>Z({...V,color:F.target.value}),className:"w-16 h-10 border border-gray-300 rounded-lg cursor-pointer"}),t.jsx("button",{type:"button",onClick:()=>{const F=V.name;if(!F){alert(" Vul een categorienaam in.");return}const se={id:Date.now().toString(),name:F,description:V.description,color:V.color||"#3B82F6",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Y([...q,se]),Re({...X,categoryId:se.id}),Z({name:"",description:"",color:"#3B82F6"}),de(!1),alert(` Categorie "${se.name}" toegevoegd en geselecteerd!`)},className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm",children:" Toevoegen"}),t.jsx("button",{type:"button",onClick:()=>{de(!1),Z({name:"",description:"",color:"#3B82F6"})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 text-sm",children:"Annuleren"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eenheid"}),t.jsxs("select",{value:X.unit||"stuk",onChange:F=>Re({...X,unit:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"stuk",children:"Stuk"}),t.jsx("option",{value:"meter",children:"Meter"}),t.jsx("option",{value:"kg",children:"Kilogram"}),t.jsx("option",{value:"liter",children:"Liter"}),t.jsx("option",{value:"m2",children:"Vierkante meter"}),t.jsx("option",{value:"doos",children:"Doos"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Locatie"}),t.jsx("input",{type:"text",value:X.location||"",onChange:F=>Re({...X,location:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"A1, B2, etc."})]})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Prijsstructuur (NL-Compliant)"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aankoopprijs ( excl. BTW)"}),t.jsx("input",{type:"number",step:"0.01",value:X.purchasePrice||0,onChange:F=>{const se=parseFloat(F.target.value)||0,oe=X.salePrice||0,Pe=se>0?at(se,oe):0;Re({...X,purchasePrice:se,margin:Pe})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0.00"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Inkoopprijs van leverancier"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Verkoopprijs ( excl. BTW)"," ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",step:"0.01",value:X.salePrice||0,onChange:F=>{const se=parseFloat(F.target.value)||0,oe=X.purchasePrice||0,Pe=oe>0?at(oe,se):0;Re({...X,salePrice:se,margin:Pe})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0.00",required:!0}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Verkoopprijs exclusief BTW"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Marge (%)"}),t.jsx("input",{type:"number",step:"0.1",value:X.margin||0,readOnly:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:X.margin&&X.margin>0?`Automatisch berekend: ${X.margin}%`:"Bereken automatisch uit aankoop/verkoop"})]}),X.salePrice&&X.vatRate&&t.jsxs("div",{className:"sm:col-span-2 lg:col-span-3 bg-white rounded-lg p-3 border border-gray-200",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:[" Prijs Inclusief BTW:",t.jsxs("span",{className:"text-lg font-bold text-green-600 ml-2",children:["",je(X.salePrice,X.vatRate,X.customVatRate).toFixed(2)]})]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["BTW (",vt({...X,vatRate:X.vatRate||"21",customVatRate:X.customVatRate}),"%): ",(je(X.salePrice,X.vatRate,X.customVatRate)-X.salePrice).toFixed(2)]})]})]})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" BTW-instellingen (NL-Compliant)"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["BTW-tarief ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:X.vatRate||"21",onChange:F=>Re({...X,vatRate:F.target.value,customVatRate:F.target.value==="custom"?X.customVatRate:void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"21",children:"Standaard 21%"}),t.jsx("option",{value:"9",children:"Verlaagd 9%"}),t.jsx("option",{value:"0",children:"Vrij 0% (Export)"}),t.jsx("option",{value:"custom",children:"Custom percentage"})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Volgt Belastingdienst-regels"})]}),X.vatRate==="custom"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom BTW-percentage (%)"}),t.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:X.customVatRate||0,onChange:F=>Re({...X,customVatRate:parseFloat(F.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0.00"})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Voorraad"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aantal"}),t.jsx("input",{type:"number",value:X.quantity||0,onChange:F=>Re({...X,quantity:parseInt(F.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Herbestel Niveau"}),t.jsx("input",{type:"number",value:X.reorderLevel||0,onChange:F=>Re({...X,reorderLevel:parseInt(F.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Waarschuwing bij deze hoeveelheid"})]})]})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Koppelingen"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leverancier"}),B.length>0?t.jsxs("select",{value:X.supplierId||"",onChange:F=>{const se=B.find(oe=>oe.id===F.target.value);Re({...X,supplierId:F.target.value||void 0,supplier:(se==null?void 0:se.name)||""})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen leverancier"}),B.map(F=>t.jsx("option",{value:F.id,children:F.name},F.id))]}):t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:X.supplier||"",onChange:F=>Re({...X,supplier:F.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Naam leverancier"}),t.jsx("button",{type:"button",onClick:()=>{O("suppliers"),ge(!0)},className:"px-3 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors text-sm",title:"Maak nieuwe leverancier",children:"+"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[t.jsx("input",{type:"checkbox",checked:X.syncEnabled||!1,onChange:F=>Re({...X,syncEnabled:F.target.checked}),className:"w-5 h-5 text-primary",id:"syncEnabled"}),t.jsx("label",{htmlFor:"syncEnabled",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Automatisch sync met Webshop"})]}),X.syncEnabled&&a&&t.jsx("div",{className:"sm:col-span-2 bg-white rounded-lg p-3 border border-gray-200",children:t.jsx("p",{className:"text-xs text-gray-600",children:" Voorraad wordt automatisch gesynchroniseerd met webshop. Bij wijzigingen wordt het webshop product bijgewerkt."})})]})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Kassa/Pakbon Alert Notitie"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alert Notitie (optioneel)"}),t.jsx("textarea",{value:X.posAlertNote||"",onChange:F=>Re({...X,posAlertNote:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Bijv. Vergeet verzendkosten niet! Of: Controleer garantievoorwaarden.",rows:3}),t.jsx("p",{className:"text-xs text-orange-700 mt-2",children:" Deze notitie verschijnt als alert wanneer dit product wordt toegevoegd aan de winkelwagen in de kassa/pakbon. Het product krijgt een licht oranje kleur in de kassa."})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:[p?t.jsx("button",{onClick:Ye,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Bijwerken"}):t.jsx("button",{onClick:_e,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Toevoegen"}),t.jsx("button",{onClick:()=>{g(!1),v(null),Re({name:"",sku:"",quantity:0,reorderLevel:0,salePrice:0,purchasePrice:0,vatRate:"21",syncEnabled:!1,unit:"stuk"})},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden overflow-x-auto",children:t.jsxs("table",{className:"w-full min-w-[800px]",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Naam"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"SKU (Auto)"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"SKU (Leverancier)"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"SKU (Aangepast)"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Categorie"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Voorraad"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Aankoop "}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Verkoop "}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Marge %"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"BTW"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Incl. BTW"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Leverancier"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Status"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Sync"}),n&&t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Acties"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:ut.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:n?15:14,className:"px-6 py-12 text-center text-gray-500",children:"Geen items gevonden"})}):ut.map(F=>{const se=vt(F),oe=je(F.salePrice,F.vatRate,F.customVatRate),Pe=F.quantity<=F.reorderLevel,$e=F.categoryId?q.find(it=>it.id===F.categoryId):null,Ct=F.autoSku||F.sku;return t.jsxs("tr",{className:`hover:bg-gray-50 ${Pe?"bg-red-50":""} ${n?"cursor-pointer":""}`,onDoubleClick:()=>{n&&qe(F)},title:n?"Dubbelklik om te bewerken":"",children:[t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm font-medium text-neutral",children:F.name}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-600 font-mono",children:Ct||"-"}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-500",children:F.supplierSku||"-"}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-500",children:F.customSku||"-"}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm",children:$e?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded text-white",style:{backgroundColor:$e.color||"#3B82F6"},children:$e.name}):t.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),t.jsxs("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-600",children:[F.quantity," ",F.unit]}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-600",children:F.purchasePrice?`${F.purchasePrice.toFixed(2)}`:"-"}),t.jsxs("td",{className:"px-4 sm:px-6 py-4 text-sm font-medium text-gray-700",children:["",F.salePrice.toFixed(2)]}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm",children:F.margin&&F.margin>0?t.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded ${F.margin>=30?"bg-green-100 text-green-800":F.margin>=20?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[F.margin,"%"]}):t.jsx("span",{className:"text-gray-400",children:"-"})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm",children:t.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded ${F.vatRate==="21"?"bg-blue-100 text-blue-800":F.vatRate==="9"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:[se,"%"]})}),t.jsxs("td",{className:"px-4 sm:px-6 py-4 text-sm font-semibold text-green-600",children:["",oe.toFixed(2)]}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-gray-600",children:Ve(F.supplierId,F.supplier)}),t.jsx("td",{className:"px-4 sm:px-6 py-4",children:Pe?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full",children:" Laag"}):t.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full",children:" OK"})}),t.jsx("td",{className:"px-4 sm:px-6 py-4",children:F.syncEnabled?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full",children:" Sync"}):t.jsx("button",{onClick:()=>nr(F.id),className:"px-2 py-1 text-xs bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",title:"Sync naar webshop",children:"Sync"})}),n&&t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>qe(F),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs",title:"Bewerken",children:""}),t.jsx("button",{onClick:()=>st(F.id,10),className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-xs",title:"+10",children:"+10"}),t.jsx("button",{onClick:()=>st(F.id,-10),className:"px-3 py-1 bg-orange-500 text-white rounded hover:bg-orange-600 text-xs",title:"-10",children:"-10"}),t.jsx("button",{onClick:()=>H(F.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-xs",title:"Verwijderen",children:""})]})})]},F.id)})})]})})]}),C==="suppliers"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral",children:"Leveranciers Beheer"}),n&&t.jsx("button",{onClick:()=>{Me(null),Le({name:"",contactPerson:"",email:"",phone:"",address:"",averageLeadTime:7,notes:""}),ge(!0)},className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Leverancier"})]}),(ye||Ne)&&n&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-neutral mb-4",children:Ne?" Leverancier Bewerken":" Nieuwe Leverancier"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"sm:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Naam ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:ce.name||"",onChange:F=>Le({...ce,name:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Bijv. Metaalhandel BV"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contactpersoon"}),t.jsx("input",{type:"text",value:ce.contactPerson||"",onChange:F=>Le({...ce,contactPerson:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),t.jsx("input",{type:"email",value:ce.email||"",onChange:F=>Le({...ce,email:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefoon"}),t.jsx("input",{type:"tel",value:ce.phone||"",onChange:F=>Le({...ce,phone:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adres"}),t.jsx("input",{type:"text",value:ce.address||"",onChange:F=>Le({...ce,address:F.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gem. Levertijd (dagen)"}),t.jsx("input",{type:"number",value:ce.averageLeadTime||7,onChange:F=>Le({...ce,averageLeadTime:parseInt(F.target.value)||7}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:ce.notes||"",onChange:F=>Le({...ce,notes:F.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:[Ne?t.jsx("button",{onClick:W,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Bijwerken"}):t.jsx("button",{onClick:Ae,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Toevoegen"}),t.jsx("button",{onClick:()=>{ge(!1),Me(null),Le({name:"",contactPerson:"",email:"",phone:"",address:"",averageLeadTime:7,notes:""})},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]}),B.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[t.jsx("p",{className:"text-gray-500 text-lg mb-4",children:" Nog geen leveranciers"}),t.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Voeg leveranciers toe om items te koppelen en bestel suggesties te genereren."})]}):t.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Naam"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Contact"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Gem. Levertijd"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Items"}),n&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Acties"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:B.map(F=>{const se=e.filter(oe=>oe.supplierId===F.id||oe.supplier===F.name).length;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 text-sm font-medium text-neutral",children:F.name}),t.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[F.contactPerson&&t.jsx("p",{children:F.contactPerson}),F.email&&t.jsx("p",{className:"text-xs text-gray-500",children:F.email}),F.phone&&t.jsx("p",{className:"text-xs text-gray-500",children:F.phone})]}),t.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[F.averageLeadTime||7," dagen"]}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsxs("span",{className:"px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 rounded",children:[se," item",se!==1?"s":""]})}),n&&t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ee(F),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs",children:""}),t.jsx("button",{onClick:()=>me(F.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-xs",children:""})]})})]},F.id)})})]})})]}),C==="categories"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral",children:"Categorien Beheer"}),n&&t.jsx("button",{onClick:()=>{L(null),Z({name:"",description:"",color:"#3B82F6"}),_(!0)},className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Categorie"})]}),(ee||G)&&n&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-neutral mb-4",children:G?" Categorie Bewerken":" Nieuwe Categorie"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"sm:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Naam ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:G?G.name:V.name||"",onChange:F=>{G?L({...G,name:F.target.value}):Z({...V,name:F.target.value})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Bijv. Metaal, Hout, Elektronica"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschrijving"}),t.jsx("textarea",{value:G?G.description||"":V.description||"",onChange:F=>{G?L({...G,description:F.target.value}):Z({...V,description:F.target.value})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",rows:3,placeholder:"Optionele beschrijving van de categorie"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kleur"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"color",value:G?G.color||"#3B82F6":V.color||"#3B82F6",onChange:F=>{G?L({...G,color:F.target.value}):Z({...V,color:F.target.value})},className:"w-16 h-10 border border-gray-300 rounded-lg cursor-pointer"}),t.jsx("input",{type:"text",value:G?G.color||"#3B82F6":V.color||"#3B82F6",onChange:F=>{G?L({...G,color:F.target.value}):Z({...V,color:F.target.value})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"#3B82F6"})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[G?t.jsx("button",{onClick:te,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Bijwerken"}):t.jsx("button",{onClick:zt,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Toevoegen"}),t.jsx("button",{onClick:()=>{_(!1),L(null),Z({name:"",description:"",color:"#3B82F6"})},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]}),q.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[t.jsx("p",{className:"text-gray-500 text-lg mb-4",children:" Nog geen categorien"}),t.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Voeg categorien toe om je voorraad te organiseren en makkelijker te vinden."})]}):t.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Kleur"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Naam"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Beschrijving"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Items"}),n&&t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Acties"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:q.map(F=>{const se=e.filter(oe=>oe.categoryId===F.id).length;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300",style:{backgroundColor:F.color||"#3B82F6"}})}),t.jsx("td",{className:"px-6 py-4 text-sm font-medium text-neutral",children:F.name}),t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:F.description||t.jsx("span",{className:"text-gray-400 italic",children:"Geen beschrijving"})}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsxs("span",{className:"px-2 py-1 text-xs font-semibold bg-blue-100 text-blue-800 rounded",children:[se," item",se!==1?"s":""]})}),n&&t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{L(F),_(!0)},className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs",children:""}),t.jsx("button",{onClick:()=>Te(F.id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-xs",children:""})]})})]},F.id)})})]})})]}),C==="reports"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral",children:"Voorraad Rapportages"}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:" BTW Rapport"}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"BTW 21%"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",bt.vat21.toFixed(2)]})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"BTW 9%"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",bt.vat9.toFixed(2)]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"BTW Vrij"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-600",children:["",bt.vat0.toFixed(2)]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totaal BTW"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",bt.total.toFixed(2)]})]})]}),t.jsx("div",{className:"mt-4 pt-4 border-t",children:t.jsx("button",{onClick:()=>{const F=`BTW Rapport - ${new Date().toLocaleDateString("nl-NL")}

BTW 21%,${bt.vat21.toFixed(2)}
BTW 9%,${bt.vat9.toFixed(2)}
BTW Vrij,${bt.vat0.toFixed(2)}
Totaal BTW,${bt.total.toFixed(2)}`,se=new Blob([F],{type:"text/csv"}),oe=window.URL.createObjectURL(se),Pe=document.createElement("a");Pe.href=oe,Pe.download=`btw-rapport-${new Date().toISOString().split("T")[0]}.csv`,Pe.click(),alert(" CSV bestand gedownload!")},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium",children:" Export CSV"})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:" Voorraad Waarde"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totale Waarde (excl. BTW)"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",e.reduce((F,se)=>F+se.salePrice*se.quantity,0).toFixed(2)]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totale Waarde (incl. BTW)"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",e.reduce((F,se)=>{const oe=je(se.salePrice,se.vatRate,se.customVatRate);return F+oe*se.quantity},0).toFixed(2)]})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Lage Voorraad Items"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:We.length})]})]})]}),e.filter(F=>F.margin&&F.margin>0).length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:" Marge Overzicht"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left text-xs font-semibold text-gray-600",children:"Item"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-600",children:"Aankoop"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-600",children:"Verkoop"}),t.jsx("th",{className:"px-4 py-2 text-right text-xs font-semibold text-gray-600",children:"Marge"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:e.filter(F=>F.margin&&F.margin>0).sort((F,se)=>(se.margin||0)-(F.margin||0)).slice(0,10).map(F=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-2 font-medium text-neutral",children:F.name}),t.jsxs("td",{className:"px-4 py-2 text-right text-gray-600",children:["",(F.purchasePrice||0).toFixed(2)]}),t.jsxs("td",{className:"px-4 py-2 text-right text-gray-600",children:["",F.salePrice.toFixed(2)]}),t.jsx("td",{className:"px-4 py-2 text-right",children:t.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded ${(F.margin||0)>=30?"bg-green-100 text-green-800":(F.margin||0)>=20?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[F.margin,"%"]})})]},F.id))})]})})]})]})]})},uH=({inventory:e,setInventory:r,sales:n,setSales:a,setTransactions:l,customers:o,invoices:d=[],setInvoices:m,categories:f=[]})=>{var zt;const[h,g]=y.useState("b2c"),[p,v]=y.useState([]),[b,w]=y.useState(null),[N,S]=y.useState(""),[C,O]=y.useState(""),[k,E]=y.useState(""),[M,D]=y.useState(!1),[R,P]=y.useState(!1),[z,U]=y.useState(!1),[q,Y]=y.useState(!1),[ee,_]=y.useState(!1),[G,L]=y.useState(null),[V,Z]=y.useState(()=>{const te=localStorage.getItem("pos_favorites");return te?JSON.parse(te):[]}),[K,de]=y.useState(()=>{const te=localStorage.getItem("pos_max_favorites");return te?parseInt(te):8}),[B,le]=y.useState({name:"",price:void 0,vatRate:"21",unit:"stuk",isManual:!0});y.useEffect(()=>{localStorage.setItem("pos_favorites",JSON.stringify(V))},[V]),y.useEffect(()=>{localStorage.setItem("pos_max_favorites",K.toString())},[K]);const ye=y.useMemo(()=>e.filter(te=>V.includes(te.id)).slice(0,K),[e,V,K]),ge=te=>{if(V.includes(te))Z(V.filter(Te=>Te!==te));else{if(V.length>=K){alert(` Maximum aantal favorieten bereikt (${K}). Verwijder eerst een favoriet of verhoog het maximum in instellingen.`);return}Z([...V,te])}},Ne=y.useMemo(()=>{if(!k)return f;const te=k.toLowerCase();return f.filter(Te=>{var _e;return Te.name.toLowerCase().includes(te)||((_e=Te.description)==null?void 0:_e.toLowerCase().includes(te))})},[f,k]),Me=y.useMemo(()=>{let te=e.filter(Te=>!V.includes(Te.id));if(C&&(te=te.filter(Te=>Te.categoryId===C)),N){const Te=N.toLowerCase();te=te.filter(_e=>{var qe,Ye,st,H,Ae;return!!(_e.name.toLowerCase().includes(Te)||(qe=_e.sku)!=null&&qe.toLowerCase().includes(Te)||(Ye=_e.supplierSku)!=null&&Ye.toLowerCase().includes(Te)||(st=_e.autoSku)!=null&&st.toLowerCase().includes(Te)||(H=_e.customSku)!=null&&H.toLowerCase().includes(Te)||_e.categoryId&&((Ae=f.find(Ee=>Ee.id===_e.categoryId))!=null&&Ae.name.toLowerCase().includes(Te)))})}return te.slice(0,20)},[e,N,C,V,f]),ce=(te,Te,_e)=>{const qe=Te==="custom"?_e||0:parseFloat(Te);return te*(1+qe/100)},Le=(te,Te)=>te==="custom"?Te||0:parseFloat(te),X=y.useMemo(()=>{let te=0,Te=0;const _e=[];return p.forEach(qe=>{const st=qe.price*(1-(qe.discount||0)/100)*qe.quantity,H=Le(qe.vatRate,qe.customVatRate),Ae=st*(H/100);te+=st,Te+=Ae;const Ee=_e.find(W=>W.rate===H);Ee?Ee.amount+=Ae:_e.push({rate:H,amount:Ae})}),{subtotalExclVat:Math.round(te*100)/100,totalVat:Math.round(Te*100)/100,totalInclVat:Math.round((te+Te)*100)/100,vatBreakdown:_e}},[p]),Re=te=>{const Te=p.find(_e=>_e.inventoryItemId===te.id);if(!te.isManual&&te.quantity<=0){alert(` "${te.name}" is niet op voorraad!`);return}if(te.posAlertNote&&te.posAlertNote.trim()&&L({itemName:te.name,message:te.posAlertNote}),ce(te.salePrice,te.vatRate,te.customVatRate),Te)v(p.map(_e=>_e.id===Te.id?{..._e,quantity:_e.quantity+1}:_e));else{const _e={id:Date.now().toString(),name:te.name,price:te.salePrice,quantity:1,vatRate:te.vatRate,customVatRate:te.customVatRate,inventoryItemId:te.id,sku:te.sku,unit:te.unit||"stuk",isManual:!1};v([...p,_e])}},at=()=>{if(!B.name||!B.price||B.price<=0){alert(" Vul ten minste naam en een geldige prijs (groter dan 0) in.");return}const te={id:`manual-${Date.now()}`,name:B.name,price:B.price,quantity:1,vatRate:B.vatRate||"21",customVatRate:B.customVatRate,unit:B.unit||"stuk",isManual:!0,sku:`MAN-${Date.now().toString().slice(-6)}`};v([...p,te]),le({name:"",price:void 0,vatRate:"21",unit:"stuk",isManual:!0}),P(!1),alert(` Handmatig item "${te.name}" toegevoegd aan winkelwagen!

Dit item wordt alleen gebruikt voor deze transactie en wordt niet opgeslagen in de voorraad.`)},je=(te,Te)=>{const _e=p.find(Ye=>Ye.id===te);if(!_e)return;const qe=_e.quantity+Te;if(qe<=0)v(p.filter(Ye=>Ye.id!==te));else{if(!_e.isManual&&_e.inventoryItemId){const Ye=e.find(st=>st.id===_e.inventoryItemId);if(Ye&&qe>Ye.quantity){alert(` Onvoldoende voorraad! Beschikbaar: ${Ye.quantity} ${Ye.unit||"stuk"}`);return}}v(p.map(Ye=>Ye.id===te?{...Ye,quantity:qe}:Ye))}},vt=(te,Te)=>{if(Te<0||Te>100){alert(" Korting moet tussen 0% en 100% zijn.");return}v(p.map(_e=>_e.id===te?{..._e,discount:Te}:_e))},Xe=te=>{if(te<0||te>100){alert(" Korting moet tussen 0% en 100% zijn.");return}v(p.map(Te=>({...Te,discount:te})))},ut=te=>{v(p.filter(Te=>Te.id!==te))},pt=()=>{p.length!==0&&confirm("Weet u zeker dat u de winkelwagen wilt legen?")&&v([])},bt=te=>{if(p.length===0){alert(" Winkelwagen is leeg!");return}const Te=[];if(p.forEach(st=>{if(!st.isManual&&st.inventoryItemId){const H=e.find(Ae=>Ae.id===st.inventoryItemId);H&&st.quantity>H.quantity&&Te.push(`${st.name}: onvoldoende voorraad (beschikbaar: ${H.quantity})`)}}),Te.length>0){alert(` Voorraad problemen:

${Te.join(`
`)}`);return}const _e=e.map(st=>{const H=p.find(Ae=>Ae.inventoryItemId===st.id);return H&&!H.isManual?{...st,quantity:st.quantity-H.quantity,updatedAt:new Date().toISOString()}:st});r(_e);const qe={id:`s${Date.now()}`,items:p.map(st=>({id:st.id,name:st.name,price:st.price,inventoryItemId:st.inventoryItemId,quantity:st.quantity})),total:X.totalInclVat,customerId:(b==null?void 0:b.id)||null,date:new Date().toISOString().split("T")[0]};a([...n,qe]);const Ye={id:`t${Date.now()}`,type:"income",description:`POS Verkoop (${te})${b?` - ${b.name}`:""}`,amount:X.totalInclVat,date:qe.date};if(l(st=>[...st,Ye]),m){const st=p.map(me=>me.vatRate==="custom"?me.customVatRate||21:parseFloat(me.vatRate)),H=st.length>0?st.reduce((me,Ve,We,Fe)=>Fe.filter(F=>F===me).length>=Fe.filter(F=>F===Ve).length?me:Ve):21,Ae=`${new Date().getFullYear()}-${String(d.length+1).padStart(3,"0")}`,Ee=p.map(me=>{const Ve=me.price*(1-(me.discount||0)/100);return{id:me.id,description:me.name,quantity:me.quantity,pricePerUnit:Ve,total:Ve*me.quantity,inventoryItemId:me.inventoryItemId}}),W={id:`inv-pos-${Date.now()}`,invoiceNumber:Ae,customerId:(b==null?void 0:b.id)||"guest",customerName:(b==null?void 0:b.name)||"Particulier (Kassa)",customerEmail:(b==null?void 0:b.email)||"",items:Ee,subtotal:X.subtotalExclVat,vatRate:H,vatAmount:X.totalVat,total:X.totalInclVat,status:"paid",issueDate:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0],paidDate:new Date().toISOString().split("T")[0],paymentTerms:"Direct betaald",notes:`Kassa verkoop (${te})${b?` - ${b.name}`:" - Particulier"}`,history:[],timestamps:{created:new Date().toISOString(),sent:new Date().toISOString(),paid:new Date().toISOString()}};m(me=>[...me,W])}v([]),w(null),U(!1),alert(` Verkoop succesvol! Totaal: ${X.totalInclVat.toFixed(2)}

 Factuur automatisch aangemaakt voor boekhouding.`)},nr=()=>{if(p.length===0){alert(" Winkelwagen is leeg!");return}if(!b){alert(" Selecteer eerst een bedrijf voor pakbon!");return}b.creditLimit&&b.creditLimit>0;const te=`PKB-${new Date().getFullYear()}-${String(((d==null?void 0:d.length)||0)+1).padStart(3,"0")}`,Te=new Date;Te.setDate(Te.getDate()+(b.paymentTerms||14));const _e={customerId:b.id,customerName:b.name,items:[...p],subtotalExclVat:X.subtotalExclVat,totalVat:X.totalVat,totalInclVat:X.totalInclVat,dueDate:Te.toISOString().split("T")[0],createdAt:new Date().toISOString(),shippingAddress:b.address};if(m){const qe=`${new Date().getFullYear()}-${String(d.length+1).padStart(3,"0")}`,Ye=p.map(Ee=>Ee.vatRate==="custom"?Ee.customVatRate||21:parseFloat(Ee.vatRate)),st=Ye.length>0?Ye.reduce((Ee,W,me,Ve)=>Ve.filter(We=>We===Ee).length>=Ve.filter(We=>We===W).length?Ee:W):21,H=p.map(Ee=>{const W=Ee.price*(1-(Ee.discount||0)/100);return{id:Ee.id,description:Ee.name,quantity:Ee.quantity,pricePerUnit:W,total:W*Ee.quantity,inventoryItemId:Ee.inventoryItemId}}),Ae={id:`inv-${Date.now()}`,invoiceNumber:qe,customerId:b.id,customerName:b.name,customerEmail:b.email||"",items:H,subtotal:X.subtotalExclVat,vatRate:st,vatAmount:X.totalVat,total:X.totalInclVat,status:"sent",issueDate:new Date().toISOString().split("T")[0],dueDate:_e.dueDate,paidDate:void 0,paymentTerms:b.paymentTerms?`${b.paymentTerms} dagen`:"14 dagen",notes:`Pakbon ${te}`,history:[],timestamps:{created:new Date().toISOString(),sent:new Date().toISOString()}};m(Ee=>[...Ee,Ae]),_e.invoiceId=Ae.id}Y(!0),v([]),w(null),alert(` Pakbon aangemaakt: ${te}
Totaal: ${X.totalInclVat.toFixed(2)}
Vervaldatum: ${new Date(_e.dueDate).toLocaleDateString("nl-NL")}`)};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 bg-gray-50 min-h-screen",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral",children:"Kassasysteem (POS)"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Snelle checkout voor particulieren  Pakbonnen voor bedrijven"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-white rounded-lg p-2 shadow-md",children:[t.jsx("button",{onClick:()=>{g("b2c"),w(null),v([])},className:`px-6 py-2 rounded-lg font-semibold transition-colors ${h==="b2c"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Kassa (B2C)"}),t.jsx("button",{onClick:()=>{g("b2b"),v([])},className:`px-6 py-2 rounded-lg font-semibold transition-colors ${h==="b2b"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Pakbon (B2B)"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[t.jsxs("div",{className:"mb-3 flex flex-col sm:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",style:{minWidth:"180px",maxWidth:"250px"},children:[t.jsx("button",{type:"button",onClick:()=>{D(!M),E("")},className:`w-full px-3 py-2 text-left border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors text-sm ${C?"bg-primary text-white border-primary":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:C?((zt=f.find(te=>te.id===C))==null?void 0:zt.name)||"Categorie":" Categorie..."}),t.jsx("span",{className:"text-xs",children:""})]})}),M&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>D(!1)}),t.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsx("input",{type:"text",placeholder:"Zoek categorie...",value:k,onChange:te=>E(te.target.value),onClick:te=>te.stopPropagation(),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})}),t.jsxs("div",{className:"overflow-y-auto max-h-48",children:[t.jsx("button",{type:"button",onClick:()=>{O(""),D(!1),E("")},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 transition-colors ${C?"":"bg-blue-50 font-semibold"}`,children:t.jsx("span",{className:"text-gray-600",children:"Alle categorien"})}),f.length===0?t.jsxs("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:[t.jsx("p",{className:"mb-1",children:"Geen categorien beschikbaar"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Ga naar Voorraadbeheer  Categorien"})]}):Ne.length===0?t.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"Geen categorien gevonden"}):Ne.map(te=>t.jsxs("button",{type:"button",onClick:()=>{O(te.id),D(!1),E("")},className:`w-full px-4 py-2 text-left text-sm hover:bg-gray-100 transition-colors flex items-center gap-2 ${C===te.id?"bg-blue-50 font-semibold":""}`,children:[t.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:te.color||"#3B82F6"}}),t.jsx("span",{children:te.name}),t.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["(",e.filter(Te=>Te.categoryId===te.id).length,")"]})]},te.id))]})]})]})]}),C&&t.jsx("button",{type:"button",onClick:()=>{O(""),E("")},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:" Wis"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("input",{type:"text",placeholder:" Zoek op naam, SKU, categorie...",value:N,onChange:te=>S(te.target.value),className:"flex-1 px-4 py-3 text-lg border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary",autoFocus:!0}),t.jsxs("button",{onClick:()=>P(!0),className:"px-6 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors font-semibold whitespace-nowrap flex items-center gap-2",title:"Handmatig item toevoegen voor nmalig gebruik (wordt niet opgeslagen in voorraad)",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Handmatig Item (1x)"})]})]})]}),h==="b2b"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Bedrijf Selecteren ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("select",{value:(b==null?void 0:b.id)||"",onChange:te=>{const Te=o.find(_e=>_e.id===te.target.value);w(Te||null)},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-lg",children:[t.jsx("option",{value:"",children:"Selecteer bedrijf..."}),o.filter(te=>te.type==="business"||!te.type).map(te=>t.jsxs("option",{value:te.id,children:[te.name," ",te.creditLimit?`(Krediet: ${te.creditLimit})`:""]},te.id))]}),b&&t.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:[t.jsxs("p",{className:"text-sm text-gray-700",children:[t.jsx("span",{className:"font-medium",children:"Klant:"})," ",b.name]}),b.email&&t.jsx("p",{className:"text-sm text-gray-600",children:b.email}),b.address&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.address})]})]}),h==="b2c"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klant (Optioneel) - Voor terugkerende klanten"}),t.jsxs("select",{value:(b==null?void 0:b.id)||"",onChange:te=>{const Te=o.find(_e=>_e.id===te.target.value);w(Te||null)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Gast (Geen klant)"}),o.filter(te=>te.type==="individual"||!te.type).map(te=>t.jsx("option",{value:te.id,children:te.name},te.id))]})]}),ye.length>0&&!N&&t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg shadow-md p-4 sm:p-6 border-2 border-blue-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-neutral",children:" Snelkoppelingen"}),t.jsxs("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded",children:[ye.length,"/",K]})]}),t.jsx("button",{onClick:()=>_(!0),className:"text-sm text-blue-600 hover:text-blue-800 font-medium px-3 py-1 bg-blue-100 rounded-lg hover:bg-blue-200 transition-colors",title:"Beheer favorieten",children:" Instellingen"})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:ye.map(te=>{const Te=ce(te.salePrice,te.vatRate,te.customVatRate),_e=te.quantity<=te.reorderLevel,qe=te.quantity<=0;return t.jsxs("div",{className:`relative p-4 rounded-lg border-2 text-left transition-all min-h-[100px] flex flex-col justify-between ${te.posAlertNote&&te.posAlertNote.trim()?"border-orange-300 bg-orange-50 hover:border-orange-500 hover:shadow-md":qe&&h==="b2c"?"border-red-200 bg-red-50 opacity-50":_e?"border-orange-200 bg-orange-50 hover:border-orange-400":"border-blue-300 bg-white hover:border-blue-500 hover:shadow-md"}`,children:[t.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),ge(te.id)},className:"absolute top-2 right-2 text-yellow-500 hover:text-yellow-600 text-lg z-10",title:"Verwijder uit favorieten",children:""}),t.jsxs("button",{onClick:()=>Re(te),disabled:qe&&h==="b2c",className:"w-full text-left",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-neutral text-sm mb-1 line-clamp-2 pr-6",children:te.name}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:te.sku})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-lg font-bold text-primary",children:["",Te.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["incl."," ",Le(te.vatRate,te.customVatRate),"% BTW"]}),qe&&h==="b2c"?t.jsx("p",{className:"text-xs text-red-600 font-semibold mt-1",children:" Uitverkocht"}):_e?t.jsxs("p",{className:"text-xs text-orange-600 font-semibold mt-1",children:[" Laag (",te.quantity," ",te.unit||"stuk",")"]}):t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" ",te.quantity," ",te.unit||"stuk"," op voorraad"]})]})]})]},te.id)})})]}),V.length===0&&!N&&t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-yellow-800 mb-1",children:"Tip: Maak Snelkoppelingen"}),t.jsxs("p",{className:"text-sm text-yellow-700",children:["Klik op de ",t.jsx("strong",{children:" ster"})," rechtsboven op een item om het toe te voegen aan uw snelkoppelingen. Snelkoppelingen verschijnen bovenaan voor snelle toegang!"]}),t.jsx("button",{onClick:()=>_(!0),className:"mt-2 text-sm text-yellow-800 underline hover:text-yellow-900 font-medium",children:" Configureer aantal snelkoppelingen"})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-neutral",children:N?`Zoekresultaten (${Me.length})`:"Alle Items"}),!N&&V.length>0&&t.jsxs("button",{onClick:()=>_(!0),className:"text-sm text-blue-600 hover:text-blue-800 font-medium px-3 py-1 bg-blue-100 rounded-lg hover:bg-blue-200 transition-colors flex items-center gap-1",title:"Beheer favorieten",children:[" Favorieten (",V.length,"/",K,")"]})]}),Me.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 mb-4",children:"Geen items gevonden"}),t.jsx("p",{className:"text-sm text-gray-400",children:'Typ in de zoekbalk om te zoeken, of klik op "+ Nieuw Item" om handmatig toe te voegen'})]}):t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:Me.map(te=>{const Te=ce(te.salePrice,te.vatRate,te.customVatRate),_e=te.quantity<=te.reorderLevel,qe=te.quantity<=0,Ye=V.includes(te.id);return t.jsxs("div",{className:`relative p-4 rounded-lg border-2 text-left transition-all min-h-[100px] flex flex-col justify-between ${te.posAlertNote&&te.posAlertNote.trim()?"border-orange-300 bg-orange-50 hover:border-orange-500 hover:shadow-md":qe&&h==="b2c"?"border-red-200 bg-red-50 opacity-50":_e?"border-orange-200 bg-orange-50 hover:border-orange-400 hover:bg-orange-100":"border-gray-200 bg-white hover:border-primary hover:bg-blue-50 cursor-pointer"}`,children:[t.jsx("button",{onClick:st=>{st.stopPropagation(),ge(te.id)},className:`absolute top-2 right-2 text-lg z-10 ${Ye?"text-yellow-500 hover:text-gray-400":"text-gray-300 hover:text-yellow-500"}`,title:Ye?"Verwijder uit favorieten":"Voeg toe aan favorieten",children:Ye?"":""}),t.jsxs("button",{onClick:()=>Re(te),disabled:qe&&h==="b2c",className:"w-full text-left",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-neutral text-sm mb-1 line-clamp-2 pr-6",children:te.name}),t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:te.sku})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-lg font-bold text-primary",children:["",Te.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500",children:["incl."," ",Le(te.vatRate,te.customVatRate),"% BTW"]}),qe&&h==="b2c"?t.jsx("p",{className:"text-xs text-red-600 font-semibold mt-1",children:" Uitverkocht"}):_e?t.jsxs("p",{className:"text-xs text-orange-600 font-semibold mt-1",children:[" Laag (",te.quantity," ",te.unit||"stuk",")"]}):t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[" ",te.quantity," ",te.unit||"stuk"," op voorraad"]})]})]})]},te.id)})})]})]}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 sticky top-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral",children:"Winkelwagen"}),p.length>0&&t.jsx("button",{onClick:pt,className:"text-sm text-red-600 hover:text-red-800 font-medium",children:" Wissen"})]}),t.jsx("div",{className:"space-y-2 mb-4 max-h-96 overflow-y-auto",children:p.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 text-sm",children:"Winkelwagen is leeg"}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Voeg items toe via zoeken of handmatig"})]}):p.map(te=>{const Te=Le(te.vatRate,te.customVatRate),_e=te.price*(1-(te.discount||0)/100),qe=_e*te.quantity,Ye=qe*(Te/100),st=qe+Ye,H=te.inventoryItemId?e.find(Ee=>Ee.id===te.inventoryItemId):null,Ae=(H==null?void 0:H.posAlertNote)&&H.posAlertNote.trim();return t.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-neutral text-sm",children:te.name}),te.sku&&t.jsx("p",{className:"text-xs text-gray-500",children:te.sku}),Ae&&t.jsx("span",{className:"text-xs bg-orange-200 text-orange-900 px-2 py-0.5 rounded mt-1 inline-block font-semibold",title:`Alert: ${H.posAlertNote}`,children:" Alert"}),te.isManual&&t.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-0.5 rounded mt-1 inline-block",title:"Handmatig toegevoegd item - nmalig gebruik, niet in voorraad",children:" Handmatig (1x)"})]}),t.jsx("button",{onClick:()=>ut(te.id),className:"text-red-500 hover:text-red-700 text-lg ml-2",title:"Verwijderen",children:""})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("button",{onClick:()=>je(te.id,-1),className:"w-8 h-8 bg-gray-300 rounded text-sm hover:bg-gray-400 font-bold",children:""}),t.jsx("span",{className:"w-12 text-center font-semibold text-lg",children:te.quantity}),t.jsx("button",{onClick:()=>je(te.id,1),className:"w-8 h-8 bg-gray-300 rounded text-sm hover:bg-gray-400 font-bold",children:"+"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 ml-auto",children:["",st.toFixed(2)]})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap text-xs",children:[t.jsxs("span",{className:"text-gray-600",children:["",_e.toFixed(2),"  ",te.quantity," ","excl. BTW"]}),t.jsxs("span",{className:"text-gray-500",children:["BTW ",Te,"%: ",Ye.toFixed(2)]}),te.discount&&te.discount>0&&t.jsxs("span",{className:"text-green-600 font-semibold",children:["-",te.discount,"% korting"]})]}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx("button",{onClick:()=>{var W;const Ee=prompt(`Korting % voor "${te.name}":`,((W=te.discount)==null?void 0:W.toString())||"0");if(Ee!==null){const me=parseFloat(Ee);isNaN(me)||vt(te.id,me)}},className:"flex-1 px-2 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors",children:" Korting"}),t.jsx("button",{onClick:()=>{const Ee=prompt(`Nieuwe prijs (excl. BTW) voor "${te.name}":`,te.price.toString());if(Ee!==null){const W=parseFloat(Ee);!isNaN(W)&&W>0&&v(p.map(me=>me.id===te.id?{...me,price:W}:me))}},className:"flex-1 px-2 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors",children:" Prijs"})]})]},te.id)})}),p.length>0&&t.jsxs("div",{className:"border-t pt-4 mb-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotaal excl. BTW:"}),t.jsxs("span",{className:"font-medium",children:["",X.subtotalExclVat.toFixed(2)]})]}),X.vatBreakdown.map((te,Te)=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-600",children:["BTW ",te.rate,"%:"]}),t.jsxs("span",{className:"font-medium",children:["",(Math.round(te.amount*100)/100).toFixed(2)]})]},Te)),t.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[t.jsx("span",{className:"text-lg font-semibold text-neutral",children:"Totaal incl. BTW:"}),t.jsxs("span",{className:"text-2xl font-bold text-primary",children:["",X.totalInclVat.toFixed(2)]})]}),t.jsx("button",{onClick:()=>{const te=prompt("Korting % op gehele winkelwagen:","0");if(te!==null){const Te=parseFloat(te);isNaN(Te)||Xe(Te)}},className:"w-full px-3 py-2 bg-orange-500 text-white text-sm rounded-lg hover:bg-orange-600 transition-colors font-medium",children:" Korting op Totaal"})]}),t.jsx("div",{className:"space-y-2",children:h==="b2c"?t.jsx("button",{onClick:()=>{if(p.length===0){alert(" Winkelwagen is leeg!");return}U(!0)},disabled:p.length===0,className:`w-full py-4 rounded-lg font-bold text-lg transition-colors ${p.length>0?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:" AFREKENEN"}):t.jsx("button",{onClick:nr,disabled:p.length===0||!b,className:`w-full py-4 rounded-lg font-bold text-lg transition-colors ${p.length>0&&b?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:" Pakbon Aanmaken"})})]})})]}),R&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-bold text-neutral",children:" Handmatig Item Toevoegen (nmalig Gebruik)"}),t.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsx("div",{className:"bg-purple-50 border-l-4 border-purple-400 rounded-lg p-3 mb-4",children:t.jsxs("p",{className:"text-sm text-purple-800",children:[t.jsx("strong",{children:" Eenmalig Item:"})," Dit item wordt alleen toegevoegd aan de winkelwagen en wordt"," ",t.jsx("strong",{children:"niet opgeslagen"})," in de voorraad. Perfect voor diensten, meerwerk, of tijdelijke producten."]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Naam ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:B.name||"",onChange:te=>le({...B,name:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Bijv. Montage dienst"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Prijs excl. BTW () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:B.price!==void 0?B.price:"",onChange:te=>{const Te=te.target.value;le({...B,price:Te===""?void 0:parseFloat(Te)||void 0})},placeholder:"0.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BTW-tarief"}),t.jsxs("select",{value:B.vatRate||"21",onChange:te=>le({...B,vatRate:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"21",children:"Standaard 21%"}),t.jsx("option",{value:"9",children:"Verlaagd 9%"}),t.jsx("option",{value:"0",children:"Vrij 0%"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Eenheid"}),t.jsxs("select",{value:B.unit||"stuk",onChange:te=>le({...B,unit:te.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"stuk",children:"Stuk"}),t.jsx("option",{value:"uur",children:"Uur"}),t.jsx("option",{value:"meter",children:"Meter"}),t.jsx("option",{value:"kg",children:"Kilogram"}),t.jsx("option",{value:"liter",children:"Liter"})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:[t.jsx("button",{onClick:at,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Toevoegen"}),t.jsx("button",{onClick:()=>P(!1),className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})})}),z&&h==="b2c"&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-neutral",children:" Betaalwijze"}),t.jsx("button",{onClick:()=>U(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-2xl font-bold text-primary text-center mb-2",children:["",X.totalInclVat.toFixed(2)]}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Totaal incl. BTW"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("button",{onClick:()=>bt("cash"),className:"px-6 py-4 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold text-lg",children:" Contant"}),t.jsx("button",{onClick:()=>bt("pin"),className:"px-6 py-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold text-lg",children:" PIN"}),t.jsx("button",{onClick:()=>bt("ideal"),className:"px-6 py-4 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-semibold text-lg",children:" iDEAL"}),t.jsx("button",{onClick:()=>bt("credit"),className:"px-6 py-4 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold text-lg",children:" Creditcard"})]})]})})}),ee&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-neutral",children:" Snelkoppelingen Instellingen"}),t.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Aantal Snelkoppelingen"}),t.jsx("input",{type:"number",min:"1",max:"20",value:K,onChange:te=>{const Te=parseInt(te.target.value)||1;Te>=1&&Te<=20&&(de(Te),V.length>Te&&Z(V.slice(0,Te)))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Aantal snelkoppelingen dat bovenaan wordt getoond (1-20)"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Huidige Snelkoppelingen (",V.length,"/",K,")"]}),V.length===0?t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"Geen favorieten toegevoegd"}),t.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Klik op de  knop bij items om ze toe te voegen"})]}):t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:ye.map(te=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-sm text-neutral",children:te.name}),t.jsx("p",{className:"text-xs text-gray-500",children:te.sku})]}),t.jsx("button",{onClick:()=>ge(te.id),className:"text-yellow-500 hover:text-red-500 text-lg px-2",title:"Verwijderen",children:""})]},te.id))})]}),V.length>0&&t.jsx("button",{onClick:()=>{confirm("Weet u zeker dat u alle snelkoppelingen wilt verwijderen?")&&Z([])},className:"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium",children:" Alle Snelkoppelingen Verwijderen"})]}),t.jsx("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:t.jsx("button",{onClick:()=>_(!1),className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:"Sluiten"})})]})})}),q&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-xl font-bold text-neutral",children:" Pakbon Aangemaakt"}),t.jsx("button",{onClick:()=>Y(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-sm text-green-800",children:[t.jsx("strong",{children:" Pakbon succesvol aangemaakt!"}),t.jsx("br",{}),"De pakbon is automatisch gekoppeld aan een factuur in het Boekhouding module."]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Pakbon details kunnen worden bekeken in het Boekhouding  Facturen tab."})}),t.jsx("button",{onClick:()=>Y(!1),className:"w-full px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:"Sluiten"})]})]})})}),G&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-3xl",children:""}),t.jsx("h3",{className:"text-xl font-bold text-orange-800",children:"Product Alert"})]}),t.jsx("button",{onClick:()=>L(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-400 rounded-lg p-4 mb-4",children:[t.jsx("p",{className:"font-semibold text-orange-900 mb-2",children:G.itemName}),t.jsx("p",{className:"text-sm text-orange-800 whitespace-pre-wrap",children:G.message})]}),t.jsx("button",{onClick:()=>L(null),className:"w-full px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold",children:" Begrepen"})]})})})]})},gk=({title:e,items:r,onClose:n})=>{if(r.length===0)return null;const a=o=>{switch(o){case"quote":return"";case"invoice":return"";case"workorder":return"";default:return""}},l=o=>{switch(o){case"quote":return"border-blue-500 bg-blue-50";case"invoice":return"border-purple-500 bg-purple-50";case"workorder":return"border-green-500 bg-green-50";default:return"border-gray-500 bg-gray-50"}};return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6 border-l-4 border-primary",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h3",{className:"text-lg font-semibold text-neutral flex items-center gap-2",children:[t.jsx("span",{children:""}),e]}),n&&t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-lg",title:"Sluiten",children:""})]}),t.jsx("div",{className:"space-y-2",children:r.map(o=>t.jsx("button",{onClick:o.onClick,className:`w-full text-left p-3 rounded-lg border-l-4 hover:shadow-md transition-all ${l(o.type)}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[t.jsx("span",{className:"text-lg",children:a(o.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-medium text-sm text-neutral",children:o.label}),o.status&&t.jsxs("span",{className:"text-xs text-gray-600 mt-1 inline-block",children:["Status: ",o.status]}),o.date&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.date})]})]}),o.amount&&t.jsx("div",{className:"text-right",children:t.jsxs("p",{className:"font-bold text-sm text-primary",children:["",o.amount.toFixed(2)]})})]})},o.id))})]})};function mH(e,r,n,a){const l=[];if(e.workOrderId){const o=n.find(d=>d.id===e.workOrderId);o&&l.push({id:o.id,type:"workorder",label:`Werkorder ${o.id}`,status:o.status,date:o.createdDate,onClick:()=>a(dt.WORK_ORDERS,o.id)})}if(e.invoiceId){const o=r.find(d=>d.id===e.invoiceId);o&&l.push({id:o.id,type:"invoice",label:`Factuur ${o.invoiceNumber}`,status:o.status==="paid"?"Betaald":o.status,amount:o.total,date:o.issueDate,onClick:()=>a(dt.ACCOUNTING,o.id)})}return l}function fH(e,r,n,a){const l=[];if(e.quoteId){const o=r.find(d=>d.id===e.quoteId);o&&l.push({id:o.id,type:"quote",label:`Offerte ${o.id}`,status:o.status==="approved"?"Geaccepteerd":o.status,amount:o.total,date:o.createdDate,onClick:()=>a(dt.ACCOUNTING,o.id)})}if(e.workOrderId){const o=n.find(d=>d.id===e.workOrderId);o&&l.push({id:o.id,type:"workorder",label:`Werkorder ${o.id}`,status:o.status,date:o.createdDate,onClick:()=>a(dt.WORK_ORDERS,o.id)})}return l}const hH=({workOrders:e,setWorkOrders:r,employees:n,customers:a,inventory:l,setInventory:o,currentUser:d,isAdmin:m,quotes:f=[],setQuotes:h,invoices:g=[],setInvoices:p,categories:v=[]})=>{var Sn,mr,za,ia;const[b,w]=y.useState(!1),[N,S]=y.useState(null),[C,O]=y.useState(d.employeeId),[k,E]=y.useState(null),[M,D]=y.useState(!1),[R,P]=y.useState(!1),[z,U]=y.useState(null),[q,Y]=y.useState(null),[ee,_]=y.useState(!1),[G,L]=y.useState(null),[V,Z]=y.useState(!1),[K,de]=y.useState(!1),[B,le]=y.useState(!1),[ye,ge]=y.useState(""),[Ne,Me]=y.useState(null),[ce,Le]=y.useState(null),[X,Re]=y.useState({title:"",description:"",assignedTo:d.employeeId,customerId:"",location:"",scheduledDate:"",pendingReason:"",sortIndex:void 0}),[at,je]=y.useState(""),[vt,Xe]=y.useState(1),[ut,pt]=y.useState([]),[bt,nr]=y.useState(""),[zt,te]=y.useState(""),[Te,_e]=y.useState(""),[qe,Ye]=y.useState(!1),[st,H]=y.useState(!1),[Ae,Ee]=y.useState(""),[W,me]=y.useState(1),[Ve,We]=y.useState(""),[Fe,F]=y.useState(""),[se,oe]=y.useState(""),[Pe,$e]=y.useState(!1),Ct=()=>e.length===0?1:Math.max(...e.map(ae=>ae.sortIndex||0))+1,it=y.useMemo(()=>{if(!Te)return v;const T=Te.toLowerCase();return v.filter(ae=>{var ne;return ae.name.toLowerCase().includes(T)||((ne=ae.description)==null?void 0:ne.toLowerCase().includes(T))})},[v,Te]),Ke=y.useMemo(()=>{if(!se)return v;const T=se.toLowerCase();return v.filter(ae=>{var ne;return ae.name.toLowerCase().includes(T)||((ne=ae.description)==null?void 0:ne.toLowerCase().includes(T))})},[v,se]),xt=y.useMemo(()=>{let T=l.filter(ae=>ae.quantity>0);if(zt&&(T=T.filter(ae=>ae.categoryId===zt)),bt){const ae=bt.toLowerCase();T=T.filter(ne=>{var ve,Ie,Ue,Je,Dt;return!!(ne.name.toLowerCase().includes(ae)||(ve=ne.sku)!=null&&ve.toLowerCase().includes(ae)||(Ie=ne.supplierSku)!=null&&Ie.toLowerCase().includes(ae)||(Ue=ne.autoSku)!=null&&Ue.toLowerCase().includes(ae)||(Je=ne.customSku)!=null&&Je.toLowerCase().includes(ae)||ne.categoryId&&((Dt=v.find(Ot=>Ot.id===ne.categoryId))!=null&&Dt.name.toLowerCase().includes(ae)))})}return T},[l,bt,zt,v]),Ar=y.useMemo(()=>{let T=l.filter(ae=>ae.quantity>0);if(Fe&&(T=T.filter(ae=>ae.categoryId===Fe)),Ve){const ae=Ve.toLowerCase();T=T.filter(ne=>{var ve,Ie,Ue,Je,Dt;return!!(ne.name.toLowerCase().includes(ae)||(ve=ne.sku)!=null&&ve.toLowerCase().includes(ae)||(Ie=ne.supplierSku)!=null&&Ie.toLowerCase().includes(ae)||(Ue=ne.autoSku)!=null&&Ue.toLowerCase().includes(ae)||(Je=ne.customSku)!=null&&Je.toLowerCase().includes(ae)||ne.categoryId&&((Dt=v.find(Ot=>Ot.id===ne.categoryId))!=null&&Dt.name.toLowerCase().includes(ae)))})}return T},[l,Ve,Fe,v]),ur=y.useMemo(()=>{let T;return m&&C==="all"?T=e:T=e.filter(ae=>ae.assignedTo===C),k&&(T=T.filter(ae=>ae.status===k)),T.sort((ae,ne)=>{const ve=ae.sortIndex??999999,Ie=ne.sortIndex??999999;return ve!==Ie?ve-Ie:new Date(ae.createdDate).getTime()-new Date(ne.createdDate).getTime()})},[e,C,m,k]),jn=y.useMemo(()=>{if(!m||C!=="all")return null;let T=e;k&&(T=e.filter(ne=>ne.status===k));const ae={};return T.forEach(ne=>{ae[ne.assignedTo]||(ae[ne.assignedTo]=[]),ae[ne.assignedTo].push(ne)}),Object.keys(ae).forEach(ne=>{ae[ne].sort((ve,Ie)=>{const Ue=ve.sortIndex??999999,Je=Ie.sortIndex??999999;return Ue!==Je?Ue-Je:new Date(ve.createdDate).getTime()-new Date(Ie.createdDate).getTime()})}),ae},[e,C,m,k]),mn=y.useMemo(()=>{let T;return m&&C==="all"?T=e:T=e.filter(ae=>ae.assignedTo===C),T},[e,C,m]),Tt=y.useMemo(()=>{const T=mn.filter(Ue=>Ue.status==="To Do").length,ae=mn.filter(Ue=>Ue.status==="Pending").length,ne=mn.filter(Ue=>Ue.status==="In Progress").length,ve=mn.filter(Ue=>Ue.status==="Completed").length,Ie=mn.reduce((Ue,Je)=>Ue+(Je.hoursSpent||0),0);return{todo:T,pending:ae,inProgress:ne,completed:ve,totalHours:Ie}},[mn]),Pr=()=>{if(!X.title||!X.assignedTo){alert("Vul alle verplichte velden in!");return}for(const ne of ut){const ve=l.find(Ie=>Ie.id===ne.itemId);if(ve&&ve.quantity<ne.quantity){alert(`Niet genoeg voorraad van ${ve.name}. Beschikbaar: ${ve.quantity}, Nodig: ${ne.quantity}`);return}}const T=new Date().toISOString(),ae={id:`wo${Date.now()}`,title:X.title,description:X.description,status:st?"Pending":"To Do",assignedTo:X.assignedTo,assignedBy:d.employeeId,requiredInventory:ut,createdDate:new Date().toISOString().split("T")[0],customerId:X.customerId||void 0,location:X.location||void 0,scheduledDate:X.scheduledDate||void 0,pendingReason:st&&X.pendingReason||void 0,sortIndex:X.sortIndex!==void 0&&X.sortIndex>0?X.sortIndex:Ct(),timestamps:{created:T,assigned:T},history:[{timestamp:T,action:"created",performedBy:d.employeeId,details:`Werkorder aangemaakt door ${ft(d.employeeId)}`},{timestamp:T,action:"assigned",performedBy:d.employeeId,details:`Toegewezen aan ${ft(X.assignedTo)} door ${ft(d.employeeId)}`,toAssignee:X.assignedTo}]};r([...e,ae]),Ha(d.employeeId,d.role,dt.WORK_ORDERS,"create_workorder","create",{workOrderId:ae.id,customerId:ae.customerId,assignedTo:ae.assignedTo,status:ae.status,materialsCount:ae.requiredInventory.length}),Re({title:"",description:"",assignedTo:d.employeeId,customerId:"",location:"",scheduledDate:"",pendingReason:"",sortIndex:void 0}),pt([]),H(!1),w(!1)},$t=()=>{if(!at||vt<=0){alert("Selecteer een materiaal en voer een geldig aantal in!");return}const T=l.find(ne=>ne.id===at);if(!T)return;if(T.quantity<vt){alert(`Niet genoeg voorraad. Beschikbaar: ${T.quantity}`);return}const ae=ut.findIndex(ne=>ne.itemId===at);if(ae>=0){const ne=[...ut];ne[ae].quantity+=vt,pt(ne)}else pt([...ut,{itemId:at,quantity:vt}]);je(""),Xe(1)},tn=T=>{pt(ut.filter(ae=>ae.itemId!==T))},pr=()=>{if(!N||!Ae||W<=0){alert("Selecteer een materiaal en voer een geldig aantal in!");return}const T=l.find(ne=>ne.id===Ae);if(!T)return;if(T.quantity<W){alert(`Niet genoeg voorraad. Beschikbaar: ${T.quantity}`);return}const ae=N.requiredInventory.findIndex(ne=>ne.itemId===Ae);if(ae>=0){const ne=[...N.requiredInventory];ne[ae].quantity+=W,S({...N,requiredInventory:ne})}else S({...N,requiredInventory:[...N.requiredInventory,{itemId:Ae,quantity:W}]});Ee(""),me(1)},Nn=T=>{N&&S({...N,requiredInventory:N.requiredInventory.filter(ae=>ae.itemId!==T)})},Nt=T=>{S(T),Ee(""),me(1)},fn=()=>{if(!N||!N.title||!N.assignedTo){alert("Vul alle verplichte velden in!");return}for(const Ie of N.requiredInventory){const Ue=l.find(Je=>Je.id===Ie.itemId);if(Ue&&Ue.quantity<Ie.quantity){alert(`Niet genoeg voorraad van ${Ue.name}. Beschikbaar: ${Ue.quantity}, Nodig: ${Ie.quantity}`);return}}const T=new Date().toISOString(),ae=e.find(Ie=>Ie.id===N.id);let ne={...N},ve=[...e];if(ae&&ae.sortIndex!==N.sortIndex&&N.sortIndex!==void 0){const Ie=N.sortIndex,Ue=e.find(Je=>Je.id!==N.id&&Je.assignedTo===N.assignedTo&&Je.sortIndex===Ie);if(Ue){const Dt=e.filter(De=>De.assignedTo===N.assignedTo&&De.id!==N.id).map(De=>De.sortIndex||0),Ce=Math.max(...Dt,0)+1;ve=ve.map(De=>De.id===Ue.id?{...De,sortIndex:Ce,history:[...De.history||[],{timestamp:T,action:"reordered",performedBy:d.employeeId,details:`Indexnummer automatisch aangepast van #${Ue.sortIndex} naar #${Ce} (conflictresolutie door ${ft(d.employeeId)})`}]}:De),ne.history=[...ne.history||[],{timestamp:T,action:"reordered",performedBy:d.employeeId,details:`Indexnummer gewijzigd van #${ae.sortIndex} naar #${Ie} door ${ft(d.employeeId)} (werkorder #${Ue.sortIndex} opgeschoven naar #${Ce})`}]}else ne.history=[...ne.history||[],{timestamp:T,action:"reordered",performedBy:d.employeeId,details:`Indexnummer gewijzigd van #${ae.sortIndex||"auto"} naar #${Ie} door ${ft(d.employeeId)}`}]}ae&&ae.assignedTo!==N.assignedTo&&(ne.history=[...ne.history||[],{timestamp:T,action:"assigned",performedBy:d.employeeId,details:`Opnieuw toegewezen van ${ft(ae.assignedTo)} naar ${ft(N.assignedTo)} door ${ft(d.employeeId)}`,fromAssignee:ae.assignedTo,toAssignee:N.assignedTo}],ne.timestamps?ne.timestamps={...ne.timestamps}:ne.timestamps={created:ne.createdDate},ne.timestamps.assigned=T),ne.pendingReason=ne.status==="Pending"?ne.pendingReason:void 0,r(ve.map(Ie=>Ie.id===ne.id?ne:Ie)),S(null)},lr=()=>{S(null),Ee(""),me(1)},_r=(T,ae)=>{var ne;if(r(e.map(ve=>{if(ve.id===T){const Ie=new Date().toISOString(),Ue=ve.status,Je={status:ae,history:[...ve.history||[],{timestamp:Ie,action:"status_changed",performedBy:d.employeeId,details:`Status gewijzigd van "${Ue}" naar "${ae}" door ${ft(d.employeeId)}`,fromStatus:Ue,toStatus:ae}]};return ve.timestamps?Je.timestamps={...ve.timestamps}:Je.timestamps={created:ve.createdDate},ae==="In Progress"&&!Je.timestamps.started&&(Je.timestamps.started=Ie),ae==="Completed"&&(Je.completedDate=new Date().toISOString().split("T")[0],Je.timestamps.completed=Ie),ae!=="Pending"&&(Je.pendingReason=void 0),{...ve,...Je}}return ve})),ae==="Completed"){const ve=e.find(Ie=>Ie.id===T);if(ve){const Ie=(ne=ve.timestamps)!=null&&ne.started?Date.now()-new Date(ve.timestamps.started).getTime():void 0;WI(d.employeeId,d.role,dt.WORK_ORDERS,"workorder",Ie||0,!0,[]);const Ue=[...l];ve.requiredInventory.forEach(Je=>{const Dt=Ue.find(Ot=>Ot.id===Je.itemId);Dt&&(Dt.quantity=Math.max(0,Dt.quantity-Je.quantity))}),o(Ue),Ca(ve)}}else{const ve=e.find(Ie=>Ie.id===T);ve&&Ha(d.employeeId,d.role,dt.WORK_ORDERS,`update_status_${ae.toLowerCase().replace(" ","_")}`,"update",{workOrderId:ve.id,fromStatus:ve.status,toStatus:ae})}},Ht=(T,ae)=>{r(e.map(ne=>ne.id===T?{...ne,hoursSpent:ae}:ne))},Tr=T=>{confirm("Weet je zeker dat je deze werkorder wilt verwijderen?")&&r(e.filter(ae=>ae.id!==T))},Sr=T=>{switch(T){case"Completed":return"bg-green-100 text-green-800 border-green-500";case"In Progress":return"bg-blue-100 text-blue-800 border-blue-500";case"Pending":return"bg-yellow-100 text-yellow-800 border-yellow-500";case"To Do":return"bg-gray-100 text-gray-800 border-gray-500"}},ft=T=>{var ae;return((ae=n.find(ne=>ne.id===T))==null?void 0:ae.name)||"Onbekend"},Xt=T=>{var ae;return T?((ae=a.find(ne=>ne.id===T))==null?void 0:ae.name)||"Onbekend":null},ts=()=>{if(!g||g.length===0)return`${new Date().getFullYear()}-001`;const T=new Date().getFullYear(),ae=g.filter(ve=>ve.invoiceNumber.startsWith(`${T}-`)).map(ve=>parseInt(ve.invoiceNumber.split("-")[1])).filter(ve=>!isNaN(ve)),ne=ae.length>0?Math.max(...ae)+1:1;return`${T}-${String(ne).padStart(3,"0")}`},La=(T,ae,ne)=>({timestamp:new Date().toISOString(),action:T,performedBy:d.employeeId,details:ae,...ne}),Ca=T=>{if(T.invoiceId){const lt=g==null?void 0:g.find(ze=>ze.id===T.invoiceId);if(lt){if(p&&T.hoursSpent){const ze=lt.labor?lt.labor.map(Qe=>({...Qe,hours:T.hoursSpent||Qe.hours,total:(T.hoursSpent||Qe.hours)*Qe.hourlyRate})):[],Ze=lt.items.reduce((Qe,gt)=>Qe+gt.total,0),A=ze.reduce((Qe,gt)=>Qe+gt.total,0),Q=Ze+A,J=Q*(lt.vatRate/100),we=Q+J,ot={...lt,labor:ze.length>0?ze:void 0,subtotal:Q,vatAmount:J,total:we,history:[...lt.history||[],La("updated",`Factuur bijgewerkt met werkelijke gewerkte uren (${T.hoursSpent}u) na voltooiing werkorder ${T.id}`)]};p(g.map(Qe=>Qe.id===lt.id?ot:Qe))}return}}if(T.quoteId){const lt=f.find(ze=>ze.id===T.quoteId);if(lt){const ze=g==null?void 0:g.find(Ze=>Ze.quoteId===lt.id);if(ze&&p&&T.hoursSpent&&ze.labor){const Ze=ze.labor.map(gt=>({...gt,hours:T.hoursSpent||gt.hours,total:(T.hoursSpent||gt.hours)*gt.hourlyRate})),A=ze.items.reduce((gt,At)=>gt+At.total,0),Q=Ze.reduce((gt,At)=>gt+At.total,0),J=A+Q,we=J*(ze.vatRate/100),ot=J+we,Qe={...ze,labor:Ze,subtotal:J,vatAmount:we,total:ot,workOrderId:T.id,history:[...ze.history||[],La("updated",`Factuur bijgewerkt met werkelijke gewerkte uren (${T.hoursSpent}u) na voltooiing werkorder ${T.id}`)]};p(g.map(gt=>gt.id===ze.id?Qe:gt)),r(e.map(gt=>gt.id===T.id?{...gt,invoiceId:ze.id}:gt));return}}}if(!p||!T.customerId){console.log("Kan geen factuur aanmaken: setInvoices of customerId ontbreekt");return}let ae=[],ne=[],ve=21;if(T.quoteId){const lt=f.find(ze=>ze.id===T.quoteId);lt&&(ae=[...lt.items],ne=lt.labor?[...lt.labor]:[],ve=lt.vatRate,T.hoursSpent&&ne.length>0&&(ne=ne.map(ze=>({...ze,hours:T.hoursSpent||ze.hours,total:(T.hoursSpent||ze.hours)*ze.hourlyRate}))))}ae.length===0&&(ae=T.requiredInventory.map(lt=>{const ze=l.find(Ze=>Ze.id===lt.itemId);return{inventoryItemId:lt.itemId,description:(ze==null?void 0:ze.name)||"Onbekend item",quantity:lt.quantity,pricePerUnit:(ze==null?void 0:ze.price)||0,total:((ze==null?void 0:ze.price)||0)*lt.quantity}}),ae.length===0&&(ae=[{description:`Werkzaamheden - ${T.title}`,quantity:1,pricePerUnit:T.estimatedCost||0,total:T.estimatedCost||0}])),ne.length===0&&T.hoursSpent&&T.hoursSpent>0&&(ne=[{description:`Werkzaamheden - ${T.title}`,hours:T.hoursSpent,hourlyRate:65,total:T.hoursSpent*65}]);const Ie=ae.reduce((lt,ze)=>lt+ze.total,0),Ue=ne.reduce((lt,ze)=>lt+ze.total,0),Je=Ie+Ue,Dt=Je*(ve/100),Ot=Je+Dt,Ce=new Date().toISOString().split("T")[0],De=new Date;De.setDate(De.getDate()+14);const Be=De.toISOString().split("T")[0],rt=new Date().toISOString();Xt(T.customerId);const et={id:`inv${Date.now()}`,invoiceNumber:ts(),customerId:T.customerId,workOrderId:T.id,quoteId:T.quoteId,items:ae,labor:ne.length>0?ne:void 0,subtotal:Je,vatRate:ve,vatAmount:Dt,total:Ot,status:"draft",issueDate:Ce,dueDate:Be,paymentTerms:"14 dagen",notes:`Factuur aangemaakt automatisch na voltooiing werkorder ${T.id}
${T.notes||""}`,location:T.location,scheduledDate:T.scheduledDate,createdBy:d.employeeId,timestamps:{created:rt},history:[La("created",`Factuur automatisch aangemaakt na voltooiing werkorder ${T.id} door ${ft(d.employeeId)}`)]};p([...g,et]),r(e.map(lt=>lt.id===T.id?{...lt,invoiceId:et.id}:lt)),alert(` Factuur ${et.invoiceNumber} automatisch aangemaakt voor voltooide werkorder ${T.id}!

Bekijk de factuur in de Boekhouding module.`)},wn=T=>{if(T.quoteId){const ae=f.find(ne=>ne.id===T.quoteId);if(ae){U("quote"),Y(ae),P(!0);return}}if(T.invoiceId){const ae=g.find(ne=>ne.id===T.invoiceId);if(ae){U("invoice"),Y(ae),P(!0);return}}L(T),_(!0)},$a=()=>{if(q){if(z==="quote"){const T=q;Le({customerId:T.customerId,items:T.items,labor:T.labor||[],vatRate:T.vatRate,notes:T.notes||"",validUntil:T.validUntil})}else{const T=q;Le({customerId:T.customerId,items:T.items,labor:T.labor||[],vatRate:T.vatRate,notes:T.notes||"",paymentTerms:T.paymentTerms,issueDate:T.issueDate,dueDate:T.dueDate})}P(!1),Z(!0)}},Bs=()=>{if(q){if(z==="quote"){const T=q;Le({customerId:T.customerId,items:T.items.map(ae=>({...ae})),labor:T.labor?T.labor.map(ae=>({...ae})):[],vatRate:T.vatRate,notes:T.notes||"",validUntil:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0]})}else{const T=q,ae=new Date().toISOString().split("T")[0],ne=new Date;ne.setDate(ne.getDate()+14),Le({customerId:T.customerId,items:T.items.map(ve=>({...ve})),labor:T.labor?T.labor.map(ve=>({...ve})):[],vatRate:T.vatRate,notes:T.notes||"",paymentTerms:T.paymentTerms,issueDate:ae,dueDate:ne.toISOString().split("T")[0]})}P(!1),de(!0)}},hn=()=>{if(!ce)return{subtotal:0,vatAmount:0,total:0};const T=ce.items.reduce((Ue,Je)=>Ue+Je.total,0),ae=ce.labor.reduce((Ue,Je)=>Ue+Je.total,0),ne=T+ae,ve=ne*(ce.vatRate/100),Ie=ne+ve;return{subtotal:ne,vatAmount:ve,total:Ie}},gn=(T,ae,ne)=>{if(!ce)return;const ve=[...ce.items];ve[T]={...ve[T],[ae]:ne},(ae==="quantity"||ae==="pricePerUnit")&&(ve[T].total=ve[T].quantity*ve[T].pricePerUnit),Le({...ce,items:ve})},Qr=(T,ae,ne)=>{if(!ce)return;const ve=[...ce.labor];ve[T]={...ve[T],[ae]:ne},(ae==="hours"||ae==="hourlyRate")&&(ve[T].total=ve[T].hours*ve[T].hourlyRate),Le({...ce,labor:ve})},Bn=()=>{if(!ce)return;const T={description:"",quantity:1,pricePerUnit:0,total:0};Le({...ce,items:[...ce.items,T]})},Bt=()=>{if(!ce)return;const T={description:"",hours:1,hourlyRate:65,total:65};Le({...ce,labor:[...ce.labor,T]})},sa=T=>{ce&&Le({...ce,items:ce.items.filter((ae,ne)=>ne!==T)})},Vr=T=>{ce&&Le({...ce,labor:ce.labor.filter((ae,ne)=>ne!==T)})},In=(T,ae)=>{if(!ce)return;const ne=l.find(ve=>ve.id===ae);if(ne){const ve=[...ce.items];ve[T]={...ve[T],inventoryItemId:ae,description:ne.name,pricePerUnit:ne.price||0,total:ve[T].quantity*(ne.price||0)},Le({...ce,items:ve})}},Fn=()=>{if(!f||f.length===0)return"Q001";const T=f.map(ne=>parseInt(ne.id.replace("Q",""))).filter(ne=>!isNaN(ne)),ae=T.length>0?Math.max(...T)+1:1;return`Q${String(ae).padStart(3,"0")}`},Ai=()=>{if(!ce||!q||z!=="quote"||!h)return;const{subtotal:T,vatAmount:ae,total:ne}=hn(),ve=q,Ie={...ve,customerId:ce.customerId,items:ce.items,labor:ce.labor.length>0?ce.labor:void 0,subtotal:T,vatRate:ce.vatRate,vatAmount:ae,total:ne,notes:ce.notes,validUntil:ce.validUntil||ve.validUntil,history:[...ve.history||[],{timestamp:new Date().toISOString(),action:"updated",performedBy:d.employeeId,details:`Offerte bijgewerkt door ${ft(d.employeeId)}`}]};h(f.map(Ue=>Ue.id===ve.id?Ie:Ue)),Z(!1),Le(null),P(!1),Y(null),alert(` Offerte ${ve.id} succesvol bijgewerkt!`)},Fs=()=>{if(!ce||!q||z!=="invoice"||!p)return;const{subtotal:T,vatAmount:ae,total:ne}=hn(),ve=q,Ie={...ve,customerId:ce.customerId,items:ce.items,labor:ce.labor.length>0?ce.labor:void 0,subtotal:T,vatRate:ce.vatRate,vatAmount:ae,total:ne,notes:ce.notes,paymentTerms:ce.paymentTerms,issueDate:ce.issueDate||ve.issueDate,dueDate:ce.dueDate||ve.dueDate,history:[...ve.history||[],La("updated",`Factuur bijgewerkt door ${ft(d.employeeId)}`)]};p(g.map(Ue=>Ue.id===ve.id?Ie:Ue)),Z(!1),Le(null),P(!1),Y(null),alert(` Factuur ${ve.invoiceNumber} succesvol bijgewerkt!`)},rs=(T=!1)=>{if(!ce||z!=="quote"||!h)return;if(!ce.customerId||ce.items.length===0||!ce.validUntil){alert("Vul alle verplichte velden in!");return}const{subtotal:ae,vatAmount:ne,total:ve}=hn(),Ie=new Date().toISOString(),Ue=Xt(ce.customerId)||"Onbekend",Je=Fn(),Dt={id:Je,customerId:ce.customerId,items:ce.items,labor:ce.labor.length>0?ce.labor:void 0,subtotal:ae,vatRate:ce.vatRate,vatAmount:ne,total:ve,status:"draft",validUntil:ce.validUntil,notes:ce.notes,createdBy:d.employeeId,timestamps:{created:Ie},history:[{timestamp:Ie,action:"created",performedBy:d.employeeId,details:`Offerte gecloneerd door ${ft(d.employeeId)} voor klant ${Ue}`}]};h([...f,Dt]),de(!1),Le(null),T?(Me(Dt),le(!0)):alert(` Offerte ${Je} succesvol gecloneerd!`)},Us=(T=!1)=>{if(!ce||z!=="invoice"||!p)return;if(!ce.customerId||ce.items.length===0||!ce.issueDate||!ce.dueDate){alert("Vul alle verplichte velden in!");return}const{subtotal:ae,vatAmount:ne,total:ve}=hn(),Ie=new Date().toISOString(),Ue=Xt(ce.customerId)||"Onbekend",Je=ts(),Dt={id:`inv${Date.now()}`,invoiceNumber:Je,customerId:ce.customerId,items:ce.items,labor:ce.labor.length>0?ce.labor:void 0,subtotal:ae,vatRate:ce.vatRate,vatAmount:ne,total:ve,status:"draft",issueDate:ce.issueDate,dueDate:ce.dueDate,paymentTerms:ce.paymentTerms||"14 dagen",notes:ce.notes,createdBy:d.employeeId,timestamps:{created:Ie},history:[La("created",`Factuur gecloneerd door ${ft(d.employeeId)} voor klant ${Ue}`)]};p([...g,Dt]),de(!1),Le(null),T?(Me(Dt),le(!0)):alert(` Factuur ${Je} succesvol gecloneerd!`)},ns=()=>{var ne,ve;if(!ye||!Ne){alert("Selecteer een medewerker!");return}const T=new Date().toISOString(),ae=`wo${Date.now()}`;if(Ne.id.startsWith("Q")){const Ie=Ne,Ue=Xt(Ie.customerId)||"Onbekend",Je=((ne=Ie.labor)==null?void 0:ne.reduce((Ot,Ce)=>Ot+Ce.hours,0))||0,Dt={id:ae,title:`${Ue} - Offerte ${Ie.id}`,description:Ie.notes||`Werkorder aangemaakt vanuit offerte ${Ie.id}`,status:"To Do",assignedTo:ye,assignedBy:d.employeeId,convertedBy:d.employeeId,requiredInventory:Ie.items.filter(Ot=>Ot.inventoryItemId).map(Ot=>({itemId:Ot.inventoryItemId,quantity:Ot.quantity})),createdDate:new Date().toISOString().split("T")[0],customerId:Ie.customerId,quoteId:Ie.id,estimatedHours:Je,estimatedCost:Ie.total,notes:`Geschatte uren: ${Je}u
Geschatte kosten: ${Ie.total.toFixed(2)}`,timestamps:{created:T,converted:T,assigned:T},history:[{timestamp:T,action:"created",performedBy:d.employeeId,details:`Werkorder aangemaakt door ${ft(d.employeeId)}`},{timestamp:T,action:"converted",performedBy:d.employeeId,details:`Geconverteerd van geclonede offerte ${Ie.id} door ${ft(d.employeeId)}`},{timestamp:T,action:"assigned",performedBy:d.employeeId,details:`Toegewezen aan ${ft(ye)} door ${ft(d.employeeId)}`}]};r([...e,Dt]),le(!1),ge(""),Me(null),alert(` Werkorder ${ae} succesvol aangemaakt en toegewezen aan ${ft(ye)}!`)}else{const Ie=Ne,Ue=Xt(Ie.customerId)||"Onbekend",Je=((ve=Ie.labor)==null?void 0:ve.reduce((Ot,Ce)=>Ot+Ce.hours,0))||0,Dt={id:ae,title:`${Ue} - Factuur ${Ie.invoiceNumber}`,description:Ie.notes||`Werkorder aangemaakt vanuit factuur ${Ie.invoiceNumber}`,status:"To Do",assignedTo:ye,assignedBy:d.employeeId,convertedBy:d.employeeId,requiredInventory:Ie.items.filter(Ot=>Ot.inventoryItemId).map(Ot=>({itemId:Ot.inventoryItemId,quantity:Ot.quantity})),createdDate:new Date().toISOString().split("T")[0],customerId:Ie.customerId,invoiceId:Ie.id,estimatedHours:Je,estimatedCost:Ie.total,notes:`Geschatte uren: ${Je}u
Geschatte kosten: ${Ie.total.toFixed(2)}`,timestamps:{created:T,converted:T,assigned:T},history:[{timestamp:T,action:"created",performedBy:d.employeeId,details:`Werkorder aangemaakt door ${ft(d.employeeId)}`},{timestamp:T,action:"converted",performedBy:d.employeeId,details:`Geconverteerd van geclonede factuur ${Ie.invoiceNumber} door ${ft(d.employeeId)}`},{timestamp:T,action:"assigned",performedBy:d.employeeId,details:`Toegewezen aan ${ft(ye)} door ${ft(d.employeeId)}`}]};r([...e,Dt]),le(!1),ge(""),Me(null),alert(` Werkorder ${ae} succesvol aangemaakt en toegewezen aan ${ft(ye)}!`)}},Da=n.find(T=>T.id===C);return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-neutral truncate",children:m&&C==="all"?"Alle Werkorders":`Workboard - ${(Da==null?void 0:Da.name)||d.name}`}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:m&&C==="all"?"Volledig overzicht van alle werkorders":"Jouw toegewezen taken en werkzaamheden"})]}),m&&t.jsx("button",{onClick:()=>w(!b),className:"w-full sm:w-auto px-6 py-2 sm:py-2.5 bg-primary text-white text-sm sm:text-base rounded-lg hover:bg-secondary transition-colors whitespace-nowrap flex-shrink-0",children:"+ Nieuwe Werkorder"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 w-full sm:w-auto",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:m?"Bekijk werkorders van:":"Bekijk ook:"}),t.jsxs("select",{value:C,onChange:T=>{O(T.target.value),E(null)},className:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-sm sm:text-base",children:[t.jsx("option",{value:d.employeeId,children:"Mijn werkorders"}),m&&t.jsx("option",{value:"all",children:"Alle medewerkers"}),n.filter(T=>T.id!==d.employeeId).map(T=>t.jsxs("option",{value:T.id,children:[T.name," (",T.role,")"]},T.id))]}),k&&t.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold flex items-center gap-2",children:[" Filter:"," ",k==="To Do"?"To Do":k==="Pending"?"In Wacht":k==="In Progress"?"In Uitvoering":"Afgerond"]})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-4 md:mt-0 md:ml-auto",children:[t.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Weergave:"}),t.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[t.jsx("button",{onClick:()=>D(!1),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${M?"text-gray-600 hover:text-gray-800":"bg-white text-primary shadow-sm"}`,title:"Normale weergave met alle details",children:" Uitgebreid"}),t.jsx("button",{onClick:()=>D(!0),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${M?"bg-white text-primary shadow-sm":"text-gray-600 hover:text-gray-800"}`,title:"Compacte weergave - alleen omschrijving",children:" Compact"})]})]}),t.jsxs("div",{className:"hidden md:flex items-center gap-4 lg:gap-6",children:[t.jsxs("button",{onClick:()=>E(k==="To Do"?null:"To Do"),className:`text-center transition-all rounded-lg px-4 py-3 border-2 ${k==="To Do"?"bg-gray-200 border-gray-400 shadow-lg transform scale-105":"bg-white border-gray-300 hover:border-gray-400 hover:bg-gray-50 hover:shadow-md cursor-pointer active:scale-95"}`,title:"Klik om te filteren op To Do werkorders",children:[t.jsx("p",{className:"text-xl lg:text-2xl font-bold text-gray-600",children:Tt.todo}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["To Do"," ",k!=="To Do"&&t.jsx("span",{className:"text-gray-400",children:""})]})]}),t.jsxs("button",{onClick:()=>E(k==="Pending"?null:"Pending"),className:`text-center transition-all rounded-lg px-4 py-3 border-2 ${k==="Pending"?"bg-yellow-200 border-yellow-400 shadow-lg transform scale-105":"bg-white border-yellow-300 hover:border-yellow-400 hover:bg-yellow-50 hover:shadow-md cursor-pointer active:scale-95"}`,title:"Klik om te filteren op In Wacht werkorders",children:[t.jsx("p",{className:"text-xl lg:text-2xl font-bold text-yellow-600",children:Tt.pending}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["In Wacht"," ",k!=="Pending"&&t.jsx("span",{className:"text-gray-400",children:""})]})]}),t.jsxs("button",{onClick:()=>E(k==="In Progress"?null:"In Progress"),className:`text-center transition-all rounded-lg px-4 py-3 border-2 ${k==="In Progress"?"bg-blue-200 border-blue-400 shadow-lg transform scale-105":"bg-white border-blue-300 hover:border-blue-400 hover:bg-blue-50 hover:shadow-md cursor-pointer active:scale-95"}`,title:"Klik om te filteren op In Uitvoering werkorders",children:[t.jsx("p",{className:"text-xl lg:text-2xl font-bold text-blue-600",children:Tt.inProgress}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["Bezig"," ",k!=="In Progress"&&t.jsx("span",{className:"text-gray-400",children:""})]})]}),t.jsxs("button",{onClick:()=>E(k==="Completed"?null:"Completed"),className:`text-center transition-all rounded-lg px-4 py-3 border-2 ${k==="Completed"?"bg-green-200 border-green-400 shadow-lg transform scale-105":"bg-white border-green-300 hover:border-green-400 hover:bg-green-50 hover:shadow-md cursor-pointer active:scale-95"}`,title:"Klik om te filteren op Afgerond werkorders",children:[t.jsx("p",{className:"text-xl lg:text-2xl font-bold text-green-600",children:Tt.completed}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["Afgerond"," ",k!=="Completed"&&t.jsx("span",{className:"text-gray-400",children:""})]})]}),t.jsxs("div",{className:"text-center bg-gray-50 rounded-lg px-4 py-3 border-2 border-transparent",children:[t.jsxs("p",{className:"text-xl lg:text-2xl font-bold text-primary",children:[Tt.totalHours,"u"]}),t.jsx("p",{className:"text-xs text-gray-600",children:"Totaal uren"})]}),k&&t.jsx("button",{onClick:()=>E(null),className:"px-3 py-2 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors shadow-md font-semibold",title:"Verwijder filter",children:" Filter wissen"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4 md:hidden",children:[t.jsxs("button",{onClick:()=>E(k==="To Do"?null:"To Do"),className:`rounded-lg p-3 text-center transition-all border-2 ${k==="To Do"?"bg-gray-200 border-gray-400 shadow-lg":"bg-white border-gray-300 hover:border-gray-400 hover:bg-gray-50 hover:shadow-md active:scale-95"}`,title:"Klik om te filteren op To Do werkorders",children:[t.jsx("p",{className:"text-lg font-bold text-gray-600",children:Tt.todo}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["To Do"," ",k!=="To Do"&&t.jsx("span",{className:"text-gray-400 text-[10px]",children:""})]})]}),t.jsxs("button",{onClick:()=>E(k==="Pending"?null:"Pending"),className:`rounded-lg p-3 text-center transition-all border-2 ${k==="Pending"?"bg-yellow-200 border-yellow-400 shadow-lg":"bg-white border-yellow-300 hover:border-yellow-400 hover:bg-yellow-50 hover:shadow-md active:scale-95"}`,title:"Klik om te filteren op In Wacht werkorders",children:[t.jsx("p",{className:"text-lg font-bold text-yellow-600",children:Tt.pending}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["Wacht"," ",k!=="Pending"&&t.jsx("span",{className:"text-gray-400 text-[10px]",children:""})]})]}),t.jsxs("button",{onClick:()=>E(k==="In Progress"?null:"In Progress"),className:`rounded-lg p-3 text-center transition-all border-2 ${k==="In Progress"?"bg-blue-200 border-blue-400 shadow-lg":"bg-white border-blue-300 hover:border-blue-400 hover:bg-blue-50 hover:shadow-md active:scale-95"}`,title:"Klik om te filteren op In Uitvoering werkorders",children:[t.jsx("p",{className:"text-lg font-bold text-blue-600",children:Tt.inProgress}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["Bezig"," ",k!=="In Progress"&&t.jsx("span",{className:"text-gray-400 text-[10px]",children:""})]})]}),t.jsxs("button",{onClick:()=>E(k==="Completed"?null:"Completed"),className:`rounded-lg p-3 text-center transition-all border-2 ${k==="Completed"?"bg-green-200 border-green-400 shadow-lg":"bg-white border-green-300 hover:border-green-400 hover:bg-green-50 hover:shadow-md active:scale-95"}`,title:"Klik om te filteren op Afgerond werkorders",children:[t.jsx("p",{className:"text-lg font-bold text-green-600",children:Tt.completed}),t.jsxs("p",{className:"text-xs text-gray-600 flex items-center justify-center gap-1",children:["Klaar"," ",k!=="Completed"&&t.jsx("span",{className:"text-gray-400 text-[10px]",children:""})]})]}),t.jsxs("div",{className:"bg-primary bg-opacity-10 rounded-lg p-3 text-center col-span-2 border-2 border-transparent",children:[t.jsxs("p",{className:"text-lg font-bold text-primary",children:[Tt.totalHours,"u"]}),t.jsx("p",{className:"text-xs text-gray-600",children:"Totaal uren"})]}),k&&t.jsx("button",{onClick:()=>E(null),className:"col-span-3 px-3 py-2 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors shadow-md font-semibold",title:"Verwijder filter",children:" Filter wissen"})]})]}),b&&m&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Nieuwe Werkorder"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Titel *",value:X.title,onChange:T=>Re({...X,title:T.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:X.assignedTo,onChange:T=>Re({...X,assignedTo:T.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer medewerker *"}),n.map(T=>t.jsxs("option",{value:T.id,children:[T.name," - ",T.role]},T.id))]}),t.jsxs("select",{value:X.customerId,onChange:T=>Re({...X,customerId:T.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Klant (optioneel)"}),a.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))]}),t.jsx("input",{type:"text",placeholder:"Locatie",value:X.location,onChange:T=>Re({...X,location:T.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"date",placeholder:"Geplande datum",value:X.scheduledDate,onChange:T=>Re({...X,scheduledDate:T.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"number",placeholder:"Indexnummer (optioneel)",value:X.sortIndex!==void 0?X.sortIndex:"",onChange:T=>Re({...X,sortIndex:T.target.value?parseInt(T.target.value):void 0}),min:"1",max:"999",className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",title:"Laat leeg voor automatisch volgnummer. Lagere nummers verschijnen bovenaan."}),t.jsx("textarea",{placeholder:"Beschrijving",value:X.description,onChange:T=>Re({...X,description:T.target.value}),rows:2,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("input",{type:"checkbox",id:"addPendingReason",checked:st,onChange:T=>{H(T.target.checked),T.target.checked||Re({...X,pendingReason:""})},className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),t.jsx("label",{htmlFor:"addPendingReason",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Werkorder in wacht zetten (optioneel)"})]}),st&&t.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Reden voor wachtstatus"})]}),t.jsx("input",{type:"text",placeholder:"bijv: Wacht op materiaal, wacht op klant bevestiging...",value:X.pendingReason,onChange:T=>Re({...X,pendingReason:T.target.value}),className:"w-full px-4 py-2 border border-yellow-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"}),t.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Geef aan waarom deze werkorder in wacht staat."})]})]}),t.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Benodigde Materialen (optioneel)"})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[v.length>0&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",style:{minWidth:"150px"},children:[t.jsx("button",{type:"button",onClick:()=>{Ye(!qe),_e("")},className:`w-full px-3 py-2 text-left border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors text-sm ${zt?"bg-primary text-white border-primary":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:zt?((Sn=v.find(T=>T.id===zt))==null?void 0:Sn.name)||"Categorie":" Categorie"}),t.jsx("span",{className:"text-xs",children:""})]})}),qe&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>Ye(!1)}),t.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsx("input",{type:"text",placeholder:"Zoek categorie...",value:Te,onChange:T=>_e(T.target.value),onClick:T=>T.stopPropagation(),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})}),t.jsxs("div",{className:"overflow-y-auto max-h-48",children:[t.jsx("button",{type:"button",onClick:()=>{te(""),Ye(!1),_e("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors ${zt?"":"bg-blue-50 font-semibold"}`,children:t.jsx("span",{className:"text-gray-600",children:"Alle categorien"})}),it.map(T=>t.jsxs("button",{type:"button",onClick:()=>{te(T.id),Ye(!1),_e("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors flex items-center gap-2 ${zt===T.id?"bg-blue-50 font-semibold":""}`,children:[t.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:T.color||"#3B82F6"}}),t.jsx("span",{children:T.name})]},T.id))]})]})]})]}),zt&&t.jsx("button",{type:"button",onClick:()=>{te(""),_e("")},className:"px-2 py-2 text-xs text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:""})]}),t.jsx("input",{type:"text",placeholder:"Zoek op naam, SKU, categorie...",value:bt,onChange:T=>nr(T.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("select",{value:at,onChange:T=>je(T.target.value),className:"px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[t.jsx("option",{value:"",children:"Selecteer materiaal"}),xt.map(T=>t.jsxs("option",{value:T.id,children:[T.name," (",T.autoSku||T.sku,") - Voorraad:"," ",T.quantity]},T.id))]}),t.jsx("input",{type:"number",min:"1",value:vt,onChange:T=>Xe(parseInt(T.target.value)||1),className:"px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Aantal"}),t.jsx("button",{type:"button",onClick:$t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"+ Materiaal Toevoegen"})]})]}),ut.length>0?t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Toegevoegde materialen:"}),ut.map(T=>{const ae=l.find(ne=>ne.id===T.itemId);return t.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-blue-200",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium",children:ae==null?void 0:ae.name}),t.jsxs("span",{className:"text-xs text-gray-600 ml-2",children:[" ",T.quantity]})]}),t.jsx("button",{type:"button",onClick:()=>tn(T.itemId),className:"text-red-600 hover:text-red-800 p-1",title:"Verwijderen",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},T.itemId)})]}):t.jsx("p",{className:"text-xs text-gray-500 italic",children:"Geen materialen toegevoegd"})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:Pr,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Toevoegen"}),t.jsx("button",{onClick:()=>w(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),N&&m&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral",children:"Werkorder Bewerken"}),t.jsx("button",{onClick:lr,className:"text-gray-500 hover:text-gray-700",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titel *"}),t.jsx("input",{type:"text",value:N.title,onChange:T=>S({...N,title:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Toegewezen aan *"}),t.jsx("select",{value:N.assignedTo,onChange:T=>S({...N,assignedTo:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:n.map(T=>t.jsxs("option",{value:T.id,children:[T.name," - ",T.role]},T.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:N.status,onChange:T=>S({...N,status:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"To Do",children:"To Do"}),t.jsx("option",{value:"Pending",children:"In Wacht"}),t.jsx("option",{value:"In Progress",children:"In Uitvoering"}),t.jsx("option",{value:"Completed",children:"Afgerond"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klant"}),t.jsxs("select",{value:N.customerId||"",onChange:T=>S({...N,customerId:T.target.value||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen klant"}),a.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Locatie"}),t.jsx("input",{type:"text",value:N.location||"",onChange:T=>S({...N,location:T.target.value||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Geplande datum"}),t.jsx("input",{type:"date",value:N.scheduledDate||"",onChange:T=>S({...N,scheduledDate:T.target.value||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gewerkte uren"}),t.jsx("input",{type:"number",step:"0.5",min:"0",value:N.hoursSpent||0,onChange:T=>S({...N,hoursSpent:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aanmaak datum"}),t.jsx("input",{type:"text",value:N.createdDate,disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 cursor-not-allowed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Indexnummer (optioneel)"}),t.jsx("input",{type:"number",value:N.sortIndex!==void 0?N.sortIndex:"",onChange:T=>S({...N,sortIndex:T.target.value?parseInt(T.target.value):void 0}),placeholder:"Auto",min:"1",max:"999",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",title:"Laat leeg voor automatisch volgnummer. Lagere nummers verschijnen bovenaan."}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lagere nummers verschijnen bovenaan. Laat leeg voor automatisch volgnummer."})]})]}),N.status==="Pending"&&t.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reden waarom in wacht"}),t.jsx("input",{type:"text",value:N.pendingReason||"",onChange:T=>S({...N,pendingReason:T.target.value}),placeholder:"Bijv: Wacht op materialen, wacht op klant bevestiging...",className:"w-full px-4 py-2 border border-yellow-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500"}),t.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Deze reden is zichtbaar voor alle medewerkers"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschrijving"}),t.jsx("textarea",{value:N.description,onChange:T=>S({...N,description:T.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Benodigde Materialen"})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[v.length>0&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",style:{minWidth:"150px"},children:[t.jsx("button",{type:"button",onClick:()=>{$e(!Pe),oe("")},className:`w-full px-3 py-2 text-left border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors text-sm ${Fe?"bg-primary text-white border-primary":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:Fe?((mr=v.find(T=>T.id===Fe))==null?void 0:mr.name)||"Categorie":" Categorie"}),t.jsx("span",{className:"text-xs",children:""})]})}),Pe&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>$e(!1)}),t.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsx("input",{type:"text",placeholder:"Zoek categorie...",value:se,onChange:T=>oe(T.target.value),onClick:T=>T.stopPropagation(),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})}),t.jsxs("div",{className:"overflow-y-auto max-h-48",children:[t.jsx("button",{type:"button",onClick:()=>{F(""),$e(!1),oe("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors ${Fe?"":"bg-blue-50 font-semibold"}`,children:t.jsx("span",{className:"text-gray-600",children:"Alle categorien"})}),Ke.map(T=>t.jsxs("button",{type:"button",onClick:()=>{F(T.id),$e(!1),oe("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors flex items-center gap-2 ${Fe===T.id?"bg-blue-50 font-semibold":""}`,children:[t.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:T.color||"#3B82F6"}}),t.jsx("span",{children:T.name})]},T.id))]})]})]})]}),Fe&&t.jsx("button",{type:"button",onClick:()=>{F(""),oe("")},className:"px-2 py-2 text-xs text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:""})]}),t.jsx("input",{type:"text",placeholder:"Zoek op naam, SKU, categorie...",value:Ve,onChange:T=>We(T.target.value),className:"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.jsxs("select",{value:Ae,onChange:T=>Ee(T.target.value),className:"px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[t.jsx("option",{value:"",children:"Selecteer materiaal"}),Ar.map(T=>t.jsxs("option",{value:T.id,children:[T.name," (",T.autoSku||T.sku,") - Voorraad:"," ",T.quantity]},T.id))]}),t.jsx("input",{type:"number",min:"1",value:W,onChange:T=>me(parseInt(T.target.value)||1),className:"px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:"Aantal"}),t.jsx("button",{type:"button",onClick:pr,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"+ Toevoegen"})]})]}),N.requiredInventory.length>0?t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Toegevoegde materialen:"}),N.requiredInventory.map(T=>{const ae=l.find(ne=>ne.id===T.itemId);return t.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border border-blue-200",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium",children:ae==null?void 0:ae.name}),t.jsxs("span",{className:"text-xs text-gray-600 ml-2",children:[" ",T.quantity]}),t.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(Voorraad: ",ae==null?void 0:ae.quantity,")"]})]}),t.jsx("button",{type:"button",onClick:()=>Nn(T.itemId),className:"text-red-600 hover:text-red-800 p-1",title:"Verwijderen",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},T.itemId)})]}):t.jsx("p",{className:"text-xs text-gray-500 italic",children:"Geen materialen toegevoegd"})]}),N.notes!==void 0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:N.notes||"",onChange:T=>S({...N,notes:T.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(N.timestamps||N.history&&N.history.length>0)&&t.jsxs("div",{className:"border-t pt-4 mt-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-3",children:"Werkorder Geschiedenis"}),t.jsx(AO,{history:N.history||[],timestamps:N.timestamps,getEmployeeName:ft})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:fn,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:"Opslaan"}),t.jsx("button",{onClick:lr,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})})}),jn?t.jsx("div",{className:"space-y-8",children:n.map(T=>{const ae=jn[T.id]||[];if(k&&ae.length===0)return null;const ne={todo:ae.filter(ve=>ve.status==="To Do").length,pending:ae.filter(ve=>ve.status==="Pending").length,inProgress:ae.filter(ve=>ve.status==="In Progress").length,completed:ae.filter(ve=>ve.status==="Completed").length,totalHours:ae.reduce((ve,Ie)=>ve+(Ie.hoursSpent||0),0)};return t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border-t-4 border-primary",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-full flex items-center justify-center text-white font-bold text-lg",children:T.name.split(" ").map(ve=>ve[0]).join("")}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-bold text-neutral",children:T.name}),t.jsx("p",{className:"text-sm text-gray-600",children:T.role})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center px-3 py-2 bg-gray-100 rounded-lg",children:[t.jsx("p",{className:"text-lg font-bold text-gray-700",children:ne.todo}),t.jsx("p",{className:"text-xs text-gray-600",children:"To Do"})]}),t.jsxs("div",{className:"text-center px-3 py-2 bg-yellow-100 rounded-lg",children:[t.jsx("p",{className:"text-lg font-bold text-yellow-700",children:ne.pending}),t.jsx("p",{className:"text-xs text-gray-600",children:"In Wacht"})]}),t.jsxs("div",{className:"text-center px-3 py-2 bg-blue-100 rounded-lg",children:[t.jsx("p",{className:"text-lg font-bold text-blue-700",children:ne.inProgress}),t.jsx("p",{className:"text-xs text-gray-600",children:"Bezig"})]}),t.jsxs("div",{className:"text-center px-3 py-2 bg-green-100 rounded-lg",children:[t.jsx("p",{className:"text-lg font-bold text-green-700",children:ne.completed}),t.jsx("p",{className:"text-xs text-gray-600",children:"Afgerond"})]}),t.jsxs("div",{className:"text-center px-3 py-2 bg-primary bg-opacity-10 rounded-lg",children:[t.jsxs("p",{className:"text-lg font-bold text-primary",children:[ne.totalHours,"u"]}),t.jsx("p",{className:"text-xs text-gray-600",children:"Uren"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"font-semibold text-neutral flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"w-2 h-2 bg-gray-500 rounded-full"}),"To Do"]}),t.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-800 text-xs font-bold rounded-full",children:ne.todo})]}),t.jsxs("div",{className:"space-y-2",children:[ae.filter(ve=>ve.status==="To Do").map(ve=>t.jsx(ui,{order:ve,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt,compactView:M},ve.id)),ne.todo===0&&t.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Geen taken"})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"font-semibold text-neutral flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),"In Wacht"]}),t.jsx("span",{className:"px-2 py-1 bg-yellow-200 text-yellow-800 text-xs font-bold rounded-full",children:ne.pending})]}),t.jsxs("div",{className:"space-y-2",children:[ae.filter(ve=>ve.status==="Pending").map(ve=>t.jsx(ui,{order:ve,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt,compactView:M},ve.id)),ne.pending===0&&t.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Geen taken"})]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"font-semibold text-neutral flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"In Uitvoering"]}),t.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 text-xs font-bold rounded-full",children:ne.inProgress})]}),t.jsxs("div",{className:"space-y-2",children:[ae.filter(ve=>ve.status==="In Progress").map(ve=>t.jsx(ui,{order:ve,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt,compactView:M},ve.id)),ne.inProgress===0&&t.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Geen taken"})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h4",{className:"font-semibold text-neutral flex items-center gap-2 text-sm",children:[t.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Afgerond"]}),t.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs font-bold rounded-full",children:ne.completed})]}),t.jsxs("div",{className:"space-y-2",children:[ae.filter(ve=>ve.status==="Completed").map(ve=>t.jsx(ui,{order:ve,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt,compactView:M},ve.id)),ne.completed===0&&t.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"Geen taken"})]})]})]})]},T.id)})}):t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsxs("h3",{className:"font-semibold text-neutral flex items-center gap-2 text-sm sm:text-base",children:[t.jsx("span",{className:"w-3 h-3 bg-gray-500 rounded-full"}),"To Do"]}),t.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-800 text-xs font-bold rounded-full",children:ur.filter(T=>T.status==="To Do").length})]}),t.jsxs("div",{className:"space-y-3",children:[ur.filter(T=>T.status==="To Do").map(T=>t.jsx(ui,{order:T,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt},T.id)),ur.filter(T=>T.status==="To Do").length===0&&t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-6 sm:py-8",children:"Geen taken om te starten"})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 sm:p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsxs("h3",{className:"font-semibold text-neutral flex items-center gap-2 text-sm sm:text-base",children:[t.jsx("span",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),"In Wacht"]}),t.jsx("span",{className:"px-2 py-1 bg-yellow-200 text-yellow-800 text-xs font-bold rounded-full",children:ur.filter(T=>T.status==="Pending").length})]}),t.jsxs("div",{className:"space-y-3",children:[ur.filter(T=>T.status==="Pending").map(T=>t.jsx(ui,{order:T,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt,compactView:M},T.id)),ur.filter(T=>T.status==="Pending").length===0&&t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-6 sm:py-8",children:"Geen taken in wacht"})]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 sm:p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsxs("h3",{className:"font-semibold text-neutral flex items-center gap-2 text-sm sm:text-base",children:[t.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full"}),"In Uitvoering"]}),t.jsx("span",{className:"px-2 py-1 bg-blue-200 text-blue-800 text-xs font-bold rounded-full",children:ur.filter(T=>T.status==="In Progress").length})]}),t.jsxs("div",{className:"space-y-3",children:[ur.filter(T=>T.status==="In Progress").map(T=>t.jsx(ui,{order:T,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt,compactView:M},T.id)),ur.filter(T=>T.status==="In Progress").length===0&&t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-6 sm:py-8",children:"Geen actieve taken"})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-3 sm:p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[t.jsxs("h3",{className:"font-semibold text-neutral flex items-center gap-2 text-sm sm:text-base",children:[t.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),"Afgerond"]}),t.jsx("span",{className:"px-2 py-1 bg-green-200 text-green-800 text-xs font-bold rounded-full",children:ur.filter(T=>T.status==="Completed").length})]}),t.jsxs("div",{className:"space-y-3",children:[ur.filter(T=>T.status==="Completed").map(T=>t.jsx(ui,{order:T,employees:n,customers:a,currentUser:d,isAdmin:m,inventory:l,onUpdateStatus:_r,onUpdateHours:Ht,onDelete:Tr,onEdit:Nt,onOpenDetail:wn,getEmployeeName:ft,getCustomerName:Xt},T.id)),ur.filter(T=>T.status==="Completed").length===0&&t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-6 sm:py-8",children:"Geen afgeronde taken"})]})]})]}),ur.length===0&&!jn&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"w-20 h-20 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),t.jsx("p",{className:"text-gray-500",children:"Geen werkorders gevonden"})]}),R&&q&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-4xl sm:w-full h-full sm:h-auto sm:my-8 sm:max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between z-10",children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral",children:z==="quote"?" Offerte Details":" Factuur Details"}),t.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"p-6",children:[z==="quote"?t.jsx(t.Fragment,{children:(()=>{var Ot;const T=q,ae=Xt(T.customerId)||"Onbekend",ne=T.items.reduce((Ce,De)=>Ce+De.total,0),ve=((Ot=T.labor)==null?void 0:Ot.reduce((Ce,De)=>Ce+De.total,0))||0,Ie=ne+ve,Ue=Ie*(T.vatRate/100),Je=Ie+Ue,Dt=mH(T,g||[],e,(Ce,De)=>{if(P(!1),Ce===dt.WORK_ORDERS){const Be=e.find(rt=>rt.id===De);Be&&(L(Be),_(!0))}else Ce===dt.ACCOUNTING&&alert(`Navigeer naar Accounting module voor item ${De}`)});return t.jsxs(t.Fragment,{children:[Dt.length>0&&t.jsx(gk,{title:"Gerelateerde Items",items:Dt}),t.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Offerte ID:"}),t.jsx("p",{className:"text-neutral font-bold",children:T.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Klant:"}),t.jsx("p",{className:"text-neutral",children:ae})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Status:"}),t.jsx("p",{className:"text-neutral",children:T.status})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Geldig tot:"}),t.jsx("p",{className:"text-neutral",children:T.validUntil})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Items:"}),t.jsx("div",{className:"space-y-2",children:T.items.map((Ce,De)=>t.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[t.jsxs("span",{children:[Ce.description,"  ",Ce.quantity]}),t.jsxs("span",{className:"font-semibold",children:["",Ce.total.toFixed(2)]})]},De))})]}),T.labor&&T.labor.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Werkuren:"}),t.jsx("div",{className:"space-y-2",children:T.labor.map((Ce,De)=>t.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[t.jsxs("span",{children:[Ce.description," (",Ce.hours,"u  ",Ce.hourlyRate,"/u)"]}),t.jsxs("span",{className:"font-semibold",children:["",Ce.total.toFixed(2)]})]},De))})]}),t.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{children:"Subtotaal:"}),t.jsxs("span",{children:["",Ie.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{children:["BTW (",T.vatRate,"%):"]}),t.jsxs("span",{children:["",Ue.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2 mt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsxs("span",{children:["",Je.toFixed(2)]})]})]}),T.notes&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Notities:"}),t.jsx("p",{className:"text-neutral mt-1",children:T.notes})]})]})})()}):t.jsx(t.Fragment,{children:(()=>{var Ot;const T=q,ae=Xt(T.customerId)||"Onbekend",ne=T.items.reduce((Ce,De)=>Ce+De.total,0),ve=((Ot=T.labor)==null?void 0:Ot.reduce((Ce,De)=>Ce+De.total,0))||0,Ie=ne+ve,Ue=Ie*(T.vatRate/100),Je=Ie+Ue,Dt=fH(T,f||[],e,(Ce,De)=>{if(P(!1),Ce===dt.WORK_ORDERS){const Be=e.find(rt=>rt.id===De);Be&&(L(Be),_(!0))}else Ce===dt.ACCOUNTING&&alert(`Navigeer naar Accounting module voor item ${De}`)});return t.jsxs(t.Fragment,{children:[Dt.length>0&&t.jsx(gk,{title:"Gerelateerde Items",items:Dt}),t.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Factuurnummer:"}),t.jsx("p",{className:"text-neutral font-bold",children:T.invoiceNumber})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Klant:"}),t.jsx("p",{className:"text-neutral",children:ae})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Status:"}),t.jsx("p",{className:"text-neutral",children:T.status})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Factuurdatum:"}),t.jsx("p",{className:"text-neutral",children:T.issueDate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Vervaldatum:"}),t.jsx("p",{className:"text-neutral",children:T.dueDate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Betalingsvoorwaarden:"}),t.jsx("p",{className:"text-neutral",children:T.paymentTerms||"14 dagen"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Items:"}),t.jsx("div",{className:"space-y-2",children:T.items.map((Ce,De)=>t.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[t.jsxs("span",{children:[Ce.description,"  ",Ce.quantity]}),t.jsxs("span",{className:"font-semibold",children:["",Ce.total.toFixed(2)]})]},De))})]}),T.labor&&T.labor.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Werkuren:"}),t.jsx("div",{className:"space-y-2",children:T.labor.map((Ce,De)=>t.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[t.jsxs("span",{children:[Ce.description," (",Ce.hours,"u  ",Ce.hourlyRate,"/u)"]}),t.jsxs("span",{className:"font-semibold",children:["",Ce.total.toFixed(2)]})]},De))})]}),t.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{children:"Subtotaal:"}),t.jsxs("span",{children:["",Ie.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{children:["BTW (",T.vatRate,"%):"]}),t.jsxs("span",{children:["",Ue.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2 mt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsxs("span",{children:["",Je.toFixed(2)]})]})]}),T.notes&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Notities:"}),t.jsx("p",{className:"text-neutral mt-1",children:T.notes})]})]})})()}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[t.jsx("button",{onClick:$a,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:" Bewerken"}),t.jsx("button",{onClick:Bs,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:" Clonen"}),t.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Sluiten"})]})]})]})}),V&&ce&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-5xl sm:w-full h-full sm:h-auto sm:my-8 sm:max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between z-10",children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral",children:z==="quote"?" Offerte Bewerken":" Factuur Bewerken"}),t.jsx("button",{onClick:()=>{Z(!1),Le(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Klant *"}),t.jsxs("select",{value:ce.customerId,onChange:T=>Le({...ce,customerId:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant"}),a.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"BTW Percentage (%)"}),t.jsx("input",{type:"number",value:ce.vatRate,onChange:T=>Le({...ce,vatRate:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0",max:"100",step:"0.1"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:"Items"}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:Bn,className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600",children:"+ Custom Item"})})]}),t.jsx("div",{className:"space-y-3",children:ce.items.map((T,ae)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-gray-50 rounded-lg",children:[t.jsxs("select",{value:T.inventoryItemId||"",onChange:ne=>In(ae,ne.target.value),className:"col-span-4 px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:"Uit voorraad selecteren"}),l.map(ne=>{var ve;return t.jsxs("option",{value:ne.id,children:[ne.name," - ",((ve=ne.price)==null?void 0:ve.toFixed(2))||"0.00"]},ne.id)})]}),t.jsx("input",{type:"text",placeholder:"Beschrijving",value:T.description,onChange:ne=>gn(ae,"description",ne.target.value),className:"col-span-3 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),t.jsx("input",{type:"number",placeholder:"Aantal",value:T.quantity,onChange:ne=>gn(ae,"quantity",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.01"}),t.jsx("input",{type:"number",placeholder:"Prijs per stuk",value:T.pricePerUnit,onChange:ne=>gn(ae,"pricePerUnit",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.01"}),t.jsxs("div",{className:"col-span-1 text-sm font-semibold text-right",children:["",T.total.toFixed(2)]}),t.jsx("button",{onClick:()=>sa(ae),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm",children:""})]},ae))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:"Werkuren (optioneel)"}),t.jsx("button",{onClick:Bt,className:"px-4 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600",children:"+ Werkuren Toevoegen"})]}),t.jsx("div",{className:"space-y-3",children:ce.labor.map((T,ae)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-green-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Beschrijving",value:T.description,onChange:ne=>Qr(ae,"description",ne.target.value),className:"col-span-4 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),t.jsx("input",{type:"number",placeholder:"Uren",value:T.hours,onChange:ne=>Qr(ae,"hours",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.5"}),t.jsx("input",{type:"number",placeholder:"Uurtarief",value:T.hourlyRate,onChange:ne=>Qr(ae,"hourlyRate",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.01"}),t.jsxs("div",{className:"col-span-2 text-sm font-semibold text-right",children:["",T.total.toFixed(2)]}),t.jsx("button",{onClick:()=>Vr(ae),className:"col-span-2 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm",children:"Verwijderen"})]},ae))})]}),z==="quote"?t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Geldig tot *"}),t.jsx("input",{type:"date",value:ce.validUntil||"",onChange:T=>Le({...ce,validUntil:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}):t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Factuurdatum *"}),t.jsx("input",{type:"date",value:ce.issueDate||"",onChange:T=>Le({...ce,issueDate:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Vervaldatum *"}),t.jsx("input",{type:"date",value:ce.dueDate||"",onChange:T=>Le({...ce,dueDate:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),z==="invoice"&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Betalingsvoorwaarden"}),t.jsx("input",{type:"text",value:ce.paymentTerms||"",onChange:T=>Le({...ce,paymentTerms:T.target.value}),placeholder:"bijv. 14 dagen",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:ce.notes,onChange:T=>Le({...ce,notes:T.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Optionele notities..."})]}),(()=>{const{subtotal:T,vatAmount:ae,total:ne}=hn();return t.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:"font-semibold",children:"Subtotaal:"}),t.jsxs("span",{className:"font-semibold",children:["",T.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{className:"font-semibold",children:["BTW (",ce.vatRate,"%):"]}),t.jsxs("span",{className:"font-semibold",children:["",ae.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between pt-2 mt-2 border-t border-blue-200",children:[t.jsx("span",{className:"font-bold text-lg",children:"Totaal:"}),t.jsxs("span",{className:"font-bold text-lg",children:["",ne.toFixed(2)]})]})]})})(),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{z==="quote"?Ai():Fs()},className:"flex-1 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:" Opslaan"}),t.jsx("button",{onClick:()=>{Z(!1),Le(null)},className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Annuleren"})]})]})]})}),K&&ce&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-5xl sm:w-full h-full sm:h-auto sm:my-8 sm:max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between z-10",children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral",children:z==="quote"?" Offerte Clonen":" Factuur Clonen"}),t.jsx("button",{onClick:()=>{de(!1),Le(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Klant *"}),t.jsxs("select",{value:ce.customerId,onChange:T=>Le({...ce,customerId:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant"}),a.map(T=>t.jsx("option",{value:T.id,children:T.name},T.id))]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"BTW Percentage (%)"}),t.jsx("input",{type:"number",value:ce.vatRate,onChange:T=>Le({...ce,vatRate:parseFloat(T.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0",max:"100",step:"0.1"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:"Items"}),t.jsx("button",{onClick:Bn,className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600",children:"+ Custom Item"})]}),t.jsx("div",{className:"space-y-3",children:ce.items.map((T,ae)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-gray-50 rounded-lg",children:[t.jsxs("select",{value:T.inventoryItemId||"",onChange:ne=>In(ae,ne.target.value),className:"col-span-4 px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[t.jsx("option",{value:"",children:"Uit voorraad selecteren"}),l.map(ne=>{var ve;return t.jsxs("option",{value:ne.id,children:[ne.name," - ",((ve=ne.price)==null?void 0:ve.toFixed(2))||"0.00"]},ne.id)})]}),t.jsx("input",{type:"text",placeholder:"Beschrijving",value:T.description,onChange:ne=>gn(ae,"description",ne.target.value),className:"col-span-3 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),t.jsx("input",{type:"number",placeholder:"Aantal",value:T.quantity,onChange:ne=>gn(ae,"quantity",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.01"}),t.jsx("input",{type:"number",placeholder:"Prijs per stuk",value:T.pricePerUnit,onChange:ne=>gn(ae,"pricePerUnit",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.01"}),t.jsxs("div",{className:"col-span-1 text-sm font-semibold text-right",children:["",T.total.toFixed(2)]}),t.jsx("button",{onClick:()=>sa(ae),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm",children:""})]},ae))})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:"Werkuren (optioneel)"}),t.jsx("button",{onClick:Bt,className:"px-4 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600",children:"+ Werkuren Toevoegen"})]}),t.jsx("div",{className:"space-y-3",children:ce.labor.map((T,ae)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-green-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Beschrijving",value:T.description,onChange:ne=>Qr(ae,"description",ne.target.value),className:"col-span-4 px-3 py-2 border border-gray-300 rounded-lg text-sm"}),t.jsx("input",{type:"number",placeholder:"Uren",value:T.hours,onChange:ne=>Qr(ae,"hours",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.5"}),t.jsx("input",{type:"number",placeholder:"Uurtarief",value:T.hourlyRate,onChange:ne=>Qr(ae,"hourlyRate",parseFloat(ne.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg text-sm",min:"0",step:"0.01"}),t.jsxs("div",{className:"col-span-2 text-sm font-semibold text-right",children:["",T.total.toFixed(2)]}),t.jsx("button",{onClick:()=>Vr(ae),className:"col-span-2 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm",children:"Verwijderen"})]},ae))})]}),z==="quote"?t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Geldig tot *"}),t.jsx("input",{type:"date",value:ce.validUntil||"",onChange:T=>Le({...ce,validUntil:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}):t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Factuurdatum *"}),t.jsx("input",{type:"date",value:ce.issueDate||"",onChange:T=>Le({...ce,issueDate:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Vervaldatum *"}),t.jsx("input",{type:"date",value:ce.dueDate||"",onChange:T=>Le({...ce,dueDate:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),z==="invoice"&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Betalingsvoorwaarden"}),t.jsx("input",{type:"text",value:ce.paymentTerms||"",onChange:T=>Le({...ce,paymentTerms:T.target.value}),placeholder:"bijv. 14 dagen",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:ce.notes,onChange:T=>Le({...ce,notes:T.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Optionele notities..."})]}),(()=>{const{subtotal:T,vatAmount:ae,total:ne}=hn();return t.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{className:"font-semibold",children:"Subtotaal:"}),t.jsxs("span",{className:"font-semibold",children:["",T.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{className:"font-semibold",children:["BTW (",ce.vatRate,"%):"]}),t.jsxs("span",{className:"font-semibold",children:["",ae.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between pt-2 mt-2 border-t border-blue-200",children:[t.jsx("span",{className:"font-bold text-lg",children:"Totaal:"}),t.jsxs("span",{className:"font-bold text-lg",children:["",ne.toFixed(2)]})]})]})})(),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{z==="quote"?rs(!1):Us(!1)},className:"flex-1 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:" Clonen"}),t.jsx("button",{onClick:()=>{z==="quote"?rs(!0):Us(!0)},className:"flex-1 px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold",children:" Clonen & Naar Werkorder"}),t.jsx("button",{onClick:()=>{de(!1),Le(null)},className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Annuleren"})]})]})]})}),ee&&G&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto animate-fadeIn",onClick:()=>{_(!1),L(null)},children:t.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full sm:max-w-3xl sm:w-full h-full sm:h-auto sm:my-8 sm:max-h-[90vh] overflow-y-auto animate-slideIn",onClick:T=>T.stopPropagation(),children:[t.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200 p-6 flex items-center justify-between z-10 rounded-t-xl",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-3xl",children:""}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-neutral",children:"Werkorder Details"}),t.jsx("p",{className:"text-xs sm:text-sm text-gray-500 mt-0.5",children:G.id})]})]}),t.jsx("button",{onClick:()=>{_(!1),L(null)},className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full p-2 transition-colors",title:"Sluiten",children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"p-6 bg-gray-50",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-4 border border-gray-100",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-neutral mb-3",children:G.title}),t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-base",children:""}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${Sr(G.status)}`,children:[G.status==="To Do"&&"To Do",G.status==="Pending"&&"In Wacht",G.status==="In Progress"&&"In Uitvoering",G.status==="Completed"&&"Afgerond"]})]})]})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-4 border-t border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Toegewezen aan"}),t.jsx("p",{className:"text-sm font-medium text-neutral",children:ft(G.assignedTo)})]})]}),G.customerId&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Klant"}),t.jsx("p",{className:"text-sm font-medium text-neutral",children:Xt(G.customerId)||"Onbekend"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Aangemaakt"}),t.jsxs("p",{className:"text-sm font-medium text-neutral",children:[G.createdDate,((za=G.timestamps)==null?void 0:za.created)&&t.jsx("span",{className:"text-gray-500 ml-2",children:new Date(G.timestamps.created).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})})]})]})]}),G.location&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Locatie"}),t.jsx("p",{className:"text-sm font-medium text-neutral",children:G.location})]})]}),G.scheduledDate&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Geplande datum"}),t.jsx("p",{className:"text-sm font-medium text-neutral",children:G.scheduledDate})]})]}),G.estimatedHours&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Geschatte uren"}),t.jsxs("p",{className:"text-sm font-medium text-neutral",children:[G.estimatedHours,"u"]})]})]}),G.hoursSpent&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Gewerkte uren"}),t.jsxs("p",{className:"text-sm font-medium text-primary",children:[G.hoursSpent,"u"]})]})]}),G.estimatedCost&&t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-500",children:"Geschatte kosten"}),t.jsxs("p",{className:"text-sm font-medium text-neutral",children:["",G.estimatedCost.toFixed(2)]})]})]})]})]}),G.description&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("h3",{className:"text-base font-semibold text-neutral",children:"Beschrijving"})]}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:G.description})]}),G.pendingReason&&t.jsxs("div",{className:"bg-yellow-50 rounded-xl shadow-sm p-6 mb-4 border border-yellow-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("h3",{className:"text-base font-semibold text-yellow-800",children:"Reden voor wachtstatus"})]}),t.jsx("p",{className:"text-sm text-yellow-700 leading-relaxed",children:G.pendingReason})]}),G.requiredInventory&&G.requiredInventory.length>0&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("h3",{className:"text-base font-semibold text-neutral",children:"Benodigde Materialen"})]}),t.jsx("div",{className:"space-y-2",children:G.requiredInventory.map((T,ae)=>{const ne=l.find(ve=>ve.id===T.itemId);return t.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-100",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm",children:""}),t.jsx("span",{className:"text-sm font-medium text-neutral",children:(ne==null?void 0:ne.name)||"Onbekend item"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[" ",T.quantity]}),(ne==null?void 0:ne.unit)&&t.jsxs("span",{className:"text-xs text-gray-500",children:["(",ne.unit,")"]})]})]},ae)})})]}),G.timestamps&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("h3",{className:"text-base font-semibold text-neutral",children:"Tijdlijn"})]}),t.jsxs("div",{className:"space-y-3",children:[G.timestamps.created&&t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Aangemaakt"}),t.jsx("p",{className:"text-sm text-gray-700",children:new Date(G.timestamps.created).toLocaleString("nl-NL")})]})]}),G.timestamps.assigned&&t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Toegewezen"}),t.jsx("p",{className:"text-sm text-gray-700",children:new Date(G.timestamps.assigned).toLocaleString("nl-NL")})]})]}),G.timestamps.started&&t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[t.jsx("span",{className:"text-sm",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Gestart"}),t.jsx("p",{className:"text-sm text-gray-700",children:new Date(G.timestamps.started).toLocaleString("nl-NL")})]})]}),G.timestamps.completed&&t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[t.jsx("span",{className:"text-sm",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Voltooid"}),t.jsx("p",{className:"text-sm text-gray-700",children:new Date(G.timestamps.completed).toLocaleString("nl-NL")})]})]})]})]}),G.notes&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-4 border border-gray-100",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("h3",{className:"text-base font-semibold text-neutral",children:"Notities"})]}),t.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line",children:G.notes})]}),(G.quoteId||G.invoiceId)&&t.jsxs("div",{className:"bg-purple-50 rounded-xl shadow-sm p-6 mb-4 border border-purple-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("h3",{className:"text-base font-semibold text-purple-800",children:"Gekoppeld Document"})]}),t.jsxs("div",{className:"space-y-3",children:[G.quoteId&&t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-purple-100",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsxs("span",{className:"text-sm font-medium text-purple-700",children:["Offerte: ",G.quoteId]})]}),t.jsx("button",{onClick:()=>{const T=f.find(ae=>ae.id===G.quoteId);T&&(_(!1),U("quote"),Y(T),P(!0))},className:"px-3 py-1.5 bg-purple-500 text-white text-xs rounded-lg hover:bg-purple-600 transition-colors font-medium",children:"Bekijk"})]}),G.invoiceId&&t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-purple-100",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsxs("span",{className:"text-sm font-medium text-purple-700",children:["Factuur:"," ",((ia=g.find(T=>T.id===G.invoiceId))==null?void 0:ia.invoiceNumber)||G.invoiceId]})]}),t.jsx("button",{onClick:()=>{const T=g.find(ae=>ae.id===G.invoiceId);T&&(_(!1),U("invoice"),Y(T),P(!0))},className:"px-3 py-1.5 bg-purple-500 text-white text-xs rounded-lg hover:bg-purple-600 transition-colors font-medium",children:"Bekijk"})]})]})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[m&&t.jsxs("button",{onClick:()=>{_(!1),Nt(G)},className:"flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors font-semibold shadow-sm",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Bewerken"]}),t.jsxs("button",{onClick:()=>{_(!1),L(null)},className:"flex items-center gap-2 px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 active:bg-gray-700 transition-colors font-semibold shadow-sm",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Sluiten"]})]})]})]})}),B&&Ne&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral mb-4",children:"Selecteer Medewerker voor Werkorder"}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Medewerker *"}),t.jsxs("select",{value:ye,onChange:T=>ge(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer medewerker"}),n.map(T=>t.jsxs("option",{value:T.id,children:[T.name," - ",T.role]},T.id))]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:ns,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",disabled:!ye,children:" Werkorder Aanmaken"}),t.jsx("button",{onClick:()=>{le(!1),ge(""),Me(null)},className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Annuleren"})]})]})})]})},AO=({history:e,timestamps:r,getEmployeeName:n})=>{const[a,l]=y.useState(!1),o=(h,g)=>{var N,S,C;if(!(r!=null&&r[h]))return;const p=r==null?void 0:r[h];if(!p)return;const b=new Date(p).toLocaleString("nl-NL",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});let w="";if(h==="started"){const O=(N=e.find(k=>k.action==="status_changed"&&k.toStatus==="In Progress"))!=null&&N.performedBy?n(e.find(k=>k.action==="status_changed"&&k.toStatus==="In Progress").performedBy):"Onbekend";w=`Uw opdracht is op ${b} gestart door ${O}.`}else if(h==="created"){const O=(S=e.find(k=>k.action==="created"))!=null&&S.performedBy?n(e.find(k=>k.action==="created").performedBy):"Onbekend";w=`Opdracht aangemaakt op ${b} door ${O}.`}else if(h==="assigned"){const O=e.find(E=>E.action==="assigned");w=`Opdracht toegewezen aan ${O!=null&&O.toAssignee?n(O.toAssignee):"Onbekend"} op ${b}.`}else if(h==="completed"){const O=(C=e.find(k=>k.action==="completed"))!=null&&C.performedBy?n(e.find(k=>k.action==="completed").performedBy):"Onbekend";w=`Opdracht voltooid op ${b} door ${O}.`}navigator.clipboard.writeText(w).then(()=>{alert(" Informatie gekopieerd naar klembord!")}).catch(()=>{const O=document.createElement("textarea");O.value=w,document.body.appendChild(O),O.select(),document.execCommand("copy"),document.body.removeChild(O),alert(" Informatie gekopieerd naar klembord!")})},d=h=>{switch(h){case"created":return"";case"converted":return"";case"assigned":return"";case"status_changed":return"";case"completed":return"";case"reordered":return"";default:return""}},m=h=>new Date(h).toLocaleString("nl-NL",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),f=h=>{const g=new Date,p=new Date(h),v=g.getTime()-p.getTime(),b=Math.floor(v/6e4),w=Math.floor(b/60),N=Math.floor(w/24);return b<1?"Zojuist":b<60?`${b} min geleden`:w<24?`${w} uur geleden`:N===1?"Gisteren":N<7?`${N} dagen geleden`:m(h)};return t.jsxs("div",{className:"mt-3 border-t border-gray-200 pt-3",children:[r&&t.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.created&&t.jsxs("div",{className:"flex items-center gap-1 group",children:[t.jsx("span",{className:"text-gray-500",children:" Aangemaakt:"}),t.jsx("span",{className:"text-gray-700 font-medium",title:m(r.created),children:f(r.created)}),t.jsx("button",{onClick:()=>o("created"),className:"ml-1 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-200 rounded",title:"Kopieer informatie",children:""})]}),r.converted&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-gray-500",children:" Geconverteerd:"}),t.jsx("span",{className:"text-gray-700 font-medium",title:m(r.converted),children:f(r.converted)})]}),r.assigned&&t.jsxs("div",{className:"flex items-center gap-1 group",children:[t.jsx("span",{className:"text-gray-500",children:" Toegewezen:"}),t.jsx("span",{className:"text-gray-700 font-medium",title:m(r.assigned),children:f(r.assigned)}),t.jsx("button",{onClick:()=>o("assigned"),className:"ml-1 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-200 rounded",title:"Kopieer informatie",children:""})]}),r.started&&t.jsxs("div",{className:"flex items-center gap-1 group",children:[t.jsx("span",{className:"text-gray-500",children:" Gestart:"}),t.jsx("span",{className:"text-gray-700 font-medium",title:m(r.started),children:f(r.started)}),t.jsx("button",{onClick:()=>o("started"),className:"ml-1 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-200 rounded",title:"Kopieer informatie",children:""})]}),r.completed&&t.jsxs("div",{className:"flex items-center gap-1 group",children:[t.jsx("span",{className:"text-gray-500",children:" Voltooid:"}),t.jsx("span",{className:"text-gray-700 font-medium",title:m(r.completed),children:f(r.completed)}),t.jsx("button",{onClick:()=>o("completed"),className:"ml-1 opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-200 rounded",title:"Kopieer informatie",children:""})]})]})}),e&&e.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>l(!a),className:"w-full flex items-center justify-between px-3 py-2 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-xs font-medium text-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsxs("span",{children:["Volledige Geschiedenis (",e.length,")"]})]}),t.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&t.jsx("div",{className:"mt-2 space-y-2 max-h-60 overflow-y-auto",children:e.map((h,g)=>{const p=()=>{const b=m(h.timestamp),w=n(h.performedBy);return h.action==="created"?`Opdracht aangemaakt op ${b} door ${w}.`:h.action==="assigned"?`Opdracht toegewezen aan ${h.toAssignee?n(h.toAssignee):w} op ${b}.`:h.action==="status_changed"&&h.toStatus==="In Progress"?`Uw opdracht is op ${b} gestart door ${w}.`:h.action==="completed"?`Opdracht voltooid op ${b} door ${w}.`:`${h.details} - ${b}`},v=()=>{const b=p();navigator.clipboard.writeText(b).then(()=>{alert(" Informatie gekopieerd naar klembord!")}).catch(()=>{const w=document.createElement("textarea");w.value=b,document.body.appendChild(w),w.select(),document.execCommand("copy"),document.body.removeChild(w),alert(" Informatie gekopieerd naar klembord!")})};return t.jsxs("div",{className:"flex gap-2 text-xs border-l-2 border-blue-300 pl-3 py-2 bg-blue-50 rounded-r group",children:[t.jsx("span",{className:"text-base",children:d(h.action)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-gray-700 leading-snug",children:h.details}),t.jsx("p",{className:"text-gray-500 text-xs mt-1",children:m(h.timestamp)})]}),t.jsx("button",{onClick:v,className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-blue-200 rounded text-blue-600",title:"Kopieer voor communicatie",children:""})]},g)})})]})]})},ui=({order:e,currentUser:r,isAdmin:n,inventory:a,onUpdateStatus:l,onUpdateHours:o,onDelete:d,onEdit:m,onOpenDetail:f,getEmployeeName:h,getCustomerName:g,compactView:p=!1})=>{const[v,b]=y.useState(!1),[w,N]=y.useState(e.hoursSpent||0),[S,C]=y.useState(!1),[O,k]=y.useState(e.pendingReason||""),E=e.assignedTo===r.employeeId,M=n||E,D=()=>{o(e.id,w),b(!1)},R=()=>{m({...e,pendingReason:O.trim()||void 0}),C(!1)},z=(U=>U?U<=5?{color:"red",label:"Vandaag",bgColor:"bg-red-500",textColor:"text-white",borderColor:"border-red-300",tooltip:"#1-#5: Vandaag afmaken (hoogste prioriteit)"}:U<=15?{color:"orange",label:"Deze Week",bgColor:"bg-orange-500",textColor:"text-white",borderColor:"border-orange-300",tooltip:"#6-#15: Deze week afronden"}:{color:"green",label:"Later",bgColor:"bg-green-500",textColor:"text-white",borderColor:"border-green-300",tooltip:"#16+: Volgende week of later"}:{color:"gray",label:"Normaal",bgColor:"bg-gray-500",textColor:"text-white",borderColor:"border-gray-300"})(e.sortIndex);return p?t.jsx("div",{className:`bg-white rounded-lg shadow-sm p-2 border-l-2 ${z.borderColor} hover:shadow-md transition-shadow cursor-pointer`,onClick:U=>{U.stopPropagation(),f&&f(e)},onDoubleClick:U=>{U.stopPropagation(),f&&f(e)},title:"Klik of dubbelklik om details te zien",children:t.jsxs("div",{className:"flex items-start gap-2",children:[e.sortIndex!==void 0&&t.jsxs("span",{className:`inline-block px-1.5 py-0.5 text-xs font-bold ${z.textColor} ${z.bgColor} rounded flex-shrink-0`,title:z.tooltip,children:["#",e.sortIndex]}),t.jsx("p",{className:"text-xs text-gray-700 flex-1 line-clamp-2",children:e.description||e.title}),t.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0",children:""})]})}):t.jsx("div",{className:`bg-white rounded-lg shadow-md p-3 sm:p-4 border-l-4 ${z.borderColor} hover:shadow-lg transition-shadow cursor-pointer`,onClick:U=>{const q=U.target;!(q.closest("button")||q.closest("input")||q.closest("textarea")||q.closest("select")||q.closest("a"))&&(q===U.currentTarget||q.closest(".work-order-card-content"))&&f&&f(e)},onDoubleClick:U=>{U.stopPropagation(),f&&f(e)},title:"Klik of dubbelklik om factuur/offerte details te zien",children:t.jsxs("div",{className:"work-order-card-content",children:[e.sortIndex!==void 0&&t.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[t.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-bold ${z.textColor} ${z.bgColor} rounded`,title:z.tooltip,children:["#",e.sortIndex]}),t.jsx("span",{className:`text-xs font-medium ${z.textColor.replace("text-white",`text-${z.color}-600`)}`,children:z.label})]}),t.jsxs("div",{className:"flex items-start justify-between mb-3 gap-2",children:[t.jsx("h4",{className:"font-semibold text-neutral flex-1 text-sm sm:text-base break-words",children:e.title}),t.jsxs("div",{className:"flex items-center gap-1",children:[n&&t.jsx("button",{onClick:U=>{U.stopPropagation(),m(e)},className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:"Bewerken",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),n&&t.jsx("button",{onClick:U=>{U.stopPropagation(),d(e.id)},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors",title:"Verwijderen",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.status==="Pending"&&t.jsx("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:S&&M?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsx("span",{className:"text-xs font-semibold text-yellow-800",children:"Reden voor wachtstatus:"})]}),t.jsx("textarea",{value:O,onChange:U=>k(U.target.value),placeholder:"bijv: Wacht op materiaal, wacht op klant bevestiging...",rows:2,className:"w-full px-3 py-2 border border-yellow-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:U=>{U.stopPropagation(),R()},className:"px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700 transition-colors",children:"Opslaan"}),t.jsx("button",{onClick:U=>{U.stopPropagation(),k(e.pendingReason||""),C(!1)},className:"px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}):t.jsx("div",{children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex items-start gap-2 flex-1",children:[t.jsx("svg",{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-xs font-semibold text-yellow-800 mb-1",children:"In wacht:"}),e.pendingReason?t.jsx("p",{className:"text-xs text-yellow-700",children:e.pendingReason}):t.jsx("p",{className:"text-xs text-yellow-600 italic",children:"Geen reden opgegeven"})]})]}),M&&t.jsx("button",{onClick:U=>{U.stopPropagation(),C(!0)},className:"text-xs text-yellow-700 hover:text-yellow-900 hover:underline whitespace-nowrap",title:"Reden bewerken",children:e.pendingReason?"Bewerk":"+ Reden toevoegen"})]})})}),(e.quoteId||e.invoiceId)&&t.jsxs("div",{className:"mb-3 p-3 bg-purple-50 border border-purple-200 rounded-lg cursor-pointer hover:bg-purple-100 transition-colors",onDoubleClick:()=>f&&f(e),title:"Dubbelklik om details te zien",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("span",{className:"text-xs font-semibold text-purple-800",children:e.quoteId?`Gebaseerd op offerte ${e.quoteId}`:`Gebaseerd op factuur ${e.invoiceId}`}),t.jsx("span",{className:"text-xs text-purple-600 ml-auto",children:" Dubbelklik"})]}),e.estimatedHours&&t.jsxs("div",{className:"text-xs text-purple-700 mb-1",children:["Geschatte uren:"," ",t.jsxs("span",{className:"font-semibold",children:[e.estimatedHours,"u"]}),e.hoursSpent!==void 0&&e.hoursSpent>0&&t.jsxs("span",{className:e.hoursSpent>e.estimatedHours?"text-red-600 ml-2":"text-green-600 ml-2",children:["(Daadwerkelijk: ",e.hoursSpent,"u"," ",e.hoursSpent>e.estimatedHours?"":"",")"]})]}),e.estimatedCost&&t.jsxs("div",{className:"text-xs text-purple-700",children:["Geschatte waarde:"," ",t.jsxs("span",{className:"font-semibold",children:["",e.estimatedCost.toFixed(2)]})]})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),e.requiredInventory&&e.requiredInventory.length>0&&t.jsxs("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),t.jsx("span",{className:"text-xs font-semibold text-blue-800",children:"Benodigde materialen:"})]}),t.jsx("div",{className:"space-y-1",children:e.requiredInventory.map(U=>{const q=a.find(ee=>ee.id===U.itemId);if(!q)return null;const Y=q.quantity>=U.quantity;return t.jsxs("div",{className:"flex items-center justify-between text-xs",children:[t.jsx("span",{className:Y?"text-gray-700":"text-red-600 font-semibold",children:q.name}),t.jsxs("span",{className:Y?"text-gray-600":"text-red-600 font-semibold",children:[U.quantity," ",Y?"":`(Voorraad: ${q.quantity})`]})]},U.itemId)})})]}),t.jsxs("div",{className:"space-y-2 mb-3 text-xs",children:[n&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),t.jsx("span",{className:"text-gray-700",children:h(e.assignedTo)})]}),e.customerId&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),t.jsx("span",{className:"text-gray-700",children:g(e.customerId)})]}),e.location&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),t.jsx("span",{className:"text-gray-700",children:e.location})]}),e.scheduledDate&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("span",{className:"text-gray-700",children:e.scheduledDate})]})]}),t.jsx("div",{className:"mb-3 p-2 bg-gray-50 rounded",children:v&&M?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"number",value:w,onChange:U=>N(parseFloat(U.target.value)||0),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",step:"0.5",min:"0"}),t.jsx("button",{onClick:U=>{U.stopPropagation(),D()},className:"px-2 py-1 bg-primary text-white text-xs rounded hover:bg-secondary",children:""}),t.jsx("button",{onClick:U=>{U.stopPropagation(),b(!1)},className:"px-2 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400",children:""})]}):t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs text-gray-600",children:"Uren besteed:"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm font-semibold text-primary",children:[e.hoursSpent||0,"u"]}),M&&e.status!=="Completed"&&t.jsx("button",{onClick:U=>{U.stopPropagation(),b(!0)},className:"text-xs text-blue-600 hover:text-blue-800",children:"Bewerk"})]})]})}),M&&t.jsxs("div",{className:"space-y-2",children:[e.status==="To Do"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:U=>{U.stopPropagation(),l(e.id,"In Progress")},className:"w-full px-3 py-2.5 bg-blue-500 text-white text-sm sm:text-base rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors font-medium",children:" Start Werkorder"}),t.jsx("button",{onClick:U=>{U.stopPropagation(),l(e.id,"Pending")},className:"w-full px-3 py-2.5 bg-yellow-500 text-white text-sm sm:text-base rounded-lg hover:bg-yellow-600 active:bg-yellow-700 transition-colors font-medium",children:" In Wacht Zetten"})]}),e.status==="Pending"&&t.jsx("button",{onClick:U=>{U.stopPropagation(),l(e.id,"In Progress")},className:"w-full px-3 py-2.5 bg-blue-500 text-white text-sm sm:text-base rounded-lg hover:bg-blue-600 active:bg-blue-700 transition-colors font-medium",children:" Start Werkorder"}),e.status==="In Progress"&&t.jsx("button",{onClick:U=>{U.stopPropagation(),l(e.id,"Completed")},className:"w-full px-3 py-2.5 bg-green-500 text-white text-sm sm:text-base rounded-lg hover:bg-green-600 active:bg-green-700 transition-colors font-medium",children:" Voltooi"}),e.status==="Completed"&&t.jsx("span",{className:"block text-center px-3 py-2.5 bg-green-100 text-green-800 text-sm sm:text-base rounded-lg font-semibold",children:" Afgerond"})]}),(e.timestamps||e.history&&e.history.length>0)&&t.jsx(AO,{history:e.history||[],timestamps:e.timestamps,getEmployeeName:h})]})})};function TO(e,r,n,a,l){return{id:`notif_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,message:r,date:new Date().toISOString(),read:!1,relatedModule:a,relatedId:l,actions:n}}function gH(e,r,n){return TO("success",` Offerte ${e.id} is geaccepteerd! Maak nu een werkorder aan.`,[{label:" Maak Werkorder",action:r,variant:"primary"},{label:" Bekijk Offerte",action:n,variant:"secondary"}],dt.ACCOUNTING,e.id)}function pH(e,r,n){return TO("info",` Factuur ${e.invoiceNumber} is verzonden. Markeer als betaald wanneer betaling is ontvangen.`,[{label:" Markeer als Betaald",action:r,variant:"success"},{label:" Bekijk Factuur",action:n,variant:"secondary"}],dt.ACCOUNTING,e.id)}function IO(e,r){const n=[],a=[];let l=e;const o=e.replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim(),d=["product","materiaal","onderdeel","item","artikel","stuk","stuks","x","aantal","hoeveelheid","qty","quantity"],m=["dienst","service","werk","werkzaamheden","uren","uur","hour","hours","uitvoeren","installeren","plaatsen","monteren","repareren","onderhoud"],f=o.split(/\n/).map(w=>w.trim()),h=/^[\d\-\*]\s*(.+)/i,g=/^(\d+)[\.\)]\s*(.+)/i;for(let w=0;w<f.length;w++){const N=f[w].toLowerCase(),S=f[w];if(!N||N.length<3)continue;const C=S.match(h),O=S.match(g),k=C?C[1]:O?O[2]:null;if(k){const E=k.match(/(\d+)\s*(?:x|stuks?|stuk|)/i),M=E?parseInt(E[1],10):1;let D=0;const R=k.match(/(?:|eur|euro)?\s*([\d.,]+)/i);if(R)D=parseFloat(R[1].replace(",","."));else if(w+1<f.length){const U=f[w+1].match(/(?:prijs|kosten||eur|euro)?\s*([\d.,]+)/i);U&&(D=parseFloat(U[1].replace(",",".")))}const P=m.some(z=>k.toLowerCase().includes(z));if(d.some(z=>k.toLowerCase().includes(z)),P&&(N.includes("uur")||N.includes("hour"))){const z=k.match(/(\d+(?:[.,]\d+)?)\s*(?:uur|hours?)/i),U=z?parseFloat(z[1].replace(",",".")):M;let q=D||50;if(!D){const Y=k.match(/(?:|eur|euro)?\s*([\d.,]+)\s*(?:per\s*)?(?:uur|hour)/i);Y&&(q=parseFloat(Y[1].replace(",",".")))}a.push({description:k.trim(),hours:U,hourlyRate:q,total:U*q})}else{const z=k.trim();z.length>0&&n.push({description:z,quantity:M,pricePerUnit:D||0,total:M*(D||0)})}}}if(n.length===0&&a.length===0){const w=o.match(/(?:product|materiaal|onderdeel|artikel)[:\s]+(.+?)(?:[.,;]|$)/i);w&&n.push({description:w[1].trim(),quantity:1,pricePerUnit:0,total:0});const N=o.match(/(?:werk|dienst|service|uren?)[:\s]+(.+?)(?:[.,;]|$)/i);if(N){const S=N[1].trim(),C=S.match(/(\d+(?:[.,]\d+)?)/),O=C?parseFloat(C[1].replace(",",".")):1;a.push({description:S,hours:O,hourlyRate:50,total:O*50})}}if(n.length===0&&a.length===0){const w=o.match(/(\d+)\s*(?:x|stuks?|)/gi);if(o.match(/?\s*([\d.,]+)/gi),w&&w.length>0){const S=w.map(C=>parseInt(C.replace(/\D/g,""),10)).reduce((C,O)=>C+O,0);n.push({description:`Offerte aanvraag: ${r}`,quantity:S,pricePerUnit:0,total:0})}else n.push({description:`Offerte aanvraag: ${r}`,quantity:1,pricePerUnit:0,total:0})}const p=n.reduce((w,N)=>w+N.total,0),v=a.reduce((w,N)=>w+N.total,0),b=p+v;return{items:n,labor:a.length>0?a:void 0,notes:l.length>500?l.substring(0,500)+"...":l,suggestedTotal:b>0?b:void 0}}const xH=({customers:e,onQuoteCreated:r})=>{const[n,a]=y.useState(!1),[l,o]=y.useState(!1),[d,m]=y.useState(null),[f,h]=y.useState(""),[g,p]=y.useState(!1),v=C=>{C.preventDefault(),C.stopPropagation(),a(!0)},b=C=>{C.preventDefault(),C.stopPropagation(),a(!1)},w=async C=>{C.preventDefault(),C.stopPropagation(),a(!1),p(!0);try{const k=Array.from(C.dataTransfer.files).find(R=>R.name.endsWith(".eml"));if(!k){alert(" Geen .eml bestand gevonden. Sleep een Outlook email (.eml) hierheen."),p(!1);return}const E=await Xx(k),M=IO(E),D=e.find(R=>{var P,z,U,q;return((P=R.email)==null?void 0:P.toLowerCase())===((z=E.from)==null?void 0:z.toLowerCase())||((U=R.email)==null?void 0:U.toLowerCase())===((q=E.to)==null?void 0:q.toLowerCase())});m({emailData:E,quoteData:M,matchedCustomer:D}),h((D==null?void 0:D.id)||""),o(!0)}catch(O){console.error("Error parsing email:",O),alert(" Fout bij het verwerken van de email. Controleer het bestandsformaat.")}finally{p(!1)}},N=()=>{var M;if(!f||!d)return;const{quoteData:C,emailData:O}=d,k=new Date().toISOString(),E={id:`Q${Date.now()}`,customerId:f,items:C.items||[],labor:C.labor&&C.labor.length>0?C.labor:void 0,subtotal:C.subtotal||0,vatRate:21,vatAmount:(C.subtotal||0)*.21,total:(C.subtotal||0)*1.21,status:"draft",createdDate:new Date().toISOString().split("T")[0],validUntil:"",notes:`Aangemaakt vanuit email: ${O.subject||""}

Van: ${O.from||"Onbekend"}
Datum: ${O.date||new Date().toISOString()}

Originele inhoud:
${((M=O.body)==null?void 0:M.substring(0,500))||""}`,createdBy:"system",timestamps:{created:k},history:[{timestamp:k,action:"created",performedBy:"system",details:"Offerte automatisch aangemaakt vanuit email parsing"}]};r(E),S()},S=()=>{o(!1),m(null),h("")};return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg text-neutral",children:"Email naar Offerte Parser"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Sleep een Outlook email (.eml) hierheen om automatisch een offerte aan te maken"})]})]}),t.jsx("div",{onDragOver:v,onDragLeave:b,onDrop:w,className:`border-2 border-dashed rounded-lg p-8 text-center transition-all ${n?"border-primary bg-blue-50":"border-gray-300 hover:border-gray-400"} ${g?"opacity-50 cursor-wait":"cursor-pointer"}`,children:g?t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),t.jsx("p",{className:"text-gray-600 font-medium",children:"Email verwerken..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Sleep Outlook Email Hier"}),t.jsx("p",{className:"text-sm text-gray-500",children:"Ondersteunde formaten: .eml bestanden uit Outlook"}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"De email wordt automatisch geparset voor producten, diensten en werkuren"})]})}),l&&d&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("h2",{className:"text-2xl font-bold text-neutral flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Email Preview & Offerte Aanmaken"})]})}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Email Details"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Van:"}),t.jsx("p",{className:"text-gray-800",children:d.emailData.from||"Onbekend"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Onderwerp:"}),t.jsx("p",{className:"text-gray-800",children:d.emailData.subject||"Geen onderwerp"})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-600",children:"Datum:"}),t.jsx("p",{className:"text-gray-800",children:d.emailData.date?new Date(d.emailData.date).toLocaleString("nl-NL"):"Onbekend"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecteer Klant *"}),t.jsxs("select",{value:f,onChange:C=>h(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"-- Kies een klant --"}),e.map(C=>t.jsxs("option",{value:C.id,children:[C.name," ",C.email?`(${C.email})`:""]},C.id))]}),d.matchedCustomer&&t.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" Automatisch gematcht: ",d.matchedCustomer.name]})]}),t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Geparseerde Offerte Data"}),d.quoteData.items&&d.quoteData.items.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Items (",d.quoteData.items.length,")"]}),t.jsx("div",{className:"space-y-2",children:d.quoteData.items.map((C,O)=>t.jsxs("div",{className:"bg-white rounded p-2 text-sm flex justify-between",children:[t.jsx("span",{className:"text-gray-700",children:C.description}),t.jsxs("span",{className:"font-medium",children:[C.quantity,"x ",C.pricePerUnit.toFixed(2)]})]},O))})]}),d.quoteData.labor&&d.quoteData.labor.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Werkuren (",d.quoteData.labor.length,")"]}),t.jsx("div",{className:"space-y-2",children:d.quoteData.labor.map((C,O)=>t.jsxs("div",{className:"bg-white rounded p-2 text-sm flex justify-between",children:[t.jsx("span",{className:"text-gray-700",children:C.description}),t.jsxs("span",{className:"font-medium",children:[C.hours,"u  ",C.hourlyRate.toFixed(2),"/u"]})]},O))})]}),t.jsxs("div",{className:"border-t border-blue-200 pt-3 mt-3",children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotaal:"}),t.jsxs("span",{className:"font-semibold",children:["",(d.quoteData.subtotal||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-gray-600",children:"BTW (21%):"}),t.jsxs("span",{className:"font-semibold",children:["",((d.quoteData.subtotal||0)*.21).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsxs("span",{className:"text-primary",children:["",((d.quoteData.subtotal||0)*1.21).toFixed(2)]})]})]}),(!d.quoteData.items||d.quoteData.items.length===0)&&(!d.quoteData.labor||d.quoteData.labor.length===0)&&t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mt-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-orange-600 text-lg",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-orange-800",children:"Geen Items of Werkuren Gevonden"}),t.jsx("p",{className:"text-xs text-orange-700",children:"Er zijn geen items of werkuren uit de email gehaald. Je kunt deze handmatig toevoegen nadat je de offerte hebt aangemaakt."})]})]})})]}),t.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[t.jsx("button",{onClick:N,disabled:!f,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-colors ${f?"bg-primary text-white hover:bg-secondary":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:" Offerte Formulier Invullen"}),t.jsx("button",{onClick:S,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})]})})]})};function vH(e,r){if(e.status!=="approved")return{isValid:!1,message:` Deze offerte is nog niet geaccepteerd. Status: ${e.status}. Alleen geaccepteerde offertes kunnen worden omgezet naar werkorders.`,severity:"error",canProceed:!1,suggestedAction:"Wacht op goedkeuring van de klant voordat je een werkorder maakt."};if(e.workOrderId){const n=r.find(a=>a.id===e.workOrderId);if(n)return{isValid:!1,message:` Deze offerte heeft al een gekoppelde werkorder: ${n.id}. Status: ${n.status}.`,severity:"error",canProceed:!1,suggestedAction:`Bekijk de bestaande werkorder ${n.id} in plaats van een nieuwe aan te maken.`}}return e.invoiceId?{isValid:!1,message:" Deze offerte heeft al een factuur. Maak eerst de werkorder voordat je factureert.",severity:"warning",canProceed:!1,suggestedAction:"Gebruik de bestaande factuur en maak daar een werkorder van."}:{isValid:!0,message:" Offerte kan worden omgezet naar werkorder.",severity:"info",canProceed:!0}}function yH(e,r){if(e.status!=="approved")return{isValid:!1,message:` Deze offerte is nog niet geaccepteerd. Status: ${e.status}. Alleen geaccepteerde offertes kunnen direct worden gefactureerd.`,severity:"error",canProceed:!1,suggestedAction:"Wacht op goedkeuring van de klant voordat je factureert."};if(e.workOrderId){const n=r.find(a=>a.id===e.workOrderId);if(n&&n.status!=="Voltooid")return{isValid:!1,message:` Deze offerte heeft een actieve werkorder (${n.id}). Status: ${n.status}. Wacht tot de werkorder is voltooid voordat je factureert.`,severity:"warning",canProceed:!1,suggestedAction:"Wacht tot de werkorder is voltooid. De factuur wordt dan automatisch aangemaakt met de werkelijke uren."}}return e.invoiceId?{isValid:!1,message:" Deze offerte heeft al een factuur. Maak geen dubbele factuur aan.",severity:"error",canProceed:!1,suggestedAction:"Bekijk de bestaande factuur in plaats van een nieuwe aan te maken."}:{isValid:!0,message:" Offerte kan worden omgezet naar factuur.",severity:"info",canProceed:!0}}function bH(e){switch(e.severity){case"error":return{icon:"",color:"bg-red-50 border-red-500 text-red-800",message:e.message};case"warning":return{icon:"",color:"bg-orange-50 border-orange-500 text-orange-800",message:e.message};default:return{icon:"",color:"bg-blue-50 border-blue-500 text-blue-800",message:e.message}}}const or=(e,r)=>{var n;return((n=r.find(a=>a.id===e))==null?void 0:n.name)||"Onbekend"},Ra=(e,r)=>{var n;return((n=r.find(a=>a.id===e))==null?void 0:n.name)||"Onbekend"},jH=(e,r)=>{var n;return((n=r.find(a=>a.id===e))==null?void 0:n.name)||"Onbekend item"},EO=e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"expired":return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},MO=e=>{switch(e){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},lf=(e,r)=>e&&r.find(n=>n.id===e)||null,of=e=>{if(!e)return null;switch(e.status){case"To Do":return{color:"bg-gray-100 text-gray-800 border-gray-500",icon:"",text:"Werkorder: To Do"};case"Pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-500",icon:"",text:"Werkorder: In Wacht"};case"In Progress":return{color:"bg-blue-100 text-blue-800 border-blue-500",icon:"",text:"Werkorder: In Uitvoering"};case"Completed":return{color:"bg-green-100 text-green-800 border-green-500",icon:"",text:"Werkorder: Voltooid"};default:return{color:"bg-gray-100 text-gray-800",icon:"",text:"Werkorder: Onbekend"}}},Mc=e=>!!(e.workOrderId||e.notes&&e.notes.includes("Factuur aangemaakt automatisch")),NH=(e,r,n)=>{const a=r.find(l=>l.id===e);if(a!=null&&a.workOrderId)return n.find(l=>l.id===a.workOrderId)},Br=(e,r,n,a,l)=>({timestamp:new Date().toISOString(),action:r,performedBy:a.employeeId,details:n,...l}),_t=(e,r=2)=>`${e.toFixed(r)}`,wH=(e,r=0,n=!1)=>`${(n?e*100:e).toFixed(r)}%`,pk=e=>_t(e,2),SH=(e,r,n)=>{let a=[...e];switch(n.type){case"paid":a=a.filter(l=>l.status==="paid");break;case"outstanding":a=a.filter(l=>["sent","overdue"].includes(l.status));break;case"overdue":a=a.filter(l=>l.status==="overdue");break;case"all":default:a=a.filter(l=>l.status!=="paid");break}return n.customerName&&(a=a.filter(l=>Ra(l.customerId,r).toLowerCase().includes(n.customerName.toLowerCase()))),n.dateFrom&&(a=a.filter(l=>l.issueDate>=n.dateFrom)),n.dateTo&&(a=a.filter(l=>l.issueDate<=n.dateTo)),n.minAmount&&(a=a.filter(l=>l.total>=parseFloat(n.minAmount))),n.maxAmount&&(a=a.filter(l=>l.total<=parseFloat(n.maxAmount))),a},kH=(e,r,n)=>{let a=[...e];switch(n.type){case"approved":a=a.filter(l=>l.status==="approved");break;case"sent":a=a.filter(l=>l.status==="sent");break;case"expired":a=a.filter(l=>l.status==="expired"||l.validUntil&&new Date(l.validUntil)<new Date);break}return n.customerName&&(a=a.filter(l=>Ra(l.customerId,r).toLowerCase().includes(n.customerName.toLowerCase()))),n.dateFrom&&(a=a.filter(l=>l.createdDate>=n.dateFrom)),n.dateTo&&(a=a.filter(l=>l.createdDate<=n.dateTo)),n.minAmount&&(a=a.filter(l=>l.total>=parseFloat(n.minAmount))),n.maxAmount&&(a=a.filter(l=>l.total<=parseFloat(n.maxAmount))),a},CH=(e,r)=>r==="all"?e:e.filter(n=>n.type===r),DH=e=>e.reduce((r,n)=>r+n.total,0),OH=e=>e.reduce((r,n)=>r+n.total,0),uy=(e,r,n=21)=>{const a=e.reduce((f,h)=>f+h.total,0),l=r.reduce((f,h)=>f+h.total,0),o=a+l,d=o*(n/100),m=o+d;return{subtotal:o,vatAmount:d,total:m}},my=(e,r,n=21)=>{const a=e.reduce((f,h)=>f+h.total,0),l=r.reduce((f,h)=>f+h.total,0),o=a+l,d=o*(n/100),m=o+d;return{subtotal:o,vatAmount:d,total:m}},fy=e=>{const r=new Date().getFullYear(),n=e.filter(l=>l.invoiceNumber.startsWith(`${r}-`)).map(l=>parseInt(l.invoiceNumber.split("-")[1])).filter(l=>!isNaN(l)),a=n.length>0?Math.max(...n)+1:1;return`${r}-${String(a).padStart(3,"0")}`},AH=e=>{const r=e.filter(l=>l.type==="income").reduce((l,o)=>l+o.amount,0),n=e.filter(l=>l.type==="expense").reduce((l,o)=>l+Math.abs(o.amount),0),a=r-n;return{totalIncome:r,totalExpense:n,netProfit:a}},TH=e=>{const r=e.reduce((f,h)=>f+h.total,0),n=e.filter(f=>f.status==="paid"),a=n.reduce((f,h)=>f+h.total,0),l=e.filter(f=>f.status==="overdue"),o=l.reduce((f,h)=>f+h.total,0),d=e.filter(f=>["sent","overdue"].includes(f.status)),m=d.reduce((f,h)=>f+h.total,0);return{totalInvoiced:r,totalPaid:a,totalOverdue:o,totalOutstanding:m,paidInvoices:n,overdueInvoices:l,outstandingInvoices:d}},IH=e=>{const r=e.reduce((f,h)=>f+h.total,0),n=e.filter(f=>f.status==="approved"),a=e.filter(f=>f.status==="sent"),l=e.filter(f=>f.status==="expired"||f.validUntil&&new Date(f.validUntil)<new Date),o=n.reduce((f,h)=>f+h.total,0),d=a.reduce((f,h)=>f+h.total,0),m=l.reduce((f,h)=>f+h.total,0);return{totalQuoted:r,totalApproved:o,totalSent:d,totalExpired:m,approvedQuotes:n,sentQuotes:a,expiredQuotes:l}},EH=e=>{const r=e.filter(a=>a.status==="paid"&&a.issueDate&&a.paidDate);if(r.length===0)return 0;const n=r.reduce((a,l)=>{const o=new Date(l.issueDate),d=new Date(l.paidDate),m=Math.abs(d.getTime()-o.getTime()),f=Math.ceil(m/(1e3*60*60*24));return a+f},0);return Math.round(n/r.length)},hy=e=>e.customerId?!e.items||e.items.length===0?{isValid:!1,message:"Minimaal 1 item is verplicht!"}:e.validUntil?e.validUntil&&isNaN(Date.parse(e.validUntil))?{isValid:!1,message:"Ongeldige datum formaat!"}:{isValid:!0}:{isValid:!1,message:"Geldig tot datum is verplicht!"}:{isValid:!1,message:"Klant is verplicht!"},gy=e=>{if(!e.customerId)return{isValid:!1,message:"Klant is verplicht!"};if(!e.items||e.items.length===0)return{isValid:!1,message:"Minimaal 1 item is verplicht!"};if(!e.issueDate)return{isValid:!1,message:"Factuurdatum is verplicht!"};if(!e.dueDate)return{isValid:!1,message:"Vervaldatum is verplicht!"};if(e.issueDate&&isNaN(Date.parse(e.issueDate)))return{isValid:!1,message:"Ongeldig factuurdatum formaat!"};if(e.dueDate&&isNaN(Date.parse(e.dueDate)))return{isValid:!1,message:"Ongeldig vervaldatum formaat!"};if(e.issueDate&&e.dueDate){const r=new Date(e.issueDate);if(new Date(e.dueDate)<r)return{isValid:!1,message:"Vervaldatum moet na factuurdatum zijn!"}}return{isValid:!0}},MH=(e,r,n,a,l=[])=>{const o=hy({customerId:e.customerId,items:e.items,validUntil:e.validUntil});if(!o.isValid)throw new Error(o.message||"Invalid quote data");const{subtotal:d,vatAmount:m,total:f}=uy(e.items,e.labor,e.vatRate),h=new Date().toISOString(),g=Ra(e.customerId,a);return{id:`Q${Date.now()}`,customerId:e.customerId,items:e.items,labor:e.labor.length>0?e.labor:void 0,subtotal:d,vatRate:e.vatRate,vatAmount:m,total:f,status:"draft",createdDate:new Date().toISOString().split("T")[0],validUntil:e.validUntil,notes:e.notes,createdBy:r.employeeId,timestamps:{created:h},history:[Br("quote","created",`Offerte aangemaakt door ${or(r.employeeId,n)} voor klant ${g}`,r)]}},PH=(e,r,n,a,l)=>{const o=hy({customerId:r.customerId,items:r.items,validUntil:r.validUntil});if(!o.isValid)throw new Error(o.message||"Invalid quote data");const{subtotal:d,vatAmount:m,total:f}=uy(r.items,r.labor,r.vatRate);return{...n,customerId:r.customerId,items:r.items,labor:r.labor.length>0?r.labor:void 0,subtotal:d,vatRate:r.vatRate,vatAmount:m,total:f,validUntil:r.validUntil,notes:r.notes,history:[...n.history||[],Br("quote","updated",`Offerte bijgewerkt door ${or(a.employeeId,l)}`,a)]}},_H=(e,r,n,a)=>{const l=new Date().toISOString(),o=e.status,d={status:r,history:[...e.history||[],Br("quote",r,`Status gewijzigd van "${o}" naar "${r}" door ${or(n.employeeId,a)}`,n,{fromStatus:o,toStatus:r})]};return e.timestamps?d.timestamps={...e.timestamps}:d.timestamps={created:e.createdDate},r==="sent"&&!d.timestamps.sent?d.timestamps.sent=l:r==="approved"&&!d.timestamps.approved&&(d.timestamps.approved=l),{...e,...d}},RH=(e,r)=>r.filter(n=>n.id!==e),xk=(e,r,n,a)=>{const l=new Date().toISOString(),o=Ra(e.customerId,a);return{id:`Q${Date.now()}`,customerId:e.customerId,items:e.items.map(m=>({...m})),labor:e.labor?e.labor.map(m=>({...m})):void 0,subtotal:e.subtotal,vatRate:e.vatRate,vatAmount:e.vatAmount,total:e.total,status:"draft",createdDate:new Date().toISOString().split("T")[0],validUntil:e.validUntil,notes:e.notes||"",createdBy:r.employeeId,timestamps:{created:l},history:[Br("quote","created",`Offerte gecloneerd door ${or(r.employeeId,n)} voor klant ${o}`,r)]}},LH=(e,r,n,a=[])=>{const l=yH(e,[]);if(!l.canProceed)throw new Error(l.message);const o=new Date().toISOString().split("T")[0],d=new Date;d.setDate(d.getDate()+14);const m=new Date().toISOString(),f={id:`inv${Date.now()}`,invoiceNumber:fy(a),customerId:e.customerId,quoteId:e.id,items:e.items,labor:e.labor,subtotal:e.subtotal,vatRate:e.vatRate,vatAmount:e.vatAmount,total:e.total,status:"draft",issueDate:o,dueDate:d.toISOString().split("T")[0],notes:e.notes,paymentTerms:"14 dagen",workOrderId:e.workOrderId,createdBy:r.employeeId,timestamps:{created:m},history:[Br("invoice","created",`Factuur aangemaakt door ${or(r.employeeId,n)} vanuit offerte ${e.id}`,r)]},h={...e,timestamps:{...e.timestamps,convertedToInvoice:m},history:[...e.history||[],Br("quote","converted_to_invoice",`Geconverteerd naar factuur ${f.invoiceNumber} door ${or(r.employeeId,n)}`,r)]};return{invoice:f,updatedQuote:h}},PO=(e,r)=>{var l;if(r.status==="Completed")return null;const n=((l=e.labor)==null?void 0:l.reduce((o,d)=>o+d.hours,0))||0;return{...r,requiredInventory:e.items.filter(o=>o.inventoryItemId).map(o=>({itemId:o.inventoryItemId,quantity:o.quantity})),estimatedHours:n,estimatedCost:e.total,notes:`${r.notes||""}

[Update: ${new Date().toLocaleDateString()}] Offerte aangepast - Geschatte uren: ${n}u, Kosten: ${e.total.toFixed(2)}`}},$H=(e,r,n,a,l=[])=>{const o=gy({customerId:e.customerId,items:e.items,issueDate:e.issueDate,dueDate:e.dueDate});if(!o.isValid)throw new Error(o.message||"Invalid invoice data");const{subtotal:d,vatAmount:m,total:f}=my(e.items,e.labor,e.vatRate),h=new Date().toISOString(),g=Ra(e.customerId,a),p=`inv${Date.now()}`,v=fy(l);return{id:p,invoiceNumber:v,customerId:e.customerId,items:e.items,labor:e.labor.length>0?e.labor:void 0,subtotal:d,vatRate:e.vatRate,vatAmount:m,total:f,status:"draft",issueDate:e.issueDate,dueDate:e.dueDate,notes:e.notes,paymentTerms:e.paymentTerms,createdBy:r.employeeId,timestamps:{created:h},history:[Br("invoice","created",`Factuur aangemaakt door ${or(r.employeeId,n)} voor klant ${g}`,r)]}},zH=(e,r,n,a,l)=>{const o=gy({customerId:r.customerId,items:r.items,issueDate:r.issueDate,dueDate:r.dueDate});if(!o.isValid)throw new Error(o.message||"Invalid invoice data");const{subtotal:d,vatAmount:m,total:f}=my(r.items,r.labor,r.vatRate);return{...n,customerId:r.customerId,items:r.items,labor:r.labor.length>0?r.labor:void 0,subtotal:d,vatRate:r.vatRate,vatAmount:m,total:f,issueDate:r.issueDate,dueDate:r.dueDate,notes:r.notes,paymentTerms:r.paymentTerms,history:[...n.history||[],Br("invoice","updated",`Factuur bijgewerkt door ${or(a.employeeId,l)}`,a)]}},_O=(e,r,n,a)=>{const l=new Date().toISOString(),o=e.status,d={status:r,history:[...e.history||[],Br("invoice",r,`Status gewijzigd van "${o}" naar "${r}" door ${or(n.employeeId,a)}`,n,{fromStatus:o,toStatus:r})]};if(e.timestamps?d.timestamps={...e.timestamps}:d.timestamps={created:e.issueDate},r==="sent"&&!d.timestamps.sent){if(d.timestamps.sent=l,e.dueDate){const m=new Date(e.dueDate),f=new Date(m);f.setDate(m.getDate()+7);const h=new Date(m);h.setDate(m.getDate()+14),d.reminders={reminder1Date:f.toISOString().split("T")[0],reminder1Sent:!1,reminder2Date:h.toISOString().split("T")[0],reminder2Sent:!1}}}else r==="paid"&&!d.timestamps.paid&&(d.timestamps.paid=l,d.paidDate=l.split("T")[0]);return{...e,...d}},BH=(e,r)=>r.filter(n=>n.id!==e),FH=(e,r,n,a,l=[])=>{const o=new Date().toISOString(),d=Ra(e.customerId,a),m=new Date().toISOString().split("T")[0],f=new Date;return f.setDate(f.getDate()+14),{id:`inv${Date.now()}`,invoiceNumber:fy(l),customerId:e.customerId,items:e.items.map(g=>({...g})),labor:e.labor?e.labor.map(g=>({...g})):void 0,subtotal:e.subtotal,vatRate:e.vatRate,vatAmount:e.vatAmount,total:e.total,status:"draft",issueDate:m,dueDate:f.toISOString().split("T")[0],notes:e.notes||"",paymentTerms:e.paymentTerms,createdBy:r.employeeId,timestamps:{created:o},history:[Br("invoice","created",`Factuur gecloneerd door ${or(r.employeeId,n)} voor klant ${d}`,r)]}},vk=(e,r)=>{var l;if(r.status==="Completed")return null;const n=((l=e.labor)==null?void 0:l.reduce((o,d)=>o+d.hours,0))||0;return{...r,requiredInventory:e.items.filter(o=>o.inventoryItemId).map(o=>({itemId:o.inventoryItemId,quantity:o.quantity})),estimatedHours:n,estimatedCost:e.total,notes:`${r.notes||""}

[Update: ${new Date().toLocaleDateString()}] Factuur aangepast - Geschatte uren: ${n}u, Kosten: ${e.total.toFixed(2)}`}},RO=(e,r,n,a)=>{if(!e.reminders)throw new Error("Invoice has no reminders configured");const l=new Date().toISOString(),o=r===1?"reminder1Sent":"reminder2Sent",d=r===1?"reminder1SentDate":"reminder2SentDate";return{...e,reminders:{...e.reminders,[o]:!0,[d]:l},history:[...e.history||[],Br("invoice","updated",`Herinnering ${r} verzonden voor factuur ${e.invoiceNumber} door ${or(n.employeeId,a)}`,n)]}},LO=e=>e.status==="draft"&&Mc(e),UH=e=>{const[r,n]=y.useState("all"),a=y.useMemo(()=>CH(e,r),[e,r]);return{filter:r,setFilter:n,filteredTransactions:a,transactions:e}},py=(e,r=[])=>{const[n,a]=y.useState(""),[l,o]=y.useState(""),[d,m]=y.useState(""),[f,h]=y.useState(!1),g=y.useMemo(()=>{if(!d)return r;const v=d.toLowerCase();return r.filter(b=>{var w;return b.name.toLowerCase().includes(v)||((w=b.description)==null?void 0:w.toLowerCase().includes(v))})},[r,d]),p=y.useMemo(()=>{let v=e.filter(b=>(b.price||b.salePrice)&&(b.price||b.salePrice)>0);if(l&&(v=v.filter(b=>b.categoryId===l)),n){const b=n.toLowerCase();v=v.filter(w=>{var N,S,C,O,k;return!!(w.name.toLowerCase().includes(b)||(N=w.sku)!=null&&N.toLowerCase().includes(b)||(S=w.supplierSku)!=null&&S.toLowerCase().includes(b)||(C=w.autoSku)!=null&&C.toLowerCase().includes(b)||(O=w.customSku)!=null&&O.toLowerCase().includes(b)||w.categoryId&&((k=r.find(E=>E.id===w.categoryId))!=null&&k.name.toLowerCase().includes(b)))})}return v},[e,n,l,r]);return{inventorySearchTerm:n,setInventorySearchTerm:a,inventoryCategoryFilter:l,setInventoryCategoryFilter:o,inventoryCategorySearchTerm:d,setInventoryCategorySearchTerm:m,showInventoryCategoryDropdown:f,setShowInventoryCategoryDropdown:h,filteredInventoryCategories:g,filteredInventoryForSelection:p}},$O=(e,r)=>{const[n,a]=y.useState(e),[l,o]=y.useState({}),[d,m]=y.useState(!1),f=y.useCallback((C,O)=>{a(k=>({...k,[C]:O})),l[String(C)]&&o(k=>{const E={...k};return delete E[String(C)],E})},[l]),h=y.useCallback((C,O)=>{a(k=>({...k,[C]:O(k[C])}))},[]),g=y.useCallback(C=>{a(O=>({...O,...C}))},[]),p=y.useCallback(()=>{if(!r)return!0;const C=r(n);return C.isValid?(o({}),!0):(o({_form:C.message||"Formulier bevat fouten"}),!1)},[n,r]),v=y.useCallback(async C=>{m(!0);try{if(!p()){m(!1);return}await C(n)}catch(O){o({_form:O.message||"Er is een fout opgetreden"})}finally{m(!1)}},[n,p]),b=y.useCallback(()=>{a(e),o({}),m(!1)},[e]),w=y.useCallback((C,O)=>{o(k=>({...k,[C]:O}))},[]),N=y.useCallback(()=>{o({})},[]),S=Object.keys(l).length>0;return{formData:n,errors:l,isSubmitting:d,hasErrors:S,handleChange:f,handleNestedChange:h,setFields:g,validate:p,handleSubmit:v,reset:b,setError:w,clearErrors:N,setFormData:a}},VH={customerId:"",items:[],labor:[],vatRate:21,notes:"",validUntil:""},qH=(e=[])=>{const[r,n]=y.useState(null),a=$O(VH,N=>hy(N)),l=y.useCallback(()=>uy(a.formData.items,a.formData.labor,a.formData.vatRate),[a.formData.items,a.formData.labor,a.formData.vatRate]),o=y.useCallback(()=>{const N={inventoryItemId:"",description:"",quantity:1,pricePerUnit:0,total:0};a.handleNestedChange("items",S=>[...S,N])},[a]),d=y.useCallback(()=>{const N={description:"",quantity:1,pricePerUnit:0,total:0};a.handleNestedChange("items",S=>[...S,N])},[a]),m=y.useCallback(()=>{const N={description:"",hours:1,hourlyRate:50,total:50};a.handleNestedChange("labor",S=>[...S,N])},[a]),f=y.useCallback(N=>{a.handleNestedChange("items",S=>S.filter((C,O)=>O!==N))},[a]),h=y.useCallback(N=>{a.handleNestedChange("labor",S=>S.filter((C,O)=>O!==N))},[a]),g=y.useCallback((N,S)=>{const C=e.find(O=>O.id===S);C&&a.handleNestedChange("items",O=>{const k=[...O];return k[N]={...k[N],inventoryItemId:S,description:C.name,pricePerUnit:C.price||0,total:k[N].quantity*(C.price||0)},k})},[a,e]),p=y.useCallback((N,S,C)=>{a.handleNestedChange("items",O=>{const k=[...O];return k[N]={...k[N],[S]:C},(S==="quantity"||S==="pricePerUnit")&&(k[N].total=k[N].quantity*k[N].pricePerUnit),k})},[a]),v=y.useCallback((N,S,C)=>{a.handleNestedChange("labor",O=>{const k=[...O];return k[N]={...k[N],[S]:C},(S==="hours"||S==="hourlyRate")&&(k[N].total=k[N].hours*k[N].hourlyRate),k})},[a]),b=y.useCallback(N=>{a.setFields({customerId:N.customerId,items:N.items,labor:N.labor||[],vatRate:N.vatRate,notes:N.notes||"",validUntil:N.validUntil})},[a]),w=y.useCallback(()=>{a.reset(),n(null)},[a]);return{formData:a.formData,errors:a.errors,isSubmitting:a.isSubmitting,hasErrors:a.hasErrors,editingQuoteId:r,setEditingQuoteId:n,handleChange:a.handleChange,handleNestedChange:a.handleNestedChange,setFields:a.setFields,validate:a.validate,reset:w,handleAddInventoryItem:o,handleAddCustomItem:d,handleAddLabor:m,handleRemoveItem:f,handleRemoveLabor:h,handleInventoryItemChange:g,handleItemChange:p,handleLaborChange:v,loadQuoteForEditing:b,totals:l}},WH=(e,r,n,a,l,o,d,m)=>{const[f,h]=y.useState(!1),[g,p]=y.useState(!1),[v,b]=y.useState(!1),[w,N]=y.useState(null),[S,C]=y.useState(!1),O=qH(n),k=y.useCallback(()=>{var U;try{if(!O.validate()){alert(O.errors._form||"Vul alle verplichte velden in!");return}if(O.editingQuoteId){const Y=e.find(_=>_.id===O.editingQuoteId);if(!Y)return;const ee=PH(O.editingQuoteId,{customerId:O.formData.customerId,items:O.formData.items,labor:O.formData.labor,vatRate:O.formData.vatRate,notes:O.formData.notes,validUntil:O.formData.validUntil},Y,o,l);if(r(e.map(_=>_.id===O.editingQuoteId?ee:_)),ee.workOrderId){const _=d.find(G=>G.id===ee.workOrderId);if(_){const G=PO(ee,_);G&&(m(d.map(L=>L.id===_.id?G:L)),alert(" Offerte en werkorder succesvol gesynchroniseerd!"))}}O.reset(),h(!1),alert(` Offerte ${ee.id} succesvol bijgewerkt!`);return}const q=MH({customerId:O.formData.customerId,items:O.formData.items,labor:O.formData.labor,vatRate:O.formData.vatRate,notes:O.formData.notes,validUntil:O.formData.validUntil},o,l,a,e);r([...e,q]),O.reset(),h(!1),Ha(o.employeeId,o.role,ModuleKey.ACCOUNTING,"create_quote","create",{quoteId:q.id,customerId:q.customerId,total:q.total,itemsCount:q.items.length,laborCount:((U=q.labor)==null?void 0:U.length)||0}),alert(` Offerte ${q.id} succesvol aangemaakt!`)}catch(q){alert(q.message||"Er is een fout opgetreden!")}},[O,e,a,l,o,d,m]),E=y.useCallback(U=>{const q=e.find(Y=>Y.id===U);q&&(O.loadQuoteForEditing({customerId:q.customerId,items:q.items,labor:q.labor||[],vatRate:q.vatRate,notes:q.notes||"",validUntil:q.validUntil}),O.setEditingQuoteId(U),h(!0))},[e,O]),M=y.useCallback((U,q)=>{const Y=e.find(_=>_.id===U);if(!Y)return;const ee=_H(Y,q,o,l);r(e.map(_=>_.id===U?ee:_))},[e,o,l]),D=y.useCallback(U=>{if(confirm("Weet je zeker dat je deze offerte wilt verwijderen?")){const q=RH(U,e);r(q)}},[e]),R=y.useCallback(U=>{const q=e.find(Y=>Y.id===U);q&&(O.setFields({customerId:q.customerId,items:q.items,labor:q.labor||[],vatRate:q.vatRate,notes:q.notes||"",validUntil:""}),p(!0))},[e,O]),P=y.useCallback(()=>{var Y;const U=(Y=e.find(ee=>ee.customerId===O.formData.customerId&&JSON.stringify(ee.items)===JSON.stringify(O.formData.items)))==null?void 0:Y.id;if(!U){k();return}const q=e.find(ee=>ee.id===U);if(!q){k();return}try{const ee=xk(q,o,l,a);ee.validUntil=O.formData.validUntil,ee.notes=O.formData.notes,r([...e,ee]),O.reset(),p(!1),alert(` Offerte ${ee.id} succesvol gecloneerd!`),setTimeout(()=>{const _=document.getElementById(ee.id);_==null||_.scrollIntoView({behavior:"smooth",block:"center"})},100)}catch(ee){alert(ee.message||"Er is een fout opgetreden!")}},[e,O,o,l,a,k]),z=y.useCallback(()=>{if(!w)return;const U=e.find(q=>q.id===w);if(U){if(M(w,"approved"),S){let q;if(U.validUntil){const Y=new Date(U.validUntil);q=new Date(Y),q.setDate(q.getDate()+30)}else q=new Date,q.setDate(q.getDate()+30);try{const Y=xk(U,o,l,a);Y.validUntil=q.toISOString().split("T")[0],Y.status="draft",Y.notes=`Gekloond van ${U.id} (geaccepteerd op ${new Date().toLocaleDateString("nl-NL")}) voor volgende periode${U.notes?`

Originele notitie: ${U.notes}`:""}`,r([...e,Y]),alert(` Offerte geaccepteerd!

 Nieuwe offerte ${Y.id} aangemaakt voor volgende periode (geldig tot ${q.toLocaleDateString("nl-NL")}).`)}catch(Y){alert(Y.message||"Er is een fout opgetreden!")}}else alert(` Offerte ${U.id} succesvol geaccepteerd!`);b(!1),N(null),C(!1)}},[w,S,e,M,o,l,a]);return{showQuoteForm:f,setShowQuoteForm:h,showCloneQuoteModal:g,setShowCloneQuoteModal:p,showAcceptQuoteModal:v,setShowAcceptQuoteModal:b,quoteToAccept:w,setQuoteToAccept:N,cloneOnAccept:S,setCloneOnAccept:C,quoteForm:O,createQuote:k,editQuote:E,updateQuoteStatus:M,deleteQuote:D,cloneQuote:R,saveClonedQuote:P,acceptQuote:z}},HH={customerId:"",items:[],labor:[],vatRate:21,notes:"",paymentTerms:"14 dagen",issueDate:"",dueDate:""},KH=(e=[])=>{const[r,n]=y.useState(null),a=$O(HH,N=>gy(N)),l=y.useCallback(()=>my(a.formData.items,a.formData.labor,a.formData.vatRate),[a.formData.items,a.formData.labor,a.formData.vatRate]),o=y.useCallback(()=>{const N={inventoryItemId:"",description:"",quantity:1,pricePerUnit:0,total:0};a.handleNestedChange("items",S=>[...S,N])},[a]),d=y.useCallback(()=>{const N={description:"",quantity:1,pricePerUnit:0,total:0};a.handleNestedChange("items",S=>[...S,N])},[a]),m=y.useCallback(()=>{const N={description:"",hours:1,hourlyRate:50,total:50};a.handleNestedChange("labor",S=>[...S,N])},[a]),f=y.useCallback(N=>{a.handleNestedChange("items",S=>S.filter((C,O)=>O!==N))},[a]),h=y.useCallback(N=>{a.handleNestedChange("labor",S=>S.filter((C,O)=>O!==N))},[a]),g=y.useCallback((N,S)=>{const C=e.find(O=>O.id===S);C&&a.handleNestedChange("items",O=>{const k=[...O];return k[N]={...k[N],inventoryItemId:S,description:C.name,pricePerUnit:C.price||0,total:k[N].quantity*(C.price||0)},k})},[a,e]),p=y.useCallback((N,S,C)=>{a.handleNestedChange("items",O=>{const k=[...O];return k[N]={...k[N],[S]:C},(S==="quantity"||S==="pricePerUnit")&&(k[N].total=k[N].quantity*k[N].pricePerUnit),k})},[a]),v=y.useCallback((N,S,C)=>{a.handleNestedChange("labor",O=>{const k=[...O];return k[N]={...k[N],[S]:C},(S==="hours"||S==="hourlyRate")&&(k[N].total=k[N].hours*k[N].hourlyRate),k})},[a]),b=y.useCallback(N=>{a.setFields({customerId:N.customerId,items:N.items,labor:N.labor||[],vatRate:N.vatRate,notes:N.notes||"",paymentTerms:N.paymentTerms||"14 dagen",issueDate:N.issueDate,dueDate:N.dueDate})},[a]),w=y.useCallback(()=>{a.reset(),n(null)},[a]);return{formData:a.formData,errors:a.errors,isSubmitting:a.isSubmitting,hasErrors:a.hasErrors,editingInvoiceId:r,setEditingInvoiceId:n,handleChange:a.handleChange,handleNestedChange:a.handleNestedChange,setFields:a.setFields,validate:a.validate,reset:w,handleAddInventoryItem:o,handleAddCustomItem:d,handleAddLabor:m,handleRemoveItem:f,handleRemoveLabor:h,handleInventoryItemChange:g,handleItemChange:p,handleLaborChange:v,loadInvoiceForEditing:b,totals:l}},GH=(e,r,n,a,l,o,d,m,f)=>{const[h,g]=y.useState(!1),[p,v]=y.useState(!1),[b,w]=y.useState(!1),[N,S]=y.useState(null),[C,O]=y.useState({hoursChecked:!1,materialsChecked:!1,extraWorkAdded:!1}),k=KH(n),E=y.useCallback(()=>{const ee=new Date().getFullYear(),_=e.filter(L=>L.invoiceNumber.startsWith(`INV-${ee}-`)).map(L=>{const V=L.invoiceNumber.split("-");return parseInt(V[V.length-1],10)}),G=_.length>0?Math.max(..._)+1:1;return`INV-${ee}-${G.toString().padStart(4,"0")}`},[e]),M=y.useCallback(()=>{var ee;try{if(!k.validate()){alert(k.errors._form||"Vul alle verplichte velden in!");return}if(k.editingInvoiceId){const G=e.find(V=>V.id===k.editingInvoiceId);if(!G)return;const L=zH(k.editingInvoiceId,{customerId:k.formData.customerId,items:k.formData.items,labor:k.formData.labor,vatRate:k.formData.vatRate,notes:k.formData.notes,paymentTerms:k.formData.paymentTerms,issueDate:k.formData.issueDate,dueDate:k.formData.dueDate},G,o,l);if(r(e.map(V=>V.id===k.editingInvoiceId?L:V)),L.workOrderId){const V=d.find(Z=>Z.id===L.workOrderId);if(V){const Z=vk(L,V);Z&&(m(d.map(K=>K.id===V.id?Z:K)),alert(" Factuur en werkorder succesvol gesynchroniseerd!"))}}k.reset(),g(!1),alert(` Factuur ${L.invoiceNumber} succesvol bijgewerkt!`);return}const _=$H({customerId:k.formData.customerId,items:k.formData.items,labor:k.formData.labor,vatRate:k.formData.vatRate,notes:k.formData.notes,paymentTerms:k.formData.paymentTerms,issueDate:k.formData.issueDate,dueDate:k.formData.dueDate},o,l,a,e,E());r([...e,_]),k.reset(),g(!1),Ha(o.employeeId,o.role,ModuleKey.ACCOUNTING,"create_invoice","create",{invoiceId:_.id,invoiceNumber:_.invoiceNumber,customerId:_.customerId,total:_.total,itemsCount:_.items.length,laborCount:((ee=_.labor)==null?void 0:ee.length)||0}),alert(` Factuur ${_.invoiceNumber} succesvol aangemaakt!`)}catch(_){alert(_.message||"Er is een fout opgetreden!")}},[k,e,a,l,o,d,m,E]),D=y.useCallback(ee=>{const _=e.find(G=>G.id===ee);_&&(k.loadInvoiceForEditing({customerId:_.customerId,items:_.items,labor:_.labor||[],vatRate:_.vatRate,notes:_.notes||"",paymentTerms:_.paymentTerms||"14 dagen",issueDate:_.issueDate,dueDate:_.dueDate}),k.setEditingInvoiceId(ee),g(!0))},[e,k]),R=y.useCallback((ee,_)=>{const G=e.find(V=>V.id===ee);if(!G)return;const L=_O(G,_,o,l);if(r(e.map(V=>V.id===ee?L:V)),L.workOrderId&&_==="paid"){const V=d.find(Z=>Z.id===L.workOrderId);if(V){const Z=vk(L,V);Z&&m(d.map(K=>K.id===V.id?Z:K))}}},[e,o,l,d,m]),P=y.useCallback(ee=>{if(confirm("Weet je zeker dat je deze factuur wilt verwijderen?")){const _=BH(ee,e);r(_)}},[e,r]),z=y.useCallback(ee=>{const _=e.find(G=>G.id===ee);_&&(k.setFields({customerId:_.customerId,items:_.items,labor:_.labor||[],vatRate:_.vatRate,notes:_.notes||"",paymentTerms:_.paymentTerms||"14 dagen",issueDate:"",dueDate:""}),v(!0))},[e,k]),U=y.useCallback((ee=!1)=>{var L;const _=(L=e.find(V=>V.customerId===k.formData.customerId&&JSON.stringify(V.items)===JSON.stringify(k.formData.items)))==null?void 0:L.id;if(!_){M();return}const G=e.find(V=>V.id===_);if(!G){M();return}try{const V=FH(G,o,l,a,E());if(V.issueDate=k.formData.issueDate,V.dueDate=k.formData.dueDate,V.notes=k.formData.notes,r([...e,V]),k.reset(),v(!1),ee)return V;alert(` Factuur ${V.invoiceNumber} succesvol gecloneerd!`),setTimeout(()=>{const Z=document.getElementById(V.id);Z==null||Z.scrollIntoView({behavior:"smooth",block:"center"})},100)}catch(V){alert(V.message||"Er is een fout opgetreden!")}},[e,k,o,l,a,E,M]),q=y.useCallback((ee,_)=>{const G=e.find(V=>V.id===ee);if(!G)return;const L=RO(G,_,o,l);if(r(e.map(V=>V.id===ee?L:V)),f){const V=pH(L,()=>{});f(Z=>[V,...Z])}alert(` Herinnering ${_} voor factuur ${G.invoiceNumber} succesvol verzonden!`)},[e,o,l,f]),Y=y.useCallback(()=>{var V;if(!N)return;const ee=N,_=new Date().toISOString(),G=ee.status;if(LO(ee)){w(!0);return}const L={status:"sent",history:[...ee.history||[],Br("invoice","sent",`Status gewijzigd van "${G}" naar "sent" na validatie door ${or(o.employeeId,l)}`,o,{fromStatus:G,toStatus:"sent"})]};if(ee.timestamps?L.timestamps={...ee.timestamps}:L.timestamps={created:ee.issueDate},!((V=L.timestamps)!=null&&V.sent)){if(L.timestamps={...L.timestamps,sent:_},ee.dueDate){const Z=new Date(ee.dueDate),K=new Date(Z);K.setDate(Z.getDate()+7);const de=new Date(Z);de.setDate(Z.getDate()+14),L.reminders={reminder1Date:K.toISOString().split("T")[0],reminder1Sent:!1,reminder2Date:de.toISOString().split("T")[0],reminder2Sent:!1}}Ha(o.employeeId,o.role,ModuleKey.ACCOUNTING,"validate_invoice","complete",{invoiceId:ee.id,invoiceNumber:ee.invoiceNumber,wasAutoGenerated:Mc(ee)})}r(e.map(Z=>Z.id===ee.id?{...Z,...L}:Z)),w(!1),S(null),O({hoursChecked:!1,materialsChecked:!1,extraWorkAdded:!1}),alert(` Factuur ${ee.invoiceNumber} succesvol gevalideerd en verzonden!`)},[N,e,o,l,r,w,S,O]);return{showInvoiceForm:h,setShowInvoiceForm:g,showCloneInvoiceModal:p,setShowCloneInvoiceModal:v,showInvoiceValidationModal:b,setShowInvoiceValidationModal:w,invoiceToValidate:N,setInvoiceToValidate:S,validationChecklist:C,setValidationChecklist:O,invoiceForm:k,createInvoice:M,editInvoice:D,updateInvoiceStatus:R,deleteInvoice:P,cloneInvoice:z,saveClonedInvoice:U,sendReminder:q,confirmInvoiceValidation:Y,generateInvoiceNumber:E}},zO=(e,r,n,a)=>{const l=AH(n),o=TH(e),{paidInvoices:d,overdueInvoices:m,outstandingInvoices:f}=o,h=IH(r),{approvedQuotes:g,sentQuotes:p,expiredQuotes:v}=h,b=r.filter(P=>!["approved","rejected"].includes(P.status)),w=b.length,N=EH(e),S=y.useMemo(()=>{const P={},z=new Date;for(let U=11;U>=0;U--){const q=new Date(z.getFullYear(),z.getMonth()-U,1),Y=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`;P[Y]=0}return e.forEach(U=>{if(U.status==="paid"&&U.paidDate){const q=new Date(U.paidDate),Y=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`;P[Y]!==void 0&&(P[Y]+=U.total)}}),Object.entries(P).map(([U,q])=>({month:U.split("-")[1]+"/"+U.split("-")[0].slice(-2),revenue:Math.round(q*100)/100}))},[e]),C=y.useMemo(()=>{const P={};return f.forEach(z=>{var q;const U=((q=a.find(Y=>Y.id===z.customerId))==null?void 0:q.name)||"Onbekend";P[U]=(P[U]||0)+z.total}),Object.entries(P).map(([z,U])=>({name:z,amount:Math.round(U*100)/100})).sort((z,U)=>U.amount-z.amount).slice(0,5)},[f,a]),O=y.useMemo(()=>{const P={};return d.forEach(z=>{var q;const U=((q=a.find(Y=>Y.id===z.customerId))==null?void 0:q.name)||"Onbekend";P[U]=(P[U]||0)+z.total}),Object.entries(P).map(([z,U])=>({name:z,amount:Math.round(U*100)/100})).sort((z,U)=>U.amount-z.amount).slice(0,5)},[d,a]),k=y.useMemo(()=>{const P={approved:0,sent:0,draft:0,rejected:0,expired:0};return r.forEach(z=>{P[z.status]=(P[z.status]||0)+1}),[{name:"Goedgekeurd",value:P.approved,status:"approved"},{name:"Verzonden",value:P.sent,status:"sent"},{name:"Concept",value:P.draft,status:"draft"},{name:"Afgewezen",value:P.rejected,status:"rejected"},{name:"Verlopen",value:P.expired,status:"expired"}].filter(z=>z.value>0)},[r]),E=y.useMemo(()=>{const P={};return e.forEach(z=>{if(z.status==="paid"&&z.issueDate&&z.paidDate&&z.dueDate){const U=new Date(z.issueDate),q=new Date(z.paidDate),Y=new Date(z.dueDate),ee=`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}`;P[ee]||(P[ee]={onTime:0,late:0}),q<=Y?P[ee].onTime+=z.total:P[ee].late+=z.total}}),Object.entries(P).sort().slice(-6).map(([z,U])=>({month:z.split("-")[1]+"/"+z.split("-")[0].slice(-2),"Op tijd":Math.round(U.onTime*100)/100,"Te laat":Math.round(U.late*100)/100}))},[e]),M=y.useMemo(()=>{const P=new Date,z=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`,U=new Date(P.getFullYear(),P.getMonth()-1,1),q=`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}`,Y=d.filter(ge=>{if(!ge.paidDate)return!1;const Ne=new Date(ge.paidDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===z}).reduce((ge,Ne)=>ge+Ne.total,0),ee=e.filter(ge=>{if(!ge.issueDate)return!1;const Ne=new Date(ge.issueDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===z}).length,_=f.filter(ge=>{if(!ge.issueDate)return!1;const Ne=new Date(ge.issueDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===z}).reduce((ge,Ne)=>ge+Ne.total,0),G=r.filter(ge=>{if(!ge.createdDate)return!1;const Ne=new Date(ge.createdDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===z}),L=G.filter(ge=>ge.status==="approved").length,V=G.length>0?L/G.length:0,Z=d.filter(ge=>{if(!ge.paidDate)return!1;const Ne=new Date(ge.paidDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===q}).reduce((ge,Ne)=>ge+Ne.total,0),K=e.filter(ge=>{if(!ge.issueDate)return!1;const Ne=new Date(ge.issueDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===q}).length,de=f.filter(ge=>{if(!ge.issueDate)return!1;const Ne=new Date(ge.issueDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===q}).reduce((ge,Ne)=>ge+Ne.total,0),B=r.filter(ge=>{if(!ge.createdDate)return!1;const Ne=new Date(ge.createdDate);return`${Ne.getFullYear()}-${String(Ne.getMonth()+1).padStart(2,"0")}`===q}),le=B.filter(ge=>ge.status==="approved").length,ye=B.length>0?le/B.length:0;return{revenueChange:Z>0?(Y-Z)/Z:0,invoicesChange:K>0?(ee-K)/K:0,openAmountChange:de>0?(_-de)/de:0,quoteConversionChange:ye>0?(V-ye)/ye:0}},[d,e,f,r]),D=y.useMemo(()=>{const P={},z=new Date;for(let U=5;U>=0;U--){const q=new Date(z.getFullYear()-1,z.getMonth()-U,1),Y=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`;P[Y]=0}return d.forEach(U=>{if(U.paidDate){const q=new Date(U.paidDate),Y=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`;P[Y]!==void 0&&(P[Y]+=U.total)}}),Object.entries(P).map(([U,q])=>({month:U.split("-")[1]+"/"+U.split("-")[0].slice(-2),revenue:Math.round(q*100)/100}))},[d]),R=y.useMemo(()=>{const P={};return f.forEach(z=>{var q;const U=((q=a.find(Y=>Y.id===z.customerId))==null?void 0:q.name)||"Onbekend";if(P[U]||(P[U]={amount:0,daysOpen:[]}),P[U].amount+=z.total,z.issueDate){const Y=new Date(z.issueDate),ee=Math.floor((new Date().getTime()-Y.getTime())/(1e3*60*60*24));P[U].daysOpen.push(ee)}}),Object.entries(P).map(([z,U])=>({name:z,amount:Math.round(U.amount*100)/100,avgDaysOpen:U.daysOpen.length>0?Math.round(U.daysOpen.reduce((q,Y)=>q+Y,0)/U.daysOpen.length):0})).sort((z,U)=>U.amount-z.amount).slice(0,5)},[f,a]);return{stats:{transaction:l,invoice:o,quote:h,openQuotesCount:w,avgPaymentDays:N},charts:{monthlyRevenue:S,outstandingByCustomer:C,salesByCustomer:O,quotesByStatus:k,paymentBehavior:E,previousYearSales:D,openByCustomer:R},insights:{comparisonToPrevious:M},raw:{paidInvoices:d,overdueInvoices:m,outstandingInvoices:f,approvedQuotes:g,sentQuotes:p,expiredQuotes:v,openQuotes:b}}},Hl=({title:e,value:r,icon:n,borderColor:a,onClick:l,trend:o,showClickHint:d=!0,valueColor:m="text-neutral"})=>{const f=!!l,h=typeof r=="number";return t.jsxs("div",{className:`bg-white rounded-2xl shadow-sm p-4 sm:p-6 border-l-4 ${a} ${f?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:l,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("p",{className:"text-sm text-gray-600",children:e}),t.jsx("span",{className:"text-2xl",children:n})]}),t.jsx("p",{className:`text-2xl sm:text-3xl font-bold ${m}`,children:h?_t(r):r}),o&&o.value!==0&&t.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${o.value>0?"text-green-600":"text-red-600"}`,children:[t.jsx("span",{children:o.value>0?"":""}),t.jsxs("span",{children:[Math.abs(o.value*100).toFixed(1),"%"]}),t.jsx("span",{className:"text-gray-500",children:o.label||"t.o.v. vorige maand"})]}),f&&d&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Klik voor details "})]})},YH=({totalPaid:e,totalInvoiced:r,totalOutstanding:n,openQuotesCount:a,avgPaymentDays:l,totalOverdue:o,comparisonToPrevious:d,onNavigate:m})=>t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[t.jsx(Hl,{title:"Totale Omzet",value:e,icon:"",borderColor:"border-green-500",onClick:()=>m("invoices",{overviewType:"paid"}),trend:{value:d.revenueChange}}),t.jsx(Hl,{title:"Totaal Gefactureerd",value:r,icon:"",borderColor:"border-blue-500",onClick:()=>m("invoices",{overviewType:"all"}),trend:{value:d.invoicesChange}}),t.jsx(Hl,{title:"Openstaand",value:n,icon:"",borderColor:"border-orange-500",onClick:()=>m("invoices",{overviewType:"outstanding"}),trend:{value:d.openAmountChange}}),t.jsx(Hl,{title:"Openstaande Offertes",value:a,icon:"",borderColor:"border-purple-500",onClick:()=>m("quotes",{overviewType:"all"})}),l>0&&t.jsx(Hl,{title:"Gem. Betalingstermijn",value:`${l} dagen`,icon:"",borderColor:"border-gray-400",showClickHint:!1}),o>0&&t.jsx(Hl,{title:"Verlopen",value:o,icon:"",borderColor:"border-red-500",valueColor:"text-red-600",onClick:()=>m("invoices",{overviewType:"overdue"})})]}),Du=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"],QH=({monthlyRevenue:e,openByCustomer:r,salesByCustomer:n,quotesByStatusWithValue:a,paymentBehavior:l,onNavigate:o})=>t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-3 sm:p-4 lg:p-6",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-neutral mb-3 sm:mb-4",children:"Omzet per Maand"}),t.jsx(ys,{width:"100%",height:250,children:t.jsxs(MW,{data:e,margin:{top:5,right:5,left:-10,bottom:5},children:[t.jsx(gi,{strokeDasharray:"3 3"}),t.jsx(pi,{dataKey:"month",tick:{fontSize:12}}),t.jsx(xi,{tick:{fontSize:12},width:60}),t.jsx(js,{formatter:pk,contentStyle:{fontSize:"12px",padding:"8px"}}),t.jsx(Ka,{wrapperStyle:{fontSize:"12px"}}),t.jsx(cO,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:2,name:"Omzet ()",dot:{r:4},activeDot:{r:6}})]})})]}),r.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-3 sm:p-4 lg:p-6",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-neutral mb-3 sm:mb-4",children:"Openstaand per Klant"}),t.jsx(ys,{width:"100%",height:250,children:t.jsxs(Gl,{data:r,layout:"vertical",margin:{top:5,right:10,left:10,bottom:5},children:[t.jsx(gi,{strokeDasharray:"3 3"}),t.jsx(pi,{type:"number",tick:{fontSize:12},width:60}),t.jsx(xi,{dataKey:"name",type:"category",tick:{fontSize:11},width:80}),t.jsx(js,{formatter:(d,m,f)=>m==="amount"?[_t(d),"Bedrag"]:[`${f.payload.avgDaysOpen} dagen`,"Dagen openstaand"],contentStyle:{fontSize:"12px",padding:"8px"}}),t.jsx(Wa,{dataKey:"amount",fill:"#f59e0b",name:"Bedrag ()",radius:[0,4,4,0]})]})})]}),n.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-3 sm:p-4 lg:p-6",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-neutral mb-3 sm:mb-4",children:"Top 5 Klanten"}),t.jsx(ys,{width:"100%",height:250,children:t.jsxs(fk,{children:[t.jsx(Vx,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({percent:d})=>wH(d,0,!0),outerRadius:70,fill:"#8884d8",dataKey:"amount",children:n.map((d,m)=>t.jsx(ol,{fill:Du[m%Du.length]},`cell-${m}`))}),t.jsx(js,{formatter:(d,m)=>[_t(d),m],contentStyle:{fontSize:"12px",padding:"8px"}}),t.jsx(Ka,{wrapperStyle:{fontSize:"11px"}})]})})]}),a.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-3 sm:p-4 lg:p-6",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-neutral mb-3 sm:mb-4",children:"Offertes per Status"}),t.jsx(ys,{width:"100%",height:250,children:t.jsxs(fk,{children:[t.jsx(Vx,{data:a,cx:"50%",cy:"50%",labelLine:!1,label:({count:d})=>`${d}`,outerRadius:70,fill:"#8884d8",dataKey:"count",children:a.map((d,m)=>t.jsx(ol,{fill:Du[m%Du.length],onClick:()=>{d.statusKey&&o("quotes",{overviewType:d.statusKey})},style:{cursor:"pointer"}},`cell-${m}`))}),t.jsx(js,{formatter:(d,m,f)=>[`${f.payload.count} offertes - ${_t(f.payload.totalValue)}`,f.payload.status],contentStyle:{fontSize:"12px",padding:"8px"}}),t.jsx(Ka,{wrapperStyle:{fontSize:"11px"}})]})})]}),l.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-3 sm:p-4 lg:p-6 lg:col-span-2",children:[t.jsx("h3",{className:"text-base sm:text-lg font-semibold text-neutral mb-3 sm:mb-4",children:"Betaalgedrag per Maand"}),t.jsx(ys,{width:"100%",height:250,children:t.jsxs(Gl,{data:l,margin:{top:5,right:5,left:-10,bottom:5},children:[t.jsx(gi,{strokeDasharray:"3 3"}),t.jsx(pi,{dataKey:"month",tick:{fontSize:12}}),t.jsx(xi,{tick:{fontSize:12},width:60}),t.jsx(js,{formatter:pk,contentStyle:{fontSize:"12px",padding:"8px"}}),t.jsx(Ka,{wrapperStyle:{fontSize:"12px"}}),t.jsx(Wa,{dataKey:"Op tijd",stackId:"a",fill:"#10b981",radius:[4,4,0,0]}),t.jsx(Wa,{dataKey:"Te laat",stackId:"a",fill:"#ef4444",radius:[0,0,4,4]})]})})]})]}),XH=({invoices:e,quotes:r,transactions:n,customers:a,onNavigate:l})=>{const o=zO(e,r,n,a),{totalInvoiced:d,totalPaid:m,totalOverdue:f,totalOutstanding:h,paidInvoices:g,overdueInvoices:p,outstandingInvoices:v}=o.stats.invoice,{openQuotesCount:b,avgPaymentDays:w}=o.stats,{monthlyRevenue:N,salesByCustomer:S,paymentBehavior:C,openByCustomer:O}=o.charts,{comparisonToPrevious:k}=o.insights;y.useMemo(()=>{const D={};g.forEach(U=>{var Y;const q=((Y=a.find(ee=>ee.id===U.customerId))==null?void 0:Y.name)||"Onbekend";if(D[q]||(D[q]={revenue:0,invoiceCount:0}),D[q].revenue+=U.total,D[q].invoiceCount+=1,U.paidDate){const ee=new Date(U.paidDate);(!D[q].lastInvoiceDate||ee>D[q].lastInvoiceDate)&&(D[q].lastInvoiceDate=ee),(!D[q].firstInvoiceDate||ee<D[q].firstInvoiceDate)&&(D[q].firstInvoiceDate=ee)}});const R=new Date,P=R.getMonth(),z=R.getFullYear();return Object.entries(D).map(([U,q])=>{const Y=q.revenue*.3,ee=g.filter(L=>{var de;if(((de=a.find(B=>B.id===L.customerId))==null?void 0:de.name)!==U||!L.paidDate)return!1;const Z=new Date(L.paidDate),K=(z-Z.getFullYear())*12+(P-Z.getMonth());return K>=0&&K<3}).reduce((L,V)=>L+V.total,0),_=g.filter(L=>{var de;if(((de=a.find(B=>B.id===L.customerId))==null?void 0:de.name)!==U||!L.paidDate)return!1;const Z=new Date(L.paidDate),K=(z-Z.getFullYear())*12+(P-Z.getMonth());return K>=3&&K<6}).reduce((L,V)=>L+V.total,0),G=_>0?(ee-_)/_:0;return{name:U,revenue:Math.round(q.revenue*100)/100,profit:Math.round(Y*100)/100,trend:Math.round(G*100)/100}}).sort((U,q)=>q.revenue-U.revenue).slice(0,5)},[g,a]);const E=y.useMemo(()=>{const D={approved:{count:0,totalValue:0},sent:{count:0,totalValue:0},draft:{count:0,totalValue:0},rejected:{count:0,totalValue:0},expired:{count:0,totalValue:0}};return r.forEach(R=>{D[R.status]||(D[R.status]={count:0,totalValue:0}),D[R.status].count+=1,D[R.status].totalValue+=R.total}),[{status:"Goedgekeurd",count:D.approved.count,totalValue:Math.round(D.approved.totalValue*100)/100,statusKey:"approved"},{status:"Verzonden",count:D.sent.count,totalValue:Math.round(D.sent.totalValue*100)/100,statusKey:"sent"},{status:"In afwachting",count:D.draft.count,totalValue:Math.round(D.draft.totalValue*100)/100,statusKey:"draft"},{status:"Afgewezen",count:D.rejected.count,totalValue:Math.round(D.rejected.totalValue*100)/100,statusKey:"rejected"},{status:"Verlopen",count:D.expired.count,totalValue:Math.round(D.expired.totalValue*100)/100,statusKey:"expired"}].filter(R=>R.count>0)},[r]),M=y.useMemo(()=>{const D=[];if(p.length>0){const z=p.reduce((U,q)=>U+q.total,0);D.push(` Er zijn ${p.length} verlopen facturen met een totaalbedrag van ${z.toFixed(2)}.`)}const R=O.filter(z=>z.avgDaysOpen>30);if(R.length>0&&R.forEach(z=>{D.push(` Klant ${z.name} heeft openstaande facturen van ${z.amount.toFixed(2)} die gemiddeld ${z.avgDaysOpen} dagen oud zijn.`)}),k.revenueChange>.1?D.push(` Omzet steeg met ${(k.revenueChange*100).toFixed(0)}% t.o.v. vorige maand  beste maand dit kwartaal.`):k.revenueChange<-.1&&D.push(` Omzet daalde met ${Math.abs(k.revenueChange*100).toFixed(0)}% t.o.v. vorige maand.`),k.quoteConversionChange>.05){const z=E.filter(U=>U.statusKey==="approved").reduce((U,q)=>U+q.count,0)/Math.max(r.length,1);D.push(` Conversieratio offertes: ${(z*100).toFixed(0)}% (+${(k.quoteConversionChange*100).toFixed(0)}% t.o.v. vorige maand).`)}const P=C.slice(-1)[0];return P&&P["Te laat"]>P["Op tijd"]*.3&&D.push(` Hoge percentage te late betalingen deze maand: ${(P["Te laat"]/(P["Op tijd"]+P["Te laat"])*100).toFixed(0)}%.`),D.slice(0,4)},[p,O,k,E,r.length,C]);return t.jsxs("div",{className:"space-y-6",children:[t.jsx(YH,{totalPaid:m,totalInvoiced:d,totalOutstanding:h,openQuotesCount:b,avgPaymentDays:w,totalOverdue:f,comparisonToPrevious:k,onNavigate:l}),t.jsx(QH,{monthlyRevenue:N,openByCustomer:O,salesByCustomer:S,quotesByStatusWithValue:E,paymentBehavior:C,onNavigate:l}),M.length>0&&t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-4 sm:p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-neutral mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Inzichten & Aanbevelingen"})]}),t.jsx("div",{className:"space-y-3",children:M.map((D,R)=>t.jsx("div",{className:`p-3 rounded-lg border-l-4 ${D.includes("")?"bg-red-50 border-red-400":D.includes("")||D.includes("")?"bg-green-50 border-green-400":"bg-blue-50 border-blue-400"}`,children:t.jsx("p",{className:"text-sm text-gray-700",children:D})},R))})]})]})},BO=({inventory:e,categories:r,onAddInventoryItem:n,onAddCustomItem:a,inventorySearchTerm:l,setInventorySearchTerm:o,inventoryCategoryFilter:d,setInventoryCategoryFilter:m,inventoryCategorySearchTerm:f,setInventoryCategorySearchTerm:h,showInventoryCategoryDropdown:g,setShowInventoryCategoryDropdown:p,filteredInventoryCategories:v})=>{var b;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral",children:"Items"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600",children:"+ Uit Voorraad"}),t.jsx("button",{onClick:a,className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-lg hover:bg-gray-600",children:"+ Custom Item"})]})]}),t.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.jsxs("div",{className:"relative flex-shrink-0",style:{minWidth:"180px",maxWidth:"250px"},children:[t.jsx("button",{type:"button",onClick:()=>{p(!g),h("")},className:`w-full px-3 py-2 text-left border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors text-sm ${d?"bg-primary text-white border-primary":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:d?((b=r.find(w=>w.id===d))==null?void 0:b.name)||"Categorie":" Categorie..."}),t.jsx("span",{className:"text-xs",children:""})]})}),g&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),t.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsx("input",{type:"text",placeholder:"Zoek categorie...",value:f,onChange:w=>h(w.target.value),onClick:w=>w.stopPropagation(),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})}),t.jsxs("div",{className:"overflow-y-auto max-h-48",children:[t.jsx("button",{type:"button",onClick:()=>{m(""),p(!1),h("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors ${d?"":"bg-blue-50 font-semibold"}`,children:t.jsx("span",{className:"text-gray-600",children:"Alle categorien"})}),v.map(w=>t.jsxs("button",{type:"button",onClick:()=>{m(w.id),p(!1),h("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors flex items-center gap-2 ${d===w.id?"bg-blue-50 font-semibold":""}`,children:[t.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:w.color||"#3B82F6"}}),t.jsx("span",{children:w.name}),t.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:["(",e.filter(N=>N.categoryId===w.id).length,")"]})]},w.id))]})]})]})]}),d&&t.jsx("button",{type:"button",onClick:()=>{m(""),h("")},className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:" Wis"}),t.jsx("input",{type:"text",placeholder:"Zoek op naam, SKU, categorie...",value:l,onChange:w=>o(w.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})})]})},FO=({labor:e,onAddLabor:r,onRemoveLabor:n,onLaborChange:a})=>t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-neutral",children:"Werkuren (optioneel)"}),t.jsx("button",{onClick:r,className:"px-4 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600",children:"+ Werkuren Toevoegen"})]}),e.map((l,o)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-green-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Beschrijving werkzaamheden",value:l.description,onChange:d=>a(o,"description",d.target.value),className:"col-span-5 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"number",placeholder:"Uren",value:l.hours,onChange:d=>a(o,"hours",parseFloat(d.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.5",min:"0"}),t.jsx("input",{type:"number",placeholder:"Uurtarief",value:l.hourlyRate,onChange:d=>a(o,"hourlyRate",parseFloat(d.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.01"}),t.jsx("div",{className:"col-span-2 text-right font-medium text-gray-700",children:_t(l.total)}),t.jsx("button",{onClick:()=>n(o),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:""})]},o))]}),UO=({item:e,index:r,inventory:n,mode:a="display",onItemChange:l,onInventoryItemChange:o,onRemoveItem:d,inventoryCategoryFilter:m,setInventoryCategoryFilter:f,inventoryCategorySearchTerm:h,setInventoryCategorySearchTerm:g,showInventoryCategoryDropdown:p,setShowInventoryCategoryDropdown:v,filteredInventoryCategories:b=[],filteredInventoryForSelection:w=[],categories:N=[]})=>{var S;return a==="display"?t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-700",children:[e.inventoryItemId?jH(e.inventoryItemId,n):e.description,t.jsxs("span",{className:"text-gray-500",children:[" ","(",e.quantity,")"]})]}),t.jsx("span",{className:"font-medium",children:_t(e.total)})]}):t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-gray-50 rounded-lg",children:[e.inventoryItemId!==void 0?t.jsxs("div",{className:"col-span-5 space-y-2",children:[N.length>0&&v&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",style:{minWidth:"150px"},children:[t.jsx("button",{type:"button",onClick:()=>{v(!p),g&&g("")},className:`w-full px-3 py-1.5 text-left border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition-colors text-xs ${m?"bg-primary text-white border-primary":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-xs",children:m?((S=N.find(C=>C.id===m))==null?void 0:S.name)||"Categorie":" Categorie"}),t.jsx("span",{className:"text-xs",children:""})]})}),p&&v&&g&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>v(!1)}),t.jsxs("div",{className:"absolute z-20 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[t.jsx("div",{className:"p-2 border-b border-gray-200",children:t.jsx("input",{type:"text",placeholder:"Zoek categorie...",value:h||"",onChange:C=>g(C.target.value),onClick:C=>C.stopPropagation(),className:"w-full px-2 py-1.5 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary",autoFocus:!0})}),t.jsxs("div",{className:"overflow-y-auto max-h-48",children:[t.jsx("button",{type:"button",onClick:()=>{f&&f(""),v(!1),g("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors ${m?"":"bg-blue-50 font-semibold"}`,children:t.jsx("span",{className:"text-gray-600",children:"Alle categorien"})}),b.map(C=>t.jsxs("button",{type:"button",onClick:()=>{f&&f(C.id),v(!1),g("")},className:`w-full px-3 py-2 text-left text-xs hover:bg-gray-100 transition-colors flex items-center gap-2 ${m===C.id?"bg-blue-50 font-semibold":""}`,children:[t.jsx("div",{className:"w-3 h-3 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:C.color||"#3B82F6"}}),t.jsx("span",{children:C.name})]},C.id))]})]})]})]}),m&&f&&t.jsx("button",{type:"button",onClick:()=>{f(""),g&&g("")},className:"px-2 py-1.5 text-xs text-gray-600 hover:text-gray-800 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:""})]}),o&&t.jsxs("select",{value:e.inventoryItemId,onChange:C=>{o(r,C.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer voorraad item"}),w.map(C=>{const O=C.price||C.salePrice||0;return t.jsxs("option",{value:C.id,children:[C.name," (",C.autoSku||C.sku,") - ",O.toFixed(2)]},C.id)})]})]}):t.jsx("input",{type:"text",placeholder:"Beschrijving",value:e.description,onChange:C=>l==null?void 0:l(r,"description",C.target.value),className:"col-span-5 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"number",placeholder:"Aantal",value:e.quantity,onChange:C=>l==null?void 0:l(r,"quantity",parseInt(C.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"1",disabled:a==="display"}),t.jsx("input",{type:"number",placeholder:"Prijs/stuk",value:e.pricePerUnit,onChange:C=>l==null?void 0:l(r,"pricePerUnit",parseFloat(C.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.01",disabled:a==="display"||!!e.inventoryItemId}),t.jsx("div",{className:"col-span-2 text-right font-medium text-gray-700",children:_t(e.total)}),a==="edit"&&d&&t.jsx("button",{onClick:()=>d(r),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:""})]})},VO=e=>t.jsx(UO,{...e}),ZH=({quote:e,isAdmin:r,onUpdateStatus:n,onConvertToWorkOrder:a,onConvertToInvoice:l,onClone:o,onDelete:d,onAccept:m,onEdit:f})=>r?t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.status==="draft"&&t.jsx("button",{onClick:()=>n(e.id,"sent"),className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:"Verzenden"}),e.status==="sent"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>m(e.id),className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded hover:bg-green-600",children:"Accepteren"}),t.jsx("button",{onClick:()=>n(e.id,"rejected"),className:"flex-1 px-3 py-2 bg-red-500 text-white text-sm rounded hover:bg-red-600",children:"Afwijzen"})]}),e.status==="approved"&&!e.workOrderId&&t.jsx("button",{onClick:()=>a(e.id),className:"flex-1 px-3 py-2 bg-orange-500 text-white text-sm rounded hover:bg-orange-600 font-semibold",children:" Maak Werkorder"}),e.status==="approved"&&t.jsx("button",{onClick:()=>l(e.id),className:"flex-1 px-3 py-2 bg-purple-500 text-white text-sm rounded hover:bg-purple-600 font-semibold",children:" Omzetten naar Factuur"}),t.jsx("button",{onClick:()=>o(e.id),className:"px-3 py-2 bg-green-500 text-white text-sm rounded hover:bg-green-600 font-semibold",title:"Offerte clonen",children:" Clonen"}),t.jsx("button",{onClick:()=>d(e.id),className:"px-3 py-2 bg-gray-500 text-white text-sm rounded hover:bg-gray-600",children:"Verwijder"}),t.jsx("button",{onClick:()=>f(e.id),className:"px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 font-semibold",title:"Offerte bewerken",children:" Bewerken"})]}):null,JH=({quotes:e,customers:r,workOrders:n,invoices:a,inventory:l,isAdmin:o,totalQuoted:d,totalApproved:m,totalSent:f,totalExpired:h,approvedQuotes:g,sentQuotes:p,expiredQuotes:v,batchMode:b,setBatchMode:w,selectedQuotes:N,setSelectedQuotes:S,setShowQuoteForm:C,onOpenOverviewModal:O,onConvertToWorkOrder:k,onConvertToInvoice:E,onUpdateStatus:M,onClone:D,onDelete:R,onAccept:P,onEdit:z})=>{const U=()=>{const Y=e.filter(ee=>N.includes(ee.id)&&ee.status==="approved"&&!ee.workOrderId);if(Y.length===0){alert("Geen geaccepteerde offertes zonder werkorder geselecteerd!");return}confirm(`Wil je ${Y.length} offerte(s) omzetten naar werkorders?`)&&(Y.forEach(ee=>k(ee.id)),S([]),w(!1))},q=()=>{const Y=e.filter(ee=>N.includes(ee.id)&&ee.status==="draft");Y.length>0&&confirm(`Wil je ${Y.length} concept offerte(s) verzenden?`)&&(Y.forEach(ee=>M(ee.id,"sent")),S([]),w(!1))};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("button",{onClick:()=>O("all"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Totaal Geoffreerd"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:_t(d)}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e.length," offertes"]})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})}),t.jsx("button",{onClick:()=>O("approved"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Geaccepteerd"}),t.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:_t(m)}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.length," offertes"]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})}),t.jsx("button",{onClick:()=>O("sent"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Verzonden"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:_t(f)}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.length," offertes"]})]}),t.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})}),t.jsx("button",{onClick:()=>O("expired"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Verlopen"}),t.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:_t(h)}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[v.length," offertes"]})]}),t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-3",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["Totaal: ",e.length," offertes",b&&N.length>0&&t.jsxs("span",{className:"ml-3 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold",children:[N.length," geselecteerd"]})]}),t.jsx("div",{className:"flex gap-2",children:o&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{w(!b),b&&S([])},className:`px-4 py-2 rounded-lg transition-colors ${b?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:b?" Selectie Modus":" Batch Selectie"}),b&&N.length>0&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:U,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[" Maak Werkorders (",N.filter(Y=>{const ee=e.find(_=>_.id===Y);return(ee==null?void 0:ee.status)==="approved"&&!ee.workOrderId}).length,")"]}),t.jsxs("button",{onClick:q,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[" Verzend (",N.filter(Y=>{const ee=e.find(_=>_.id===Y);return(ee==null?void 0:ee.status)==="draft"}).length,")"]}),t.jsx("button",{onClick:()=>{S([]),w(!1)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]}),t.jsx("button",{onClick:()=>C(!0),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Offerte"})]})})]})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.map(Y=>{var V,Z;const ee=lf(Y.workOrderId,n),_=of(ee),G=(ee==null?void 0:ee.status)==="Completed",L=N.includes(Y.id);return t.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 transition-all ${G?"border-l-4 border-green-500":""} ${b&&L?"ring-4 ring-blue-500 border-blue-500":b?"hover:ring-2 hover:ring-gray-300":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[b&&t.jsx("div",{className:"mr-3 mt-1",children:t.jsx("input",{type:"checkbox",checked:L,onChange:K=>{K.target.checked?S([...N,Y.id]):S(N.filter(de=>de!==Y.id))},className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg text-neutral",children:Y.id}),t.jsx("p",{className:"text-sm text-gray-600",children:Ra(Y.customerId,r)}),_&&t.jsxs("button",{onClick:()=>{alert(`Werkorder ID: ${Y.workOrderId}`)},className:`mt-2 px-3 py-1 rounded-full text-xs font-semibold border-2 ${_.color} hover:opacity-80 transition-opacity cursor-pointer`,title:"Klik om naar werkorder te gaan",children:[_.icon," ",_.text]})]}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${EO(Y.status)}`,children:[Y.status==="draft"&&"Concept",Y.status==="sent"&&"Verzonden",Y.status==="approved"&&"Geaccepteerd",Y.status==="rejected"&&"Afgewezen",Y.status==="expired"&&"Verlopen"]})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items:"}),Y.items.map((K,de)=>t.jsx(VO,{item:K,index:de,inventory:l,mode:"display"},de))]}),Y.labor&&Y.labor.length>0&&t.jsxs("div",{className:"space-y-2 mb-3 border-t pt-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Werkuren:"}),Y.labor.map((K,de)=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-700",children:[K.description,t.jsxs("span",{className:"text-gray-500",children:[" ","(",K.hours,"u @ ",_t(K.hourlyRate),"/u)"]})]}),t.jsx("span",{className:"font-medium",children:_t(K.total)})]},de))]}),t.jsxs("div",{className:"border-t pt-3 mb-4 space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[t.jsx("span",{children:"Subtotaal (excl. BTW):"}),t.jsx("span",{children:_t(Y.subtotal)})]}),t.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[t.jsxs("span",{children:["BTW (",Y.vatRate,"%):"]}),t.jsx("span",{children:_t(Y.vatAmount)})]}),t.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[t.jsx("span",{className:"font-semibold text-neutral",children:"Totaal (incl. BTW):"}),t.jsx("span",{className:"text-xl font-bold text-primary",children:_t(Y.total)})]})]}),t.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[t.jsxs("span",{children:["Aangemaakt: ",Y.createdDate]}),t.jsxs("span",{children:["Geldig tot: ",Y.validUntil]})]}),Y.notes&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:t.jsx("p",{className:"text-sm text-gray-700",children:Y.notes})}),t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"flex items-center justify-between relative mb-2",children:[t.jsx("div",{className:"absolute top-1/2 left-0 w-full h-1.5 bg-gray-200 rounded-full -translate-y-1/2 z-0"}),t.jsx("div",{className:"absolute top-1/2 left-0 h-1.5 bg-gradient-to-r from-blue-500 via-green-500 to-purple-500 rounded-full -translate-y-1/2 z-0 transition-all duration-500",style:{width:`${(()=>{let K=0;(Y.status==="approved"||Y.status==="sent")&&(K=25),Y.workOrderId&&(K=50);const de=a.find(B=>B.quoteId===Y.id||B.workOrderId===Y.workOrderId);return de&&(K=75),(de==null?void 0:de.status)==="paid"&&(K=100),K})()}%`}}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between w-full",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white text-xs ${Y.status==="approved"||Y.status==="sent"?"bg-blue-500":"bg-gray-300"}`,children:Y.status==="approved"||Y.status==="sent"?"":"1"}),t.jsx("span",{className:"text-xs text-gray-600 mt-1 text-center",children:"Offerte"})]}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white text-xs ${Y.workOrderId?"bg-green-500":"bg-gray-300"}`,children:Y.workOrderId?"":"2"}),t.jsx("span",{className:"text-xs text-gray-600 mt-1 text-center",children:"Werkorder"})]}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white text-xs ${a.find(K=>K.quoteId===Y.id||K.workOrderId===Y.workOrderId)?"bg-purple-500":"bg-gray-300"}`,children:a.find(K=>K.quoteId===Y.id||K.workOrderId===Y.workOrderId)?"":"3"}),t.jsx("span",{className:"text-xs text-gray-600 mt-1 text-center",children:"Factuur"})]}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white text-xs ${((V=a.find(K=>K.quoteId===Y.id||K.workOrderId===Y.workOrderId))==null?void 0:V.status)==="paid"?"bg-green-600":"bg-gray-300"}`,children:((Z=a.find(K=>K.quoteId===Y.id||K.workOrderId===Y.workOrderId))==null?void 0:Z.status)==="paid"?"":"4"}),t.jsx("span",{className:"text-xs text-gray-600 mt-1 text-center",children:"Betaald"})]})]})]})}),G&&ee&&t.jsxs("div",{className:"p-3 bg-green-50 rounded-lg mb-4 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-sm font-semibold text-green-700",children:"Werkorder Voltooid"})]}),ee.hoursSpent!==void 0&&ee.estimatedHours&&t.jsxs("p",{className:"text-xs text-gray-700",children:[" Gewerkt: ",ee.hoursSpent,"u (Geschat:"," ",ee.estimatedHours,"u)",ee.hoursSpent!==ee.estimatedHours&&t.jsxs("span",{className:`ml-2 font-semibold ${ee.hoursSpent<=ee.estimatedHours*1.1?"text-green-600":ee.hoursSpent<=ee.estimatedHours*1.25?"text-orange-600":"text-red-600"}`,children:["(",Math.round(ee.hoursSpent/ee.estimatedHours*100),"%)"]})]})]}),Y.workOrderId&&ee&&ee.status!=="Completed"&&o&&t.jsx("div",{className:"p-3 bg-blue-50 rounded-lg mb-4 border border-blue-200",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-xs font-medium text-blue-800",children:" Deze offerte is gekoppeld aan een actieve werkorder. Wijzigingen worden automatisch gesynchroniseerd."})]})})}),t.jsx(ZH,{quote:Y,isAdmin:o,onUpdateStatus:M,onConvertToWorkOrder:k,onConvertToInvoice:E,onClone:D,onDelete:R,onAccept:P,onEdit:z})]},Y.id)})}),e.length===0&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"Geen offertes gevonden"})})]})},eK=({quoteForm:e,customers:r,inventory:n,categories:a,onSave:l,onCancel:o})=>{const{inventorySearchTerm:d,setInventorySearchTerm:m,inventoryCategoryFilter:f,setInventoryCategoryFilter:h,inventoryCategorySearchTerm:g,setInventoryCategorySearchTerm:p,showInventoryCategoryDropdown:v,setShowInventoryCategoryDropdown:b,filteredInventoryCategories:w,filteredInventoryForSelection:N}=py(n,a),{handleAddInventoryItem:S,handleAddCustomItem:C,handleAddLabor:O,handleRemoveItem:k,handleRemoveLabor:E,handleInventoryItemChange:M,handleItemChange:D,handleLaborChange:R}=e,P=()=>e.totals();return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:e.editingQuoteId?"Offerte Bewerken":"Nieuwe Offerte"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[t.jsxs("select",{value:e.formData.customerId,onChange:z=>e.handleChange("customerId",z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant *"}),r.map(z=>t.jsx("option",{value:z.id,children:z.name},z.id))]}),t.jsx("input",{type:"date",value:e.formData.validUntil,onChange:z=>e.handleChange("validUntil",z.target.value),placeholder:"Geldig tot *",className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"BTW:"}),t.jsx("input",{type:"number",value:e.formData.vatRate,onChange:z=>e.handleChange("vatRate",parseFloat(z.target.value)||0),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.1"}),t.jsx("span",{className:"text-gray-600",children:"%"})]})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsx(BO,{inventory:n,categories:a,onAddInventoryItem:S,onAddCustomItem:C,inventorySearchTerm:d,setInventorySearchTerm:m,inventoryCategoryFilter:f,setInventoryCategoryFilter:h,inventoryCategorySearchTerm:g,setInventoryCategorySearchTerm:p,showInventoryCategoryDropdown:v,setShowInventoryCategoryDropdown:b,filteredInventoryCategories:w}),e.formData.items.map((z,U)=>t.jsx(VO,{item:z,index:U,inventory:n,mode:"edit",onItemChange:D,onInventoryItemChange:M,onRemoveItem:k,inventoryCategoryFilter:f,setInventoryCategoryFilter:h,inventoryCategorySearchTerm:g,setInventoryCategorySearchTerm:p,showInventoryCategoryDropdown:v,setShowInventoryCategoryDropdown:b,filteredInventoryCategories:w,filteredInventoryForSelection:N,categories:a},U))]}),t.jsx(FO,{labor:e.formData.labor,onAddLabor:O,onRemoveLabor:E,onLaborChange:R}),t.jsx("textarea",{placeholder:"Notities (optioneel)",value:e.formData.notes,onChange:z=>e.handleChange("notes",z.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary mb-4"}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-gray-700",children:[t.jsx("span",{children:"Subtotaal (excl. BTW):"}),t.jsx("span",{className:"font-semibold",children:_t(P().subtotal)})]}),t.jsxs("div",{className:"flex justify-between text-gray-700",children:[t.jsxs("span",{children:["BTW (",e.formData.vatRate,"%):"]}),t.jsx("span",{className:"font-semibold",children:_t(P().vatAmount)})]}),t.jsxs("div",{className:"flex justify-between text-xl font-bold text-primary border-t pt-2",children:[t.jsx("span",{children:"Totaal (incl. BTW):"}),t.jsx("span",{children:_t(P().total)})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:l,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:e.editingQuoteId?"Offerte Bijwerken":"Offerte Aanmaken"}),t.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]})},tK=({show:e,onClose:r,type:n,filter:a,setFilter:l,resetFilters:o,quotes:d,customers:m,workOrders:f,onEdit:h,onClone:g,onConvertToWorkOrder:p})=>{if(!e)return null;const v=()=>{const w={type:n,customerName:a.customerName,dateFrom:a.dateFrom,dateTo:a.dateTo,minAmount:a.minAmount?parseFloat(a.minAmount):void 0,maxAmount:a.maxAmount?parseFloat(a.maxAmount):void 0};return kH(d,w)},b=()=>OH(v());return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-6xl w-full my-8",children:[t.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-neutral flex items-center gap-3",children:[n==="all"&&" Totaal Geoffreerd",n==="approved"&&" Geaccepteerde Offertes",n==="sent"&&" Verzonden Offertes",n==="expired"&&" Verlopen Offertes"]}),t.jsx("button",{onClick:()=>{r(),o()},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold",children:""})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[t.jsx("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:" Filters"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klantnaam"}),t.jsx("input",{type:"text",value:a.customerName,onChange:w=>l({...a,customerName:w.target.value}),placeholder:"Zoek op klantnaam...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datum vanaf"}),t.jsx("input",{type:"date",value:a.dateFrom,onChange:w=>l({...a,dateFrom:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datum tot"}),t.jsx("input",{type:"date",value:a.dateTo,onChange:w=>l({...a,dateTo:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min. Bedrag ()"}),t.jsx("input",{type:"number",value:a.minAmount,onChange:w=>l({...a,minAmount:w.target.value}),placeholder:"0.00",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max. Bedrag ()"}),t.jsx("input",{type:"number",value:a.maxAmount,onChange:w=>l({...a,maxAmount:w.target.value}),placeholder:"0.00",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:o,className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:" Reset Filters"})})]})]}),t.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 p-4 rounded-lg mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Totaal Gefilterd:"}),t.jsxs("span",{className:"text-3xl font-bold text-blue-600",children:["",b().toFixed(2)]})]}),t.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[v().length," offertes gevonden"]})]})]}),t.jsx("div",{className:"p-4 sm:p-6 max-h-96 overflow-y-auto",children:v().length===0?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500 text-lg",children:" Geen offertes gevonden met deze filters"})}):t.jsx("div",{className:"space-y-3",children:v().map(w=>{const N=lf(w.workOrderId,f),S=of(N);return t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-lg text-gray-800",children:w.id}),t.jsx("p",{className:"text-sm text-gray-600",children:Ra(w.customerId,m)})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-primary",children:_t(w.total)}),t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${EO(w.status)}`,children:w.status})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm text-gray-600 mt-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Aangemaakt:"}),t.jsx("p",{children:w.createdDate})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Geldig tot:"}),t.jsx("p",{children:w.validUntil})]}),S&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Werkorder:"}),t.jsx("p",{children:S.text})]})]}),S&&t.jsx("div",{className:"mt-3",children:t.jsxs("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold border-2 ${S.color}`,children:[S.icon," ",S.text]})}),w.notes&&t.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded text-sm text-gray-700",children:[t.jsx("strong",{children:"Notities:"})," ",w.notes]}),t.jsxs("div",{className:"mt-4 flex gap-2 flex-wrap",children:[t.jsx("button",{onClick:()=>{r(),h(w.id)},className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors font-semibold",title:"Offerte bewerken",children:" Bewerken"}),t.jsx("button",{onClick:()=>{r(),g(w.id)},className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors font-semibold",title:"Offerte clonen",children:" Clonen"}),(w.status==="approved"||w.status==="sent")&&!w.workOrderId&&t.jsx("button",{onClick:()=>{r(),p(w.id)},className:"flex-1 px-3 py-2 bg-orange-500 text-white text-sm rounded-lg hover:bg-orange-600 transition-colors font-semibold",title:"Verzend naar werkorder",children:" Naar Werkorder"})]})]},w.id)})})}),t.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:t.jsx("button",{onClick:()=>{r(),o()},className:"w-full px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Sluiten"})})]})})},rK=({show:e,quoteToAccept:r,quotes:n,cloneOnAccept:a,setCloneOnAccept:l,onClose:o,onAccept:d})=>{if(!e||!r)return null;const m=n.find(f=>f.id===r);return m?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Offerte Accepteren"}),t.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Deze offerte wordt geaccepteerd en gemarkeerd als goedgekeurd."}),m.validUntil&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Geldig tot:"," ",new Date(m.validUntil).toLocaleDateString("nl-NL")]})]}),t.jsx("div",{className:"mb-6",children:t.jsxs("label",{className:"flex items-start cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:f=>l(f.target.checked),className:"mt-1 mr-3 h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 block",children:" Kloon voor volgende periode"}),t.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:m.validUntil?`Nieuwe offerte wordt aangemaakt met geldigheidsdatum ${new Date(new Date(m.validUntil).getTime()+720*60*60*1e3).toLocaleDateString("nl-NL")} (+30 dagen vanaf huidige geldigheidsdatum)`:"Nieuwe offerte wordt aangemaakt voor volgende maand (status: Concept)"})]})]})}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:" Accepteren"}),t.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]})}):null},nK=({show:e,quoteForm:r,customers:n,calculateQuoteTotals:a,onClose:l,onSave:o})=>e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-4xl sm:w-full h-full sm:h-auto p-4 sm:p-6 sm:my-8 overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral",children:" Offerte Clonen"}),t.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[" ",t.jsx("strong",{children:"Tip:"})," Alle velden zijn aanpasbaar. Het nieuwe offerte krijgt automatisch een uniek Q-nummer en de datum wordt op vandaag gezet."]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klant *"}),t.jsxs("select",{value:r.formData.customerId,onChange:d=>r.handleChange("customerId",d.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant"}),n.map(d=>t.jsx("option",{value:d.id,children:d.name},d.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BTW Tarief (%)"}),t.jsx("input",{type:"number",value:r.formData.vatRate,onChange:d=>r.handleChange("vatRate",Number(d.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Geldig Tot *"}),t.jsx("input",{type:"date",value:r.formData.validUntil,onChange:d=>r.handleChange("validUntil",d.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:r.formData.notes,onChange:d=>r.handleChange("notes",d.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Extra opmerkingen..."})]}),r.formData.items.length>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotaal:"}),t.jsx("span",{className:"font-semibold",children:_t(a().subtotal)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-600",children:["BTW (",r.formData.vatRate,"%):"]}),t.jsx("span",{className:"font-semibold",children:_t(a().vatAmount)})]}),t.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsx("span",{className:"text-primary",children:_t(a().total)})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:o,className:"flex-1 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:" Gecloneerde Offerte Opslaan"}),t.jsx("button",{onClick:l,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})}):null,aK=e=>t.jsxs(t.Fragment,{children:[t.jsx(tK,{show:e.showQuotesOverviewModal,onClose:()=>e.setShowQuotesOverviewModal(!1),type:e.quotesOverviewType,filter:e.overviewFilter,setFilter:e.setOverviewFilter,resetFilters:e.resetFilters,quotes:e.quotes,customers:e.customers,workOrders:e.workOrders,onEdit:e.onEdit,onClone:e.onClone,onConvertToWorkOrder:e.onConvertToWorkOrder}),t.jsx(rK,{show:e.showAcceptQuoteModal,quoteToAccept:e.quoteToAccept,quotes:e.quotes,cloneOnAccept:e.cloneOnAccept,setCloneOnAccept:e.setCloneOnAccept,onClose:()=>{e.setShowAcceptQuoteModal(!1),e.setQuoteToAccept(null),e.setCloneOnAccept(!1)},onAccept:e.onAccept}),t.jsx(nK,{show:e.showCloneQuoteModal,quoteForm:e.quoteForm,customers:e.customers,calculateQuoteTotals:e.calculateQuoteTotals,onClose:()=>e.setShowCloneQuoteModal(!1),onSave:e.onSaveClonedQuote})]}),qO=e=>t.jsx(UO,{...e}),sK=({invoice:e,isAdmin:r,onUpdateStatus:n,onConvertToWorkOrder:a,onClone:l,onDelete:o,onEdit:d})=>r?t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.status==="draft"&&t.jsx("button",{onClick:()=>n(e.id,"sent"),className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:"Verzenden"}),(e.status==="sent"||e.status==="draft")&&!e.workOrderId&&t.jsx("button",{onClick:()=>a(e.id),className:"flex-1 px-3 py-2 bg-orange-500 text-white text-sm rounded hover:bg-orange-600 font-semibold",children:" Maak Werkorder"}),(e.status==="sent"||e.status==="overdue")&&t.jsx("button",{onClick:()=>n(e.id,"paid"),className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded hover:bg-green-600",children:" Markeer als Betaald"}),e.status!=="paid"&&e.status!=="cancelled"&&t.jsx("button",{onClick:()=>n(e.id,"cancelled"),className:"flex-1 px-3 py-2 bg-gray-500 text-white text-sm rounded hover:bg-gray-600",children:"Annuleren"}),t.jsx("button",{onClick:()=>l(e.id),className:"px-3 py-2 bg-green-500 text-white text-sm rounded hover:bg-green-600 font-semibold",title:"Factuur clonen",children:" Clonen"}),t.jsx("button",{onClick:()=>o(e.id),className:"px-3 py-2 bg-red-500 text-white text-sm rounded hover:bg-red-600",children:"Verwijder"}),d&&t.jsx("button",{onClick:()=>d(e.id),className:"px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 font-semibold",title:"Factuur bewerken",children:" Bewerken"})]}):null,iK=({invoices:e,customers:r,workOrders:n,inventory:a,isAdmin:l,totalInvoiced:o,totalPaid:d,totalOutstanding:m,totalOverdue:f,paidInvoices:h,outstandingInvoices:g,overdueInvoices:p,batchMode:v,setBatchMode:b,selectedInvoices:w,setSelectedInvoices:N,showInvoiceForm:S,setShowInvoiceForm:C,onOpenOverviewModal:O,onUpdateStatus:k,onConvertToWorkOrder:E,onClone:M,onDelete:D,onSendReminder:R,onEdit:P,currentUser:z,setInvoices:U,trackAction:q})=>{const Y=()=>{const _=e.filter(G=>w.includes(G.id)&&G.status!=="paid");if(_.length===0){alert("Geen onbetaalde facturen geselecteerd!");return}confirm(`Wil je ${_.length} factuur(en) als betaald markeren?`)&&(_.forEach(G=>{const L={...G,status:"paid",paidDate:new Date().toISOString().split("T")[0],history:[...G.history||[],{timestamp:new Date().toISOString(),action:"paid",performedBy:z.id||z.name,details:`Status gewijzigd van ${G.status} naar betaald`,fromStatus:G.status,toStatus:"paid"}]};U(e.map(V=>V.id===G.id?L:V))}),N([]),b(!1))},ee=()=>{const _=e.filter(G=>w.includes(G.id)&&G.status==="draft");_.length>0&&confirm(`Wil je ${_.length} concept factuur(en) verzenden?`)&&(_.forEach(G=>{const L={...G,status:"sent",history:[...G.history||[],{timestamp:new Date().toISOString(),action:"sent",performedBy:z.id||z.name,details:"Status gewijzigd van concept naar verzonden",fromStatus:"draft",toStatus:"sent"}]};U(e.map(V=>V.id===G.id?L:V)),q&&q(z.id||z.name,z.role||"user",dt.ACCOUNTING,"invoice_status_updated","update",{invoiceId:G.id,fromStatus:"draft",toStatus:"sent"})}),N([]),b(!1))};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[t.jsx("button",{onClick:()=>O("all"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Totaal Gefactureerd"}),t.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:["",o.toFixed(2)]})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})}),t.jsx("button",{onClick:()=>O("paid"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Betaald"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["",d.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[h.length," facturen"]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})}),t.jsx("button",{onClick:()=>O("outstanding"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Uitstaand"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:["",m.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.length," facturen"]})]}),t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})}),t.jsx("button",{onClick:()=>O("overdue"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-xl transition-all transform hover:scale-105 cursor-pointer text-left",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Verlopen"}),t.jsxs("p",{className:"text-2xl font-bold text-red-600 mt-1",children:["",f.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.length," facturen"]})]}),t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:""})})]})})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-3",children:[t.jsxs("div",{className:"text-sm text-gray-600",children:["Totaal: ",e.length," facturen",v&&w.length>0&&t.jsxs("span",{className:"ml-3 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold",children:[w.length," geselecteerd"]})]}),t.jsx("div",{className:"flex gap-2",children:l&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>{b(!v),v&&N([])},className:`px-4 py-2 rounded-lg transition-colors ${v?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:v?" Selectie Modus":" Batch Selectie"}),v&&w.length>0&&t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:Y,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[" Markeer Betaald (",w.filter(_=>{const G=e.find(L=>L.id===_);return(G==null?void 0:G.status)!=="paid"}).length,")"]}),t.jsxs("button",{onClick:ee,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[" Verzend (",w.filter(_=>{const G=e.find(L=>L.id===_);return(G==null?void 0:G.status)==="draft"}).length,")"]}),t.jsx("button",{onClick:()=>{N([]),b(!1)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]}),t.jsx("button",{onClick:()=>C(!S),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Factuur"})]})})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.filter(_=>_.status!=="paid").map(_=>{const G=lf(_.workOrderId,n),L=of(G),V=(G==null?void 0:G.status)==="Completed",Z=_.status==="overdue",K=w.includes(_.id);return t.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 transition-all ${Z?"border-l-4 border-red-500":V?"border-l-4 border-green-500":""} ${v&&K?"ring-4 ring-blue-500 border-blue-500":v?"hover:ring-2 hover:ring-gray-300":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v&&t.jsx("div",{className:"mr-3 mt-1",children:t.jsx("input",{type:"checkbox",checked:K,onChange:de=>{de.target.checked?N([...w,_.id]):N(w.filter(B=>B!==_.id))},className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-lg text-neutral",children:_.invoiceNumber}),t.jsx("p",{className:"text-sm text-gray-600",children:Ra(_.customerId,r)}),_.quoteId&&t.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Van offerte: ",_.quoteId]}),L&&t.jsxs("button",{onClick:()=>{alert(`Werkorder ID: ${_.workOrderId}`)},className:`mt-2 px-3 py-1 rounded-full text-xs font-semibold border-2 ${L.color} hover:opacity-80 transition-opacity cursor-pointer`,title:"Klik om naar werkorder te gaan",children:[L.icon," ",L.text]})]}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${MO(_.status)}`,children:[_.status==="draft"&&"Concept",_.status==="sent"&&"Verzonden",_.status==="paid"&&"Betaald",_.status==="overdue"&&"Verlopen",_.status==="cancelled"&&"Geannuleerd"]})]}),t.jsxs("div",{className:"space-y-2 mb-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Items:"}),_.items.map((de,B)=>t.jsx(qO,{item:de,index:B,inventory:a,mode:"display"},B))]}),_.labor&&_.labor.length>0&&t.jsxs("div",{className:"space-y-2 mb-3 border-t pt-3",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Werkuren:"}),_.labor.map((de,B)=>t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsxs("span",{className:"text-gray-700",children:[de.description,t.jsxs("span",{className:"text-gray-500",children:[" ","(",de.hours,"u @ ",de.hourlyRate,"/u)"]})]}),t.jsxs("span",{className:"font-medium",children:["",de.total.toFixed(2)]})]},B))]}),t.jsxs("div",{className:"border-t pt-3 mb-4 space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[t.jsx("span",{children:"Subtotaal (excl. BTW):"}),t.jsxs("span",{children:["",_.subtotal.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[t.jsxs("span",{children:["BTW (",_.vatRate,"%):"]}),t.jsxs("span",{children:["",_.vatAmount.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[t.jsx("span",{className:"font-semibold text-neutral",children:"Totaal (incl. BTW):"}),t.jsxs("span",{className:"text-xl font-bold text-primary",children:["",_.total.toFixed(2)]})]})]}),t.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-4",children:[t.jsxs("span",{children:["Factuurdatum: ",_.issueDate]}),t.jsxs("span",{children:["Vervaldatum: ",_.dueDate]})]}),_.reminders&&_.status==="sent"&&t.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg mb-4 border-l-4 border-blue-400",children:[t.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:" Herinneringsplanning"}),t.jsxs("div",{className:"space-y-2",children:[_.reminders.reminder1Date&&t.jsxs("div",{className:"flex items-center justify-between text-xs",children:[t.jsxs("span",{className:"text-blue-700",children:["Herinnering 1:"," ",new Date(_.reminders.reminder1Date).toLocaleDateString("nl-NL")]}),_.reminders.reminder1Sent?t.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:[" Verzonden"," ",_.reminders.reminder1SentDate?new Date(_.reminders.reminder1SentDate).toLocaleDateString("nl-NL"):""]}):t.jsx("button",{onClick:()=>R(_.id,1),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs font-semibold transition-colors",children:" Herinnering nu sturen"})]}),_.reminders.reminder2Date&&t.jsxs("div",{className:"flex items-center justify-between text-xs",children:[t.jsxs("span",{className:"text-blue-700",children:["Herinnering 2:"," ",new Date(_.reminders.reminder2Date).toLocaleDateString("nl-NL")]}),_.reminders.reminder2Sent?t.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold",children:[" Verzonden"," ",_.reminders.reminder2SentDate?new Date(_.reminders.reminder2SentDate).toLocaleDateString("nl-NL"):""]}):t.jsx("button",{onClick:()=>R(_.id,2),className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs font-semibold transition-colors",children:" Herinnering nu sturen"})]})]}),t.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[' Template: "Betreft factuur ',_.invoiceNumber," ",' vriendelijke herinnering"']})]}),_.paidDate&&t.jsx("div",{className:"p-3 bg-green-50 rounded-lg mb-4",children:t.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[" Betaald op: ",_.paidDate]})}),_.paymentTerms&&t.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Betalingstermijn: ",_.paymentTerms]}),_.notes&&t.jsx("div",{className:"p-3 bg-gray-50 rounded-lg mb-4",children:t.jsx("p",{className:"text-sm text-gray-700",children:_.notes})}),_.status==="draft"&&Mc(_)&&t.jsx("div",{className:"p-4 bg-yellow-50 rounded-lg mb-4 border-l-4 border-yellow-400",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("svg",{className:"w-6 h-6 text-yellow-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-1",children:" Automatisch aangemaakte factuur"}),t.jsxs("p",{className:"text-xs text-yellow-700 mb-2",children:["Deze factuur is automatisch aangemaakt na voltooiing van een werkorder. Controleer"," ",t.jsx("strong",{children:"gewerkte uren"}),","," ",t.jsx("strong",{children:"materialen"})," en voeg eventueel"," ",t.jsx("strong",{children:"meerwerk"})," toe voordat u verzendt."]}),G&&t.jsx("div",{className:"mt-2 text-xs",children:t.jsx("button",{onClick:()=>P&&P(_.id),className:"text-yellow-800 underline hover:text-yellow-900 font-medium",children:" Bewerk factuur om te controleren"})})]})]})}),V&&G&&t.jsxs("div",{className:"p-3 bg-green-50 rounded-lg mb-4 border border-green-200",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-sm font-semibold text-green-700",children:"Werkorder Voltooid"})]}),G.hoursSpent!==void 0&&G.estimatedHours&&t.jsxs("p",{className:"text-xs text-gray-700",children:[" Gewerkt: ",G.hoursSpent,"u (Geschat:"," ",G.estimatedHours,"u)",G.hoursSpent!==G.estimatedHours&&t.jsxs("span",{className:`ml-2 font-semibold ${G.hoursSpent<=G.estimatedHours*1.1?"text-green-600":G.hoursSpent<=G.estimatedHours*1.25?"text-orange-600":"text-red-600"}`,children:["(",Math.round(G.hoursSpent/G.estimatedHours*100),"%)"]})]})]}),_.workOrderId&&G&&G.status!=="Completed"&&l&&t.jsx("div",{className:"p-3 bg-blue-50 rounded-lg mb-4 border border-blue-200",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-xs font-medium text-blue-800",children:" Deze factuur is gekoppeld aan een actieve werkorder. Wijzigingen worden automatisch gesynchroniseerd."})]})})}),t.jsx(sK,{invoice:_,isAdmin:l,onUpdateStatus:k,onConvertToWorkOrder:E,onClone:M,onDelete:D,onEdit:P})]},_.id)})}),e.filter(_=>_.status!=="paid").length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Geen openstaande facturen"}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Betaalde facturen zijn verplaatst naar"," ",t.jsx("span",{className:"font-semibold text-primary",children:"Boekhouding & Dossier"})]})]})]})},lK=({invoiceForm:e,customers:r,inventory:n,categories:a,onSave:l,onCancel:o})=>{const{inventorySearchTerm:d,setInventorySearchTerm:m,inventoryCategoryFilter:f,setInventoryCategoryFilter:h,inventoryCategorySearchTerm:g,setInventoryCategorySearchTerm:p,showInventoryCategoryDropdown:v,setShowInventoryCategoryDropdown:b,filteredInventoryCategories:w,filteredInventoryForSelection:N}=py(n,a),{handleAddInventoryItem:S,handleAddCustomItem:C,handleAddLabor:O,handleRemoveItem:k,handleRemoveLabor:E,handleInventoryItemChange:M,handleItemChange:D,handleLaborChange:R}=e,P=()=>e.totals();return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:e.editingInvoiceId?"Factuur Bewerken":"Nieuwe Factuur"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs("select",{value:e.formData.customerId,onChange:z=>e.handleChange("customerId",z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant *"}),r.map(z=>t.jsx("option",{value:z.id,children:z.name},z.id))]}),t.jsx("input",{type:"date",value:e.formData.issueDate,onChange:z=>e.handleChange("issueDate",z.target.value),placeholder:"Factuurdatum *",className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"date",value:e.formData.dueDate,onChange:z=>e.handleChange("dueDate",z.target.value),placeholder:"Vervaldatum *",className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"text",placeholder:"Betalingstermijn",value:e.formData.paymentTerms,onChange:z=>e.handleChange("paymentTerms",z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"space-y-3 mb-6",children:[t.jsx(BO,{inventory:n,categories:a,onAddInventoryItem:S,onAddCustomItem:C,inventorySearchTerm:d,setInventorySearchTerm:m,inventoryCategoryFilter:f,setInventoryCategoryFilter:h,inventoryCategorySearchTerm:g,setInventoryCategorySearchTerm:p,showInventoryCategoryDropdown:v,setShowInventoryCategoryDropdown:b,filteredInventoryCategories:w}),e.formData.items.map((z,U)=>t.jsx(qO,{item:z,index:U,inventory:n,mode:"edit",onItemChange:D,onInventoryItemChange:M,onRemoveItem:k,inventoryCategoryFilter:f,setInventoryCategoryFilter:h,inventoryCategorySearchTerm:g,setInventoryCategorySearchTerm:p,showInventoryCategoryDropdown:v,setShowInventoryCategoryDropdown:b,filteredInventoryCategories:w,filteredInventoryForSelection:N,categories:a},U))]}),t.jsx(FO,{labor:e.formData.labor,onAddLabor:O,onRemoveLabor:E,onLaborChange:R}),t.jsx("textarea",{placeholder:"Notities (optioneel)",value:e.formData.notes,onChange:z=>e.handleChange("notes",z.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary mb-4"}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-gray-700",children:[t.jsx("span",{children:"Subtotaal (excl. BTW):"}),t.jsx("span",{className:"font-semibold",children:_t(P().subtotal)})]}),t.jsxs("div",{className:"flex justify-between text-gray-700",children:[t.jsxs("span",{children:["BTW (",e.formData.vatRate,"%):"]}),t.jsx("span",{className:"font-semibold",children:_t(P().vatAmount)})]}),t.jsxs("div",{className:"flex justify-between text-xl font-bold text-primary border-t pt-2",children:[t.jsx("span",{children:"Totaal (incl. BTW):"}),t.jsx("span",{children:_t(P().total)})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:l,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:e.editingInvoiceId?"Factuur Bijwerken":"Factuur Aanmaken"}),t.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]})},oK=({show:e,onClose:r,type:n,filter:a,setFilter:l,resetFilters:o,invoices:d,customers:m,workOrders:f,onEdit:h,onClone:g,onConvertToWorkOrder:p})=>{if(!e)return null;const v=()=>{const w={type:n,customerName:a.customerName,dateFrom:a.dateFrom,dateTo:a.dateTo,minAmount:a.minAmount?parseFloat(a.minAmount):void 0,maxAmount:a.maxAmount?parseFloat(a.maxAmount):void 0};return SH(d,m,w)},b=()=>DH(v());return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-0 sm:p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-2xl w-full sm:max-w-6xl sm:w-full h-full sm:h-auto sm:my-8 sm:max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-neutral flex items-center gap-3",children:[n==="all"&&" Totaal Gefactureerd",n==="paid"&&" Betaalde Facturen",n==="outstanding"&&" Uitstaande Facturen",n==="overdue"&&" Verlopen Facturen"]}),t.jsx("button",{onClick:()=>{r(),o()},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold",children:""})]}),n==="paid"&&t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-lg mb-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Betaalde facturen zijn verplaatst naar Boekhouding & Dossier"}),t.jsxs("p",{className:"text-xs text-blue-700",children:["Alle betaalde facturen zijn automatisch geregistreerd in het"," ",t.jsx("span",{className:"font-semibold",children:"Boekhouding & Dossier"})," ","module. Ga daarheen voor een volledig overzicht van alle betaalde facturen."]})]})]})}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[t.jsx("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:" Filters"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klantnaam"}),t.jsx("input",{type:"text",value:a.customerName,onChange:w=>l({...a,customerName:w.target.value}),placeholder:"Zoek op klantnaam...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datum vanaf"}),t.jsx("input",{type:"date",value:a.dateFrom,onChange:w=>l({...a,dateFrom:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datum tot"}),t.jsx("input",{type:"date",value:a.dateTo,onChange:w=>l({...a,dateTo:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min. Bedrag ()"}),t.jsx("input",{type:"number",value:a.minAmount,onChange:w=>l({...a,minAmount:w.target.value}),placeholder:"0.00",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max. Bedrag ()"}),t.jsx("input",{type:"number",value:a.maxAmount,onChange:w=>l({...a,maxAmount:w.target.value}),placeholder:"0.00",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsx("div",{className:"flex items-end",children:t.jsx("button",{onClick:o,className:"w-full px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:" Reset Filters"})})]})]}),t.jsxs("div",{className:"bg-blue-50 border-2 border-blue-300 p-4 rounded-lg mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Totaal Gefilterd:"}),t.jsx("span",{className:"text-3xl font-bold text-blue-600",children:_t(b())})]}),t.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[v().length," facturen gevonden"]})]})]}),t.jsx("div",{className:"p-4 sm:p-6 max-h-96 overflow-y-auto",children:v().length===0?t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500 text-lg",children:" Geen facturen gevonden met deze filters"})}):t.jsx("div",{className:"space-y-3",children:v().map(w=>{const N=lf(w.workOrderId,f),S=of(N);return t.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-lg text-gray-800",children:w.invoiceNumber}),t.jsx("p",{className:"text-sm text-gray-600",children:Ra(w.customerId,m)})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold text-primary",children:_t(w.total)}),t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${MO(w.status)}`,children:w.status})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-gray-600 mt-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Factuurdatum:"}),t.jsx("p",{children:w.issueDate})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Vervaldatum:"}),t.jsx("p",{children:w.dueDate})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Betalingstermijn:"}),t.jsx("p",{children:w.paymentTerms})]}),w.paidDate&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Betaald op:"}),t.jsx("p",{children:w.paidDate})]})]}),S&&t.jsx("div",{className:"mt-3",children:t.jsxs("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-semibold border-2 ${S.color}`,children:[S.icon," ",S.text]})}),w.notes&&t.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded text-sm text-gray-700",children:[t.jsx("strong",{children:"Notities:"})," ",w.notes]}),t.jsxs("div",{className:"mt-4 flex gap-2 flex-wrap",children:[t.jsx("button",{onClick:()=>{r(),h(w.id)},className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors font-semibold",title:"Factuur bewerken",children:" Bewerken"}),t.jsx("button",{onClick:()=>{r(),g(w.id)},className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600 transition-colors font-semibold",title:"Factuur clonen",children:" Clonen"}),(w.status==="sent"||w.status==="draft")&&!w.workOrderId&&t.jsx("button",{onClick:()=>{r(),p(w.id)},className:"flex-1 px-3 py-2 bg-orange-500 text-white text-sm rounded-lg hover:bg-orange-600 transition-colors font-semibold",title:"Verzend naar werkorder",children:" Naar Werkorder"})]})]},w.id)})})}),t.jsx("div",{className:"p-4 sm:p-6 border-t border-gray-200 bg-gray-50",children:t.jsx("button",{onClick:()=>{r(),o()},className:"w-full px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Sluiten"})})]})})},cK=({show:e,invoiceForm:r,customers:n,calculateInvoiceTotals:a,onClose:l,onSave:o,onSaveAndSendToWorkOrder:d})=>e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-4xl sm:w-full h-full sm:h-auto p-4 sm:p-6 sm:my-8 overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral",children:" Factuur Clonen"}),t.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[" ",t.jsx("strong",{children:"Tip:"})," De nieuwe factuur krijgt automatisch een nieuw factuurnummer en de datum wordt op vandaag gezet."]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klant *"}),t.jsxs("select",{value:r.formData.customerId,onChange:m=>r.handleChange("customerId",m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant"}),n.map(m=>t.jsx("option",{value:m.id,children:m.name},m.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Factuurdatum *"}),t.jsx("input",{type:"date",value:r.formData.issueDate,onChange:m=>r.handleChange("issueDate",m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vervaldatum *"}),t.jsx("input",{type:"date",value:r.formData.dueDate,onChange:m=>r.handleChange("dueDate",m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BTW Tarief (%)"}),t.jsx("input",{type:"number",value:r.formData.vatRate,onChange:m=>r.handleChange("vatRate",Number(m.target.value)),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Betalingstermijn"}),t.jsx("input",{type:"text",value:r.formData.paymentTerms,onChange:m=>r.handleChange("paymentTerms",m.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"14 dagen"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:r.formData.notes,onChange:m=>r.handleChange("notes",m.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Extra opmerkingen..."})]}),r.formData.items.length>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotaal:"}),t.jsx("span",{className:"font-semibold",children:_t(a().subtotal)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-600",children:["BTW (",r.formData.vatRate,"%):"]}),t.jsx("span",{className:"font-semibold",children:_t(a().vatAmount)})]}),t.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsx("span",{className:"text-primary",children:_t(a().total)})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-3 mt-6",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:o,className:"flex-1 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:" Gecloneerde Factuur Opslaan"}),t.jsx("button",{onClick:l,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]}),t.jsx("button",{onClick:d,className:"w-full px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold flex items-center justify-center gap-2",children:" Opslaan en naar Werkorder Sturen"})]})]})}):null,dK=({show:e,invoiceToValidate:r,invoices:n,workOrders:a,validationChecklist:l,setValidationChecklist:o,onClose:d,onEdit:m,onConfirm:f})=>{if(!e||!r)return null;const h=NH(r.id,n,a);return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-3xl sm:w-full h-full sm:h-auto sm:my-8 sm:max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 sm:p-6 flex items-center justify-between z-10",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-neutral flex items-center gap-2",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Factuur Validatie Voordat Verzenden"})]}),t.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[t.jsx("div",{className:"p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-lg",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"Belangrijk:"})," Deze factuur is automatisch aangemaakt na voltooiing van een werkorder. Controleer alle gegevens zorgvuldig voordat u naar de klant verzendt."]})}),h&&(()=>{const g=h.estimatedHours||0,p=h.hoursSpent||0,v=r.estimatedCost||h.estimatedCost||0,b=r.total;return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral",children:"Vergelijking: Geschat vs Werkelijk"}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Werkuren"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Geschat"}),t.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[g,"u"]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Gewerkt"}),t.jsxs("p",{className:`text-lg font-bold ${p<=g*1.1?"text-green-600":p<=g*1.25?"text-orange-600":"text-red-600"}`,children:[p,"u"]}),g>0&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["(",Math.round(p/g*100),"% van geschat)"]})]})]}),g>0&&p>g*1.1&&t.jsx("div",{className:"mt-3 p-2 bg-orange-50 border border-orange-200 rounded text-xs text-orange-800",children:" Meerdere uren gewerkt dan geschat. Overweeg meerwerk facturering."})]}),v>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Kosten"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Geschat Totaal"}),t.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["",v.toFixed(2)]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-gray-600",children:"Factuur Totaal"}),t.jsxs("p",{className:`text-lg font-bold ${b<=v*1.1?"text-green-600":b<=v*1.2?"text-orange-600":"text-red-600"}`,children:["",b.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["(",b>v?"+":"","",(b-v).toFixed(2),")"]})]})]}),b>v*1.1&&t.jsx("div",{className:"mt-3 p-2 bg-orange-50 border border-orange-200 rounded text-xs text-orange-800",children:" Factuurbedrag is hoger dan geschat. Controleer items en meerwerk."})]}),r.items.length>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Materialen"}),t.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:r.items.map((w,N)=>t.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-gray-200 last:border-0",children:[t.jsx("span",{className:"text-gray-700",children:w.description}),t.jsxs("span",{className:"font-medium text-gray-900",children:[w.quantity,"x ",w.pricePerUnit.toFixed(2)," = ",w.total.toFixed(2)]})]},N))}),t.jsx("div",{className:"mt-3 pt-2 border-t border-gray-300",children:t.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Subtotaal Materialen: ",r.items.reduce((w,N)=>w+N.total,0).toFixed(2)]})})]}),r.labor&&r.labor.length>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Werkuren"}),t.jsx("div",{className:"space-y-2",children:r.labor.map((w,N)=>t.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-gray-200 last:border-0",children:[t.jsx("span",{className:"text-gray-700",children:w.description}),t.jsxs("span",{className:"font-medium text-gray-900",children:[w.hours,"u  ",w.hourlyRate.toFixed(2),"/u = ",w.total.toFixed(2)]})]},N))}),t.jsx("div",{className:"mt-3 pt-2 border-t border-gray-300",children:t.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Subtotaal Werkuren: ",r.labor.reduce((w,N)=>w+N.total,0).toFixed(2)]})})]})]})})(),t.jsxs("div",{className:"border-t pt-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:" Validatie Checklist"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:l.hoursChecked,onChange:g=>o({...l,hoursChecked:g.target.checked}),className:"mt-1 w-5 h-5 text-primary border-gray-300 rounded focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:" Uren gecontroleerd (gewerkte uren vs geschat)"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Controleer of de gewerkte uren kloppen en of meerwerk nodig is"})]})]}),t.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:l.materialsChecked,onChange:g=>o({...l,materialsChecked:g.target.checked}),className:"mt-1 w-5 h-5 text-primary border-gray-300 rounded focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:" Materialen gecontroleerd"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Controleer of alle gebruikte materialen zijn opgenomen tegen juiste prijzen"})]})]}),t.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors",children:[t.jsx("input",{type:"checkbox",checked:l.extraWorkAdded,onChange:g=>o({...l,extraWorkAdded:g.target.checked}),className:"mt-1 w-5 h-5 text-primary border-gray-300 rounded focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:" Meerwerk toegevoegd (indien nodig)"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Indien er extra werk is uitgevoerd, is dit toegevoegd aan de factuur"})]})]})]})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:" Snelle Acties"}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[t.jsx("button",{onClick:()=>m(r.id),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:" Factuur Bewerken"}),h&&t.jsx("button",{onClick:()=>{alert(`Werkorder ID: ${h.id}
Titel: ${h.title}
Status: ${h.status}`)},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm font-medium",children:" Bekijk Werkorder"})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[t.jsx("button",{onClick:f,disabled:!l.hoursChecked||!l.materialsChecked,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-colors ${l.hoursChecked&&l.materialsChecked?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:" Validatie Voltooid - Factuur Verzenden"}),t.jsx("button",{onClick:d,className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})]})})},uK=e=>t.jsxs(t.Fragment,{children:[t.jsx(oK,{show:e.showOverviewModal,onClose:()=>e.setShowOverviewModal(!1),type:e.overviewType,filter:e.overviewFilter,setFilter:e.setOverviewFilter,resetFilters:e.resetFilters,invoices:e.invoices,customers:e.customers,workOrders:e.workOrders,onEdit:e.onEdit,onClone:e.onClone,onConvertToWorkOrder:e.onConvertToWorkOrder}),t.jsx(cK,{show:e.showCloneInvoiceModal,invoiceForm:e.invoiceForm,customers:e.customers,calculateInvoiceTotals:e.calculateInvoiceTotals,onClose:()=>e.setShowCloneInvoiceModal(!1),onSave:e.onSaveClonedInvoice,onSaveAndSendToWorkOrder:e.onSaveClonedInvoiceAndSendToWorkOrder}),t.jsx(dK,{show:e.showInvoiceValidationModal,invoiceToValidate:e.invoiceToValidate,invoices:e.invoices,workOrders:e.workOrders,validationChecklist:e.validationChecklist,setValidationChecklist:e.setValidationChecklist,onClose:()=>{e.setShowInvoiceValidationModal(!1),e.setInvoiceToValidate(null),e.setValidationChecklist({hoursChecked:!1,materialsChecked:!1,extraWorkAdded:!1})},onEdit:e.onEdit,onConfirm:e.onConfirmValidation})]}),mK=({filteredTransactions:e,filter:r,setFilter:n,totalIncome:a,totalExpense:l,netProfit:o})=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Totale Inkomsten"}),t.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:["",a.toFixed(2)]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Totale Uitgaven"}),t.jsxs("p",{className:"text-2xl font-bold text-red-600 mt-1",children:["",l.toFixed(2)]})]}),t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Netto Winst"}),t.jsxs("p",{className:`text-2xl font-bold mt-1 ${o>=0?"text-green-600":"text-red-600"}`,children:["",o.toFixed(2)]})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]})})]}),t.jsxs("div",{className:"flex gap-3 mb-6",children:[t.jsx("button",{onClick:()=>n("all"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${r==="all"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Alle"}),t.jsx("button",{onClick:()=>n("income"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${r==="income"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Inkomsten"}),t.jsx("button",{onClick:()=>n("expense"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${r==="expense"?"bg-red-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Uitgaven"})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Datum"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Beschrijving"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Type"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Bedrag"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map(d=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:d.date}),t.jsx("td",{className:"px-6 py-4 text-sm font-medium text-neutral",children:d.description}),t.jsx("td",{className:"px-6 py-4 text-sm",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${d.type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:d.type==="income"?"Inkomst":"Uitgave"})}),t.jsxs("td",{className:`px-6 py-4 text-sm font-semibold text-right ${d.type==="income"?"text-green-600":"text-red-600"}`,children:[d.type==="income"?"+":"-","",Math.abs(d.amount).toFixed(2)]})]},d.id))})]})})]}),fK=({transactions:e,quotes:r,setQuotes:n,invoices:a,setInvoices:l,customers:o,inventory:d,workOrders:m,setWorkOrders:f,employees:h,currentUser:g,isAdmin:p,notifications:v=[],setNotifications:b,categories:w=[]})=>{const[N,S]=y.useState("dashboard");py(d,w);const[C,O]=y.useState(null),{filter:k,setFilter:E,filteredTransactions:M}=UH(e),D=WH(r,n,d,o,h,g,m,f),R=D.quoteForm,{showQuoteForm:P,setShowQuoteForm:z,showCloneQuoteModal:U,setShowCloneQuoteModal:q,showAcceptQuoteModal:Y,setShowAcceptQuoteModal:ee,quoteToAccept:_,setQuoteToAccept:G,cloneOnAccept:L,setCloneOnAccept:V,createQuote:Z,editQuote:K,updateQuoteStatus:de,deleteQuote:B,cloneQuote:le,saveClonedQuote:ye,acceptQuote:ge}=D,Ne=GH(a,l,d,o,h,g,m,f,b),Me=Ne.invoiceForm,{showInvoiceForm:ce,setShowInvoiceForm:Le,showCloneInvoiceModal:X,setShowCloneInvoiceModal:Re,showInvoiceValidationModal:at,setShowInvoiceValidationModal:je,invoiceToValidate:vt,setInvoiceToValidate:Xe,validationChecklist:ut,setValidationChecklist:pt,createInvoice:bt,deleteInvoice:nr,generateInvoiceNumber:zt}=Ne,[te,Te]=y.useState(!1),[_e,qe]=y.useState("all"),[Ye,st]=y.useState(!1),[H,Ae]=y.useState("all"),[Ee,W]=y.useState({customerName:"",dateFrom:"",dateTo:"",minAmount:"",maxAmount:""}),[me,Ve]=y.useState([]),[We,Fe]=y.useState([]),[F,se]=y.useState(!1),[oe,Pe]=y.useState(!1),[$e,Ct]=y.useState(null),[it,Ke]=y.useState(""),xt=zO(a,r,e,o),{totalIncome:Ar,totalExpense:ur,netProfit:jn}=xt.stats.transaction,{totalInvoiced:mn,totalPaid:Tt,totalOverdue:Pr,totalOutstanding:$t,paidInvoices:tn,overdueInvoices:pr,outstandingInvoices:Nn}=xt.stats.invoice,{totalQuoted:Nt,totalApproved:fn,totalSent:lr,totalExpired:_r,approvedQuotes:Ht,sentQuotes:Tr,expiredQuotes:Sr}=xt.stats.quote,ft=()=>R.totals(),Xt=()=>Me.totals(),{handleAddInventoryItem:ts,handleAddCustomItem:La,handleAddLabor:Ca,handleRemoveItem:wn,handleRemoveLabor:$a,handleInventoryItemChange:Bs,handleItemChange:hn,handleLaborChange:gn}=R,Qr=Ce=>{K(Ce),S("quotes")},Bn=(Ce,De)=>{if(de(Ce,De),!r.find(et=>et.id===Ce))return;const rt=r.find(et=>et.id===Ce);if(rt){if(rt.workOrderId&&De==="approved"){const et=m.find(lt=>lt.id===rt.workOrderId);if(et){const lt=PO(rt,et);lt&&f(m.map(ze=>ze.id===et.id?lt:ze))}}if(De==="approved"&&b&&rt&&!rt.workOrderId){const et=gH(rt,()=>{sa(Ce)},()=>{S("quotes")});b(lt=>[et,...lt])}}},Bt=Ce=>{const De=r.find(Be=>Be.id===Ce);if(De)try{const{invoice:Be,updatedQuote:rt}=LH(De,g,h,a);l([...a,Be]),n(r.map(et=>et.id===Ce?rt:et)),alert(` Factuur ${Be.invoiceNumber} succesvol aangemaakt!`),S("invoices")}catch(Be){alert(Be.message||"Er is een fout opgetreden!")}},sa=Ce=>{var lt,ze;const De=r.find(Ze=>Ze.id===Ce);if(!De)return;const Be=vH(De,m);if(!Be.canProceed){const Ze=bH(Be);alert(`${Ze.icon} ${Be.message}

${Be.suggestedAction||""}`);return}for(const Ze of De.items)if(Ze.inventoryItemId){const A=d.find(Q=>Q.id===Ze.inventoryItemId);if(A&&A.quantity<Ze.quantity&&!confirm(`Waarschuwing: Niet genoeg voorraad van ${A.name}. Beschikbaar: ${A.quantity}, Nodig: ${Ze.quantity}. Toch werkorder aanmaken?`))return}const rt=((lt=o.find(Ze=>Ze.id===De.customerId))==null?void 0:lt.name)||"Onbekend",et=((ze=De.labor)==null?void 0:ze.reduce((Ze,A)=>Ze+A.hours,0))||0;Ha(g.employeeId,g.role,dt.ACCOUNTING,"convert_to_workorder","create",{quoteId:De.id,customerId:De.customerId,totalValue:De.total}),Ct({type:"quote",sourceId:Ce,data:{customerName:rt,totalHours:et,quote:De}}),Ke(""),Pe(!0)},Vr=Ce=>{var et,lt;const De=a.find(ze=>ze.id===Ce);if(!De)return;if(De.status!=="sent"&&De.status!=="draft"){alert("Alleen verzonden of concept facturen kunnen worden omgezet naar werkorders!");return}if(De.workOrderId){alert("Deze factuur heeft al een gekoppelde werkorder!");return}for(const ze of De.items)if(ze.inventoryItemId){const Ze=d.find(A=>A.id===ze.inventoryItemId);if(Ze&&Ze.quantity<ze.quantity&&!confirm(`Waarschuwing: Niet genoeg voorraad van ${Ze.name}. Beschikbaar: ${Ze.quantity}, Nodig: ${ze.quantity}. Toch werkorder aanmaken?`))return}const Be=((et=o.find(ze=>ze.id===De.customerId))==null?void 0:et.name)||"Onbekend",rt=((lt=De.labor)==null?void 0:lt.reduce((ze,Ze)=>ze+Ze.hours,0))||0;Ct({type:"invoice",sourceId:Ce,data:{customerName:Be,totalHours:rt,invoice:De}}),Ke(""),Pe(!0)},In=Ce=>{qe(Ce),Te(!0)},Fn=()=>{W({customerName:"",dateFrom:"",dateTo:"",minAmount:"",maxAmount:""})},Ai=Ce=>{Ae(Ce),st(!0)},Fs=()=>{if(!it){alert("Selecteer een medewerker!");return}$e&&($e.type==="quote"?rs($e.sourceId,it,$e.data):Us($e.sourceId,it,$e.data),Pe(!1),Ct(null),Ke(""))},rs=(Ce,De,Be)=>{const rt=r.find(Ze=>Ze.id===Ce);if(!rt)return;const et=new Date().toISOString(),ze={id:`wo${Date.now()}`,title:`${Be.customerName} - Offerte ${rt.id}`,description:rt.notes||`Werkorder aangemaakt vanuit offerte ${rt.id}`,status:"To Do",assignedTo:De,assignedBy:g.employeeId,convertedBy:g.employeeId,requiredInventory:rt.items.filter(Ze=>Ze.inventoryItemId).map(Ze=>({itemId:Ze.inventoryItemId,quantity:Ze.quantity})),createdDate:new Date().toISOString().split("T")[0],customerId:rt.customerId,location:rt.location,scheduledDate:rt.scheduledDate,quoteId:rt.id,estimatedHours:Be.totalHours,estimatedCost:rt.total,notes:`Geschatte uren: ${Be.totalHours}u
Geschatte kosten: ${_t(rt.total)}`,timestamps:{created:et,converted:et,assigned:et},history:[Br("quote","created",`Werkorder aangemaakt door ${or(g.employeeId,h)}`,g),Br("quote","converted",`Geconverteerd van offerte ${rt.id} door ${or(g.employeeId,h)}`,g),{timestamp:et,action:"assigned",performedBy:g.employeeId,details:`Toegewezen aan ${or(De,h)} door ${or(g.employeeId,h)}`,toAssignee:De}]};f([...m,ze]),n(r.map(Ze=>Ze.id===Ce?{...Ze,workOrderId:ze.id,timestamps:{...Ze.timestamps,convertedToWorkOrder:et},history:[...Ze.history||[],Br("quote","converted_to_workorder",`Geconverteerd naar werkorder ${ze.id} door ${or(g.employeeId,h)}`,g)]}:Ze)),alert(` Werkorder ${ze.id} succesvol aangemaakt en toegewezen aan ${or(De,h)}!`)},Us=(Ce,De,Be)=>{const rt=a.find(Ze=>Ze.id===Ce);if(!rt)return;const et=new Date().toISOString(),ze={id:`wo${Date.now()}`,title:`${Be.customerName} - Factuur ${Be.invoice.invoiceNumber}`,description:Be.invoice.notes||`Werkorder aangemaakt vanuit factuur ${Be.invoice.invoiceNumber}`,status:"To Do",assignedTo:De,assignedBy:g.employeeId,convertedBy:g.employeeId,requiredInventory:Be.invoice.items.filter(Ze=>Ze.inventoryItemId).map(Ze=>({itemId:Ze.inventoryItemId,quantity:Ze.quantity})),createdDate:new Date().toISOString().split("T")[0],customerId:Be.invoice.customerId,location:Be.invoice.location,scheduledDate:Be.invoice.scheduledDate,invoiceId:rt.id,estimatedHours:Be.totalHours,estimatedCost:Be.invoice.total,notes:`Geschatte uren: ${Be.totalHours}u
Geschatte kosten: ${_t(Be.invoice.total)}`,timestamps:{created:et,converted:et,assigned:et},history:[Br("invoice","created",`Werkorder aangemaakt door ${or(g.employeeId,h)}`,g),Br("invoice","converted",`Geconverteerd van factuur ${Be.invoice.invoiceNumber} door ${or(g.employeeId,h)}`,g),{timestamp:et,action:"assigned",performedBy:g.employeeId,details:`Toegewezen aan ${or(De,h)} door ${or(g.employeeId,h)}`,toAssignee:De}]};f([...m,ze]),l(a.map(Ze=>Ze.id===Ce?{...Ze,workOrderId:ze.id,timestamps:{...Ze.timestamps,convertedToWorkOrder:et},history:[...Ze.history||[],Br("invoice","converted_to_workorder",`Geconverteerd naar werkorder ${ze.id} door ${or(g.employeeId,h)}`,g)]}:Ze)),alert(` Werkorder ${ze.id} succesvol aangemaakt en toegewezen aan ${or(De,h)}!`)},{handleAddInventoryItem:ns,handleAddCustomItem:Da,handleAddLabor:Sn,handleRemoveItem:mr,handleRemoveLabor:za,handleInventoryItemChange:ia,handleItemChange:T,handleLaborChange:ae}=Me,ne=(Ce,De)=>{const Be=a.find(et=>et.id===Ce);if(!Be)return;if(De==="sent"&&Be.status==="draft"&&LO(Be)){Xe(Be),pt({hoursChecked:!1,materialsChecked:!1,extraWorkAdded:!1}),je(!0);return}const rt=_O(Be,De,g,h);l(a.map(et=>et.id===Ce?rt:et)),De==="sent"?Ha(g.employeeId,g.role,dt.ACCOUNTING,"validate_invoice","complete",{invoiceId:Be.id,invoiceNumber:Be.invoiceNumber,wasAutoGenerated:Mc(Be)}):De==="paid"&&Ha(g.employeeId,g.role,dt.ACCOUNTING,"mark_invoice_paid","complete",{invoiceId:Be.id,invoiceNumber:Be.invoiceNumber,total:Be.total})},ve=()=>{if(!vt)return;if(!ut.hoursChecked||!ut.materialsChecked){alert(" Controleer minimaal de uren en materialen voordat u verzendt.");return}const Ce=a.find(et=>et.id===vt.id);if(!Ce)return;const De=new Date().toISOString(),Be=Ce.status,rt={status:"sent",history:[...Ce.history||[],Br("invoice","sent",`Status gewijzigd van "${Be}" naar "sent" na validatie door ${or(g.employeeId,h)}`,g,{fromStatus:Be,toStatus:"sent"})]};if(Ce.timestamps?rt.timestamps={...Ce.timestamps}:rt.timestamps={created:Ce.issueDate},!rt.timestamps.sent){if(rt.timestamps.sent=De,Ce.dueDate){const et=new Date(Ce.dueDate),lt=new Date(et);lt.setDate(et.getDate()+7);const ze=new Date(et);ze.setDate(et.getDate()+14),rt.reminders={reminder1Date:lt.toISOString().split("T")[0],reminder1Sent:!1,reminder2Date:ze.toISOString().split("T")[0],reminder2Sent:!1}}Ha(g.employeeId,g.role,dt.ACCOUNTING,"validate_invoice","complete",{invoiceId:Ce.id,invoiceNumber:Ce.invoiceNumber,wasAutoGenerated:Mc(Ce)})}l(a.map(et=>et.id===Ce.id?{...et,...rt}:et)),je(!1),Xe(null),pt({hoursChecked:!1,materialsChecked:!1,extraWorkAdded:!1}),alert(` Factuur ${Ce.invoiceNumber} succesvol gevalideerd en verzonden!`)},Ie=Ce=>{const De=a.find(Be=>Be.id===Ce);De&&(Me.loadInvoiceForEditing({customerId:De.customerId,items:De.items,labor:De.labor||[],vatRate:De.vatRate,notes:De.notes||"",paymentTerms:De.paymentTerms||"14 dagen",issueDate:De.issueDate,dueDate:De.dueDate}),Me.setEditingInvoiceId(Ce),S("invoices"),Le(!0))},Ue=Ce=>{const De=a.find(et=>et.id===Ce);if(!De)return;const Be=new Date().toISOString().split("T")[0],rt=new Date;rt.setDate(rt.getDate()+14),Me.setFields({customerId:De.customerId,items:De.items,labor:De.labor||[],vatRate:De.vatRate,notes:De.notes||"",paymentTerms:De.paymentTerms,issueDate:Be,dueDate:rt.toISOString().split("T")[0]}),Re(!0)},Je=(Ce=!1)=>{var Ze;if(!Me.validate()){alert(Me.errors._form||"Vul alle verplichte velden in!");return}const{subtotal:De,vatAmount:Be,total:rt}=Xt(),et=new Date().toISOString(),lt=Ra(Me.formData.customerId,o),ze={id:`inv${Date.now()}`,invoiceNumber:zt(),customerId:Me.formData.customerId,items:Me.formData.items,labor:Me.formData.labor.length>0?Me.formData.labor:void 0,subtotal:De,vatRate:Me.formData.vatRate,vatAmount:Be,total:rt,status:"draft",issueDate:Me.formData.issueDate,dueDate:Me.formData.dueDate,notes:Me.formData.notes,paymentTerms:Me.formData.paymentTerms,createdBy:g.employeeId,timestamps:{created:et},history:[Br("invoice","created",`Factuur gecloneerd door ${or(g.employeeId,h)} voor klant ${lt}`,g)]};if(l([...a,ze]),Me.reset(),Re(!1),Ce){const A=((Ze=ze.labor)==null?void 0:Ze.reduce((Q,J)=>Q+J.hours,0))||0;Ct({type:"invoice",sourceId:ze.id,data:{customerName:lt,totalHours:A,invoice:ze}}),Ke(""),Pe(!0)}else alert(` Factuur ${ze.invoiceNumber} succesvol gecloneerd!`),setTimeout(()=>{const A=document.getElementById(ze.id);A==null||A.scrollIntoView({behavior:"smooth",block:"center"})},100)},Dt=()=>{Je(!0)},Ot=(Ce,De)=>{const Be=a.find(rt=>rt.id===Ce);if(!(!Be||!Be.reminders))try{const rt=RO(Be,De,g,h);l(a.map(lt=>lt.id===Ce?rt:lt));const et=De===1?Be.reminders.reminder1Date:Be.reminders.reminder2Date;alert(` Herinnering ${De} verzonden voor factuur ${Be.invoiceNumber}

 Template: "Betreft factuur ${Be.invoiceNumber}  vriendelijke herinnering"${et?`
 Gepland voor: ${new Date(et).toLocaleDateString("nl-NL")}`:""}`)}catch(rt){alert(rt.message||"Er is een fout opgetreden!")}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral mb-2",children:"Facturen en Offerte"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-8",children:"Genereer offertes, facturen en beheer financile gegevens"}),t.jsx(uK,{showOverviewModal:te,setShowOverviewModal:Te,overviewType:_e,setOverviewType:qe,overviewFilter:Ee,setOverviewFilter:W,resetFilters:Fn,invoices:a,customers:o,workOrders:m,onEdit:Ie,onClone:Ue,onConvertToWorkOrder:Vr,showCloneInvoiceModal:X,setShowCloneInvoiceModal:Re,invoiceForm:Me,calculateInvoiceTotals:Xt,onSaveClonedInvoice:Je,onSaveClonedInvoiceAndSendToWorkOrder:Dt,showInvoiceValidationModal:at,setShowInvoiceValidationModal:je,invoiceToValidate:vt,setInvoiceToValidate:Xe,validationChecklist:ut,setValidationChecklist:pt,onConfirmValidation:ve}),oe&&$e&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral mb-4",children:" Medewerker Toewijzen"}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-gray-700 mb-4",children:["Je gaat een werkorder aanmaken van deze"," ",$e.type==="quote"?"offerte":"factuur",". Aan welke medewerker wil je deze werkorder toewijzen?"]}),t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Werkorder Details"})]}),t.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Klant:"})," ",$e.data.customerName]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Geschatte uren:"})," ",$e.data.totalHours,"u"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Waarde:"})," ",$e.type==="quote"?_t($e.data.quote.total):_t($e.data.invoice.total)]})]})]}),t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecteer Medewerker *"}),t.jsxs("select",{value:it,onChange:Ce=>Ke(Ce.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"-- Kies een medewerker --"}),h.map(Ce=>t.jsxs("option",{value:Ce.id,children:[Ce.name," - ",Ce.role]},Ce.id))]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:Fs,disabled:!it,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-colors ${it?"bg-primary text-white hover:bg-secondary":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:" Werkorder Aanmaken"}),t.jsx("button",{onClick:()=>{Pe(!1),Ct(null),Ke("")},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})}),t.jsx(aK,{showQuotesOverviewModal:Ye,setShowQuotesOverviewModal:st,quotesOverviewType:H,setQuotesOverviewType:Ae,overviewFilter:Ee,setOverviewFilter:W,resetFilters:Fn,quotes:r,customers:o,workOrders:m,onEdit:Qr,onClone:le,onConvertToWorkOrder:sa,showAcceptQuoteModal:Y,setShowAcceptQuoteModal:ee,quoteToAccept:_,setQuoteToAccept:G,cloneOnAccept:L,setCloneOnAccept:V,onAccept:ge,showCloneQuoteModal:U,setShowCloneQuoteModal:q,quoteForm:R,calculateQuoteTotals:ft,onSaveClonedQuote:ye}),t.jsxs("div",{className:"flex gap-2 sm:gap-3 mb-6 sm:mb-8 flex-wrap",children:[t.jsx("button",{onClick:()=>{S("dashboard"),O(null)},className:`px-4 sm:px-6 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${N==="dashboard"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Dashboard"}),t.jsx("button",{onClick:()=>S("transactions"),className:`px-4 sm:px-6 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${N==="transactions"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Transacties"}),t.jsx("button",{onClick:()=>S("quotes"),className:`px-4 sm:px-6 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${N==="quotes"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Offertes"}),t.jsx("button",{onClick:()=>S("invoices"),className:`px-4 sm:px-6 py-2 rounded-lg font-medium transition-colors text-sm sm:text-base ${N==="invoices"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Facturen"})]}),N!=="dashboard"&&t.jsxs("button",{onClick:()=>{S("dashboard"),O(null)},className:"flex items-center gap-2 text-primary hover:text-secondary transition-colors mb-4",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Terug naar Dashboard"]}),N==="dashboard"&&t.jsx(XH,{invoices:a,quotes:r,transactions:e,customers:o,onNavigate:(Ce,De)=>{O(Ce),Ce==="invoices"?(S("invoices"),De!=null&&De.overviewType&&(qe(De.overviewType),Te(!0))):Ce==="quotes"?(S("quotes"),De!=null&&De.overviewType&&(Ae(De.overviewType),st(!0))):S(Ce)}}),N==="transactions"&&t.jsx(mK,{transactions:e,filteredTransactions:M,filter:k,setFilter:E,totalIncome:Ar,totalExpense:ur,netProfit:jn}),N==="quotes"&&t.jsxs(t.Fragment,{children:[p&&t.jsx("div",{className:"mb-6",children:t.jsx(xH,{customers:o,onQuoteCreated:Ce=>{n([...r,Ce]),alert(` Offerte ${Ce.id} succesvol aangemaakt vanuit email!`)}})}),t.jsx(JH,{quotes:r,customers:o,workOrders:m,invoices:a,inventory:d,isAdmin:p,totalQuoted:Nt,totalApproved:fn,totalSent:lr,totalExpired:_r,approvedQuotes:Ht,sentQuotes:Tr,expiredQuotes:Sr,batchMode:F,setBatchMode:se,selectedQuotes:me,setSelectedQuotes:Ve,setShowQuoteForm:z,onOpenOverviewModal:Ai,onConvertToWorkOrder:sa,onConvertToInvoice:Bt,onUpdateStatus:Bn,onClone:le,onDelete:B,onAccept:Ce=>{G(Ce),V(!1),ee(!0)},onEdit:Qr}),P&&p&&t.jsx(eK,{quoteForm:R,customers:o,inventory:d,categories:w||[],onSave:Z,onCancel:()=>{z(!1),R.reset()}})]}),N==="invoices"&&t.jsxs(t.Fragment,{children:[t.jsx(iK,{invoices:a,customers:o,workOrders:m,inventory:d,isAdmin:p,totalInvoiced:mn,totalPaid:Tt,totalOutstanding:$t,totalOverdue:Pr,paidInvoices:tn,outstandingInvoices:Nn,overdueInvoices:pr,batchMode:F,setBatchMode:se,selectedInvoices:We,setSelectedInvoices:Fe,showInvoiceForm:ce,setShowInvoiceForm:Le,onOpenOverviewModal:In,onUpdateStatus:ne,onConvertToWorkOrder:Vr,onClone:Ue,onDelete:nr,onSendReminder:Ot,onEdit:Ie,currentUser:g,setInvoices:l,trackAction:Ha}),!1,!1,ce&&p&&t.jsx(lK,{invoiceForm:Me,customers:o,inventory:d,categories:w||[],onSave:bt,onCancel:()=>{Le(!1),Me.reset()}}),!1]})]})},hK=[{id:"1300",accountNumber:"1300",name:"Debiteuren",type:"asset",category:"debiteuren",description:"Openstaande facturen klanten",isStandard:!0,createdAt:new Date().toISOString()},{id:"1400",accountNumber:"1400",name:"Voorraad",type:"asset",category:"voorraad",description:"Voorraad goederen",isStandard:!0,createdAt:new Date().toISOString()},{id:"4000",accountNumber:"4000",name:"Inkoop grondstoffen",type:"expense",category:"inkoop",description:"Inkoop grondstoffen en materialen",isStandard:!0,createdAt:new Date().toISOString()},{id:"4400",accountNumber:"4400",name:"Inkoop diensten",type:"expense",category:"inkoop",description:"Inkoop externe diensten",isStandard:!0,createdAt:new Date().toISOString()},{id:"8000",accountNumber:"8000",name:"Omzet goederen (21% BTW)",type:"revenue",category:"omzet",description:"Omzet uit verkoop goederen",isStandard:!0,createdAt:new Date().toISOString()},{id:"8010",accountNumber:"8010",name:"Omzet diensten (9% BTW)",type:"revenue",category:"omzet",description:"Omzet uit diensten",isStandard:!0,createdAt:new Date().toISOString()},{id:"8020",accountNumber:"8020",name:"Omzet vrijgesteld (0%)",type:"revenue",category:"omzet",description:"Omzet vrijgesteld van BTW",isStandard:!0,createdAt:new Date().toISOString()},{id:"1600",accountNumber:"1600",name:"Crediteuren",type:"liability",category:"crediteuren",description:"Openstaande inkoopfacturen",isStandard:!0,createdAt:new Date().toISOString()},{id:"2200",accountNumber:"2200",name:"BTW hoog (21%)",type:"liability",category:"btw",description:"BTW af te dragen 21%",isStandard:!0,createdAt:new Date().toISOString()},{id:"2210",accountNumber:"2210",name:"BTW laag (9%)",type:"liability",category:"btw",description:"BTW af te dragen 9%",isStandard:!0,createdAt:new Date().toISOString()}],gK=({invoices:e,setInvoices:r,quotes:n=[],setQuotes:a,customers:l,suppliers:o=[],employees:d,currentUser:m,isAdmin:f,packingSlips:h=[]})=>{var Ae,Ee;const[g,p]=y.useState("grootboek"),[v,b]=y.useState(null),[w,N]=y.useState(!1),[S,C]=y.useState(!1),[O,k]=y.useState("invoice"),[E,M]=y.useState({}),[D,R]=y.useState("list"),[P,z]=y.useState("today"),[U,q]=y.useState(""),[Y,ee]=y.useState(""),[_,G]=y.useState("list"),[L,V]=y.useState("all"),[Z,K]=y.useState(""),[de,B]=y.useState(""),[le,ye]=y.useState(""),[ge]=y.useState(hK),[Ne,Me]=y.useState([]),[ce,Le]=y.useState([]),[X,Re]=y.useState([]),[at,je]=y.useState([]),[vt,Xe]=y.useState([]),ut=f||m.role==="Manager Productie",pt=ut||((Ae=m.role)==null?void 0:Ae.includes("Verkoper"))||((Ee=m.role)==null?void 0:Ee.includes("Inkoop"));if(!ut&&!pt)return t.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:[t.jsx("h2",{className:"text-xl font-semibold text-yellow-800 mb-2",children:"Geen Toegang"}),t.jsx("p",{className:"text-yellow-700",children:"Je hebt geen toegang tot de Boekhouding module. Neem contact op met je beheerder."})]})});y.useMemo(()=>{const W=e.map(me=>({id:`arch-${me.id}`,invoiceNumber:me.invoiceNumber,invoiceId:me.id,date:me.issueDate||new Date().toISOString().split("T")[0],dueDate:me.dueDate,customerId:me.customerId,customerName:me.customerName||"Onbekend",totalExclVat:me.subtotal||0,vatAmount:me.vatAmount||0,totalInclVat:me.total||0,status:me.status==="paid"?"paid":me.status==="overdue"?"overdue":"outstanding",paidDate:me.paidDate,workOrderId:me.workOrderId,pdfUploaded:!1,createdAt:me.createdAt||new Date().toISOString(),updatedAt:me.updatedAt||new Date().toISOString()}));Xe(W)},[e]);const bt=y.useMemo(()=>e.filter(W=>W.notes&&W.notes.includes("Kassa verkoop")||W.customerName==="Particulier (Kassa)"),[e]),nr=W=>W?W.includes("cash")?" Contant":W.includes("pin")?" PIN":W.includes("ideal")?" iDEAL":W.includes("credit")?" Creditcard":"Onbekend":"Onbekend",zt=(W,me,Ve)=>{const We=new Date,Fe=new Date(We.getFullYear(),We.getMonth(),We.getDate()),F=oe=>{const Pe=oe.getFullYear(),$e=String(oe.getMonth()+1).padStart(2,"0"),Ct=String(oe.getDate()).padStart(2,"0");return`${Pe}-${$e}-${Ct}`};if(W==="today"){const oe=F(Fe);return{start:oe,end:oe}}if(W==="week"){const oe=new Date(Fe);oe.setDate(Fe.getDate()-Fe.getDay());const Pe=new Date(oe);return Pe.setDate(oe.getDate()+6),{start:F(oe),end:F(Pe)}}if(W==="quarter"){const oe=Math.floor(Fe.getMonth()/3),Pe=new Date(Fe.getFullYear(),oe*3,1),$e=new Date(Fe.getFullYear(),oe*3+3,0);return{start:F(Pe),end:F($e)}}if(W==="year"){const oe=new Date(Fe.getFullYear(),0,1),Pe=new Date(Fe.getFullYear(),11,31);return{start:F(oe),end:F(Pe)}}if(W==="all"){const oe=new Date(Fe.getFullYear()-10,0,1),Pe=new Date(Fe.getFullYear()+1,11,31);return{start:F(oe),end:F(Pe)}}if(W==="custom"&&me&&Ve)return{start:me,end:Ve};const se=F(Fe);return{start:se,end:se}},te=y.useMemo(()=>{const{start:W,end:me}=zt(P,U,Y),Ve=new Date(W);Ve.setHours(0,0,0,0);const We=new Date(me);We.setHours(23,59,59,999);const Fe=bt.filter(se=>{if(!se.issueDate)return!1;const oe=new Date(se.issueDate);return oe>=Ve&&oe<=We}),F=[];return Fe.forEach(se=>{const oe=nr(se.notes),Pe=se.vatRate||21;se.items.forEach(($e,Ct)=>{const it=$e.total*Pe/(100+Pe);$e.total-it,F.push({id:`${se.id}-item-${Ct}`,date:se.issueDate||"",invoiceNumber:se.invoiceNumber,invoiceId:se.id,customerName:se.customerName||"Particulier (Kassa)",paymentMethod:oe,productName:$e.description,quantity:$e.quantity,pricePerUnit:$e.pricePerUnit,total:$e.total,vatRate:Pe,vatAmount:it})})}),F.sort((se,oe)=>new Date(oe.date).getTime()-new Date(se.date).getTime())},[bt,P,U,Y]),Te=y.useMemo(()=>{const W=te.length,me=te.reduce((it,Ke)=>it+Ke.quantity,0),Ve=te.reduce((it,Ke)=>it+Ke.total,0),We=te.reduce((it,Ke)=>it+Ke.vatAmount,0),Fe=Ve-We,F=new Set(te.map(it=>it.invoiceId)).size,se=new Set(te.map(it=>it.productName)).size,oe=te.filter(it=>it.paymentMethod.includes("PIN")).reduce((it,Ke)=>it+Ke.total,0),Pe=te.filter(it=>it.paymentMethod.includes("Contant")).reduce((it,Ke)=>it+Ke.total,0),$e=te.filter(it=>it.paymentMethod.includes("iDEAL")).reduce((it,Ke)=>it+Ke.total,0),Ct=te.filter(it=>it.paymentMethod.includes("Creditcard")).reduce((it,Ke)=>it+Ke.total,0);return{totalItems:W,totalQuantity:me,totalRevenue:Ve,totalVat:We,totalExclVat:Fe,uniqueInvoices:F,uniqueProducts:se,pinRevenue:oe,cashRevenue:Pe,idealRevenue:$e,creditRevenue:Ct}},[te]),_e=y.useMemo(()=>{const{start:W,end:me}=zt(L,Z,de),Ve=new Date(W);Ve.setHours(0,0,0,0);const We=new Date(me);We.setHours(23,59,59,999);const Fe=e.filter(se=>{var Pe;if(!se.issueDate)return!1;const oe=new Date(se.issueDate);return!(oe<Ve||oe>We||(Pe=se.notes)!=null&&Pe.includes("Kassa verkoop")||se.customerName==="Particulier (Kassa)"||le&&le.trim()!==""&&!(se.customerName||"").toLowerCase().includes(le.toLowerCase()))}),F=[];return Fe.forEach(se=>{if(!se.items||se.items.length===0)return;const oe=se.vatRate||21;se.items.forEach((Pe,$e)=>{const Ct=Pe.total*oe/(100+oe);F.push({id:`${se.id}-item-${$e}`,date:se.issueDate||"",invoiceNumber:se.invoiceNumber,invoiceId:se.id,customerName:se.customerName||"Onbekend",status:se.status,productName:Pe.description,quantity:Pe.quantity,pricePerUnit:Pe.pricePerUnit,total:Pe.total,vatRate:oe,vatAmount:Ct})})}),F.sort((se,oe)=>new Date(oe.date).getTime()-new Date(se.date).getTime())},[e,L,Z,de,le]),qe=y.useMemo(()=>{const W=_e.length,me=_e.reduce((Ke,xt)=>Ke+xt.quantity,0),Ve=_e.reduce((Ke,xt)=>Ke+xt.total,0),We=_e.reduce((Ke,xt)=>Ke+xt.vatAmount,0),Fe=Ve-We,F=new Set(_e.map(Ke=>Ke.invoiceId)).size,se=new Set(_e.map(Ke=>Ke.productName)).size,oe=new Set(_e.map(Ke=>Ke.customerName)).size,Pe=_e.filter(Ke=>Ke.status==="paid").reduce((Ke,xt)=>Ke+xt.total,0),$e=_e.filter(Ke=>Ke.status==="sent"||Ke.status==="outstanding").reduce((Ke,xt)=>Ke+xt.total,0),Ct=_e.filter(Ke=>Ke.status==="overdue").reduce((Ke,xt)=>Ke+xt.total,0),it=_e.filter(Ke=>Ke.status==="draft").reduce((Ke,xt)=>Ke+xt.total,0);return{totalItems:W,totalQuantity:me,totalRevenue:Ve,totalVat:We,totalExclVat:Fe,uniqueInvoices:F,uniqueProducts:se,uniqueCustomers:oe,paidRevenue:Pe,outstandingRevenue:$e,overdueRevenue:Ct,draftRevenue:it}},[_e]),Ye=W=>{const me=e.find(Ve=>Ve.id===W);me&&(b(me),N(!0))},st=()=>{if(!v||!r)return;const W=new Date().toISOString().split("T")[0],me=new Date;me.setDate(me.getDate()+14);const Ve=new Date().getFullYear(),We=e.filter(oe=>oe.invoiceNumber.startsWith(`${Ve}-`)).map(oe=>parseInt(oe.invoiceNumber.split("-")[1])).filter(oe=>!isNaN(oe)),Fe=We.length>0?Math.max(...We)+1:1,F=`${Ve}-${String(Fe).padStart(3,"0")}`,se={...v,id:`inv-${Date.now()}`,invoiceNumber:F,status:"draft",issueDate:W,dueDate:me.toISOString().split("T")[0],paidDate:void 0,notes:`Gekloond van factuur ${v.invoiceNumber}`,history:[],timestamps:{created:new Date().toISOString()}};r(oe=>[...oe,se]),N(!1),C(!1),alert(` Factuur ${F} succesvol aangemaakt als kopie van ${v.invoiceNumber}`)},H=()=>{if(!v||!a)return;const W=new Date().toISOString().split("T")[0],me=new Date;me.setDate(me.getDate()+30);const Ve=n.map(se=>se.id.replace("Q","")).map(se=>parseInt(se)).filter(se=>!isNaN(se)),Fe=`Q${Ve.length>0?Math.max(...Ve)+1:1}`,F={id:Fe,customerId:v.customerId,items:v.items,labor:v.labor,subtotal:v.subtotal,vatRate:v.vatRate,vatAmount:v.vatAmount,total:v.total,status:"draft",createdDate:W,validUntil:me.toISOString().split("T")[0],notes:`Gekloond van factuur ${v.invoiceNumber}`,createdBy:m.employeeId,history:[]};a(se=>[...se,F]),N(!1),C(!1),alert(` Offerte ${Fe} succesvol aangemaakt als kopie van factuur ${v.invoiceNumber}`)};return y.useMemo(()=>{const W=e.filter(me=>me.status==="sent"||me.status==="paid").map((me,Ve)=>{var it,Ke;const We=me.vatRate||21,Fe=We===9,F=We===0;let se="8000";Fe&&(se="8010"),F&&(se="8020");const oe=We===9?"2210":"2200",Pe=[{id:`line-${me.id}-1`,accountId:"1300",accountNumber:"1300",accountName:"Debiteuren",debit:me.total,credit:0,description:`Factuur ${me.invoiceNumber}`},{id:`line-${me.id}-2`,accountId:se,accountNumber:se,accountName:((it=ge.find(xt=>xt.accountNumber===se))==null?void 0:it.name)||"Omzet",debit:0,credit:me.subtotal,description:`Omzet factuur ${me.invoiceNumber}`}];F||Pe.push({id:`line-${me.id}-3`,accountId:oe,accountNumber:oe,accountName:((Ke=ge.find(xt=>xt.accountNumber===oe))==null?void 0:Ke.name)||"BTW",debit:0,credit:me.vatAmount,description:`BTW ${We}% factuur ${me.invoiceNumber}`});const $e=me.issueDate||new Date().toISOString().split("T")[0],Ct=$e.split("-")[0]||new Date().getFullYear().toString();return{id:`jrn-${me.id}`,entryNumber:`JRN-${Ct}-${String(Ve+1).padStart(3,"0")}`,date:$e,description:`Verkoop aan ${me.customerName||"Klant"} (factuur ${me.invoiceNumber})`,reference:me.invoiceNumber,sourceType:"invoice",sourceId:me.id,lines:Pe,createdBy:m.employeeId,createdAt:me.createdAt||new Date().toISOString()}});Me(W)},[e,ge,m.employeeId]),y.useMemo(()=>{const W=new Date,me=W.getFullYear(),Ve=W.getMonth()+1,We=`${me}-${String(Ve).padStart(2,"0")}-01`,Fe=new Date(me,Ve,0).toISOString().split("T")[0],F=e.filter(xt=>{if(!xt.issueDate)return!1;const Ar=new Date(xt.issueDate);return Ar>=new Date(We)&&Ar<=new Date(Fe)&&(xt.status==="sent"||xt.status==="paid")});let se=0,oe=0,Pe=0,$e=0,Ct=0;F.forEach(xt=>{const Ar=xt.vatRate||21;Ar===21?(se+=xt.subtotal,$e+=xt.vatAmount):Ar===9?(oe+=xt.subtotal,Ct+=xt.vatAmount):Pe+=xt.subtotal});const it=$e+Ct,Ke={id:`vat-${me}-${Ve}`,period:`${me}-${String(Ve).padStart(2,"0")}`,periodType:"month",startDate:We,endDate:Fe,revenue21:se,vat21:$e,revenue9:oe,vat9:Ct,revenue0:Pe,vat0:0,purchaseVat21:0,purchaseVat9:0,totalPurchaseVat:0,totalVatToPay:it,createdAt:new Date().toISOString()};Le([Ke])},[e]),t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral mb-2",children:"Boekhouding & Dossier"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-6",children:"Volledig digitaal boekhouddossier - grootboek, BTW-aangifte, journaal en klantdossiers"}),t.jsx("div",{className:"border-b border-gray-200 mb-6",children:t.jsxs("nav",{className:"flex flex-wrap gap-2 -mb-px",children:[ut&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>p("grootboek"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="grootboek"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Grootboek"}),t.jsx("button",{onClick:()=>p("facturen"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="facturen"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Factuur Archief"}),t.jsx("button",{onClick:()=>p("kassa"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="kassa"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Kassa Verkopen"}),t.jsx("button",{onClick:()=>p("btw"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="btw"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" BTW-Overzicht"}),t.jsx("button",{onClick:()=>p("journaal"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="journaal"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Journaal"})]}),pt&&t.jsx("button",{onClick:()=>p("dossiers"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${g==="dossiers"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:" Dossiers"})]})}),t.jsxs("div",{className:"mt-6",children:[g==="grootboek"&&ut&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Grootboekrekeningen"}),t.jsx("button",{onClick:()=>{const W=[["Rekening","Naam","Type","Categorie"],...ge.map(Fe=>[Fe.accountNumber,Fe.name,Fe.type,Fe.category])].map(Fe=>Fe.join(",")).join(`
`),me=new Blob([W],{type:"text/csv"}),Ve=URL.createObjectURL(me),We=document.createElement("a");We.href=Ve,We.download=`grootboek-${new Date().toISOString().split("T")[0]}.csv`,We.click(),URL.revokeObjectURL(Ve)},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm",children:" Export CSV"})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rekening"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Naam"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categorie"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Omschrijving"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ge.map(W=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:W.accountNumber}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:W.name}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:W.type}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:W.category}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:W.description||"-"})]},W.id))})]})})]}),g==="facturen"&&ut&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:" Factuur & Pakbon Archief"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>G("list"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${_==="list"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Facturen Lijst"}),t.jsx("button",{onClick:()=>G("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${_==="overview"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Financieel Overzicht"})]})]}),_==="list"?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Overzicht van alle facturen en pakbonnen (exclusief kassa verkopen)"}),t.jsxs("div",{className:"mb-4 flex gap-2 flex-wrap",children:[t.jsx("input",{type:"text",placeholder:"Zoek op nummer, klant, datum...",className:"flex-1 min-w-[200px] px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"all",children:"Alle statussen"}),t.jsx("option",{value:"paid",children:"Betaald"}),t.jsx("option",{value:"outstanding",children:"Openstaand"}),t.jsx("option",{value:"overdue",children:"Vervallen"})]})]}),t.jsx("div",{className:"space-y-2",children:vt.length===0?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"Geen facturen in archief"}):vt.map(W=>t.jsx("div",{onClick:()=>Ye(W.invoiceId),className:`border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer ${W.status==="overdue"?"border-red-300 bg-red-50":W.status==="paid"?"border-green-300 bg-green-50":"border-gray-200 bg-white"}`,title:"Klik om details te zien",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900",children:["Factuur ",W.invoiceNumber]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Klant: ",W.customerName]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Datum: ",W.date?new Date(W.date).toLocaleDateString("nl-NL"):"-"]}),t.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:["",W.totalInclVat.toFixed(2)]})]}),t.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${W.status==="paid"?"bg-green-100 text-green-800":W.status==="overdue"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:W.status==="paid"?"BETAALD":W.status==="overdue"?"VERVALLEN":"OPENSTAAND"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:me=>{me.stopPropagation()},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200",children:" PDF"}),W.status!=="paid"&&t.jsx("button",{onClick:me=>{me.stopPropagation()},className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded text-xs hover:bg-yellow-200",children:" Herinnering"}),W.status==="outstanding"&&t.jsx("button",{onClick:me=>{if(me.stopPropagation(),r){const Ve=e.find(We=>We.id===W.invoiceId);if(Ve){const We={...Ve,status:"paid",paidDate:new Date().toISOString().split("T")[0],history:[...Ve.history||[],{timestamp:new Date().toISOString(),action:"paid",performedBy:m.employeeId,details:"Factuur gemarkeerd als betaald",fromStatus:Ve.status,toStatus:"paid"}]};r(Fe=>Fe.map(F=>F.id===Ve.id?We:F)),alert(` Factuur ${W.invoiceNumber} gemarkeerd als betaald`)}}},className:"px-3 py-1 bg-green-100 text-green-700 rounded text-xs hover:bg-green-200",children:" Betaald"})]})]})]})},W.id))})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:t.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periode Filter"}),t.jsxs("select",{value:L,onChange:W=>{V(W.target.value),W.target.value!=="custom"&&(K(""),B(""))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"all",children:" Alle Facturen"}),t.jsx("option",{value:"today",children:" Vandaag"}),t.jsx("option",{value:"week",children:" Deze Week"}),t.jsx("option",{value:"quarter",children:" Dit Kwartaal"}),t.jsx("option",{value:"year",children:" Dit Jaar"}),t.jsx("option",{value:"custom",children:" Aangepaste Periode"})]})]}),L==="custom"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vanaf"}),t.jsx("input",{type:"date",value:Z,onChange:W=>K(W.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tot"}),t.jsx("input",{type:"date",value:de,onChange:W=>B(W.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter op Klant"}),t.jsx("input",{type:"text",placeholder:"Zoek op klantnaam...",value:le,onChange:W=>ye(W.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:(()=>{const{start:W,end:me}=zt(L,Z,de);return W===me?`Periode: ${new Date(W).toLocaleDateString("nl-NL")}`:`Periode: ${new Date(W).toLocaleDateString("nl-NL")} - ${new Date(me).toLocaleDateString("nl-NL")}`})()}),_e.length>0&&t.jsx("button",{onClick:()=>{const{start:W,end:me}=zt(L,Z,de),Ve=L==="all"?"alle":L==="today"?"vandaag":L==="week"?"deze-week":L==="quarter"?"dit-kwartaal":L==="year"?"dit-jaar":`custom-${W}-${me}`,We=[["Datum","Factuur","Klant","Status","Product","Aantal","Prijs per stuk","BTW %","BTW bedrag","Totaal (incl. BTW)"],..._e.map(oe=>[oe.date?new Date(oe.date).toLocaleDateString("nl-NL"):"",oe.invoiceNumber,oe.customerName,oe.status==="paid"?"Betaald":oe.status==="overdue"?"Vervallen":oe.status==="sent"?"Verzonden":"Draft",oe.productName,oe.quantity.toString(),`${oe.pricePerUnit.toFixed(2)}`,`${oe.vatRate}%`,`${oe.vatAmount.toFixed(2)}`,`${oe.total.toFixed(2)}`]),[],["TOTAAL","","","","",qe.totalQuantity.toString(),"","",`${qe.totalVat.toFixed(2)}`,`${qe.totalRevenue.toFixed(2)}`]].map(oe=>oe.join(",")).join(`
`),Fe=new Blob([We],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL(Fe),se=document.createElement("a");se.href=F,se.download=`facturen-${Ve}-${new Date().toISOString().split("T")[0]}.csv`,se.click(),URL.revokeObjectURL(F)},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm font-medium",children:" Export CSV"})]})]})}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"Totaal Items"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:qe.totalItems})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Totaal Aantal"}),t.jsx("p",{className:"text-2xl font-bold text-green-900",children:qe.totalQuantity})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[t.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"Omzet (incl. BTW)"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["",qe.totalRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[t.jsx("p",{className:"text-xs text-orange-600 font-medium mb-1",children:"BTW Totaal"}),t.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:["",qe.totalVat.toFixed(2)]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:" Betaald Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["",qe.paidRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[t.jsx("p",{className:"text-xs text-yellow-600 font-medium mb-1",children:" Openstaand Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:["",qe.outstandingRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border border-red-200",children:[t.jsx("p",{className:"text-xs text-red-600 font-medium mb-1",children:" Vervallen Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-red-900",children:["",qe.overdueRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[t.jsx("p",{className:"text-xs text-gray-600 font-medium mb-1",children:" Draft Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",qe.draftRevenue.toFixed(2)]})]})]})]}),t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Datum"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Factuur"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Klant"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Status"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Product"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Aantal"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Prijs per stuk"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"BTW %"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"BTW bedrag"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Totaal (incl. BTW)"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:10,className:"px-4 py-8 text-center text-gray-500",children:"Geen facturen gevonden voor de geselecteerde periode en filters"})}):t.jsxs(t.Fragment,{children:[_e.map(W=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 border-r border-gray-100 whitespace-nowrap",children:W.date?new Date(W.date).toLocaleDateString("nl-NL"):"-"}),t.jsx("td",{className:"px-3 py-3 text-sm font-medium text-gray-900 border-r border-gray-100 whitespace-nowrap",children:W.invoiceNumber}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 border-r border-gray-100",children:W.customerName}),t.jsx("td",{className:"px-3 py-3 text-sm border-r border-gray-100 whitespace-nowrap",children:t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${W.status==="paid"?"bg-green-100 text-green-800":W.status==="overdue"?"bg-red-100 text-red-800":W.status==="sent"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:W.status==="paid"?"Betaald":W.status==="overdue"?"Vervallen":W.status==="sent"?"Verzonden":"Draft"})}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 border-r border-gray-100 font-medium",children:W.productName}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:W.quantity}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:["",W.pricePerUnit.toFixed(2)]}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:[W.vatRate,"%"]}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:["",W.vatAmount.toFixed(2)]}),t.jsxs("td",{className:"px-3 py-3 text-sm font-semibold text-gray-900 text-right whitespace-nowrap",children:["",W.total.toFixed(2)]})]},W.id)),t.jsxs("tr",{className:"bg-gray-50 font-semibold border-t-2 border-gray-300",children:[t.jsx("td",{colSpan:5,className:"px-3 py-3 text-sm text-gray-900 border-r border-gray-200",children:"TOTAAL"}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 text-right border-r border-gray-200",children:qe.totalQuantity}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-500 text-right border-r border-gray-200",children:"-"}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-500 text-right border-r border-gray-200",children:"-"}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-900 text-right border-r border-gray-200",children:["",qe.totalVat.toFixed(2)]}),t.jsxs("td",{className:"px-3 py-3 text-sm text-primary text-right font-bold",children:["",qe.totalRevenue.toFixed(2)]})]})]})})]})})}),_e.length>0&&t.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unieke Facturen"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:qe.uniqueInvoices})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unieke Producten"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:qe.uniqueProducts})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unieke Klanten"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:qe.uniqueCustomers})]})]})]})]}),g==="kassa"&&ut&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:" Kassa Verkopen"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>R("list"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${D==="list"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Facturen Lijst"}),t.jsx("button",{onClick:()=>R("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${D==="overview"?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" Financieel Overzicht"})]})]}),D==="list"?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Overzicht van alle verkopen via het kassasysteem (direct betaald)"}),t.jsx("div",{className:"space-y-2",children:bt.length===0?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"Geen kassa verkopen gevonden"}):bt.map(W=>t.jsx("div",{onClick:()=>Ye(W.id),className:"border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer bg-green-50 border-green-200",title:"Klik om details te zien",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold text-gray-900",children:["Factuur ",W.invoiceNumber]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Klant: ",W.customerName||"Particulier (Kassa)"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Datum: ",W.issueDate?new Date(W.issueDate).toLocaleDateString("nl-NL"):"-"]}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Betaalmethode: ",nr(W.notes)]}),t.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:["",W.total.toFixed(2)]})]}),t.jsx("div",{className:"flex flex-col gap-2 items-end",children:t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:" BETAALD"})})]})},W.id))})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-6 bg-gray-50 rounded-lg p-4",children:t.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periode Filter"}),t.jsxs("select",{value:P,onChange:W=>{z(W.target.value),W.target.value!=="custom"&&(q(""),ee(""))},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"today",children:" Vandaag"}),t.jsx("option",{value:"week",children:" Deze Week"}),t.jsx("option",{value:"quarter",children:" Dit Kwartaal"}),t.jsx("option",{value:"year",children:" Dit Jaar"}),t.jsx("option",{value:"custom",children:" Aangepaste Periode"})]})]}),P==="custom"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vanaf"}),t.jsx("input",{type:"date",value:U,onChange:W=>q(W.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{className:"flex-1 min-w-[150px]",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tot"}),t.jsx("input",{type:"date",value:Y,onChange:W=>ee(W.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:(()=>{const{start:W,end:me}=zt(P,U,Y);return W===me?`Periode: ${new Date(W).toLocaleDateString("nl-NL")}`:`Periode: ${new Date(W).toLocaleDateString("nl-NL")} - ${new Date(me).toLocaleDateString("nl-NL")}`})()}),te.length>0&&t.jsx("button",{onClick:()=>{const{start:W,end:me}=zt(P,U,Y),Ve=P==="today"?"vandaag":P==="week"?"deze-week":P==="quarter"?"dit-kwartaal":P==="year"?"dit-jaar":`custom-${W}-${me}`,We=[["Datum","Factuur","Klant","Betaalmethode","Product","Aantal","Prijs per stuk","BTW %","BTW bedrag","Totaal (incl. BTW)"],...te.map(oe=>[oe.date?new Date(oe.date).toLocaleDateString("nl-NL"):"",oe.invoiceNumber,oe.customerName,oe.paymentMethod.replace(/[]/g,"").trim(),oe.productName,oe.quantity.toString(),`${oe.pricePerUnit.toFixed(2)}`,`${oe.vatRate}%`,`${oe.vatAmount.toFixed(2)}`,`${oe.total.toFixed(2)}`]),[],["TOTAAL","","","","",Te.totalQuantity.toString(),"","",`${Te.totalVat.toFixed(2)}`,`${Te.totalRevenue.toFixed(2)}`]].map(oe=>oe.join(",")).join(`
`),Fe=new Blob([We],{type:"text/csv;charset=utf-8;"}),F=URL.createObjectURL(Fe),se=document.createElement("a");se.href=F,se.download=`kassa-verkopen-${Ve}-${new Date().toISOString().split("T")[0]}.csv`,se.click(),URL.revokeObjectURL(F)},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm font-medium",children:" Export CSV"})]})]})}),t.jsxs("div",{className:"space-y-4 mb-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[t.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"Totaal Items"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Te.totalItems})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[t.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"Totaal Aantal"}),t.jsx("p",{className:"text-2xl font-bold text-green-900",children:Te.totalQuantity})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[t.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"Omzet (incl. BTW)"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:["",Te.totalRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[t.jsx("p",{className:"text-xs text-orange-600 font-medium mb-1",children:"BTW Totaal"}),t.jsxs("p",{className:"text-2xl font-bold text-orange-900",children:["",Te.totalVat.toFixed(2)]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-cyan-50 rounded-lg p-4 border border-cyan-200",children:[t.jsx("p",{className:"text-xs text-cyan-600 font-medium mb-1",children:" PIN Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-cyan-900",children:["",Te.pinRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[t.jsx("p",{className:"text-xs text-yellow-600 font-medium mb-1",children:" Contant Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:["",Te.cashRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4 border border-indigo-200",children:[t.jsx("p",{className:"text-xs text-indigo-600 font-medium mb-1",children:" iDEAL Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-indigo-900",children:["",Te.idealRevenue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-pink-50 rounded-lg p-4 border border-pink-200",children:[t.jsx("p",{className:"text-xs text-pink-600 font-medium mb-1",children:" Creditcard Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-pink-900",children:["",Te.creditRevenue.toFixed(2)]})]})]})]}),t.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Datum"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Factuur"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Klant"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Betaalmethode"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Product"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Aantal"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"Prijs per stuk"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"BTW %"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase border-r border-gray-200",children:"BTW bedrag"}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Totaal (incl. BTW)"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:10,className:"px-4 py-8 text-center text-gray-500",children:"Geen kassa verkopen gevonden voor de geselecteerde periode"})}):t.jsxs(t.Fragment,{children:[te.map(W=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 border-r border-gray-100 whitespace-nowrap",children:W.date?new Date(W.date).toLocaleDateString("nl-NL"):"-"}),t.jsx("td",{className:"px-3 py-3 text-sm font-medium text-gray-900 border-r border-gray-100 whitespace-nowrap",children:W.invoiceNumber}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 border-r border-gray-100",children:W.customerName}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 border-r border-gray-100 whitespace-nowrap",children:W.paymentMethod}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 border-r border-gray-100 font-medium",children:W.productName}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:W.quantity}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:["",W.pricePerUnit.toFixed(2)]}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:[W.vatRate,"%"]}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-700 text-right border-r border-gray-100 whitespace-nowrap",children:["",W.vatAmount.toFixed(2)]}),t.jsxs("td",{className:"px-3 py-3 text-sm font-semibold text-gray-900 text-right whitespace-nowrap",children:["",W.total.toFixed(2)]})]},W.id)),t.jsxs("tr",{className:"bg-gray-50 font-semibold border-t-2 border-gray-300",children:[t.jsx("td",{colSpan:5,className:"px-3 py-3 text-sm text-gray-900 border-r border-gray-200",children:"TOTAAL"}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-900 text-right border-r border-gray-200",children:Te.totalQuantity}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-500 text-right border-r border-gray-200",children:"-"}),t.jsx("td",{className:"px-3 py-3 text-sm text-gray-500 text-right border-r border-gray-200",children:"-"}),t.jsxs("td",{className:"px-3 py-3 text-sm text-gray-900 text-right border-r border-gray-200",children:["",Te.totalVat.toFixed(2)]}),t.jsxs("td",{className:"px-3 py-3 text-sm text-primary text-right font-bold",children:["",Te.totalRevenue.toFixed(2)]})]})]})})]})})}),te.length>0&&t.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unieke Facturen"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:Te.uniqueInvoices})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Unieke Producten"}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:Te.uniqueProducts})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Omzet (excl. BTW)"}),t.jsxs("p",{className:"text-xl font-bold text-gray-900",children:["",Te.totalExclVat.toFixed(2)]})]})]})]})]}),g==="btw"&&ut&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"BTW-Overzicht"}),t.jsxs("div",{className:"mb-4 flex gap-2 flex-wrap",children:[t.jsx("select",{className:"px-4 py-2 border border-gray-300 rounded-lg",children:ce.map(W=>t.jsx("option",{value:W.period,children:W.periodType==="month"?`${W.period.split("-")[0]} Maand ${W.period.split("-")[1]}`:W.period},W.id))}),t.jsx("button",{onClick:()=>{alert("XML export functionaliteit komt binnenkort beschikbaar")},className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:" Export XML"}),t.jsx("button",{onClick:()=>{window.print()},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:" Print PDF"})]}),ce.length>0?ce.map(W=>t.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[t.jsxs("h3",{className:"font-semibold mb-4",children:["Periode: ",W.periodType==="month"?`${W.period.split("-")[0]} Maand ${W.period.split("-")[1]}`:W.period]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between border-b pb-2",children:[t.jsx("span",{children:"Omzet 21%:"}),t.jsxs("span",{className:"font-semibold",children:["",W.revenue21.toFixed(2),"  BTW ",W.vat21.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between border-b pb-2",children:[t.jsx("span",{children:"Omzet 9%:"}),t.jsxs("span",{className:"font-semibold",children:["",W.revenue9.toFixed(2),"  BTW ",W.vat9.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between border-b pb-2",children:[t.jsx("span",{children:"Omzet 0%:"}),t.jsxs("span",{className:"font-semibold",children:["",W.revenue0.toFixed(2),"  BTW ",W.vat0.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t-2 border-gray-400",children:[t.jsx("span",{className:"font-semibold",children:"Totaal af te dragen:"}),t.jsxs("span",{className:"font-bold text-lg",children:["",(W.vat21+W.vat9).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between border-t pt-2 mt-2",children:[t.jsx("span",{children:"Voorbelasting (inkoop):"}),t.jsxs("span",{className:"font-semibold",children:["",W.totalPurchaseVat.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t-2 border-primary",children:[t.jsx("span",{className:"font-bold text-lg",children:"Te betalen:"}),t.jsxs("span",{className:"font-bold text-xl text-primary",children:["",W.totalVatToPay.toFixed(2)]})]})]})]},W.id)):t.jsx("div",{className:"bg-gray-50 rounded-lg p-6 text-center text-gray-500",children:t.jsx("p",{children:"Geen BTW-gegevens beschikbaar voor deze periode"})})]}),g==="journaal"&&ut&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold",children:"Transactieregistratie (Journaal)"}),t.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary",children:"+ Handmatig Toevoegen"})]}),t.jsxs("div",{className:"mb-4 flex gap-2",children:[t.jsx("input",{type:"text",placeholder:"Zoek op omschrijving, referentie...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"}),t.jsx("input",{type:"date",className:"px-4 py-2 border border-gray-300 rounded-lg"})]}),Ne.length===0?t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("p",{children:"Geen journaalposten gevonden"}),t.jsx("p",{className:"text-sm mt-2",children:"Journaalposten worden automatisch aangemaakt vanuit POS/Pakbon/Facturen"})]}):t.jsx("div",{className:"space-y-4",children:Ne.map(W=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between mb-2",children:[t.jsx("span",{className:"font-semibold",children:W.entryNumber}),t.jsx("span",{className:"text-sm text-gray-500",children:W.date?new Date(W.date).toLocaleDateString("nl-NL"):"-"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-3",children:W.description}),t.jsx("div",{className:"bg-gray-50 rounded p-3",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b",children:[t.jsx("th",{className:"text-left py-1",children:"Rekening"}),t.jsx("th",{className:"text-right py-1",children:"Debet"}),t.jsx("th",{className:"text-right py-1",children:"Credit"})]})}),t.jsx("tbody",{children:W.lines.map(me=>t.jsxs("tr",{className:"border-b",children:[t.jsxs("td",{className:"py-1",children:[me.accountNumber," ",me.accountName]}),t.jsx("td",{className:"text-right py-1",children:me.debit>0?`${me.debit.toFixed(2)}`:"-"}),t.jsx("td",{className:"text-right py-1",children:me.credit>0?`${me.credit.toFixed(2)}`:"-"})]},me.id))})]})})]},W.id))})]}),g==="dossiers"&&pt&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Klant- & Leveranciersdossiers"}),t.jsx("div",{className:"mb-4",children:t.jsx("input",{type:"text",placeholder:"Zoek klant of leverancier...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})}),t.jsx("div",{className:"space-y-4",children:X.length===0&&at.length===0?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"Geen dossiers gevonden"}):t.jsx(t.Fragment,{children:X.map(W=>{var me;return t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-lg mb-2",children:W.customerName}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm text-gray-600",children:["Adres: ",W.address||"-"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["KvK: ",W.kvkNumber||"-"]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["BTW: ",W.vatNumber||"-"]})]}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-semibold text-red-600",children:["Openstaand: ",W.outstandingBalance.toFixed(2)]}),t.jsxs("p",{className:"text-sm text-gray-600",children:["Credit-limiet: ",((me=W.creditLimit)==null?void 0:me.toFixed(2))||"-"]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm",children:"Facturen"}),t.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm",children:"Pakbonnen"}),t.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm",children:"Offertes"}),t.jsx("button",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm",children:"Notities"})]})]},W.id)})})})]})]}),w&&v&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral",children:"Factuur Details"}),t.jsx("button",{onClick:()=>{N(!1),b(null),C(!1)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Factuurnummer"}),t.jsx("p",{className:"font-semibold text-lg",children:v.invoiceNumber})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${v.status==="paid"?"bg-green-100 text-green-800":v.status==="overdue"?"bg-red-100 text-red-800":v.status==="sent"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:v.status==="paid"?"BETAALD":v.status==="overdue"?"VERVALLEN":v.status==="sent"?"VERZONDEN":"DRAFT"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Klant"}),t.jsx("p",{className:"font-medium",children:v.customerName})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Factuurdatum"}),t.jsx("p",{className:"font-medium",children:v.issueDate?new Date(v.issueDate).toLocaleDateString("nl-NL"):"-"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Vervaldatum"}),t.jsx("p",{className:"font-medium",children:v.dueDate?new Date(v.dueDate).toLocaleDateString("nl-NL"):"-"})]}),v.paidDate&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Betaaldatum"}),t.jsx("p",{className:"font-medium",children:new Date(v.paidDate).toLocaleDateString("nl-NL")})]})]})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Items"}),t.jsx("div",{className:"border rounded-lg overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Omschrijving"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Aantal"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Prijs per eenheid"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Totaal"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:v.items.map((W,me)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm",children:W.description}),t.jsx("td",{className:"px-4 py-3 text-sm text-right",children:W.quantity}),t.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:["",W.pricePerUnit.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-3 text-sm text-right font-medium",children:["",W.total.toFixed(2)]})]},me))})]})})]}),v.labor&&v.labor.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Werkuren"}),t.jsx("div",{className:"border rounded-lg overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Omschrijving"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Uren"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Uurtarief"}),t.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"Totaal"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:v.labor.map((W,me)=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm",children:W.description}),t.jsx("td",{className:"px-4 py-3 text-sm text-right",children:W.hours}),t.jsxs("td",{className:"px-4 py-3 text-sm text-right",children:["",W.hourlyRate.toFixed(2)]}),t.jsxs("td",{className:"px-4 py-3 text-sm text-right font-medium",children:["",W.total.toFixed(2)]})]},me))})]})})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex justify-between mb-2",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotaal (excl. BTW)"}),t.jsxs("span",{className:"font-medium",children:["",v.subtotal.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-2",children:[t.jsxs("span",{className:"text-gray-600",children:["BTW (",v.vatRate,"%)"]}),t.jsxs("span",{className:"font-medium",children:["",v.vatAmount.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t-2 border-primary",children:[t.jsx("span",{className:"font-bold text-lg",children:"Totaal (incl. BTW)"}),t.jsxs("span",{className:"font-bold text-xl text-primary",children:["",v.total.toFixed(2)]})]})]}),v.notes&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Notities"}),t.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 rounded-lg p-3",children:v.notes})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t",children:[t.jsx("button",{onClick:()=>{C(!0),k("invoice")},className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Klonen naar Factuur"}),a&&t.jsx("button",{onClick:()=>{C(!0),k("quote")},className:"flex-1 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:" Klonen naar Offerte"}),t.jsx("button",{onClick:()=>{N(!1),b(null),C(!1)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Sluiten"})]})]})})}),S&&v&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-neutral mb-4",children:O==="invoice"?"Klonen naar Factuur":"Klonen naar Offerte"}),t.jsxs("p",{className:"text-gray-700 mb-6",children:["Weet u zeker dat u factuur ",t.jsx("strong",{children:v.invoiceNumber})," wilt klonen naar een"," ",O==="invoice"?"nieuwe factuur":"nieuwe offerte","?"]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>{O==="invoice"?st():H()},className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Bevestigen"}),t.jsx("button",{onClick:()=>{C(!1)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})})})]})},pK=({isOpen:e,onClose:r,email:n,customers:a,onCreateCustomer:l,currentUserId:o,onConfirmAsOrder:d,onConfirmAsTask:m,onConfirmAsNotification:f,onCreateInteraction:h})=>{const[g,p]=y.useState("order"),[v,b]=y.useState(""),[w,N]=y.useState(!1),[S,C]=y.useState(""),[O,k]=y.useState({items:[],labor:[],subtotal:0,vatRate:21,vatAmount:0,total:0,notes:""}),[E,M]=y.useState(""),[D,R]=y.useState("");y.useEffect(()=>{if(e){const L=IO(n.body,n.subject),V=L.items.reduce((ge,Ne)=>ge+Ne.total,0),Z=L.labor?L.labor.reduce((ge,Ne)=>ge+Ne.total,0):0,K=V+Z,de=K*.21,B=K+de;k({items:L.items,labor:L.labor,subtotal:K,vatRate:21,vatAmount:de,total:B,notes:L.notes||n.body}),M(n.subject||"Nieuwe taak"),R(`Email van ${n.from}:

${n.body}`);const le=DO(n.from);let ye=le?a.find(ge=>ge.id===le):null;ye||(ye=a.find(ge=>{var Ne;return ge.email.toLowerCase()===n.from.toLowerCase()||((Ne=ge.emailAddresses)==null?void 0:Ne.some(Me=>Me.toLowerCase()===n.from.toLowerCase()))})),b((ye==null?void 0:ye.id)||""),C(n.from.split("@")[0])}},[e,n,a]);const P=()=>{k({...O,items:[...O.items||[],{description:"",quantity:1,pricePerUnit:0,total:0}]})},z=()=>{k({...O,labor:[...O.labor||[],{description:"",hours:1,hourlyRate:50,total:50}]})},U=(L,V,Z)=>{const K=[...O.items||[]];K[L]={...K[L],[V]:Z},(V==="quantity"||V==="pricePerUnit")&&(K[L].total=K[L].quantity*K[L].pricePerUnit),_({...O,items:K})},q=(L,V,Z)=>{const K=[...O.labor||[]];K[L]={...K[L],[V]:Z},(V==="hours"||V==="hourlyRate")&&(K[L].total=K[L].hours*K[L].hourlyRate),_({...O,labor:K})},Y=L=>{const V=[...O.items||[]];V.splice(L,1),_({...O,items:V})},ee=L=>{const V=[...O.labor||[]];V.splice(L,1),_({...O,labor:V})},_=L=>{const V=(L.items||[]).reduce((le,ye)=>le+ye.total,0),Z=(L.labor||[]).reduce((le,ye)=>le+ye.total,0),K=V+Z,de=K*((L.vatRate||21)/100),B=K+de;k({...L,subtotal:K,vatAmount:de,total:B})},G=async()=>{if(!v&&!w&&g!=="notification"){alert("Selecteer een klant of maak een nieuwe klant aan");return}try{let L=v;if(w&&!L&&g!=="notification"){if(!S.trim()){alert("Vul een naam in voor de nieuwe klant");return}L=await l(n.from,S)}switch(g){case"order":if(!L){alert("Geen klant geselecteerd");return}const V={id:`Q${Date.now()}`,customerId:L,items:O.items||[],labor:O.labor&&O.labor.length>0?O.labor:void 0,subtotal:O.subtotal||0,vatRate:O.vatRate||21,vatAmount:O.vatAmount||0,total:O.total||0,notes:O.notes||"",status:"draft",createdDate:new Date().toISOString(),validUntil:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],createdBy:o,history:[{timestamp:new Date().toISOString(),action:"created",performedBy:o,details:`Aangemaakt vanuit email: ${n.subject}`}]};d(V,L),h&&h({type:"email",subject:n.subject,description:n.body,customerId:L||void 0});break;case"task":m({title:E,description:D,customerId:L||void 0}),h&&h({type:"email",subject:n.subject,description:n.body,customerId:L||void 0});break;case"notification":f({message:`${n.subject}: Van ${n.from}: ${n.body.substring(0,200)}${n.body.length>200?"...":""}`}),h&&h({type:"email",subject:n.subject,description:n.body});break}r()}catch(L){console.error("Error processing email:",L),alert("Fout bij verwerken email")}};return e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Email Verwerken"}),t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("strong",{children:"Van:"})," ",n.from]}),t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("strong",{children:"Onderwerp:"})," ",n.subject]}),t.jsx("p",{className:"text-sm text-gray-600 mt-2",children:t.jsx("strong",{children:"Bericht:"})}),t.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:n.body})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wat wil je doen met deze email?"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>p("order"),className:`px-4 py-2 rounded ${g==="order"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Offerte/Order"}),t.jsx("button",{onClick:()=>p("task"),className:`px-4 py-2 rounded ${g==="task"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Taak"}),t.jsx("button",{onClick:()=>p("notification"),className:`px-4 py-2 rounded ${g==="notification"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Notificatie"})]})]}),g!=="notification"&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Klant ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsxs("select",{value:v,onChange:L=>{b(L.target.value),N(!1)},className:"flex-1 border rounded px-3 py-2",disabled:w,children:[t.jsx("option",{value:"",children:"Selecteer klant..."}),a.map(L=>t.jsxs("option",{value:L.id,children:[L.name," (",L.email,")"]},L.id))]}),t.jsx("button",{onClick:()=>{N(!w),b("")},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:w?"Annuleer":"Nieuwe Klant"})]}),w&&t.jsxs("div",{className:"mt-2 p-3 bg-blue-50 rounded",children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Naam"}),t.jsx("input",{type:"text",value:S,onChange:L=>C(L.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Naam van de klant"}),t.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Email: ",n.from]})]})]}),g==="order"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h3",{className:"font-semibold",children:"Producten/Materialen"}),t.jsx("button",{onClick:P,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"+ Item"})]}),t.jsxs("div",{className:"space-y-2",children:[(O.items||[]).map((L,V)=>t.jsxs("div",{className:"flex gap-2 items-center border p-2 rounded",children:[t.jsx("input",{type:"text",value:L.description,onChange:Z=>U(V,"description",Z.target.value),placeholder:"Beschrijving",className:"flex-1 border rounded px-2 py-1"}),t.jsx("input",{type:"number",value:L.quantity,onChange:Z=>U(V,"quantity",parseInt(Z.target.value)||0),placeholder:"Aantal",className:"w-20 border rounded px-2 py-1",min:"1"}),t.jsx("input",{type:"number",value:L.pricePerUnit,onChange:Z=>U(V,"pricePerUnit",parseFloat(Z.target.value)||0),placeholder:"Prijs",className:"w-24 border rounded px-2 py-1",step:"0.01",min:"0"}),t.jsxs("span",{className:"w-24 text-right font-medium",children:["",L.total.toFixed(2)]}),t.jsx("button",{onClick:()=>Y(V),className:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:""})]},V)),(!O.items||O.items.length===0)&&t.jsx("p",{className:"text-sm text-gray-500 italic",children:"Geen items gevonden. Voeg handmatig items toe."})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("h3",{className:"font-semibold",children:"Werkuren/Diensten"}),t.jsx("button",{onClick:z,className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"+ Werkuren"})]}),t.jsx("div",{className:"space-y-2",children:(O.labor||[]).map((L,V)=>t.jsxs("div",{className:"flex gap-2 items-center border p-2 rounded",children:[t.jsx("input",{type:"text",value:L.description,onChange:Z=>q(V,"description",Z.target.value),placeholder:"Beschrijving",className:"flex-1 border rounded px-2 py-1"}),t.jsx("input",{type:"number",value:L.hours,onChange:Z=>q(V,"hours",parseFloat(Z.target.value)||0),placeholder:"Uren",className:"w-20 border rounded px-2 py-1",step:"0.1",min:"0"}),t.jsx("input",{type:"number",value:L.hourlyRate,onChange:Z=>q(V,"hourlyRate",parseFloat(Z.target.value)||0),placeholder:"Tarief",className:"w-24 border rounded px-2 py-1",step:"0.01",min:"0"}),t.jsxs("span",{className:"w-24 text-right font-medium",children:["",L.total.toFixed(2)]}),t.jsx("button",{onClick:()=>ee(V),className:"px-2 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:""})]},V))})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notities"}),t.jsx("textarea",{value:O.notes||"",onChange:L=>k({...O,notes:L.target.value}),className:"w-full border rounded px-3 py-2",rows:4,placeholder:"Extra notities..."})]}),t.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{children:"Subtotaal (excl. BTW):"}),t.jsxs("span",{className:"font-medium",children:["",(O.subtotal||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{children:["BTW (",O.vatRate||21,"%):"]}),t.jsxs("span",{className:"font-medium",children:["",(O.vatAmount||0).toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between pt-2 border-t font-bold text-lg",children:[t.jsx("span",{children:"Totaal (incl. BTW):"}),t.jsxs("span",{children:["",(O.total||0).toFixed(2)]})]})]})]}),g==="task"&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Titel"}),t.jsx("input",{type:"text",value:E,onChange:L=>M(L.target.value),className:"w-full border rounded px-3 py-2",placeholder:"Titel van de taak"}),t.jsx("label",{className:"block text-sm font-medium mb-2 mt-4",children:"Beschrijving"}),t.jsx("textarea",{value:D,onChange:L=>R(L.target.value),className:"w-full border rounded px-3 py-2",rows:6,placeholder:"Beschrijving van de taak"})]}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Annuleren"}),t.jsxs("button",{onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:[g==="order"&&"Offerte Aanmaken",g==="task"&&"Taak Aanmaken",g==="notification"&&"Notificatie Aanmaken"]})]})]})}):null},xK=({customers:e,setCustomers:r,sales:n,tasks:a,setTasks:l,leads:o,setLeads:d,interactions:m,setInteractions:f,employees:h,currentUser:g,isAdmin:p,invoices:v,setInvoices:b,quotes:w,setQuotes:N,workOrders:S,setWorkOrders:C,inventory:O,emails:k,setEmails:E,emailTemplates:M,setEmailTemplates:D})=>{const[R,P]=y.useState("dashboard"),[z,U]=y.useState(!1),[q,Y]=y.useState(!1),[ee,_]=y.useState(null),[G,L]=y.useState(null),[V,Z]=y.useState(""),[K,de]=y.useState(!1),[B,le]=y.useState(!1),[ye,ge]=y.useState(null),[Ne,Me]=y.useState(!1),[ce,Le]=y.useState(!1),[X,Re]=y.useState(!1),[at,je]=y.useState(!1),[vt,Xe]=y.useState(!1),[ut,pt]=y.useState(null),[bt,nr]=y.useState(!1),[zt,te]=y.useState(!1),[Te,_e]=y.useState(!1),[qe,Ye]=y.useState(null),[st,H]=y.useState(null),[Ae,Ee]=y.useState(""),[W,me]=y.useState({customerId:"",items:[],labor:[],vatRate:21,notes:"",paymentTerms:"14 dagen",issueDate:"",dueDate:""}),[Ve,We]=y.useState(!1),[Fe,F]=y.useState(null),[se,oe]=y.useState(null),[Pe,$e]=y.useState(!1),[Ct,it]=y.useState(!1),[Ke,xt]=y.useState(null),[Ar,ur]=y.useState(null),[jn,mn]=y.useState({customerId:"",items:[],labor:[],vatRate:21,notes:"",validUntil:""}),[Tt,Pr]=y.useState({name:"",email:"",phone:"",type:"business",address:"",source:"website",company:"",notes:""}),[$t,tn]=y.useState({name:"",email:"",phone:"",type:"business",address:"",source:"website",company:"",notes:""}),[pr,Nn]=y.useState({name:"",email:"",phone:"",company:"",source:"website",estimatedValue:0,notes:""}),[Nt,fn]=y.useState({type:"call",subject:"",description:"",relatedTo:"",relatedType:"lead",followUpRequired:!1,followUpDate:""}),[lr,_r]=y.useState({title:"",description:"",customerId:"",priority:"medium",dueDate:""}),Ht=y.useMemo(()=>{const A=o.length,Q=o.filter(Kt=>!["won","lost"].includes(Kt.status)).length,J=o.filter(Kt=>Kt.status==="won").length,we=o.filter(Kt=>Kt.status==="lost").length,ot=A>0?(J/A*100).toFixed(1):"0.0",Qe=e.length,gt=e.filter(Kt=>Kt.type==="business").length,At=e.filter(Kt=>Kt.type==="private").length,kt=o.reduce((Kt,Oa)=>Kt+(Oa.estimatedValue||0),0),ar=o.filter(Kt=>Kt.status==="won").reduce((Kt,Oa)=>Kt+(Oa.estimatedValue||0),0),wt=m.length,Un=m.filter(Kt=>{const Oa=new Date(Kt.date),yo=new Date;return Oa.getMonth()===yo.getMonth()&&Oa.getFullYear()===yo.getFullYear()}).length,Zt=m.filter(Kt=>Kt.followUpRequired&&Kt.followUpDate).length,rn=a.filter(Kt=>Kt.status!=="done").length,Ba=a.filter(Kt=>Kt.status==="done"?!1:new Date(Kt.dueDate)<new Date).length;return{totalLeads:A,activeLeads:Q,wonLeads:J,lostLeads:we,conversionRate:ot,totalCustomers:Qe,businessCustomers:gt,privateCustomers:At,totalValue:kt,wonValue:ar,totalInteractions:wt,thisMonthInteractions:Un,pendingFollowUps:Zt,activeTasks:rn,overdueTasks:Ba}},[o,e,m,a]),Tr=()=>{if(!Tt.name||!Tt.email){alert("Vul naam en email in!");return}const A={id:`c${Date.now()}`,...Tt,since:new Date().toISOString().split("T")[0]};r([...e,A]),Pr({name:"",email:"",phone:"",type:"business",address:"",source:"website",company:"",notes:""}),de(!1)},Sr=()=>{if(!$t.name||!$t.email||!ye){alert("Vul naam en email in!");return}r(e.map(A=>A.id===ye.id?{...A,...$t}:A)),tn({name:"",email:"",phone:"",type:"business",address:"",source:"website",company:"",notes:""}),ge(null),le(!1)},ft=A=>{ge(A),tn({name:A.name,email:A.email,phone:A.phone,type:A.type||"business",address:A.address||"",source:A.source||"website",company:A.company||"",notes:A.notes||""}),le(!0)},Xt=()=>{if(!pr.name||!pr.email){alert("Vul naam en email in!");return}const A={id:`l${Date.now()}`,...pr,status:"new",createdDate:new Date().toISOString().split("T")[0]};d([...o,A]),Nn({name:"",email:"",phone:"",company:"",source:"website",estimatedValue:0,notes:""}),Me(!1)},ts=()=>{if(!Nt.subject||!Nt.relatedTo){alert("Vul onderwerp en gekoppelde entiteit in!");return}const A={id:`int${Date.now()}`,type:Nt.type,subject:Nt.subject,description:Nt.description,date:new Date().toISOString(),employeeId:g.employeeId,followUpRequired:Nt.followUpRequired,followUpDate:Nt.followUpDate||void 0,[Nt.relatedType==="lead"?"leadId":"customerId"]:Nt.relatedTo};f([...m,A]),fn({type:"call",subject:"",description:"",relatedTo:"",relatedType:"lead",followUpRequired:!1,followUpDate:""}),Le(!1)},La=()=>{if(!lr.title||!lr.dueDate){alert("Vul titel en deadline in!");return}const A={id:`task${Date.now()}`,title:lr.title,description:lr.description,customerId:lr.customerId||void 0,priority:lr.priority,status:"todo",dueDate:lr.dueDate,createdDate:new Date().toISOString().split("T")[0]};l([...a,A]),_r({title:"",description:"",customerId:"",priority:"medium",dueDate:""}),Re(!1)},Ca=(A,Q)=>{d(o.map(J=>{if(J.id===A){const we={status:Q};return(Q==="won"||Q==="lost")&&(we.lastContactDate=new Date().toISOString().split("T")[0]),{...J,...we}}return J}))},wn=(A,Q)=>{l(a.map(J=>J.id===A?{...J,status:Q}:J))},$a=A=>{const Q=o.find(we=>we.id===A);if(!Q)return;const J={id:`c${Date.now()}`,name:Q.name,email:Q.email,phone:Q.phone,type:Q.company?"business":"private",company:Q.company,address:"",source:Q.source,since:new Date().toISOString().split("T")[0],notes:Q.notes};r([...e,J]),Ca(A,"won"),f(m.map(we=>we.leadId===A?{...we,customerId:J.id,leadId:void 0}:we)),alert(`Lead "${Q.name}" succesvol geconverteerd naar klant!`)},Bs=A=>{confirm("Weet je zeker dat je deze klant wilt verwijderen?")&&r(e.filter(Q=>Q.id!==A))},hn=A=>{confirm("Weet je zeker dat je deze lead wilt verwijderen?")&&d(o.filter(Q=>Q.id!==A))},gn=A=>{confirm("Weet je zeker dat je deze taak wilt verwijderen?")&&l(a.filter(Q=>Q.id!==A))},Qr=A=>n.filter(Q=>Q.customerId===A),Bn=A=>Qr(A).reduce((Q,J)=>Q+J.total,0),Bt=A=>{var Q;return A?((Q=e.find(J=>J.id===A))==null?void 0:Q.name)||"Onbekend":"Algemeen"},sa=A=>{var Q;return A&&((Q=o.find(J=>J.id===A))==null?void 0:Q.name)||"Onbekend"},Vr=A=>{var Q;return A&&((Q=h.find(J=>J.id===A))==null?void 0:Q.name)||"Onbekend"},In=A=>o.filter(Q=>Q.status===A),Fn=A=>{switch(A){case"new":return"bg-gray-100 text-gray-800 border-gray-400";case"contacted":return"bg-blue-100 text-blue-800 border-blue-400";case"qualified":return"bg-indigo-100 text-indigo-800 border-indigo-400";case"proposal":return"bg-purple-100 text-purple-800 border-purple-400";case"negotiation":return"bg-yellow-100 text-yellow-800 border-yellow-400";case"won":return"bg-green-100 text-green-800 border-green-400";case"lost":return"bg-red-100 text-red-800 border-red-400"}},Ai=A=>{switch(A){case"new":return"Nieuw";case"contacted":return"Contact gemaakt";case"qualified":return"Gekwalificeerd";case"proposal":return"Voorstel gedaan";case"negotiation":return"Onderhandeling";case"won":return"Gewonnen";case"lost":return"Verloren"}},Fs=A=>{switch(A){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},rs=A=>{switch(A){case"done":return"bg-green-100 text-green-800";case"in_progress":return"bg-blue-100 text-blue-800";case"todo":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Us=A=>{pt(A),je(!0)},ns=A=>{const Q=w.filter(wt=>wt.customerId===A),J=v.filter(wt=>wt.customerId===A),we=S.filter(wt=>wt.customerId===A),ot={draft:Q.filter(wt=>wt.status==="draft"),sent:Q.filter(wt=>wt.status==="sent"),approved:Q.filter(wt=>wt.status==="approved"),rejected:Q.filter(wt=>wt.status==="rejected"),expired:Q.filter(wt=>wt.status==="expired")},Qe={draft:J.filter(wt=>wt.status==="draft"),sent:J.filter(wt=>wt.status==="sent"),paid:J.filter(wt=>wt.status==="paid"),overdue:J.filter(wt=>wt.status==="overdue")},gt={todo:we.filter(wt=>wt.status==="To Do"),inProgress:we.filter(wt=>wt.status==="In Uitvoering"),pending:we.filter(wt=>wt.status==="Pending"),completed:we.filter(wt=>wt.status==="Voltooid")},At=Q.length+we.length+J.length,kt=Qe.paid.length,ar=At>0?kt/At*100:0;return{quotes:Q,invoices:J,workOrders:we,quotesByStatus:ot,invoicesByStatus:Qe,workOrdersByStatus:gt,progressPercentage:ar,totalSteps:At,completedSteps:kt}},Da=A=>{const Q=v.filter(Zt=>Zt.customerId===A),J=w.filter(Zt=>Zt.customerId===A),we=Q.filter(Zt=>Zt.status==="paid"||["sent","draft","overdue"].includes(Zt.status)),ot=Q.reduce((Zt,rn)=>Zt+rn.total,0),Qe=Q.filter(Zt=>Zt.status==="paid"),gt=Qe.reduce((Zt,rn)=>Zt+rn.total,0),At=Q.filter(Zt=>["sent","draft"].includes(Zt.status)),kt=At.reduce((Zt,rn)=>Zt+rn.total,0),ar=Q.filter(Zt=>Zt.status==="overdue"),wt=ar.reduce((Zt,rn)=>Zt+rn.total,0),Un=J.reduce((Zt,rn)=>Zt+rn.total,0);return{invoices:we,quotes:J,totalInvoiced:ot,totalPaid:gt,totalOutstanding:kt,totalOverdue:wt,totalQuotes:Un,paidInvoices:Qe,outstandingInvoices:At,overdueInvoices:ar}},Sn=()=>{const A=new Date().getFullYear(),Q=v.filter(we=>we.invoiceNumber.startsWith(`${A}-`)).map(we=>parseInt(we.invoiceNumber.split("-")[1])).filter(we=>!isNaN(we)),J=Q.length>0?Math.max(...Q)+1:1;return`${A}-${String(J).padStart(3,"0")}`},mr=()=>{const A=W.items.reduce((Qe,gt)=>Qe+gt.total,0),Q=W.labor.reduce((Qe,gt)=>Qe+gt.total,0),J=A+Q,we=J*(W.vatRate/100),ot=J+we;return{subtotal:J,vatAmount:we,total:ot}},za=(A,Q,J,we)=>({timestamp:new Date().toISOString(),action:Q,performedBy:g.employeeId,details:J,...we}),ia=(A,Q,J)=>{const we=[...W.items];we[A]={...we[A],[Q]:J},(Q==="quantity"||Q==="pricePerUnit")&&(we[A].total=we[A].quantity*we[A].pricePerUnit),me({...W,items:we})},T=(A,Q,J)=>{const we=[...W.labor];we[A]={...we[A],[Q]:J},(Q==="hours"||Q==="hourlyRate")&&(we[A].total=we[A].hours*we[A].hourlyRate),me({...W,labor:we})},ae=A=>{me({...W,items:W.items.filter((Q,J)=>J!==A)})},ne=A=>{me({...W,labor:W.labor.filter((Q,J)=>J!==A)})},ve=()=>{const A={description:"",quantity:1,pricePerUnit:0,total:0};me({...W,items:[...W.items,A]})},Ie=()=>{const A={description:"",hours:1,hourlyRate:50,total:50};me({...W,labor:[...W.labor,A]})},Ue=A=>{const Q=v.find(ot=>ot.id===A);if(!Q)return;const J=new Date().toISOString().split("T")[0],we=new Date;we.setDate(we.getDate()+14),me({customerId:Q.customerId,items:Q.items,labor:Q.labor||[],vatRate:Q.vatRate,notes:Q.notes||"",paymentTerms:Q.paymentTerms,issueDate:J,dueDate:we.toISOString().split("T")[0]}),nr(!0)},Je=A=>{const Q=v.find(J=>J.id===A);Q&&(me({customerId:Q.customerId,items:Q.items,labor:Q.labor||[],vatRate:Q.vatRate,notes:Q.notes||"",paymentTerms:Q.paymentTerms,issueDate:Q.issueDate,dueDate:Q.dueDate}),Ye(A),te(!0))},Dt=(A=!1)=>{var At;if(!W.customerId||W.items.length===0||!W.issueDate||!W.dueDate){alert("Vul alle verplichte velden in!");return}const{subtotal:Q,vatAmount:J,total:we}=mr(),ot=new Date().toISOString(),Qe=Bt(W.customerId),gt={id:`inv${Date.now()}`,invoiceNumber:Sn(),customerId:W.customerId,items:W.items,labor:W.labor.length>0?W.labor:void 0,subtotal:Q,vatRate:W.vatRate,vatAmount:J,total:we,status:"draft",issueDate:W.issueDate,dueDate:W.dueDate,notes:W.notes,paymentTerms:W.paymentTerms,createdBy:g.employeeId,timestamps:{created:ot},history:[za("invoice","created",`Factuur gecloneerd door ${Vr(g.employeeId)} voor klant ${Qe}`)]};b([...v,gt]),me({customerId:"",items:[],labor:[],vatRate:21,notes:"",paymentTerms:"14 dagen",issueDate:"",dueDate:""}),nr(!1),A?((At=gt.labor)!=null&&At.reduce((kt,ar)=>kt+ar.hours,0),H(gt.id),Ee(""),_e(!0)):alert(` Factuur ${gt.invoiceNumber} succesvol gecloneerd!`)},Ot=()=>{if(!qe)return;if(!W.customerId||W.items.length===0||!W.issueDate||!W.dueDate){alert("Vul alle verplichte velden in!");return}const{subtotal:A,vatAmount:Q,total:J}=mr(),we=v.find(Qe=>Qe.id===qe);if(!we)return;const ot={...we,customerId:W.customerId,items:W.items,labor:W.labor.length>0?W.labor:void 0,subtotal:A,vatRate:W.vatRate,vatAmount:Q,total:J,issueDate:W.issueDate,dueDate:W.dueDate,notes:W.notes,paymentTerms:W.paymentTerms,history:[...we.history||[],za("invoice","updated",`Factuur bijgewerkt door ${Vr(g.employeeId)}`)]};b(v.map(Qe=>Qe.id===qe?ot:Qe)),Ye(null),te(!1),me({customerId:"",items:[],labor:[],vatRate:21,notes:"",paymentTerms:"14 dagen",issueDate:"",dueDate:""}),alert(` Factuur ${ot.invoiceNumber} succesvol bijgewerkt!`)},Ce=A=>{const Q=v.find(J=>J.id===A);if(Q){if(Q.status!=="sent"&&Q.status!=="draft"){alert("Alleen verzonden of concept facturen kunnen worden omgezet naar werkorders!");return}if(Q.workOrderId){alert("Deze factuur heeft al een gekoppelde werkorder!");return}H(A),Ee(""),_e(!0)}},De=()=>{var gt;if(!st||!Ae){alert("Selecteer een medewerker!");return}const A=v.find(At=>At.id===st);if(!A)return;const Q=new Date().toISOString(),J=`wo${Date.now()}`,we=Bt(A.customerId),ot=((gt=A.labor)==null?void 0:gt.reduce((At,kt)=>At+kt.hours,0))||0,Qe={id:J,title:`${we} - Factuur ${A.invoiceNumber}`,description:A.notes||`Werkorder aangemaakt vanuit factuur ${A.invoiceNumber}`,status:"To Do",assignedTo:Ae,assignedBy:g.employeeId,convertedBy:g.employeeId,requiredInventory:A.items.filter(At=>At.inventoryItemId).map(At=>({itemId:At.inventoryItemId,quantity:At.quantity})),createdDate:new Date().toISOString().split("T")[0],customerId:A.customerId,location:A.location,scheduledDate:A.scheduledDate,invoiceId:A.id,estimatedHours:ot,estimatedCost:A.total,notes:`Geschatte uren: ${ot}u
Geschatte kosten: ${A.total.toFixed(2)}`,timestamps:{created:Q,converted:Q,assigned:Q},history:[{timestamp:Q,action:"created",performedBy:g.employeeId,details:`Werkorder aangemaakt door ${Vr(g.employeeId)}`},{timestamp:Q,action:"converted",performedBy:g.employeeId,details:`Geconverteerd van factuur ${A.invoiceNumber} door ${Vr(g.employeeId)}`},{timestamp:Q,action:"assigned",performedBy:g.employeeId,details:`Toegewezen aan ${Vr(Ae)} door ${Vr(g.employeeId)}`,toAssignee:Ae}]};C([...S,Qe]),b(v.map(At=>At.id===st?{...At,workOrderId:Qe.id,timestamps:{...At.timestamps,convertedToWorkOrder:Q},history:[...At.history||[],za("invoice","converted_to_workorder",`Geconverteerd naar werkorder ${Qe.id} door ${Vr(g.employeeId)}`)]}:At)),_e(!1),H(null),Ee(""),alert(` Werkorder ${Qe.id} succesvol aangemaakt en toegewezen aan ${Vr(Ae)}!`)},Be=(A,Q)=>{if(A==="invoice"){const J=v.find(we=>we.id===Q);J&&(F("invoice"),oe(J),We(!0))}else{const J=w.find(we=>we.id===Q);J&&(F("quote"),oe(J),We(!0))}},rt=A=>{const Q=w.find(J=>J.id===A);Q&&(mn({customerId:Q.customerId,items:Q.items,labor:Q.labor||[],vatRate:Q.vatRate,notes:Q.notes||"",validUntil:Q.validUntil}),xt(A),it(!0))},et=A=>{const Q=w.find(J=>J.id===A);Q&&(mn({customerId:Q.customerId,items:Q.items,labor:Q.labor||[],vatRate:Q.vatRate,notes:Q.notes||"",validUntil:""}),$e(!0))},lt=A=>{ur(A),_e(!0)},ze=A=>{switch(A){case"paid":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Ze=A=>{switch(A){case"approved":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"expired":return"bg-gray-100 text-gray-800";case"draft":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 sm:mb-8",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral",children:"CRM - Klantrelatiebeheer"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Beheer leads, klanten, interacties en sales pipeline"})]})}),t.jsxs("div",{className:"flex gap-3 mb-8 flex-wrap",children:[t.jsx("button",{onClick:()=>P("dashboard"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${R==="dashboard"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Dashboard"}),t.jsx("button",{onClick:()=>P("leads"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${R==="leads"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Leads & Pipeline"}),t.jsx("button",{onClick:()=>P("customers"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${R==="customers"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Klanten"}),t.jsx("button",{onClick:()=>P("interactions"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${R==="interactions"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Interacties"}),t.jsx("button",{onClick:()=>P("email"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${R==="email"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Email"}),t.jsx("button",{onClick:()=>P("tasks"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${R==="tasks"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" Taken"})]}),R==="dashboard"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral",children:"Leads"}),t.jsx("span",{className:"text-3xl",children:""})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Totaal:"}),t.jsx("span",{className:"text-2xl font-bold text-neutral",children:Ht.totalLeads})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Actief:"}),t.jsx("span",{className:"font-semibold text-blue-600",children:Ht.activeLeads})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Gewonnen:"}),t.jsx("span",{className:"font-semibold text-green-600",children:Ht.wonLeads})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Verloren:"}),t.jsx("span",{className:"font-semibold text-red-600",children:Ht.lostLeads})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral",children:"Conversie"}),t.jsx("span",{className:"text-3xl",children:""})]}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-4xl font-bold text-green-600 mb-2",children:[Ht.conversionRate,"%"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"Lead naar Klant"}),t.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["",Ht.wonValue.toLocaleString()," gewonnen"]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-purple-500",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral",children:"Klanten"}),t.jsx("span",{className:"text-3xl",children:""})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Totaal:"}),t.jsx("span",{className:"text-2xl font-bold text-neutral",children:Ht.totalCustomers})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Zakelijk:"}),t.jsx("span",{className:"font-semibold text-purple-600",children:Ht.businessCustomers})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Particulier:"}),t.jsx("span",{className:"font-semibold text-purple-600",children:Ht.privateCustomers})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-orange-500",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral",children:"Activiteiten"}),t.jsx("span",{className:"text-3xl",children:""})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Interacties (maand):"}),t.jsx("span",{className:"font-semibold text-orange-600",children:Ht.thisMonthInteractions})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Follow-ups:"}),t.jsx("span",{className:"font-semibold text-yellow-600",children:Ht.pendingFollowUps})]}),t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Actieve taken:"}),t.jsx("span",{className:"font-semibold text-blue-600",children:Ht.activeTasks})]}),Ht.overdueTasks>0&&t.jsxs("div",{className:"flex justify-between items-center text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Verlopen:"}),t.jsx("span",{className:"font-semibold text-red-600",children:Ht.overdueTasks})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsxs("h3",{className:"text-lg font-semibold text-neutral mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),"Pipeline Waarde"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Totale Pipeline Waarde"}),t.jsxs("div",{className:"text-3xl font-bold text-primary",children:["",Ht.totalValue.toLocaleString()]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Gewonnen Waarde"}),t.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["",Ht.wonValue.toLocaleString()]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:"Recente Activiteiten"}),t.jsx("div",{className:"space-y-3",children:m.sort((A,Q)=>new Date(Q.date).getTime()-new Date(A.date).getTime()).slice(0,5).map(A=>{const Q=A.leadId?sa(A.leadId):Bt(A.customerId),J=Qp.find(we=>we.value===A.type);return t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-2xl",children:J==null?void 0:J.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-medium text-neutral",children:A.subject}),t.jsx("span",{className:"text-xs text-gray-500",children:new Date(A.date).toLocaleDateString("nl-NL")})]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:A.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[t.jsxs("span",{children:["Met: ",Q]}),t.jsxs("span",{children:["Door: ",Vr(A.employeeId)]}),A.followUpRequired&&t.jsxs("span",{className:"text-yellow-600 font-medium",children:[" Follow-up: ",A.followUpDate]})]})]})]},A.id)})})]})]}),R==="leads"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex justify-end",children:p&&t.jsx("button",{onClick:()=>Me(!Ne),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Lead"})}),Ne&&p&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Nieuwe Lead Toevoegen"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Naam *",value:pr.name,onChange:A=>Nn({...pr,name:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"email",placeholder:"Email *",value:pr.email,onChange:A=>Nn({...pr,email:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"tel",placeholder:"Telefoon",value:pr.phone,onChange:A=>Nn({...pr,phone:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"text",placeholder:"Bedrijf",value:pr.company,onChange:A=>Nn({...pr,company:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("select",{value:pr.source,onChange:A=>Nn({...pr,source:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:Yp.map(A=>t.jsx("option",{value:A,children:A},A))}),t.jsx("input",{type:"number",placeholder:"Geschatte waarde ()",value:pr.estimatedValue||"",onChange:A=>Nn({...pr,estimatedValue:parseFloat(A.target.value)||0}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("textarea",{placeholder:"Notities",value:pr.notes,onChange:A=>Nn({...pr,notes:A.target.value}),rows:3,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:Xt,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Toevoegen"}),t.jsx("button",{onClick:()=>Me(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-7 gap-4",children:["new","contacted","qualified","proposal","negotiation","won","lost"].map(A=>{const Q=In(A),J=Q.reduce((we,ot)=>we+(ot.estimatedValue||0),0);return t.jsxs("div",{className:`rounded-lg p-4 min-h-[400px] ${Fn(A)}`,children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"font-semibold text-sm",children:Ai(A)}),t.jsx("span",{className:"px-2 py-1 bg-white bg-opacity-70 rounded-full text-xs font-bold",children:Q.length})]}),J>0&&t.jsxs("div",{className:"text-xs font-medium opacity-80",children:["",J.toLocaleString()]})]}),t.jsx("div",{className:"space-y-3",children:Q.map(we=>t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h4",{className:"font-semibold text-neutral text-sm",children:we.name}),p&&A!=="won"&&A!=="lost"&&t.jsx("button",{onClick:()=>hn(we.id),className:"text-red-500 hover:text-red-700 text-xs",title:"Verwijderen",children:""})]}),we.company&&t.jsx("p",{className:"text-xs text-gray-600 mb-2",children:we.company}),we.estimatedValue&&t.jsxs("p",{className:"text-sm font-bold text-primary mb-2",children:["",we.estimatedValue.toLocaleString()]}),t.jsxs("div",{className:"space-y-1 text-xs text-gray-600 mb-3",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsx("span",{className:"truncate",children:we.email})]}),we.phone&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsx("span",{children:we.phone})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsx("span",{children:we.source})]})]}),we.notes&&t.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:we.notes}),we.nextFollowUpDate&&t.jsx("div",{className:"mb-3 text-xs",children:t.jsxs("span",{className:"text-yellow-600",children:[" Follow-up: ",we.nextFollowUpDate]})}),p&&t.jsxs("div",{className:"flex flex-col gap-2",children:[A==="new"&&t.jsx("button",{onClick:()=>Ca(we.id,"contacted"),className:"w-full px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:" Gecontacteerd"}),A==="contacted"&&t.jsx("button",{onClick:()=>Ca(we.id,"qualified"),className:"w-full px-3 py-1 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600",children:" Gekwalificeerd"}),A==="qualified"&&t.jsx("button",{onClick:()=>Ca(we.id,"proposal"),className:"w-full px-3 py-1 bg-purple-500 text-white text-xs rounded hover:bg-purple-600",children:" Voorstel"}),A==="proposal"&&t.jsx("button",{onClick:()=>Ca(we.id,"negotiation"),className:"w-full px-3 py-1 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600",children:" Onderhandeling"}),["negotiation","proposal","qualified"].includes(A)&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>$a(we.id),className:"w-full px-3 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600",children:" Gewonnen"}),t.jsx("button",{onClick:()=>Ca(we.id,"lost"),className:"w-full px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:" Verloren"})]})]})]},we.id))})]},A)})})]}),R==="customers"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:" Zoek op klantnaam of bedrijfsnaam...",value:V,onChange:A=>Z(A.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary text-base"}),t.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),V&&t.jsx("button",{onClick:()=>Z(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",title:"Wis zoekterm",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),p&&t.jsx("button",{onClick:()=>de(!K),className:"px-4 sm:px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors whitespace-nowrap",children:"+ Nieuwe Klant"})]}),V&&t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:(()=>{const A=e.filter(Q=>{const J=V.toLowerCase();return Q.name.toLowerCase().includes(J)||Q.company&&Q.company.toLowerCase().includes(J)||Q.email&&Q.email.toLowerCase().includes(J)});return`${A.length} klant${A.length!==1?"en":""} gevonden`})()})]}),K&&p&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Nieuwe Klant Toevoegen"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Naam *",value:Tt.name,onChange:A=>Pr({...Tt,name:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"email",placeholder:"Email *",value:Tt.email,onChange:A=>Pr({...Tt,email:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"tel",placeholder:"Telefoon",value:Tt.phone,onChange:A=>Pr({...Tt,phone:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:Tt.type,onChange:A=>Pr({...Tt,type:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"business",children:"Zakelijk"}),t.jsx("option",{value:"private",children:"Particulier"})]}),t.jsx("input",{type:"text",placeholder:"Bedrijf",value:Tt.company,onChange:A=>Pr({...Tt,company:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("select",{value:Tt.source,onChange:A=>Pr({...Tt,source:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:Yp.map(A=>t.jsx("option",{value:A,children:A},A))}),t.jsx("input",{type:"text",placeholder:"Adres",value:Tt.address,onChange:A=>Pr({...Tt,address:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"}),t.jsx("textarea",{placeholder:"Notities (intern)",value:Tt.notes,onChange:A=>Pr({...Tt,notes:A.target.value}),rows:3,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:Tr,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Toevoegen"}),t.jsx("button",{onClick:()=>de(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),B&&ye&&p&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Klant Bewerken"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Naam *",value:$t.name,onChange:A=>tn({...$t,name:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"email",placeholder:"Email *",value:$t.email,onChange:A=>tn({...$t,email:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"tel",placeholder:"Telefoon",value:$t.phone,onChange:A=>tn({...$t,phone:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:$t.type,onChange:A=>tn({...$t,type:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"business",children:"Zakelijk"}),t.jsx("option",{value:"private",children:"Particulier"})]}),t.jsx("input",{type:"text",placeholder:"Bedrijf",value:$t.company,onChange:A=>tn({...$t,company:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("select",{value:$t.source,onChange:A=>tn({...$t,source:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:Yp.map(A=>t.jsx("option",{value:A,children:A},A))}),t.jsx("input",{type:"text",placeholder:"Adres",value:$t.address,onChange:A=>tn({...$t,address:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"}),t.jsx("textarea",{placeholder:"Notities (intern)",value:$t.notes,onChange:A=>tn({...$t,notes:A.target.value}),rows:3,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:Sr,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Opslaan"}),t.jsx("button",{onClick:()=>{le(!1),ge(null),tn({name:"",email:"",phone:"",type:"business",address:"",source:"website",company:"",notes:""})},className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.filter(A=>{if(!V)return!0;const Q=V.toLowerCase();return A.name.toLowerCase().includes(Q)||A.company&&A.company.toLowerCase().includes(Q)||A.email&&A.email.toLowerCase().includes(Q)}).map(A=>{const Q=Qr(A.id),J=Bn(A.id),we=m.filter(ot=>ot.customerId===A.id);return t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-semibold text-lg",children:A.name.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:A.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[A.type==="business"?" Zakelijk":" Particulier"," "," Sinds ",A.since]})]})]})}),A.company&&t.jsx("div",{className:"mb-3 text-sm font-medium text-gray-700",children:A.company}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.jsx("span",{className:"text-gray-700 truncate",children:A.email})]}),t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.jsx("span",{className:"text-gray-700",children:A.phone})]}),A.address&&t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsxs("svg",{className:"w-4 h-4 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),t.jsx("span",{className:"text-gray-700 text-xs truncate",children:A.address})]}),A.source&&t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsx("span",{className:"text-gray-500 mr-2",children:""}),t.jsxs("span",{className:"text-gray-600 text-xs",children:["Bron: ",A.source]})]})]}),t.jsx("div",{className:"border-t pt-4 mb-4",children:t.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-600",children:"Omzet"}),t.jsxs("div",{className:"text-lg font-bold text-primary",children:["",J.toFixed(0)]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-600",children:"Orders"}),t.jsx("div",{className:"text-lg font-bold text-neutral",children:Q.length})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs text-gray-600",children:"Contact"}),t.jsx("div",{className:"text-lg font-bold text-blue-600",children:we.length})]})]})}),A.notes&&t.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[t.jsxs("div",{className:"text-xs font-semibold text-yellow-800 mb-1 flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Notities:"})]}),t.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:A.notes})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>Us(A.id),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-semibold",children:" Financin"}),t.jsx("button",{onClick:()=>{pt(A.id),Xe(!0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-semibold",children:" Journey"})]}),p&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>ft(A),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:" Bewerken"}),t.jsx("button",{onClick:()=>Bs(A.id),className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:" Verwijderen"})]})]})]},A.id)})}),e.filter(A=>{if(!V)return!0;const Q=V.toLowerCase();return A.name.toLowerCase().includes(Q)||A.company&&A.company.toLowerCase().includes(Q)||A.email&&A.email.toLowerCase().includes(Q)}).length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500",children:V?`Geen klanten gevonden voor "${V}"`:"Geen klanten gevonden"}),V&&t.jsx("button",{onClick:()=>Z(""),className:"mt-2 text-sm text-primary hover:underline",children:"Wis zoekfilter"})]})]}),R==="interactions"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-end mb-6",children:t.jsx("button",{onClick:()=>Le(!ce),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Interactie"})}),ce&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Nieuwe Interactie Registreren"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("select",{value:Nt.type,onChange:A=>fn({...Nt,type:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:Qp.map(A=>t.jsxs("option",{value:A.value,children:[A.icon," ",A.label]},A.value))}),t.jsx("input",{type:"text",placeholder:"Onderwerp *",value:Nt.subject,onChange:A=>fn({...Nt,subject:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:Nt.relatedType,onChange:A=>fn({...Nt,relatedType:A.target.value,relatedTo:""}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"lead",children:"Lead"}),t.jsx("option",{value:"customer",children:"Klant"})]}),t.jsxs("select",{value:Nt.relatedTo,onChange:A=>fn({...Nt,relatedTo:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsxs("option",{value:"",children:["Selecteer"," ",Nt.relatedType==="lead"?"lead":"klant"," *"]}),Nt.relatedType==="lead"?o.filter(A=>!["won","lost"].includes(A.status)).map(A=>t.jsx("option",{value:A.id,children:A.name},A.id)):e.map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]}),t.jsx("textarea",{placeholder:"Beschrijving",value:Nt.description,onChange:A=>fn({...Nt,description:A.target.value}),rows:3,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"}),t.jsxs("div",{className:"col-span-2 flex items-center gap-4",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:Nt.followUpRequired,onChange:A=>fn({...Nt,followUpRequired:A.target.checked}),className:"w-4 h-4"}),t.jsx("span",{className:"text-sm text-gray-700",children:"Follow-up vereist"})]}),Nt.followUpRequired&&t.jsx("input",{type:"date",value:Nt.followUpDate,onChange:A=>fn({...Nt,followUpDate:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:ts,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Toevoegen"}),t.jsx("button",{onClick:()=>Le(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-6",children:"Interactie Geschiedenis"}),t.jsx("div",{className:"space-y-4",children:m.sort((A,Q)=>new Date(Q.date).getTime()-new Date(A.date).getTime()).map(A=>{const Q=A.leadId?sa(A.leadId):Bt(A.customerId),J=Qp.find(we=>we.value===A.type);return t.jsxs("div",{className:"flex gap-4 border-l-4 border-blue-400 pl-4 py-2",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-3xl",children:J==null?void 0:J.icon})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-neutral",children:A.subject}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:J==null?void 0:J.label})]}),t.jsx("span",{className:"text-xs text-gray-500",children:new Date(A.date).toLocaleString("nl-NL",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.jsx("p",{className:"text-sm text-gray-700 mb-3",children:A.description}),t.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{children:""}),Q]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{children:""}),Vr(A.employeeId)]}),A.followUpRequired&&t.jsxs("span",{className:"flex items-center gap-1 text-yellow-600 font-medium",children:[t.jsx("span",{children:""}),"Follow-up: ",A.followUpDate]})]})]})]},A.id)})}),m.length===0&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"Geen interacties gevonden"})})]})]}),at&&ut&&(()=>{const A=e.find(J=>J.id===ut),Q=Da(ut);return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-5xl sm:w-full h-full sm:h-auto sm:max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b p-4 sm:p-6 z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-neutral",children:[" Financin - ",A==null?void 0:A.name]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Overzicht van alle facturen en offertes"})]}),t.jsx("button",{onClick:()=>{je(!1),pt(null)},className:"text-gray-500 hover:text-gray-700 text-3xl leading-none",children:""})]})}),t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-blue-700 font-medium mb-1",children:" Gefactureerd"}),t.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:["",Q.totalInvoiced.toFixed(2)]})]}),t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-green-700 font-medium mb-1",children:" Betaald"}),t.jsxs("div",{className:"text-2xl font-bold text-green-900",children:["",Q.totalPaid.toFixed(2)]})]}),t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-yellow-700 font-medium mb-1",children:" Openstaand"}),t.jsxs("div",{className:"text-2xl font-bold text-yellow-900",children:["",Q.totalOutstanding.toFixed(2)]})]}),t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-red-700 font-medium mb-1",children:" Verlopen"}),t.jsxs("div",{className:"text-2xl font-bold text-red-900",children:["",Q.totalOverdue.toFixed(2)]})]}),t.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-purple-700 font-medium mb-1",children:" Offertes"}),t.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["",Q.totalQuotes.toFixed(2)]})]})]}),t.jsxs("div",{className:"mb-8",children:[t.jsxs("h3",{className:"text-xl font-semibold text-neutral mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),"Facturen (",Q.invoices.length,")"]}),Q.invoices.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Factuurnr"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Datum"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Bedrag"}),t.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Acties"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:Q.invoices.map(J=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onDoubleClick:()=>Be("invoice",J.id),title:"Dubbelklik om details te zien",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:J.invoiceNumber}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:J.issueDate}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ze(J.status)}`,children:[J.status==="paid"&&"Betaald",J.status==="sent"&&"Verzonden",J.status==="overdue"&&"Verlopen",J.status==="draft"&&"Concept",J.status==="cancelled"&&"Geannuleerd"]})}),t.jsxs("td",{className:"px-4 py-3 text-sm text-right font-bold text-gray-900",children:["",J.total.toFixed(2)]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex gap-2 justify-center",children:[t.jsx("button",{onClick:()=>Je(J.id),className:"px-3 py-1 bg-blue-500 text-white text-xs rounded-lg hover:bg-blue-600 transition-colors",title:"Bewerken",children:""}),t.jsx("button",{onClick:()=>Ue(J.id),className:"px-3 py-1 bg-green-500 text-white text-xs rounded-lg hover:bg-green-600 transition-colors",title:"Clonen",children:""}),(J.status==="sent"||J.status==="draft")&&!J.workOrderId&&t.jsx("button",{onClick:()=>Ce(J.id),className:"px-3 py-1 bg-orange-500 text-white text-xs rounded-lg hover:bg-orange-600 transition-colors",title:"Naar Werkorder",children:""})]})})]},J.id))})]})}):t.jsx("p",{className:"text-gray-500 text-center py-8",children:"Geen facturen gevonden"})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-semibold text-neutral mb-4 flex items-center gap-2",children:[t.jsx("span",{children:""}),"Offertes (",Q.quotes.length,")"]}),Q.quotes.length>0?t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Offerte ID"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Aangemaakt"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold text-gray-700",children:"Bedrag"}),t.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:"Acties"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:Q.quotes.map(J=>t.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onDoubleClick:()=>Be("quote",J.id),title:"Dubbelklik om details te zien",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:J.id}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:J.createdDate}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Ze(J.status)}`,children:[J.status==="approved"&&"Geaccepteerd",J.status==="sent"&&"Verzonden",J.status==="rejected"&&"Afgewezen",J.status==="draft"&&"Concept",J.status==="expired"&&"Verlopen"]})}),t.jsxs("td",{className:"px-4 py-3 text-sm text-right font-bold text-gray-900",children:["",J.total.toFixed(2)]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex gap-2 justify-center",children:[t.jsx("button",{onClick:we=>{we.stopPropagation(),rt(J.id)},className:"px-3 py-1 bg-blue-500 text-white text-xs rounded-lg hover:bg-blue-600 transition-colors",title:"Bewerken",children:""}),t.jsx("button",{onClick:we=>{we.stopPropagation(),et(J.id)},className:"px-3 py-1 bg-green-500 text-white text-xs rounded-lg hover:bg-green-600 transition-colors",title:"Clonen",children:""}),(J.status==="approved"||J.status==="sent")&&!J.workOrderId&&t.jsx("button",{onClick:we=>{we.stopPropagation(),lt(J.id)},className:"px-3 py-1 bg-orange-500 text-white text-xs rounded-lg hover:bg-orange-600 transition-colors",title:"Naar Werkorder",children:""})]})})]},J.id))})]})}):t.jsx("p",{className:"text-gray-500 text-center py-8",children:"Geen offertes gevonden"})]})]})]})})})(),vt&&ut&&(()=>{const A=e.find(J=>J.id===ut),Q=ns(ut);return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-6xl sm:w-full h-full sm:h-auto sm:max-h-[90vh] overflow-y-auto",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b p-4 sm:p-6 z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-neutral",children:[" Customer Journey - ",A==null?void 0:A.name]}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Volledig overzicht van offerte  werkorder  factuur  betaald"})]}),t.jsx("button",{onClick:()=>{Xe(!1),pt(null)},className:"text-gray-500 hover:text-gray-700 text-3xl leading-none",children:""})]})}),t.jsxs("div",{className:"p-4 sm:p-6",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h3",{className:"text-lg font-semibold text-neutral mb-4",children:"Pipeline Status"}),t.jsxs("div",{className:"flex items-center justify-between relative",children:[t.jsx("div",{className:"absolute top-1/2 left-0 w-full h-2 bg-gray-200 rounded-full -translate-y-1/2 z-0",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-green-500 to-purple-500 rounded-full transition-all duration-500",style:{width:`${Q.progressPercentage}%`}})}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between w-full",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${Q.quotes.length>0?"bg-blue-500":"bg-gray-300"}`,children:Q.quotes.length>0?"":"1"}),t.jsx("span",{className:"text-xs font-medium mt-2 text-center",children:"Offerte"}),t.jsx("span",{className:"text-xs text-gray-500",children:Q.quotes.length})]}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${Q.workOrders.length>0?"bg-green-500":"bg-gray-300"}`,children:Q.workOrders.length>0?"":"2"}),t.jsx("span",{className:"text-xs font-medium mt-2 text-center",children:"Werkorder"}),t.jsx("span",{className:"text-xs text-gray-500",children:Q.workOrders.length})]}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${Q.invoices.length>0?"bg-purple-500":"bg-gray-300"}`,children:Q.invoices.length>0?"":"3"}),t.jsx("span",{className:"text-xs font-medium mt-2 text-center",children:"Factuur"}),t.jsx("span",{className:"text-xs text-gray-500",children:Q.invoices.length})]}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-bold text-white ${Q.invoicesByStatus.paid.length>0?"bg-green-600":"bg-gray-300"}`,children:Q.invoicesByStatus.paid.length>0?"":"4"}),t.jsx("span",{className:"text-xs font-medium mt-2 text-center",children:"Betaald"}),t.jsx("span",{className:"text-xs text-gray-500",children:Q.invoicesByStatus.paid.length})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-blue-700 font-medium mb-1",children:" Offertes"}),t.jsx("div",{className:"text-2xl font-bold text-blue-900",children:Q.quotes.length}),Q.quotesByStatus.approved.length>0&&t.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[Q.quotesByStatus.approved.length," geaccepteerd"]})]}),t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-green-700 font-medium mb-1",children:" Werkorders"}),t.jsx("div",{className:"text-2xl font-bold text-green-900",children:Q.workOrders.length}),Q.workOrdersByStatus.inProgress.length>0&&t.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[Q.workOrdersByStatus.inProgress.length," in uitvoering"]})]}),t.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-purple-700 font-medium mb-1",children:" Facturen"}),t.jsx("div",{className:"text-2xl font-bold text-purple-900",children:Q.invoices.length}),Q.invoicesByStatus.sent.length>0&&t.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:[Q.invoicesByStatus.sent.length," verzonden"]})]}),t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[t.jsx("div",{className:"text-sm text-yellow-700 font-medium mb-1",children:" Betaald"}),t.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:Q.invoicesByStatus.paid.length}),Q.invoicesByStatus.overdue.length>0&&t.jsxs("div",{className:"text-xs text-red-600 mt-1",children:[Q.invoicesByStatus.overdue.length," verlopen"]})]})]}),t.jsxs("div",{className:"space-y-6",children:[Q.quotes.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-neutral mb-4 flex items-center gap-2",children:[t.jsx("span",{className:"text-blue-500",children:""}),"Offertes (",Q.quotes.length,")"]}),t.jsx("div",{className:"space-y-3",children:Q.quotes.map(J=>{const we=J.workOrderId?Q.workOrders.find(Qe=>Qe.id===J.workOrderId):null,ot=J.invoiceId?Q.invoices.find(Qe=>Qe.id===J.invoiceId):null;return t.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-neutral",children:J.id}),t.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold ${Ze(J.status)}`,children:[J.status==="approved"&&"Geaccepteerd",J.status==="sent"&&"Verzonden",J.status==="rejected"&&"Afgewezen",J.status==="draft"&&"Concept",J.status==="expired"&&"Verlopen"]})]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Aangemaakt: ",J.createdDate,"  ",J.total.toFixed(2)]}),we&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Werkorder: ",we.id]}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${we.status==="Voltooid"?"bg-green-200":"bg-yellow-200"}`,children:we.status})]}),ot&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-700 mt-1",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Factuur:"," ",ot.invoiceNumber]}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ot.status==="paid"?"bg-green-200":"bg-yellow-200"}`,children:ot.status==="paid"?"Betaald":ot.status})]})]}),t.jsxs("div",{className:"flex gap-2",children:[J.status==="approved"&&!J.workOrderId&&t.jsx("button",{onClick:()=>{Xe(!1),lt(J.id)},className:"px-3 py-1 bg-orange-500 text-white text-xs rounded-lg hover:bg-orange-600 transition-colors",title:"Maak Werkorder",children:" Werkorder"}),t.jsx("button",{onClick:()=>{Xe(!1),Be("quote",J.id)},className:"px-3 py-1 bg-blue-500 text-white text-xs rounded-lg hover:bg-blue-600 transition-colors",title:"Details",children:""})]})]})},J.id)})})]}),Q.workOrders.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-neutral mb-4 flex items-center gap-2",children:[t.jsx("span",{className:"text-green-500",children:""}),"Werkorders (",Q.workOrders.length,")"]}),t.jsx("div",{className:"space-y-3",children:Q.workOrders.map(J=>{const we=J.quoteId?Q.quotes.find(Qe=>Qe.id===J.quoteId):null,ot=J.invoiceId?Q.invoices.find(Qe=>Qe.id===J.invoiceId):null;return t.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-neutral",children:J.id}),t.jsxs("span",{className:"text-xs text-gray-600",children:[" ",J.title]}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${J.status==="Voltooid"?"bg-green-200 text-green-800":J.status==="In Uitvoering"?"bg-blue-200 text-blue-800":"bg-gray-200 text-gray-800"}`,children:J.status})]}),we&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 mb-1",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Offerte: ",we.id]})]}),ot&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-purple-700",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Factuur:"," ",ot.invoiceNumber]}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ot.status==="paid"?"bg-green-200":"bg-yellow-200"}`,children:ot.status==="paid"?"Betaald":ot.status})]})]}),J.status==="Voltooid"&&!ot&&t.jsx("button",{onClick:()=>{Xe(!1),alert("Ga naar Werkorders om factuur aan te maken")},className:"px-3 py-1 bg-purple-500 text-white text-xs rounded-lg hover:bg-purple-600 transition-colors",title:"Maak Factuur",children:" Factuur"})]})},J.id)})})]}),Q.invoices.length>0&&t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-neutral mb-4 flex items-center gap-2",children:[t.jsx("span",{className:"text-purple-500",children:""}),"Facturen (",Q.invoices.length,")"]}),t.jsx("div",{className:"space-y-3",children:Q.invoices.map(J=>{const we=J.quoteId?Q.quotes.find(Qe=>Qe.id===J.quoteId):null,ot=J.workOrderId?Q.workOrders.find(Qe=>Qe.id===J.workOrderId):null;return t.jsx("div",{className:`border-l-4 rounded-lg p-4 ${J.status==="paid"?"bg-green-50 border-green-500":J.status==="overdue"?"bg-red-50 border-red-500":"bg-purple-50 border-purple-500"}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"font-semibold text-neutral",children:J.invoiceNumber}),t.jsxs("span",{className:`px-2 py-1 rounded text-xs font-semibold ${ze(J.status)}`,children:[J.status==="paid"&&"Betaald",J.status==="sent"&&"Verzonden",J.status==="overdue"&&"Verlopen",J.status==="draft"&&"Concept"]})]}),t.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[J.issueDate,"  ",J.total.toFixed(2),J.dueDate&&`  Vervaldatum: ${J.dueDate}`]}),we&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 mb-1",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Offerte: ",we.id]})]}),ot&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-700",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:["Werkorder: ",ot.id]})]})]}),t.jsx("button",{onClick:()=>{Xe(!1),Be("invoice",J.id)},className:"px-3 py-1 bg-purple-500 text-white text-xs rounded-lg hover:bg-purple-600 transition-colors",title:"Details",children:""})]})},J.id)})})]}),Q.quotes.length===0&&Q.workOrders.length===0&&Q.invoices.length===0&&t.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[t.jsx("p",{className:"text-gray-500 mb-4",children:"Geen activiteit gevonden voor deze klant"}),t.jsx("div",{className:"flex gap-2 justify-center",children:t.jsx("button",{onClick:()=>{Xe(!1),alert("Maak een offerte aan in het Accounting module")},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:" Maak Offerte"})})]})]})]})]})})})(),Ve&&se&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-4xl sm:w-full h-full sm:h-auto sm:my-8 sm:max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between z-10",children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral",children:Fe==="quote"?" Offerte Details":" Factuur Details"}),t.jsx("button",{onClick:()=>We(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"p-6",children:[Fe==="quote"?t.jsx(t.Fragment,{children:(()=>{var At;const A=se,Q=Bt(A.customerId)||"Onbekend",J=A.items.reduce((kt,ar)=>kt+ar.total,0),we=((At=A.labor)==null?void 0:At.reduce((kt,ar)=>kt+ar.total,0))||0,ot=J+we,Qe=ot*(A.vatRate/100),gt=ot+Qe;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Offerte ID:"}),t.jsx("p",{className:"text-neutral font-bold",children:A.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Klant:"}),t.jsx("p",{className:"text-neutral",children:Q})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Status:"}),t.jsx("p",{className:"text-neutral",children:t.jsxs("span",{className:`px-2 py-1 rounded text-sm font-semibold ${Ze(A.status)}`,children:[A.status==="approved"&&"Geaccepteerd",A.status==="sent"&&"Verzonden",A.status==="rejected"&&"Afgewezen",A.status==="draft"&&"Concept",A.status==="expired"&&"Verlopen"]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Geldig tot:"}),t.jsx("p",{className:"text-neutral",children:A.validUntil})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Items:"}),t.jsx("div",{className:"space-y-2",children:A.items.map((kt,ar)=>t.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[t.jsxs("span",{children:[kt.description,"  ",kt.quantity]}),t.jsxs("span",{className:"font-semibold",children:["",kt.total.toFixed(2)]})]},ar))})]}),A.labor&&A.labor.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Werkuren:"}),t.jsx("div",{className:"space-y-2",children:A.labor.map((kt,ar)=>t.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[t.jsxs("span",{children:[kt.description," (",kt.hours,"u  ",kt.hourlyRate,"/u)"]}),t.jsxs("span",{className:"font-semibold",children:["",kt.total.toFixed(2)]})]},ar))})]}),t.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{children:"Subtotaal:"}),t.jsxs("span",{children:["",ot.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{children:["BTW (",A.vatRate,"%):"]}),t.jsxs("span",{children:["",Qe.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2 mt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsxs("span",{children:["",gt.toFixed(2)]})]})]}),A.notes&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Notities:"}),t.jsx("p",{className:"text-neutral mt-1",children:A.notes})]})]})})()}):t.jsx(t.Fragment,{children:(()=>{var At;const A=se,Q=Bt(A.customerId)||"Onbekend",J=A.items.reduce((kt,ar)=>kt+ar.total,0),we=((At=A.labor)==null?void 0:At.reduce((kt,ar)=>kt+ar.total,0))||0,ot=J+we,Qe=ot*(A.vatRate/100),gt=ot+Qe;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Factuurnummer:"}),t.jsx("p",{className:"text-neutral font-bold",children:A.invoiceNumber})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Klant:"}),t.jsx("p",{className:"text-neutral",children:Q})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Status:"}),t.jsx("p",{className:"text-neutral",children:t.jsxs("span",{className:`px-2 py-1 rounded text-sm font-semibold ${ze(A.status)}`,children:[A.status==="paid"&&"Betaald",A.status==="sent"&&"Verzonden",A.status==="overdue"&&"Verlopen",A.status==="draft"&&"Concept",A.status==="cancelled"&&"Geannuleerd"]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Factuurdatum:"}),t.jsx("p",{className:"text-neutral",children:A.issueDate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Vervaldatum:"}),t.jsx("p",{className:"text-neutral",children:A.dueDate})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Betalingsvoorwaarden:"}),t.jsx("p",{className:"text-neutral",children:A.paymentTerms||"14 dagen"})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Items:"}),t.jsx("div",{className:"space-y-2",children:A.items.map((kt,ar)=>t.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[t.jsxs("span",{children:[kt.description,"  ",kt.quantity]}),t.jsxs("span",{className:"font-semibold",children:["",kt.total.toFixed(2)]})]},ar))})]}),A.labor&&A.labor.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-2",children:"Werkuren:"}),t.jsx("div",{className:"space-y-2",children:A.labor.map((kt,ar)=>t.jsxs("div",{className:"flex justify-between p-2 bg-green-50 rounded",children:[t.jsxs("span",{children:[kt.description," (",kt.hours,"u  ",kt.hourlyRate,"/u)"]}),t.jsxs("span",{className:"font-semibold",children:["",kt.total.toFixed(2)]})]},ar))})]}),t.jsxs("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:[t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsx("span",{children:"Subtotaal:"}),t.jsxs("span",{children:["",ot.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between mb-1",children:[t.jsxs("span",{children:["BTW (",A.vatRate,"%):"]}),t.jsxs("span",{children:["",Qe.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between font-bold text-lg border-t pt-2 mt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsxs("span",{children:["",gt.toFixed(2)]})]})]}),A.notes&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Notities:"}),t.jsx("p",{className:"text-neutral mt-1",children:A.notes})]})]})})()}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[t.jsx("button",{onClick:()=>{Fe==="invoice"?(Je(se.id),We(!1)):(rt(se.id),We(!1))},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:" Bewerken"}),t.jsx("button",{onClick:()=>{Fe==="invoice"?(Ue(se.id),We(!1)):(et(se.id),We(!1))},className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:" Clonen"}),t.jsx("button",{onClick:()=>We(!1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-semibold",children:"Sluiten"})]})]})]})}),bt&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-4xl sm:w-full h-full sm:h-auto p-4 sm:p-6 sm:my-8 overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral",children:" Factuur Clonen"}),t.jsx("button",{onClick:()=>nr(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[" ",t.jsx("strong",{children:"Tip:"})," De nieuwe factuur krijgt automatisch een nieuw factuurnummer en de datum wordt op vandaag gezet."]})}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klant *"}),t.jsxs("select",{value:W.customerId,onChange:A=>me({...W,customerId:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant"}),e.map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Factuurdatum *"}),t.jsx("input",{type:"date",value:W.issueDate,onChange:A=>me({...W,issueDate:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vervaldatum *"}),t.jsx("input",{type:"date",value:W.dueDate,onChange:A=>me({...W,dueDate:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BTW Tarief (%)"}),t.jsx("input",{type:"number",value:W.vatRate,onChange:A=>me({...W,vatRate:Number(A.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Betalingstermijn"}),t.jsx("input",{type:"text",value:W.paymentTerms,onChange:A=>me({...W,paymentTerms:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"14 dagen"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:W.notes,onChange:A=>me({...W,notes:A.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Extra opmerkingen..."})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-neutral",children:"Items"}),t.jsx("button",{onClick:ve,className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-lg hover:bg-gray-600",children:"+ Item Toevoegen"})]}),W.items.map((A,Q)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-gray-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Beschrijving",value:A.description,onChange:J=>ia(Q,"description",J.target.value),className:"col-span-5 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"number",placeholder:"Aantal",value:A.quantity,onChange:J=>ia(Q,"quantity",parseInt(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"1"}),t.jsx("input",{type:"number",placeholder:"Prijs/stuk",value:A.pricePerUnit,onChange:J=>ia(Q,"pricePerUnit",parseFloat(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.01"}),t.jsxs("div",{className:"col-span-2 text-right font-medium text-gray-700",children:["",A.total.toFixed(2)]}),t.jsx("button",{onClick:()=>ae(Q),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:""})]},Q))]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-neutral",children:"Werkuren (optioneel)"}),t.jsx("button",{onClick:Ie,className:"px-4 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600",children:"+ Werkuren Toevoegen"})]}),W.labor.map((A,Q)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-green-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Beschrijving werkzaamheden",value:A.description,onChange:J=>T(Q,"description",J.target.value),className:"col-span-5 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"number",placeholder:"Uren",value:A.hours,onChange:J=>T(Q,"hours",parseFloat(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.5",min:"0"}),t.jsx("input",{type:"number",placeholder:"Uurtarief",value:A.hourlyRate,onChange:J=>T(Q,"hourlyRate",parseFloat(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.01"}),t.jsxs("div",{className:"col-span-2 text-right font-medium text-gray-700",children:["",A.total.toFixed(2)]}),t.jsx("button",{onClick:()=>ne(Q),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:""})]},Q))]}),W.items.length>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotaal:"}),t.jsxs("span",{className:"font-semibold",children:["",mr().subtotal.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-600",children:["BTW (",W.vatRate,"%):"]}),t.jsxs("span",{className:"font-semibold",children:["",mr().vatAmount.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsxs("span",{className:"text-primary",children:["",mr().total.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-3 mt-6",children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>Dt(!1),className:"flex-1 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:" Gecloneerde Factuur Opslaan"}),t.jsx("button",{onClick:()=>nr(!1),className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]}),t.jsx("button",{onClick:()=>Dt(!0),className:"w-full px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors font-semibold flex items-center justify-center gap-2",children:" Opslaan en naar Werkorder Sturen"})]})]})}),zt&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-4xl sm:w-full h-full sm:h-auto p-4 sm:p-6 sm:my-8 overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral",children:" Factuur Bewerken"}),t.jsx("button",{onClick:()=>{te(!1),Ye(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Klant *"}),t.jsxs("select",{value:W.customerId,onChange:A=>me({...W,customerId:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Selecteer klant"}),e.map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Factuurdatum *"}),t.jsx("input",{type:"date",value:W.issueDate,onChange:A=>me({...W,issueDate:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vervaldatum *"}),t.jsx("input",{type:"date",value:W.dueDate,onChange:A=>me({...W,dueDate:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BTW Tarief (%)"}),t.jsx("input",{type:"number",value:W.vatRate,onChange:A=>me({...W,vatRate:Number(A.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Betalingstermijn"}),t.jsx("input",{type:"text",value:W.paymentTerms,onChange:A=>me({...W,paymentTerms:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"14 dagen"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notities"}),t.jsx("textarea",{value:W.notes,onChange:A=>me({...W,notes:A.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Extra opmerkingen..."})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-neutral",children:"Items"}),t.jsx("button",{onClick:ve,className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-lg hover:bg-gray-600",children:"+ Item Toevoegen"})]}),W.items.map((A,Q)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-gray-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Beschrijving",value:A.description,onChange:J=>ia(Q,"description",J.target.value),className:"col-span-5 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"number",placeholder:"Aantal",value:A.quantity,onChange:J=>ia(Q,"quantity",parseInt(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"1"}),t.jsx("input",{type:"number",placeholder:"Prijs/stuk",value:A.pricePerUnit,onChange:J=>ia(Q,"pricePerUnit",parseFloat(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.01"}),t.jsxs("div",{className:"col-span-2 text-right font-medium text-gray-700",children:["",A.total.toFixed(2)]}),t.jsx("button",{onClick:()=>ae(Q),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:""})]},Q))]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-neutral",children:"Werkuren (optioneel)"}),t.jsx("button",{onClick:Ie,className:"px-4 py-2 bg-green-500 text-white text-sm rounded-lg hover:bg-green-600",children:"+ Werkuren Toevoegen"})]}),W.labor.map((A,Q)=>t.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-green-50 rounded-lg",children:[t.jsx("input",{type:"text",placeholder:"Beschrijving werkzaamheden",value:A.description,onChange:J=>T(Q,"description",J.target.value),className:"col-span-5 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"number",placeholder:"Uren",value:A.hours,onChange:J=>T(Q,"hours",parseFloat(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.5",min:"0"}),t.jsx("input",{type:"number",placeholder:"Uurtarief",value:A.hourlyRate,onChange:J=>T(Q,"hourlyRate",parseFloat(J.target.value)||0),className:"col-span-2 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",step:"0.01"}),t.jsxs("div",{className:"col-span-2 text-right font-medium text-gray-700",children:["",A.total.toFixed(2)]}),t.jsx("button",{onClick:()=>ne(Q),className:"col-span-1 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:""})]},Q))]}),W.items.length>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"Subtotaal:"}),t.jsxs("span",{className:"font-semibold",children:["",mr().subtotal.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-600",children:["BTW (",W.vatRate,"%):"]}),t.jsxs("span",{className:"font-semibold",children:["",mr().vatAmount.toFixed(2)]})]}),t.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[t.jsx("span",{children:"Totaal:"}),t.jsxs("span",{className:"text-primary",children:["",mr().total.toFixed(2)]})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:Ot,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Factuur Bijwerken"}),t.jsx("button",{onClick:()=>{te(!1),Ye(null)},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})}),Te&&st&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full p-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral mb-4",children:" Medewerker Toewijzen"}),t.jsxs("div",{className:"mb-6",children:[t.jsx("p",{className:"text-gray-700 mb-4",children:"Je gaat een werkorder aanmaken van deze factuur. Aan welke medewerker wil je deze werkorder toewijzen?"}),(()=>{var we;const A=v.find(ot=>ot.id===st);if(!A)return null;const Q=Bt(A.customerId),J=((we=A.labor)==null?void 0:we.reduce((ot,Qe)=>ot+Qe.hours,0))||0;return t.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Werkorder Details"})]}),t.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Klant:"})," ",Q]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Factuur:"})," ",A.invoiceNumber]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Geschatte uren:"})," ",J,"u"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Waarde:"})," ",A.total.toFixed(2)]})]})]})})(),t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecteer Medewerker *"}),t.jsxs("select",{value:Ae,onChange:A=>Ee(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"-- Kies een medewerker --"}),h.map(A=>t.jsxs("option",{value:A.id,children:[A.name," - ",A.role]},A.id))]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:De,disabled:!Ae,className:`flex-1 px-6 py-3 rounded-lg font-semibold transition-colors ${Ae?"bg-primary text-white hover:bg-secondary":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:" Werkorder Aanmaken"}),t.jsx("button",{onClick:()=>{_e(!1),H(null),Ee("")},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})}),R==="tasks"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex justify-end mb-6",children:p&&t.jsx("button",{onClick:()=>Re(!X),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Taak"})}),X&&p&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Nieuwe Taak"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Titel *",value:lr.title,onChange:A=>_r({...lr,title:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"date",value:lr.dueDate,onChange:A=>_r({...lr,dueDate:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:lr.customerId,onChange:A=>_r({...lr,customerId:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen klant"}),e.map(A=>t.jsx("option",{value:A.id,children:A.name},A.id))]}),t.jsxs("select",{value:lr.priority,onChange:A=>_r({...lr,priority:A.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"low",children:"Laag"}),t.jsx("option",{value:"medium",children:"Gemiddeld"}),t.jsx("option",{value:"high",children:"Hoog"})]}),t.jsx("textarea",{placeholder:"Beschrijving",value:lr.description,onChange:A=>_r({...lr,description:A.target.value}),rows:3,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:La,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Toevoegen"}),t.jsx("button",{onClick:()=>Re(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(A=>{const Q=A.status!=="done"&&new Date(A.dueDate)<new Date;return t.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 ${Q?"border-l-4 border-red-500":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:A.title}),t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Fs(A.priority)}`,children:[A.priority==="high"&&"Hoog",A.priority==="medium"&&"Gemiddeld",A.priority==="low"&&"Laag"]})]}),A.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:A.description}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Klant:"}),t.jsx("span",{className:"font-medium text-neutral",children:Bt(A.customerId)})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Deadline:"}),t.jsxs("span",{className:`font-medium ${Q?"text-red-600":"text-neutral"}`,children:[A.dueDate,Q&&" "]})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Status:"}),t.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${rs(A.status)}`,children:[A.status==="todo"&&"Te doen",A.status==="in_progress"&&"Bezig",A.status==="done"&&"Klaar"]})]})]}),p&&t.jsxs("div",{className:"flex gap-2",children:[A.status==="todo"&&t.jsx("button",{onClick:()=>wn(A.id,"in_progress"),className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600",children:"Start"}),A.status==="in_progress"&&t.jsx("button",{onClick:()=>wn(A.id,"done"),className:"flex-1 px-3 py-2 bg-green-500 text-white text-sm rounded hover:bg-green-600",children:"Voltooi"}),t.jsx("button",{onClick:()=>gn(A.id),className:"px-3 py-2 bg-red-500 text-white text-sm rounded hover:bg-red-600",children:"Verwijder"})]})]},A.id)})}),a.length===0&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"Geen taken gevonden"})})]}),R==="email"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral mb-2",children:"Email Workflow"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Sleep .eml bestanden hierheen om automatisch orders, taken of notificaties aan te maken."})]}),t.jsx(OO,{onShowEmailPreview:A=>{_(A),Y(!0)},onCreateTask:A=>{const Q={id:`task_${Date.now()}`,title:A.title||"Nieuwe taak",description:A.description||"",priority:A.priority||"medium",status:A.status||"todo",dueDate:A.dueDate||new Date().toISOString().split("T")[0],createdDate:new Date().toISOString().split("T")[0],customerId:A.customerId};return l([...a,Q]),Promise.resolve(Q.id)},onCreateOrder:async A=>Promise.resolve(void 0),onCreateNotification:A=>Promise.resolve(`notif_${Date.now()}`),onCreateInteraction:A=>{const Q={id:`int_${Date.now()}`,type:A.type||"email",subject:A.subject||"",description:A.description||"",date:A.date||new Date().toISOString(),employeeId:A.employeeId||g.employeeId,customerId:A.customerId,leadId:A.leadId};return f([...m,Q]),Promise.resolve(Q.id)},existingTasks:a,existingQuotes:w,existingInvoices:v,existingCustomers:e,existingLeads:o,currentUserId:g.employeeId})]}),q&&ee&&t.jsx(pK,{isOpen:q,onClose:()=>{Y(!1),_(null)},email:ee,customers:e,onCreateCustomer:async(A,Q)=>{const J={id:`c${Date.now()}`,name:Q,email:A,phone:"",since:new Date().toISOString().split("T")[0],source:"email"};return r([...e,J]),Xp(A,J.id),Promise.resolve(J.id)},currentUserId:g.employeeId,onConfirmAsOrder:async(A,Q)=>{Xp(ee.from,Q);const J=e.find(we=>we.id===Q);if(J&&J.email.toLowerCase()!==ee.from.toLowerCase()){const we={...J,emailAddresses:[...J.emailAddresses||[],ee.from]};r(e.map(ot=>ot.id===Q?we:ot))}N([...w,A]),Y(!1),_(null)},onConfirmAsTask:A=>{const Q={id:`task_${Date.now()}`,title:A.title,description:A.description,priority:"medium",status:"todo",dueDate:new Date(Date.now()+6048e5).toISOString().split("T")[0],createdDate:new Date().toISOString().split("T")[0],customerId:A.customerId};l([...a,Q]),A.customerId&&Xp(ee.from,A.customerId),Y(!1),_(null)},onConfirmAsNotification:A=>{alert(` Notificatie: ${A.message}`),Y(!1),_(null)},onCreateInteraction:A=>{const Q={id:`int_${Date.now()}`,type:A.type||"email",subject:A.subject||"",description:A.description||"",date:new Date().toISOString(),employeeId:g.employeeId,customerId:A.customerId};f([...m,Q])}})]})};function vK(){return[{value:"full_admin",label:"Volledige Admin Rechten",description:"Alle rechten - geeft automatisch toegang tot alle functionaliteiten"},{value:"manage_modules",label:"Modules Beheren",description:"Modules in- en uitschakelen (Admin Instellingen)"},{value:"manage_inventory",label:"Voorraad Beheren",description:"Voorraaditems toevoegen, bewerken en verwijderen"},{value:"manage_crm",label:"CRM Beheren",description:"Klanten, leads en taken toevoegen, bewerken en verwijderen"},{value:"manage_accounting",label:"Boekhouding Beheren",description:"Facturen en offertes aanmaken, bewerken en beheren"},{value:"manage_workorders",label:"Werkorders Beheren",description:"Werkorders aanmaken, toewijzen en beheren"},{value:"manage_employees",label:"Medewerkers Beheren",description:"Medewerkers toevoegen, bewerken en rechten toewijzen"},{value:"view_all_workorders",label:"Alle Werkorders Zien",description:"Werkorders van alle medewerkers bekijken (niet alleen eigen)"},{value:"view_reports",label:"Rapportages",description:"Volledige bedrijfsrapportages en analyses bekijken"},{value:"manage_planning",label:"Planning Beheren",description:"Planning en agenda beheren"},{value:"manage_pos",label:"Kassasysteem Beheren",description:"Kassasysteem (POS) beheren"}]}const yK=({employees:e,setEmployees:r,isAdmin:n})=>{var G,L,V,Z;const[a,l]=y.useState(!1),[o,d]=y.useState(!1),[m,f]=y.useState(!1),[h,g]=y.useState(null),[p,v]=y.useState(!1),[b,w]=y.useState({name:"",role:"",email:"",phone:"",password:"",isAdmin:!1,permissions:[]}),[N,S]=y.useState({name:"",role:"",email:"",phone:"",password:"",isAdmin:!1,permissions:[]}),C=vK(),[O,k]=y.useState({type:"general",title:"",description:"",date:new Date().toISOString().split("T")[0]}),E=()=>{if(!b.name||!b.role||!b.email){alert("Vul alle verplichte velden in!");return}const K=b.isAdmin?["full_admin"]:b.permissions||[],de={id:`e${Date.now()}`,name:b.name,role:b.role,email:b.email,phone:b.phone,password:b.password||void 0,isAdmin:b.isAdmin||!1,permissions:K.length>0?K:void 0,hireDate:new Date().toISOString().split("T")[0]};r([...e,de]),w({name:"",role:"",email:"",phone:"",password:"",isAdmin:!1,permissions:[]}),l(!1),alert(` Medewerker ${de.name} succesvol toegevoegd!`)},M=(K,de=!1)=>{if(de){const B=N.permissions||[];if(K==="full_admin")S({...N,isAdmin:!0,permissions:["full_admin"]});else{const le=B.filter(ye=>ye!=="full_admin");S({...N,isAdmin:!1,permissions:B.includes(K)?le.filter(ye=>ye!==K):[...le,K]})}}else{const B=b.permissions||[];if(K==="full_admin")w({...b,isAdmin:!0,permissions:["full_admin"]});else{const le=B.filter(ye=>ye!=="full_admin");w({...b,isAdmin:!1,permissions:B.includes(K)?le.filter(ye=>ye!==K):[...le,K]})}}},D=K=>{confirm("Weet je zeker dat je deze medewerker wilt verwijderen?")&&r(e.filter(de=>de.id!==K))},R=K=>{g(K),f(!0)},P=K=>{var B;const de=K.isAdmin||((B=K.permissions)==null?void 0:B.includes("full_admin"));S({name:K.name,role:K.role,email:K.email,phone:K.phone,password:"",isAdmin:de||!1,permissions:K.permissions||(de?["full_admin"]:[])}),g(K),d(!0)},z=()=>{if(!h)return;if(!N.name||!N.role||!N.email){alert("Vul alle verplichte velden in!");return}const K=N.isAdmin?["full_admin"]:N.permissions||[],de={...h,name:N.name,role:N.role,email:N.email,phone:N.phone,password:N.password||h.password,isAdmin:N.isAdmin||!1,permissions:K.length>0?K:void 0};r(e.map(B=>B.id===h.id?de:B)),d(!1),g(de),S({name:"",role:"",email:"",phone:"",password:"",isAdmin:!1,permissions:[]}),alert(` Medewerker ${de.name} succesvol bijgewerkt!`)},U=()=>{if(!h)return;if(!O.title||!O.description){alert("Vul titel en beschrijving in!");return}const K={id:`note${Date.now()}`,type:O.type,title:O.title,description:O.description,date:O.date,createdAt:new Date().toISOString()},de={...h,notes:[...h.notes||[],K]};r(e.map(B=>B.id===h.id?de:B)),g(de),k({type:"general",title:"",description:"",date:new Date().toISOString().split("T")[0]}),v(!1),alert(" Notitie succesvol toegevoegd!")},q=K=>{if(!h||!confirm("Weet je zeker dat je deze notitie wilt verwijderen?"))return;const de={...h,notes:(h.notes||[]).filter(B=>B.id!==K)};r(e.map(B=>B.id===h.id?de:B)),g(de)},Y=K=>{switch(K){case"late":return"";case"absence":return"";case"milestone":return"";case"performance":return"";case"warning":return"";case"compliment":return"";case"attendance":return"";default:return""}},ee=K=>{switch(K){case"late":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"absence":return"bg-red-100 text-red-800 border-red-300";case"milestone":return"bg-blue-100 text-blue-800 border-blue-300";case"performance":return"bg-purple-100 text-purple-800 border-purple-300";case"warning":return"bg-orange-100 text-orange-800 border-orange-300";case"compliment":return"bg-green-100 text-green-800 border-green-300";case"attendance":return"bg-teal-100 text-teal-800 border-teal-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},_=K=>{const de=new Date(K),B=new Date,le=B.getFullYear()-de.getFullYear(),ye=B.getMonth()-de.getMonth();return le===0?`${ye} maanden`:ye<0?`${le-1} jaar ${12+ye} maanden`:`${le} jaar ${ye} maanden`};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-neutral",children:"Personeelsbeheer (HRM)"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Beheer medewerkers, roosters en loonadministratie"})]}),n&&t.jsx("button",{onClick:()=>l(!a),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuwe Medewerker"})]}),a&&n&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Nieuwe Medewerker Toevoegen"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Naam *",value:b.name,onChange:K=>w({...b,name:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"text",placeholder:"Functie *",value:b.role,onChange:K=>w({...b,role:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"email",placeholder:"Email *",value:b.email,onChange:K=>w({...b,email:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"tel",placeholder:"Telefoon",value:b.phone,onChange:K=>w({...b,phone:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"password",placeholder:"Wachtwoord",value:b.password,onChange:K=>w({...b,password:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"col-span-2 border border-gray-300 rounded-lg p-4 bg-gray-50",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Admin Rechten"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white rounded border border-gray-200",children:[t.jsx("input",{type:"checkbox",id:"fullAdmin",checked:b.isAdmin||(((G=b.permissions)==null?void 0:G.includes("full_admin"))??!1),onChange:()=>M("full_admin",!1),className:"mt-1 w-5 h-5 text-primary border-gray-300 rounded focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:"fullAdmin",className:"text-sm font-medium text-gray-700 cursor-pointer",children:" Volledige Admin Rechten"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Alle rechten - geeft automatisch toegang tot alle functionaliteiten"})]})]}),!b.isAdmin&&!((L=b.permissions)!=null&&L.includes("full_admin"))&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Of selecteer specifieke rechten:"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:C.filter(K=>K.value!=="full_admin").map(K=>{var de;return t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white rounded border border-gray-200",children:[t.jsx("input",{type:"checkbox",id:`perm-${K.value}`,checked:((de=b.permissions)==null?void 0:de.includes(K.value))||!1,onChange:()=>M(K.value,!1),className:"mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:`perm-${K.value}`,className:"text-xs font-medium text-gray-700 cursor-pointer",children:K.label}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:K.description})]})]},K.value)})})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:E,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Toevoegen"}),t.jsx("button",{onClick:()=>l(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Totaal Medewerkers"}),t.jsx("p",{className:"text-2xl font-bold text-neutral mt-1",children:e.length})]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Functies"}),t.jsx("p",{className:"text-2xl font-bold text-neutral mt-1",children:new Set(e.map(K=>K.role)).size})]}),t.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Gemiddelde Diensttijd"}),t.jsxs("p",{className:"text-2xl font-bold text-neutral mt-1",children:[e.length>0?Math.round(e.reduce((K,de)=>{const B=new Date().getFullYear()-new Date(de.hireDate).getFullYear();return K+B},0)/e.length):0," ","jaar"]})]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(K=>t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("div",{className:"flex items-start justify-between mb-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center text-white font-semibold text-lg",children:K.name.split(" ").map(de=>de[0]).join("").toUpperCase()}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:K.name}),K.isAdmin&&t.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs font-semibold rounded-full",children:" Admin"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:K.role})]})]})}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),t.jsx("span",{className:"text-gray-700",children:K.email})]}),t.jsxs("div",{className:"flex items-center text-sm",children:[t.jsx("svg",{className:"w-4 h-4 text-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.jsx("span",{className:"text-gray-700",children:K.phone})]})]}),t.jsxs("div",{className:"border-t pt-4 mb-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"In dienst sinds:"}),t.jsx("span",{className:"text-sm font-semibold text-neutral",children:K.hireDate})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"Diensttijd:"}),t.jsx("span",{className:"text-sm font-semibold text-primary",children:_(K.hireDate)})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>R(K),className:"flex-1 px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm",children:" Dossier"}),n&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>P(K),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:""}),t.jsx("button",{onClick:()=>D(K.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:""})]})]})]},K.id))}),e.length===0&&t.jsx("div",{className:"text-center py-12",children:t.jsx("p",{className:"text-gray-500",children:"Geen medewerkers gevonden"})}),o&&h&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-2xl sm:w-full h-full sm:h-auto p-4 sm:p-6 sm:my-8 overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-neutral",children:" Medewerker Bewerken"}),t.jsx("button",{onClick:()=>{d(!1),g(null)},className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:""})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Naam *",value:N.name,onChange:K=>S({...N,name:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"text",placeholder:"Functie *",value:N.role,onChange:K=>S({...N,role:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"email",placeholder:"Email *",value:N.email,onChange:K=>S({...N,email:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"tel",placeholder:"Telefoon",value:N.phone,onChange:K=>S({...N,phone:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"password",placeholder:"Nieuw wachtwoord (leeg laten om te behouden)",value:N.password,onChange:K=>S({...N,password:K.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"col-span-2 border border-gray-300 rounded-lg p-4 bg-gray-50",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Admin Rechten"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white rounded border border-gray-200",children:[t.jsx("input",{type:"checkbox",id:"editFullAdmin",checked:N.isAdmin||(((V=N.permissions)==null?void 0:V.includes("full_admin"))??!1),onChange:()=>M("full_admin",!0),className:"mt-1 w-5 h-5 text-primary border-gray-300 rounded focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:"editFullAdmin",className:"text-sm font-medium text-gray-700 cursor-pointer",children:" Volledige Admin Rechten"}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Alle rechten - geeft automatisch toegang tot alle functionaliteiten"})]})]}),!N.isAdmin&&!((Z=N.permissions)!=null&&Z.includes("full_admin"))&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[t.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Of selecteer specifieke rechten:"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-64 overflow-y-auto",children:C.filter(K=>K.value!=="full_admin").map(K=>{var de;return t.jsxs("div",{className:"flex items-start gap-2 p-2 bg-white rounded border border-gray-200",children:[t.jsx("input",{type:"checkbox",id:`edit-perm-${K.value}`,checked:((de=N.permissions)==null?void 0:de.includes(K.value))||!1,onChange:()=>M(K.value,!0),className:"mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:`edit-perm-${K.value}`,className:"text-xs font-medium text-gray-700 cursor-pointer",children:K.label}),t.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:K.description})]})]},K.value)})})]})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{onClick:z,className:"flex-1 px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Opslaan"}),t.jsx("button",{onClick:()=>{d(!1),g(null)},className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]})}),m&&h&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-none sm:rounded-lg shadow-xl w-full sm:max-w-4xl sm:w-full h-full sm:h-auto sm:my-8 overflow-y-auto",children:[t.jsx("div",{className:"sticky top-0 bg-white border-b p-6 z-10",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-neutral",children:" Persoonlijk Dossier"}),t.jsxs("p",{className:"text-gray-600 mt-1",children:[h.name," - ",h.role]})]}),t.jsx("button",{onClick:()=>{f(!1),g(null)},className:"text-gray-500 hover:text-gray-700 text-3xl font-bold",children:""})]})}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),t.jsx("p",{className:"font-semibold text-neutral",children:h.email})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Telefoon"}),t.jsx("p",{className:"font-semibold text-neutral",children:h.phone})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"In dienst sinds"}),t.jsx("p",{className:"font-semibold text-neutral",children:h.hireDate})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Diensttijd"}),t.jsx("p",{className:"font-semibold text-primary",children:_(h.hireDate)})]})]}),t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-xl font-semibold text-neutral",children:" Notities"}),n&&t.jsx("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors text-sm",children:"+ Notitie Toevoegen"})]}),p&&n&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[t.jsx("h4",{className:"font-semibold text-neutral mb-3",children:"Nieuwe Notitie"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("select",{value:O.type,onChange:K=>k({...O,type:K.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"general",children:"Algemeen"}),t.jsx("option",{value:"late",children:"Te laat"}),t.jsx("option",{value:"absence",children:"Afwezig"}),t.jsx("option",{value:"milestone",children:"Milestone"}),t.jsx("option",{value:"performance",children:"Prestatie"}),t.jsx("option",{value:"warning",children:"Waarschuwing"}),t.jsx("option",{value:"compliment",children:"Compliment"}),t.jsx("option",{value:"attendance",children:"Aanwezigheid"})]}),t.jsx("input",{type:"date",value:O.date,onChange:K=>k({...O,date:K.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),t.jsx("input",{type:"text",placeholder:"Titel *",value:O.title,onChange:K=>k({...O,title:K.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("textarea",{placeholder:"Beschrijving *",value:O.description,onChange:K=>k({...O,description:K.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:U,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:"Toevoegen"}),t.jsx("button",{onClick:()=>{v(!1),k({type:"general",title:"",description:"",date:new Date().toISOString().split("T")[0]})},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors text-sm",children:"Annuleren"})]})]})]}),t.jsx("div",{className:"space-y-3",children:h.notes&&h.notes.length>0?[...h.notes].sort((K,de)=>new Date(de.date).getTime()-new Date(K.date).getTime()).map(K=>t.jsxs("div",{className:`border-2 rounded-lg p-4 ${ee(K.type)}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:Y(K.type)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-lg",children:K.title}),t.jsx("p",{className:"text-xs opacity-75",children:K.date})]})]}),n&&t.jsx("button",{onClick:()=>q(K.id),className:"text-red-500 hover:text-red-700 text-xl",title:"Verwijderen",children:""})]}),t.jsx("p",{className:"text-sm mt-2",children:K.description}),K.createdAt&&t.jsxs("p",{className:"text-xs opacity-60 mt-2",children:["Aangemaakt: ",new Date(K.createdAt).toLocaleString("nl-NL")]})]},K.id)):t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"Nog geen notities toegevoegd"})})})]})]})]})})]})},bK=({sales:e,inventory:r,quotes:n,workOrders:a})=>{const[l,o]=y.useState("sales"),d=e.reduce((P,z)=>P+z.total,0),m=e.length>0?d/e.length:0,f=e.reduce((P,z)=>P+z.items.reduce((U,q)=>U+q.quantity,0),0),h=r.filter(P=>P.quantity<=P.reorderLevel),g=r.reduce((P,z)=>P+z.quantity*50,0),p=r.filter(P=>P.quantity===0),v=n.reduce((P,z)=>P+z.total,0),b=n.filter(P=>P.status==="approved"),w=b.reduce((P,z)=>P+z.total,0),N=n.length>0?b.length/n.length*100:0,S=a.filter(P=>P.status==="Completed"),C=a.filter(P=>P.status==="In Progress"),O=a.filter(P=>P.status==="Pending"),k=a.reduce((P,z)=>P+(z.hoursSpent||0),0),E=S.length>0?S.reduce((P,z)=>P+(z.hoursSpent||0),0)/S.length:0,M=new Map;e.forEach(P=>{P.items.forEach(z=>{const U=M.get(z.id)||{name:z.name,quantity:0,revenue:0};M.set(z.id,{name:z.name,quantity:U.quantity+z.quantity,revenue:U.revenue+z.price*z.quantity})})});const D=Array.from(M.values()).sort((P,z)=>z.revenue-P.revenue).slice(0,5),R=e.reduce((P,z)=>(P[z.date]=(P[z.date]||0)+z.total,P),{});return t.jsxs("div",{className:"p-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-neutral mb-2",children:"Rapportages"}),t.jsx("p",{className:"text-gray-600 mb-8",children:"Genereer rapporten en analyseer bedrijfsprestaties"}),t.jsxs("div",{className:"flex gap-3 mb-8 flex-wrap",children:[t.jsx("button",{onClick:()=>o("sales"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${l==="sales"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Verkoop Rapport"}),t.jsx("button",{onClick:()=>o("inventory"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${l==="inventory"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Voorraad Rapport"}),t.jsx("button",{onClick:()=>o("quotes"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${l==="quotes"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Offertes Rapport"}),t.jsx("button",{onClick:()=>o("workorders"),className:`px-6 py-2 rounded-lg font-medium transition-colors ${l==="workorders"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Werkorders Rapport"})]}),l==="sales"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totale Omzet"}),t.jsxs("p",{className:"text-3xl font-bold text-primary",children:["",d.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.length," verkopen"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gemiddelde Verkoop"}),t.jsxs("p",{className:"text-3xl font-bold text-primary",children:["",m.toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Per transactie"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totaal Verkochte Items"}),t.jsx("p",{className:"text-3xl font-bold text-primary",children:f}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Alle producten"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Top 5 Producten"}),t.jsx("div",{className:"space-y-3",children:D.map((P,z)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:z+1}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-neutral",children:P.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[P.quantity," verkocht"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-lg font-bold text-primary",children:["",P.revenue.toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Omzet"})]})]},P.name))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Verkopen per Datum"}),t.jsx("div",{className:"space-y-2",children:Object.entries(R).sort(([P],[z])=>z.localeCompare(P)).map(([P,z])=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-sm font-medium text-neutral",children:P}),t.jsxs("span",{className:"text-lg font-bold text-primary",children:["",z.toFixed(2)]})]},P))})]})]}),l==="inventory"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totale Voorraadwaarde"}),t.jsxs("p",{className:"text-3xl font-bold text-primary",children:["",g.toFixed(2)]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Geschatte waarde"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Lage Voorraad"}),t.jsx("p",{className:"text-3xl font-bold text-orange-600",children:h.length}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Items onder herbestel niveau"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Niet op Voorraad"}),t.jsx("p",{className:"text-3xl font-bold text-red-600",children:p.length}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Items zonder voorraad"})]})]}),h.length>0&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Lage Voorraad Waarschuwingen"}),t.jsx("div",{className:"space-y-3",children:h.map(P=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg border-l-4 border-orange-500",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-neutral",children:P.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",P.sku," | Leverancier: ",P.supplier]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-bold text-orange-600",children:P.quantity}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Min: ",P.reorderLevel]})]})]},P.id))})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Volledige Voorraad Overzicht"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Item"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"SKU"}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Voorraad"}),t.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:"Herbestel"}),t.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Status"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(P=>t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-4 py-3 text-sm font-medium text-neutral",children:P.name}),t.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:P.sku}),t.jsx("td",{className:"px-4 py-3 text-sm text-center font-semibold",children:P.quantity}),t.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:P.reorderLevel}),t.jsx("td",{className:"px-4 py-3 text-sm",children:P.quantity===0?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-red-800 bg-red-100 rounded-full",children:"Niet op voorraad"}):P.quantity<=P.reorderLevel?t.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-orange-800 bg-orange-100 rounded-full",children:"Laag"}):t.jsx("span",{className:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full",children:"Voldoende"})})]},P.id))})]})})]})]}),l==="quotes"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totale Offertes Waarde"}),t.jsxs("p",{className:"text-3xl font-bold text-primary",children:["",v.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[n.length," offertes"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Geaccepteerde Waarde"}),t.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["",w.toFixed(2)]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[b.length," geaccepteerd"]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conversie Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[N.toFixed(1),"%"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Acceptatie percentage"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Offertes per Status"}),t.jsx("div",{className:"space-y-3",children:["draft","sent","approved","rejected","expired"].map(P=>{const z=n.filter(q=>q.status===P),U=z.reduce((q,Y)=>q+Y.total,0);return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${P==="approved"?"bg-green-100 text-green-800":P==="sent"?"bg-blue-100 text-blue-800":P==="rejected"?"bg-red-100 text-red-800":P==="expired"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:[P==="draft"&&"Concept",P==="sent"&&"Verzonden",P==="approved"&&"Geaccepteerd",P==="rejected"&&"Afgewezen",P==="expired"&&"Verlopen"]}),t.jsxs("span",{className:"text-sm text-gray-600",children:[z.length," offertes"]})]}),t.jsxs("span",{className:"text-lg font-bold text-primary",children:["",U.toFixed(2)]})]},P)})})]})]}),l==="workorders"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totaal Orders"}),t.jsx("p",{className:"text-3xl font-bold text-primary",children:a.length}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Alle werkorders"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Afgerond"}),t.jsx("p",{className:"text-3xl font-bold text-green-600",children:S.length}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Voltooide orders"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totaal Uren"}),t.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[k.toFixed(1),"u"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Gewerkte uren"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Gem. Uren/Order"}),t.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[E.toFixed(1),"u"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Per afgeronde order"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Werkorders per Status"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border-l-4 border-yellow-500",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"In Wacht"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-700",children:O.length})]}),t.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"In Uitvoering"}),t.jsx("p",{className:"text-2xl font-bold text-blue-700",children:C.length})]}),t.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border-l-4 border-green-500",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Afgerond"}),t.jsx("p",{className:"text-2xl font-bold text-green-700",children:S.length})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Recent Afgeronde Werkorders"}),t.jsx("div",{className:"space-y-3",children:S.slice(0,10).map(P=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-neutral",children:P.title}),t.jsx("p",{className:"text-sm text-gray-600",children:P.description}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Afgerond: ",P.completedDate]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-lg font-bold text-primary",children:[P.hoursSpent||0,"u"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"Gewerkt"})]})]},P.id))})]})]})]})},jK=({events:e,setEvents:r,employees:n,customers:a,workOrders:l,isAdmin:o})=>{const[d,m]=y.useState(new Date().toISOString().split("T")[0]),[f,h]=y.useState("week"),[g,p]=y.useState(!1),[v,b]=y.useState({title:"",description:"",start:"",end:"",type:"other",employeeId:""}),w=D=>e.filter(R=>R.start.split("T")[0]===D),N=D=>{var R;return D?((R=n.find(P=>P.id===D))==null?void 0:R.name)||"Onbekend":"Niet toegewezen"},S=D=>{switch(D){case"workorder":return"bg-blue-100 border-blue-500 text-blue-900";case"meeting":return"bg-purple-100 border-purple-500 text-purple-900";case"vacation":return"bg-green-100 border-green-500 text-green-900";default:return"bg-gray-100 border-gray-500 text-gray-900"}},C=()=>{if(!v.title||!v.start||!v.end){alert("Vul alle verplichte velden in!");return}const D={id:`cal${Date.now()}`,title:v.title,description:v.description,start:v.start,end:v.end,type:v.type,employeeId:v.employeeId||void 0};r([...e,D]),b({title:"",description:"",start:"",end:"",type:"other",employeeId:""}),p(!1)},O=D=>{confirm("Weet je zeker dat je dit evenement wilt verwijderen?")&&r(e.filter(R=>R.id!==D))},E=(()=>{const D=new Date(d),R=[],P=D.getDay(),z=D.getDate()-P+(P===0?-6:1);for(let U=0;U<7;U++){const q=new Date(D);q.setDate(z+U),R.push(q.toISOString().split("T")[0])}return R})(),M=["Ma","Di","Wo","Do","Vr","Za","Zo"];return t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-neutral",children:"Planning & Agenda"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Plan werkzaamheden, afspraken en monitor deadlines"})]}),o&&t.jsx("button",{onClick:()=>p(!g),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"+ Nieuw Evenement"})]}),g&&o&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Nieuw Evenement"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("input",{type:"text",placeholder:"Titel *",value:v.title,onChange:D=>b({...v,title:D.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:v.type,onChange:D=>b({...v,type:D.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"other",children:"Overig"}),t.jsx("option",{value:"workorder",children:"Werkorder"}),t.jsx("option",{value:"meeting",children:"Meeting"}),t.jsx("option",{value:"vacation",children:"Vakantie"})]}),t.jsx("input",{type:"datetime-local",value:v.start,onChange:D=>b({...v,start:D.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("input",{type:"datetime-local",value:v.end,onChange:D=>b({...v,end:D.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:v.employeeId,onChange:D=>b({...v,employeeId:D.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen medewerker"}),n.map(D=>t.jsxs("option",{value:D.id,children:[D.name," - ",D.role]},D.id))]}),t.jsx("textarea",{placeholder:"Beschrijving (optioneel)",value:v.description,onChange:D=>b({...v,description:D.target.value}),rows:2,className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary col-span-2"})]}),t.jsxs("div",{className:"flex gap-3 mt-4",children:[t.jsx("button",{onClick:C,className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors",children:"Toevoegen"}),t.jsx("button",{onClick:()=>p(!1),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Annuleren"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white rounded-lg shadow-md p-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>h("day"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f==="day"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Dag"}),t.jsx("button",{onClick:()=>h("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f==="week"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Week"}),t.jsx("button",{onClick:()=>h("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f==="month"?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Maand"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>{const D=new Date(d);D.setDate(D.getDate()-7),m(D.toISOString().split("T")[0])},className:"px-3 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:""}),t.jsx("input",{type:"date",value:d,onChange:D=>m(D.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsx("button",{onClick:()=>{const D=new Date(d);D.setDate(D.getDate()+7),m(D.toISOString().split("T")[0])},className:"px-3 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:""}),t.jsx("button",{onClick:()=>m(new Date().toISOString().split("T")[0]),className:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-secondary",children:"Vandaag"})]})]}),f==="week"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[t.jsx("div",{className:"grid grid-cols-7 border-b",children:E.map((D,R)=>{const P=D===new Date().toISOString().split("T")[0];return t.jsxs("div",{className:`p-4 text-center border-r last:border-r-0 ${P?"bg-blue-50":""}`,children:[t.jsx("div",{className:"font-semibold text-neutral",children:M[R]}),t.jsx("div",{className:`text-sm ${P?"text-primary font-bold":"text-gray-600"}`,children:new Date(D).getDate()})]},D)})}),t.jsx("div",{className:"grid grid-cols-7",children:E.map(D=>{const R=w(D);return t.jsx("div",{className:"min-h-[200px] p-2 border-r last:border-r-0 border-b",children:t.jsx("div",{className:"space-y-2",children:R.map(P=>t.jsxs("div",{className:`p-2 rounded border-l-4 text-xs ${S(P.type)}`,children:[t.jsx("div",{className:"font-semibold truncate",children:P.title}),t.jsx("div",{className:"text-xs opacity-75",children:new Date(P.start).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}),t.jsx("div",{className:"text-xs opacity-75 truncate",children:N(P.employeeId)}),o&&t.jsx("button",{onClick:()=>O(P.id),className:"text-red-600 hover:text-red-800 mt-1 text-xs",children:"Verwijder"})]},P.id))})},D)})})]}),f==="day"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:new Date(d).toLocaleDateString("nl-NL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),t.jsx("div",{className:"space-y-3",children:w(d).length===0?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"Geen evenementen gepland"}):w(d).map(D=>t.jsx("div",{className:`p-4 rounded-lg border-l-4 ${S(D.type)}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-lg",children:D.title}),D.description&&t.jsx("p",{className:"text-sm mt-1 opacity-75",children:D.description}),t.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[t.jsxs("span",{children:[new Date(D.start).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})," - ",new Date(D.end).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})]}),t.jsx("span",{children:""}),t.jsx("span",{children:N(D.employeeId)}),t.jsx("span",{children:""}),t.jsx("span",{className:"capitalize",children:D.type})]})]}),o&&t.jsx("button",{onClick:()=>O(D.id),className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600",children:"Verwijder"})]})},D.id))})]}),f==="month"&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral mb-4",children:"Alle Evenementen"}),t.jsx("div",{className:"space-y-2",children:e.length===0?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"Geen evenementen"}):e.sort((D,R)=>new Date(D.start).getTime()-new Date(R.start).getTime()).map(D=>t.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${S(D.type)} flex items-center justify-between`,children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-semibold",children:D.title}),t.jsxs("div",{className:"text-sm opacity-75",children:[new Date(D.start).toLocaleDateString("nl-NL")," - ",N(D.employeeId)]})]}),o&&t.jsx("button",{onClick:()=>O(D.id),className:"px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600",children:"Verwijder"})]},D.id))})]})]})},NK=({inventory:e,customers:r,isAdmin:n,webshopProducts:a,setWebshopProducts:l})=>{var qe,Ye,st;const[o,d]=y.useState("products"),[m,f]=y.useState(a);Zx.useEffect(()=>{f(a)},[a]);const h=H=>{f(H),l(H)},[g,p]=y.useState(!1),[v,b]=y.useState(null),[w,N]=y.useState(""),[S,C]=y.useState("all"),[O,k]=y.useState("all"),[E,M]=y.useState("grid"),[D,R]=y.useState({name:"",slug:"",description:"",shortDescription:"",sku:"",price:0,compareAtPrice:void 0,costPrice:void 0,inventoryItemId:void 0,stockQuantity:0,lowStockThreshold:5,trackInventory:!0,categoryIds:[],featuredCategoryId:void 0,hasVariants:!1,variants:[],images:[],featuredImage:void 0,status:"draft",visibility:"public",metaTitle:"",metaDescription:"",tags:[],weight:void 0,dimensions:void 0,shippingRequired:!0,shippingClass:"standard",taxClass:"standard",requireShipping:!0,digitalProduct:!1,allowReviews:!0,adminNotes:""}),[P,z]=y.useState([]),[U,q]=y.useState(!1),[Y,ee]=y.useState(null),[_,G]=y.useState({name:"",slug:"",description:"",parentId:void 0,image:void 0,order:0,active:!0,metaTitle:"",metaDescription:""}),[L,V]=y.useState([]),[Z,K]=y.useState(null),[de,B]=y.useState("all"),[le,ye]=y.useState(""),ge=H=>H.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),Ne=H=>{const Ae=H.substring(0,3).toUpperCase().replace(/[^A-Z]/g,"")||"PRD",Ee=m.length+1;return`${Ae}-${Ee.toString().padStart(4,"0")}`},Me=y.useMemo(()=>m.filter(H=>{const Ae=H.name.toLowerCase().includes(w.toLowerCase())||H.sku.toLowerCase().includes(w.toLowerCase())||H.description.toLowerCase().includes(w.toLowerCase())||H.tags.some(me=>me.toLowerCase().includes(w.toLowerCase())),Ee=S==="all"||H.status===S,W=O==="all"||H.categoryIds.includes(O);return Ae&&Ee&&W}),[m,w,S,O]),ce=y.useMemo(()=>L.filter(H=>{const Ae=H.orderNumber.toLowerCase().includes(le.toLowerCase())||H.customerName.toLowerCase().includes(le.toLowerCase())||H.customerEmail.toLowerCase().includes(le.toLowerCase()),Ee=de==="all"||H.status===de;return Ae&&Ee}),[L,le,de]),Le=y.useMemo(()=>{const H=m.filter(me=>me.status==="active").length,Ae=L.length,Ee=L.filter(me=>me.status==="pending").length,W=L.filter(me=>me.paymentStatus==="paid").reduce((me,Ve)=>me+Ve.total,0);return{activeProducts:H,totalOrders:Ae,pendingOrders:Ee,totalRevenue:W}},[m,L]),X=()=>{if(!D.name||!D.sku){alert(" Vul ten minste naam en SKU in.");return}const H=D.slug||ge(D.name),Ae={id:Date.now().toString(),name:D.name,slug:H,description:D.description||"",shortDescription:D.shortDescription,sku:D.sku,price:D.price||0,compareAtPrice:D.compareAtPrice,costPrice:D.costPrice,inventoryItemId:D.inventoryItemId,stockQuantity:D.stockQuantity||0,lowStockThreshold:D.lowStockThreshold,trackInventory:D.trackInventory??!0,categoryIds:D.categoryIds||[],featuredCategoryId:D.featuredCategoryId,hasVariants:D.hasVariants||!1,variants:D.variants||[],images:D.images||[],featuredImage:D.featuredImage,status:D.status||"draft",visibility:D.visibility||"public",metaTitle:D.metaTitle,metaDescription:D.metaDescription,tags:D.tags||[],weight:D.weight,dimensions:D.dimensions,shippingRequired:D.shippingRequired??!0,shippingClass:D.shippingClass,taxClass:D.taxClass||"standard",requireShipping:D.requireShipping??!0,digitalProduct:D.digitalProduct||!1,allowReviews:D.allowReviews??!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),adminNotes:D.adminNotes};h([...m,Ae]),R({name:"",slug:"",description:"",shortDescription:"",sku:"",price:0,stockQuantity:0,lowStockThreshold:5,trackInventory:!0,categoryIds:[],hasVariants:!1,variants:[],images:[],status:"draft",visibility:"public",tags:[],shippingRequired:!0,requireShipping:!0,digitalProduct:!1,allowReviews:!0}),p(!1),alert(` Product "${Ae.name}" succesvol aangemaakt!`)},Re=H=>{b(H),R({...H}),p(!0)},at=()=>{if(!v||!D.name||!D.sku){alert(" Vul ten minste naam en SKU in.");return}const H={...v,...D,updatedAt:new Date().toISOString()};h(m.map(Ae=>Ae.id===v.id?H:Ae)),b(null),p(!1),R({name:"",slug:"",description:"",shortDescription:"",sku:"",price:0,stockQuantity:0,categoryIds:[],hasVariants:!1,variants:[],images:[],status:"draft",visibility:"public",tags:[]}),alert(` Product "${H.name}" succesvol bijgewerkt!`)},je=H=>{const Ae=m.find(Ee=>Ee.id===H);Ae&&confirm(`Weet u zeker dat u "${Ae.name}" wilt verwijderen?`)&&(h(m.filter(Ee=>Ee.id!==H)),alert(" Product verwijderd."))},vt=H=>{const Ae=H.status==="active"?"draft":"active";h(m.map(Ee=>Ee.id===H.id?{...Ee,status:Ae,updatedAt:new Date().toISOString()}:Ee))},Xe=()=>{if(!_.name){alert(" Vul ten minste de naam in.");return}const H=_.slug||ge(_.name),Ae={id:Date.now().toString(),name:_.name,slug:H,description:_.description,parentId:_.parentId,image:_.image,order:_.order||P.length,active:_.active??!0,metaTitle:_.metaTitle,metaDescription:_.metaDescription,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};z([...P,Ae]),G({name:"",slug:"",description:"",order:P.length,active:!0}),q(!1),alert(` Categorie "${Ae.name}" succesvol aangemaakt!`)},ut=H=>{ee(H),G({...H}),q(!0)},pt=()=>{if(!Y||!_.name){alert(" Vul ten minste de naam in.");return}const H={...Y,..._,updatedAt:new Date().toISOString()};z(P.map(Ae=>Ae.id===Y.id?H:Ae)),ee(null),q(!1),G({name:"",slug:"",description:"",order:P.length,active:!0}),alert(` Categorie "${H.name}" succesvol bijgewerkt!`)},bt=H=>{const Ae=P.find(Ee=>Ee.id===H);if(Ae){if(m.some(W=>W.categoryIds.includes(H))){alert(" Deze categorie bevat nog producten. Verwijder eerst de producten of wijs ze toe aan een andere categorie.");return}confirm(`Weet u zeker dat u "${Ae.name}" wilt verwijderen?`)&&(z(P.filter(W=>W.id!==H)),alert(" Categorie verwijderd."))}},nr=(H,Ae)=>{V(L.map(Ee=>Ee.id===H?{...Ee,status:Ae,updatedAt:new Date().toISOString()}:Ee)),alert(` Order status bijgewerkt naar "${Ae}".`)},zt=(H,Ae)=>{const Ee=new Date().toISOString();V(L.map(W=>W.id===H?{...W,paymentStatus:Ae,paidAt:Ee,updatedAt:Ee}:W)),alert(` Betalingsstatus bijgewerkt naar "${Ae}".`)},te=H=>{var Ae;return((Ae=P.find(Ee=>Ee.id===H))==null?void 0:Ae.name)||"Onbekend"},Te=H=>{var Ae;return H?((Ae=e.find(Ee=>Ee.id===H))==null?void 0:Ae.name)||"Onbekend":"Geen koppeling"},_e=H=>{switch(H){case"active":return"bg-green-100 text-green-800";case"draft":return"bg-yellow-100 text-yellow-800";case"archived":return"bg-gray-100 text-gray-800";case"pending":return"bg-orange-100 text-orange-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"refunded":return"bg-gray-100 text-gray-800";case"paid":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6 sm:mb-8",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-neutral",children:"Webshop Beheer"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Beheer uw online winkel - producten, categorien en bestellingen"})]})}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Actieve Producten"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Le.activeProducts})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totaal Bestellingen"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Le.totalOrders})]}),t.jsxs("div",{className:"bg-orange-50 rounded-lg p-4 border-l-4 border-orange-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Openstaand"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Le.pendingOrders})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border-l-4 border-purple-500",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Totaal Omzet"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["",Le.totalRevenue.toFixed(2)]})]})]}),t.jsxs("div",{className:"flex gap-2 mb-6 border-b border-gray-200 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>d("products"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${o==="products"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:[" Producten (",m.length,")"]}),t.jsxs("button",{onClick:()=>d("categories"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${o==="categories"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:[" Categorien (",P.length,")"]}),t.jsxs("button",{onClick:()=>d("orders"),className:`px-4 py-2 font-medium transition-colors whitespace-nowrap ${o==="orders"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}`,children:[" Bestellingen (",L.length,")"]})]}),o==="products"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[t.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[t.jsx("input",{type:"text",placeholder:"Zoek producten...",value:w,onChange:H=>N(H.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:S,onChange:H=>C(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"all",children:"Alle Statussen"}),t.jsx("option",{value:"active",children:"Actief"}),t.jsx("option",{value:"draft",children:"Concept"}),t.jsx("option",{value:"archived",children:"Gearchiveerd"})]}),P.length>0&&t.jsxs("select",{value:O,onChange:H=>k(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"all",children:"Alle Categorien"}),P.map(H=>t.jsx("option",{value:H.id,children:H.name},H.id))]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>M("grid"),className:`px-3 py-2 rounded-lg ${E==="grid"?"bg-primary text-white":"bg-gray-200 text-gray-700"}`,title:"Grid weergave",children:""}),t.jsx("button",{onClick:()=>M("list"),className:`px-3 py-2 rounded-lg ${E==="list"?"bg-primary text-white":"bg-gray-200 text-gray-700"}`,title:"Lijst weergave",children:""})]})]}),n&&t.jsx("button",{onClick:()=>{b(null),R({name:"",slug:"",description:"",sku:Ne("Nieuw Product"),price:0,stockQuantity:0,lowStockThreshold:5,trackInventory:!0,categoryIds:[],hasVariants:!1,variants:[],images:[],status:"draft",visibility:"public",tags:[],shippingRequired:!0,requireShipping:!0,digitalProduct:!1,allowReviews:!0}),p(!0)},className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-medium whitespace-nowrap",children:"+ Nieuw Product"})]}),(g||v)&&n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 sm:p-6 flex items-center justify-between z-10",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-neutral",children:v?" Product Bewerken":" Nieuw Product"}),t.jsx("button",{onClick:()=>{p(!1),b(null),R({name:"",slug:"",description:"",sku:"",price:0,stockQuantity:0,categoryIds:[],hasVariants:!1,variants:[],images:[],status:"draft",visibility:"public",tags:[]})},className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Basis Informatie"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"sm:col-span-2",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Productnaam ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.name||"",onChange:H=>{R({...D,name:H.target.value,slug:D.slug||ge(H.target.value)})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Bijv. Staal plaat 10mm"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug (auto-generatie)"}),t.jsx("input",{type:"text",value:D.slug||"",onChange:H=>R({...D,slug:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"bijv. staal-plaat-10mm"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Wordt automatisch gegenereerd uit naam"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["SKU ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:D.sku||"",onChange:H=>R({...D,sku:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"PRD-0001"})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Korte Beschrijving (voor product cards)"}),t.jsx("input",{type:"text",value:D.shortDescription||"",onChange:H=>R({...D,shortDescription:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Korte, pakkende beschrijving (max 150 karakters)",maxLength:150})]}),t.jsxs("div",{className:"sm:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Volledige Beschrijving"}),t.jsx("textarea",{value:D.description||"",onChange:H=>R({...D,description:H.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Gedetailleerde productbeschrijving..."})]})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Prijs & Voorraad"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Verkoopprijs () ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"number",step:"0.01",value:D.price||0,onChange:H=>R({...D,price:parseFloat(H.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wasprijs ()"}),t.jsx("input",{type:"number",step:"0.01",value:D.compareAtPrice||"",onChange:H=>R({...D,compareAtPrice:H.target.value?parseFloat(H.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0",placeholder:"Optioneel"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Voor strikethrough prijs"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inkoopprijs ()"}),t.jsx("input",{type:"number",step:"0.01",value:D.costPrice||"",onChange:H=>R({...D,costPrice:H.target.value?parseFloat(H.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0",placeholder:"Voor winstberekening"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voorraad"}),t.jsx("input",{type:"number",value:D.stockQuantity||0,onChange:H=>R({...D,stockQuantity:parseInt(H.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lage Voorraad Drempel"}),t.jsx("input",{type:"number",value:D.lowStockThreshold||5,onChange:H=>R({...D,lowStockThreshold:parseInt(H.target.value)||5}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0"})]}),t.jsx("div",{className:"sm:col-span-2 lg:col-span-1 flex items-end",children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:D.trackInventory??!0,onChange:H=>R({...D,trackInventory:H.target.checked}),className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Voorraad bijhouden"})]})}),t.jsxs("div",{className:"sm:col-span-2 lg:col-span-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Koppel met Voorraad Item (optioneel)"}),t.jsxs("select",{value:D.inventoryItemId||"",onChange:H=>R({...D,inventoryItemId:H.target.value||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen koppeling"}),e.map(H=>t.jsxs("option",{value:H.id,children:[H.name," (",H.sku,") - Voorraad: ",H.quantity]},H.id))]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D.inventoryItemId?`Gekoppeld: ${Te(D.inventoryItemId)}`:"Synchroniseer voorraad met Inventory module"})]})]})]}),t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Categorien"}),P.length===0?t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Geen categorien beschikbaar. Maak eerst categorien aan in de Categorien tab."}):t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecteer Categorien (meerdere mogelijk)"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 max-h-40 overflow-y-auto p-2 border border-gray-200 rounded-lg",children:P.filter(H=>H.active).map(H=>t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[t.jsx("input",{type:"checkbox",checked:(D.categoryIds||[]).includes(H.id),onChange:Ae=>{const Ee=D.categoryIds||[];Ae.target.checked?R({...D,categoryIds:[...Ee,H.id]}):R({...D,categoryIds:Ee.filter(W=>W!==H.id)})},className:"w-4 h-4 text-primary"}),t.jsx("span",{className:"text-sm",children:H.name})]},H.id))}),t.jsxs("div",{className:"mt-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Primaire Categorie (voor product cards)"}),t.jsxs("select",{value:D.featuredCategoryId||"",onChange:H=>R({...D,featuredCategoryId:H.target.value||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen primaire categorie"}),(D.categoryIds||[]).map(H=>{const Ae=P.find(Ee=>Ee.id===H);return Ae?t.jsx("option",{value:H,children:Ae.name},H):null})]})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Status & Zichtbaarheid"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),t.jsxs("select",{value:D.status||"draft",onChange:H=>R({...D,status:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"draft",children:"Concept (niet zichtbaar)"}),t.jsx("option",{value:"active",children:"Actief (zichtbaar in webshop)"}),t.jsx("option",{value:"archived",children:"Gearchiveerd"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zichtbaarheid"}),t.jsxs("select",{value:D.visibility||"public",onChange:H=>R({...D,visibility:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"public",children:"Publiek (voor iedereen)"}),t.jsx("option",{value:"private",children:"Priv (alleen ingelogde klanten)"}),t.jsx("option",{value:"hidden",children:"Verborgen (niet in catalogus)"})]})]})]})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Verzending"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:D.digitalProduct||!1,onChange:H=>R({...D,digitalProduct:H.target.checked,shippingRequired:!H.target.checked}),className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Digitaal product (geen verzending)"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:D.requireShipping??!0,onChange:H=>R({...D,requireShipping:H.target.checked}),disabled:D.digitalProduct,className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verzending vereist"})]}),!D.digitalProduct&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gewicht (gram)"}),t.jsx("input",{type:"number",value:D.weight||"",onChange:H=>R({...D,weight:H.target.value?parseFloat(H.target.value):void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Verzendcategorie"}),t.jsxs("select",{value:D.shippingClass||"standard",onChange:H=>R({...D,shippingClass:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"standard",children:"Standaard"}),t.jsx("option",{value:"express",children:"Express"}),t.jsx("option",{value:"large",children:"Groot formaat"}),t.jsx("option",{value:"fragile",children:"Breekbaar"})]})]}),t.jsxs("div",{className:"sm:col-span-2 grid grid-cols-3 gap-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lengte (cm)"}),t.jsx("input",{type:"number",step:"0.1",value:((qe=D.dimensions)==null?void 0:qe.length)||"",onChange:H=>R({...D,dimensions:{...D.dimensions,length:H.target.value?parseFloat(H.target.value):void 0}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Breedte (cm)"}),t.jsx("input",{type:"number",step:"0.1",value:((Ye=D.dimensions)==null?void 0:Ye.width)||"",onChange:H=>R({...D,dimensions:{...D.dimensions,width:H.target.value?parseFloat(H.target.value):void 0}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hoogte (cm)"}),t.jsx("input",{type:"number",step:"0.1",value:((st=D.dimensions)==null?void 0:st.height)||"",onChange:H=>R({...D,dimensions:{...D.dimensions,height:H.target.value?parseFloat(H.target.value):void 0}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"0"})]})]})]})]})]}),t.jsxs("div",{className:"bg-teal-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" SEO & Marketing"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Title (SEO)"}),t.jsx("input",{type:"text",value:D.metaTitle||"",onChange:H=>R({...D,metaTitle:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"SEO title tag (max 60 karakters)",maxLength:60}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(D.metaTitle||"").length,"/60 karakters"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Description (SEO)"}),t.jsx("textarea",{value:D.metaDescription||"",onChange:H=>R({...D,metaDescription:H.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"SEO meta description (max 160 karakters)",maxLength:160}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(D.metaDescription||"").length,"/160 karakters"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (gescheiden door komma's)"}),t.jsx("input",{type:"text",value:(D.tags||[]).join(", "),onChange:H=>{const Ae=H.target.value.split(",").map(Ee=>Ee.trim()).filter(Ee=>Ee);R({...D,tags:Ae})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"staal, metaal, plaat, constructie"}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tags helpen bij zoeken en filtering"})]})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Extra Opties"}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BTW Tarief"}),t.jsxs("select",{value:D.taxClass||"standard",onChange:H=>R({...D,taxClass:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"standard",children:"Standaard (21%)"}),t.jsx("option",{value:"reduced",children:"Verlaagd (9%)"}),t.jsx("option",{value:"zero",children:"Nul (0%)"}),t.jsx("option",{value:"exempt",children:"Vrijgesteld"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:D.allowReviews??!0,onChange:H=>R({...D,allowReviews:H.target.checked}),className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Reviews toestaan"})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notities (niet zichtbaar voor klanten)"}),t.jsx("textarea",{value:D.adminNotes||"",onChange:H=>R({...D,adminNotes:H.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Interne notities over dit product..."})]})]}),t.jsxs("div",{className:"bg-pink-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4 flex items-center gap-2",children:" Product Afbeeldingen"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[t.jsx("p",{className:"text-gray-500 mb-2",children:" Image Upload Functionaliteit"}),t.jsx("p",{className:"text-xs text-gray-400",children:"Wordt gemplementeerd bij frontend integratie. Hier kunnen afbeeldingen gepload worden en worden gekoppeld aan producten."}),t.jsx("button",{type:"button",disabled:!0,className:"mt-4 px-4 py-2 bg-gray-300 text-gray-600 rounded-lg cursor-not-allowed",children:"Upload Afbeelding (Komt Later)"})]}),D.images&&D.images.length>0&&t.jsx("div",{className:"mt-4 grid grid-cols-4 gap-2",children:D.images.map((H,Ae)=>t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg flex items-center justify-center",children:t.jsxs("span",{className:"text-xs text-gray-500",children:["Image ",Ae+1]})}),t.jsx("button",{type:"button",onClick:()=>{const Ee=[...D.images||[]];Ee.splice(Ae,1),R({...D,images:Ee})},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:""})]},Ae))})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[v?t.jsx("button",{onClick:at,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Product Bijwerken"}):t.jsx("button",{onClick:X,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Product Aanmaken"}),t.jsx("button",{onClick:()=>{p(!1),b(null),R({name:"",slug:"",description:"",sku:"",price:0,stockQuantity:0,categoryIds:[],hasVariants:!1,variants:[],images:[],status:"draft",visibility:"public",tags:[]})},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]})]})}),Me.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[t.jsx("p",{className:"text-gray-500 text-lg mb-4",children:m.length===0?" Nog geen producten":" Geen producten gevonden"}),t.jsx("p",{className:"text-sm text-gray-400 mb-6",children:m.length===0?"Begin met het toevoegen van uw eerste product!":"Probeer andere zoektermen of filters."}),m.length===0&&n&&t.jsx("button",{onClick:()=>{R({name:"",slug:"",description:"",sku:Ne("Nieuw Product"),price:0,stockQuantity:0,lowStockThreshold:5,trackInventory:!0,categoryIds:[],hasVariants:!1,variants:[],images:[],status:"draft",visibility:"public",tags:[],shippingRequired:!0,requireShipping:!0,digitalProduct:!1,allowReviews:!0}),p(!0)},className:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:"+ Voeg Eerste Product Toe"})]}):t.jsx("div",{className:E==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-4",children:Me.map(H=>t.jsxs("div",{className:`bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow ${E==="grid"?"p-4":"p-6 flex flex-col sm:flex-row gap-4"}`,children:[t.jsx("div",{className:`${E==="grid"?"mb-4":"w-24 sm:w-32 flex-shrink-0"}`,children:t.jsx("div",{className:`bg-gray-200 rounded-lg flex items-center justify-center ${E==="grid"?"aspect-square":"w-full h-24 sm:h-32"}`,children:H.featuredImage?t.jsx("img",{src:H.featuredImage,alt:H.name,className:"w-full h-full object-cover rounded-lg"}):t.jsx("span",{className:"text-gray-400 text-xs",children:" Geen afbeelding"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[t.jsx("h3",{className:"font-semibold text-neutral text-base sm:text-lg",children:H.name}),t.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${_e(H.status)}`,children:H.status==="active"?"Actief":H.status==="draft"?"Concept":"Gearchiveerd"})]}),E==="grid"&&H.shortDescription&&t.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:H.shortDescription}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[t.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:["SKU: ",H.sku]}),H.categoryIds.length>0&&t.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:[H.categoryIds.slice(0,1).map(Ae=>te(Ae)).join(", "),H.categoryIds.length>1&&" +"+(H.categoryIds.length-1)]}),H.trackInventory&&t.jsxs("span",{className:`text-xs px-2 py-1 rounded ${H.stockQuantity<=(H.lowStockThreshold||0)?"bg-red-100 text-red-800":H.stockQuantity>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:[" ",H.stockQuantity," op voorraad"]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("div",{children:H.compareAtPrice&&H.compareAtPrice>H.price?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-lg font-bold text-primary",children:["",H.price.toFixed(2)]}),t.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["",H.compareAtPrice.toFixed(2)]})]}):t.jsxs("span",{className:"text-lg font-bold text-primary",children:["",H.price.toFixed(2)]})}),H.digitalProduct&&t.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded",children:" Digitaal"})]}),E==="list"&&t.jsx("div",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:H.shortDescription||H.description}),n&&t.jsxs("div",{className:"flex gap-2 mt-auto pt-3 border-t border-gray-200",children:[t.jsx("button",{onClick:()=>Re(H),className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors",children:" Bewerken"}),t.jsx("button",{onClick:()=>vt(H),className:`px-3 py-2 text-sm rounded-lg transition-colors ${H.status==="active"?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-green-500 text-white hover:bg-green-600"}`,children:H.status==="active"?" Concept":" Activeren"}),t.jsx("button",{onClick:()=>je(H.id),className:"px-3 py-2 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600 transition-colors",children:""})]})]})]},H.id))})]}),o==="categories"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[t.jsx("h2",{className:"text-xl font-semibold text-neutral",children:"Categorie Beheer"}),n&&t.jsx("button",{onClick:()=>{ee(null),G({name:"",slug:"",description:"",order:P.length,active:!0}),q(!0)},className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-medium whitespace-nowrap",children:"+ Nieuwe Categorie"})]}),(U||Y)&&n&&t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[t.jsx("h3",{className:"text-xl font-semibold text-neutral mb-4",children:Y?" Categorie Bewerken":" Nieuwe Categorie"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Naam ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:_.name||"",onChange:H=>{G({..._,name:H.target.value,slug:_.slug||ge(H.target.value)})},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Bijv. Staal Producten"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Slug"}),t.jsx("input",{type:"text",value:_.slug||"",onChange:H=>G({..._,slug:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"bijv. staal-producten"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschrijving"}),t.jsx("textarea",{value:_.description||"",onChange:H=>G({..._,description:H.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Categorie beschrijving..."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hoofdcategorie (optioneel)"}),t.jsxs("select",{value:_.parentId||"",onChange:H=>G({..._,parentId:H.target.value||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"",children:"Geen (hoofdcategorie)"}),P.filter(H=>H.id!==(Y==null?void 0:Y.id)).map(H=>t.jsx("option",{value:H.id,children:H.name},H.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Volgorde"}),t.jsx("input",{type:"number",value:_.order||0,onChange:H=>G({..._,order:parseInt(H.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",min:"0"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:_.active??!0,onChange:H=>G({..._,active:H.target.checked}),className:"w-5 h-5 text-primary"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Categorie is actief"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SEO Meta Title"}),t.jsx("input",{type:"text",value:_.metaTitle||"",onChange:H=>G({..._,metaTitle:H.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"SEO title voor deze categorie"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SEO Meta Description"}),t.jsx("textarea",{value:_.metaDescription||"",onChange:H=>G({..._,metaDescription:H.target.value}),rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"SEO beschrijving voor deze categorie"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t",children:[Y?t.jsx("button",{onClick:pt,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Bijwerken"}):t.jsx("button",{onClick:Xe,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:" Aanmaken"}),t.jsx("button",{onClick:()=>{q(!1),ee(null),G({name:"",slug:"",description:"",order:P.length,active:!0})},className:"px-6 py-3 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Annuleren"})]})]}),P.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[t.jsx("p",{className:"text-gray-500 text-lg mb-4",children:" Nog geen categorien"}),t.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Begin met het aanmaken van categorien om uw producten te organiseren."}),n&&t.jsx("button",{onClick:()=>{G({name:"",slug:"",description:"",order:0,active:!0}),q(!0)},className:"px-6 py-3 bg-primary text-white rounded-lg hover:bg-secondary transition-colors font-semibold",children:"+ Voeg Eerste Categorie Toe"})]}):t.jsx("div",{className:"space-y-3",children:P.sort((H,Ae)=>H.parentId&&!Ae.parentId?1:!H.parentId&&Ae.parentId?-1:H.order-Ae.order).map(H=>{const Ae=H.parentId?P.find(W=>W.id===H.parentId):null,Ee=m.filter(W=>W.categoryIds.includes(H.id)).length;return t.jsx("div",{className:`bg-white rounded-lg shadow-md p-4 sm:p-6 ${Ae?"ml-4 sm:ml-8 border-l-4 border-purple-300":""}`,children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Ae&&t.jsxs("span",{className:"text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded",children:["Sub van: ",Ae.name]}),t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:H.name}),!H.active&&t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:"Inactief"})]}),H.description&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:H.description}),t.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[t.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:[" ",Ee," product",Ee!==1?"en":""]}),t.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["Slug: ",H.slug]}),t.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["Volgorde: ",H.order]})]})]}),n&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>ut(H),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:" Bewerken"}),t.jsx("button",{onClick:()=>bt(H.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium",children:" Verwijderen"})]})]})},H.id)})})]}),o==="orders"&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:t.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[t.jsx("input",{type:"text",placeholder:"Zoek bestellingen...",value:le,onChange:H=>ye(H.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),t.jsxs("select",{value:de,onChange:H=>B(H.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[t.jsx("option",{value:"all",children:"Alle Statussen"}),t.jsx("option",{value:"pending",children:"Openstaand"}),t.jsx("option",{value:"processing",children:"In Behandeling"}),t.jsx("option",{value:"shipped",children:"Verzonden"}),t.jsx("option",{value:"delivered",children:"Afgeleverd"}),t.jsx("option",{value:"cancelled",children:"Geannuleerd"}),t.jsx("option",{value:"refunded",children:"Terugbetaald"})]})]})}),ce.length===0?t.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[t.jsx("p",{className:"text-gray-500 text-lg mb-4",children:L.length===0?" Nog geen bestellingen":" Geen bestellingen gevonden"}),t.jsx("p",{className:"text-sm text-gray-400",children:L.length===0?"Bestellingen verschijnen hier zodra klanten producten bestellen.":"Probeer andere zoektermen of filters."})]}):t.jsx("div",{className:"space-y-4",children:ce.map(H=>t.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>K(H),children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[t.jsx("h3",{className:"font-semibold text-neutral text-lg",children:H.orderNumber}),t.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded ${_e(H.status)}`,children:H.status==="pending"?"Openstaand":H.status==="processing"?"In Behandeling":H.status==="shipped"?"Verzonden":H.status==="delivered"?"Afgeleverd":H.status==="cancelled"?"Geannuleerd":"Terugbetaald"}),t.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded ${_e(H.paymentStatus)}`,children:H.paymentStatus==="pending"?" Niet betaald":H.paymentStatus==="paid"?" Betaald":H.paymentStatus==="failed"?" Betaling mislukt":" Terugbetaald"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm text-gray-600",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Klant:"})," ",H.customerName]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",H.customerEmail]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Datum:"})," ",new Date(H.createdAt).toLocaleDateString("nl-NL")]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Aantal items:"})," ",H.items.length]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-2xl font-bold text-primary mb-1",children:["",H.total.toFixed(2)]}),n&&t.jsxs("div",{className:"flex gap-2 mt-3 justify-end",children:[H.status==="pending"&&t.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),nr(H.id,"processing")},className:"px-3 py-1 bg-blue-500 text-white text-xs rounded-lg hover:bg-blue-600 transition-colors",children:"In Behandeling"}),H.status==="processing"&&t.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),nr(H.id,"shipped")},className:"px-3 py-1 bg-purple-500 text-white text-xs rounded-lg hover:bg-purple-600 transition-colors",children:"Verzonden"}),H.paymentStatus==="pending"&&t.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),zt(H.id,"paid")},className:"px-3 py-1 bg-green-500 text-white text-xs rounded-lg hover:bg-green-600 transition-colors",children:"Betaald"})]})]})]})},H.id))}),Z&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 sm:p-6 flex items-center justify-between z-10",children:[t.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-neutral",children:["Bestelling: ",Z.orderNumber]}),t.jsx("button",{onClick:()=>K(null),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),t.jsxs("div",{className:"p-4 sm:p-6 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-3",children:"Klant Informatie"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Naam:"})," ",Z.customerName]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",Z.customerEmail]}),Z.customerPhone&&t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Telefoon:"})," ",Z.customerPhone]})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-3",children:"Bestel Informatie"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Datum:"})," ",new Date(Z.createdAt).toLocaleString("nl-NL")]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Status:"}),t.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded ${_e(Z.status)}`,children:Z.status})]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Betaling:"}),t.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded ${_e(Z.paymentStatus)}`,children:Z.paymentStatus})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-neutral mb-4",children:"Bestelde Items"}),t.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Product"}),t.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Aantal"}),t.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Prijs"}),t.jsx("th",{className:"text-right py-3 px-4 font-semibold text-gray-700",children:"Subtotaal"})]})}),t.jsx("tbody",{children:Z.items.map((H,Ae)=>{var Ee;return t.jsxs("tr",{className:"border-t border-gray-200 hover:bg-gray-50",children:[t.jsx("td",{className:"py-3 px-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:H.productName}),t.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",H.productSku]}),H.variantId&&t.jsxs("p",{className:"text-xs text-gray-500",children:["Variant: ",(Ee=H.productSnapshot)==null?void 0:Ee.variantName]})]})}),t.jsx("td",{className:"text-right py-3 px-4",children:H.quantity}),t.jsxs("td",{className:"text-right py-3 px-4",children:["",H.price.toFixed(2)]}),t.jsxs("td",{className:"text-right py-3 px-4 font-medium",children:["",H.subtotal.toFixed(2)]})]},Ae)})}),t.jsxs("tfoot",{className:"bg-gray-50",children:[t.jsxs("tr",{children:[t.jsx("td",{colSpan:3,className:"text-right py-3 px-4 font-semibold",children:"Subtotaal:"}),t.jsxs("td",{className:"text-right py-3 px-4 font-semibold",children:["",Z.subtotal.toFixed(2)]})]}),t.jsxs("tr",{children:[t.jsx("td",{colSpan:3,className:"text-right py-3 px-4 font-semibold",children:"BTW:"}),t.jsxs("td",{className:"text-right py-3 px-4 font-semibold",children:["",Z.tax.toFixed(2)]})]}),t.jsxs("tr",{children:[t.jsx("td",{colSpan:3,className:"text-right py-3 px-4 font-semibold",children:"Verzendkosten:"}),t.jsxs("td",{className:"text-right py-3 px-4 font-semibold",children:["",Z.shippingCost.toFixed(2)]})]}),Z.discount>0&&t.jsxs("tr",{children:[t.jsx("td",{colSpan:3,className:"text-right py-3 px-4 font-semibold text-green-600",children:"Korting:"}),t.jsxs("td",{className:"text-right py-3 px-4 font-semibold text-green-600",children:["-",Z.discount.toFixed(2)]})]}),t.jsxs("tr",{className:"border-t-2 border-gray-300",children:[t.jsx("td",{colSpan:3,className:"text-right py-3 px-4 font-bold text-lg",children:"Totaal:"}),t.jsxs("td",{className:"text-right py-3 px-4 font-bold text-lg text-primary",children:["",Z.total.toFixed(2)]})]})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-3",children:"Verzendadres"}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[Z.shippingAddress.firstName," ",Z.shippingAddress.lastName]}),Z.shippingAddress.company&&t.jsx("p",{children:Z.shippingAddress.company}),t.jsx("p",{children:Z.shippingAddress.addressLine1}),Z.shippingAddress.addressLine2&&t.jsx("p",{children:Z.shippingAddress.addressLine2}),t.jsxs("p",{children:[Z.shippingAddress.postalCode," ",Z.shippingAddress.city]}),t.jsx("p",{children:Z.shippingAddress.country})]}),Z.trackingNumber&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Tracking:"})," ",Z.trackingNumber]}),Z.carrier&&t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Vervoerder:"})," ",Z.carrier]})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-neutral mb-3",children:"Factuuradres"}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("p",{children:[Z.billingAddress.firstName," ",Z.billingAddress.lastName]}),Z.billingAddress.company&&t.jsx("p",{children:Z.billingAddress.company}),t.jsx("p",{children:Z.billingAddress.addressLine1}),Z.billingAddress.addressLine2&&t.jsx("p",{children:Z.billingAddress.addressLine2}),t.jsxs("p",{children:[Z.billingAddress.postalCode," ",Z.billingAddress.city]}),t.jsx("p",{children:Z.billingAddress.country})]}),Z.paymentMethod&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Betaalmethode:"})," ",Z.paymentMethod]}),Z.paymentReference&&t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-medium",children:"Referentie:"})," ",Z.paymentReference]})]})]})]}),(Z.customerNotes||Z.adminNotes)&&t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-neutral mb-3",children:"Notities"}),t.jsxs("div",{className:"space-y-3",children:[Z.customerNotes&&t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"Klant Notitie:"}),t.jsx("p",{className:"text-sm text-blue-700",children:Z.customerNotes})]}),Z.adminNotes&&t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Admin Notitie:"}),t.jsx("p",{className:"text-sm text-yellow-700",children:Z.adminNotes})]})]})]}),n&&t.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[t.jsxs("div",{className:"flex-1 flex flex-wrap gap-2",children:[Z.status!=="processing"&&Z.status!=="cancelled"&&t.jsx("button",{onClick:()=>{nr(Z.id,"processing"),K({...Z,status:"processing"})},className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:"In Behandeling"}),Z.status==="processing"&&t.jsx("button",{onClick:()=>{nr(Z.id,"shipped"),K({...Z,status:"shipped"})},className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm font-medium",children:"Als Verzonden Markeren"}),Z.paymentStatus==="pending"&&t.jsx("button",{onClick:()=>{zt(Z.id,"paid"),K({...Z,paymentStatus:"paid",paidAt:new Date().toISOString()})},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium",children:"Als Betaald Markeren"}),Z.status!=="cancelled"&&Z.status!=="delivered"&&t.jsx("button",{onClick:()=>{confirm("Weet u zeker dat u deze bestelling wilt annuleren?")&&(nr(Z.id,"cancelled"),K({...Z,status:"cancelled"}))},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium",children:"Annuleren"})]}),t.jsx("button",{onClick:()=>K(null),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors font-semibold",children:"Sluiten"})]})]})]})})]})]})},wK=Rc.reduce((e,r)=>(e[r.id]=!0,e),{});function SK(){const e=r0();es();const[r,n]=y.useState(null),[a,l]=y.useState(!1),[o,d]=y.useState(wK),[m,f]=y.useState(HW),[h,g]=y.useState([]),[p,v]=y.useState(KW),[b,w]=y.useState(GW),[N,S]=y.useState(YW),[C,O]=y.useState(QW),[k,E]=y.useState(JW),[M,D]=y.useState(eH),[R,P]=y.useState(tH),[z,U]=y.useState(sH),[q,Y]=y.useState(rH),[ee,_]=y.useState(nH),[G,L]=y.useState(aH),[V,Z]=y.useState(XW),[K,de]=y.useState(ZW),[B,le]=y.useState(iH),[ye,ge]=y.useState(lH),[Ne,Me]=y.useState([]),ce=y.useMemo(()=>Rc.filter(je=>o[je.id]),[o]),Le=je=>{var pt;const vt=je.isAdmin||((pt=je.permissions)==null?void 0:pt.includes("full_admin"))||je.role==="Manager Productie",Xe=vt?["full_admin"]:je.permissions||[],ut={id:`user_${je.id}`,employeeId:je.id,name:je.name,email:je.email,role:je.role,isAdmin:vt,permissions:Xe.length>0?Xe:void 0};n(ut)},X=()=>{n(null)};if(!r)return t.jsx(qI,{employees:k,onLogin:Le});const Re=(je,vt)=>{e(`/${je}`),setTimeout(()=>{window.dispatchEvent(new CustomEvent("highlight-item",{detail:{id:vt,type:je}}))},100)},at={[dt.DASHBOARD]:t.jsx(cH,{inventory:m,sales:b,workOrders:N,notifications:G,setNotifications:L}),[dt.INVENTORY]:t.jsx(dH,{inventory:m,setInventory:f,isAdmin:r.isAdmin,webshopProducts:Ne,setWebshopProducts:Me,categories:h,setCategories:g}),[dt.POS]:t.jsx(uH,{products:p,inventory:m,setInventory:f,sales:b,setSales:w,setTransactions:D,customers:C,invoices:z,setInvoices:U,categories:h}),[dt.WORK_ORDERS]:t.jsx(hH,{workOrders:N,setWorkOrders:S,employees:k,customers:C,inventory:m,setInventory:f,currentUser:r,isAdmin:r.isAdmin,quotes:R,setQuotes:P,invoices:z,setInvoices:U,categories:h}),[dt.ACCOUNTING]:t.jsx(fK,{transactions:M,quotes:R,setQuotes:P,invoices:z,setInvoices:U,customers:C,inventory:m,workOrders:N,setWorkOrders:S,employees:k,currentUser:r,isAdmin:r.isAdmin,notifications:G,setNotifications:L,categories:h}),[dt.BOOKKEEPING]:t.jsx(gK,{invoices:z,setInvoices:U,quotes:R,setQuotes:P,customers:C,employees:k,currentUser:r,isAdmin:r.isAdmin}),[dt.CRM]:t.jsx(xK,{customers:C,setCustomers:O,sales:b,tasks:q,setTasks:Y,leads:V,setLeads:Z,interactions:K,setInteractions:de,employees:k,currentUser:r,isAdmin:r.isAdmin,invoices:z,setInvoices:U,quotes:R,setQuotes:P,workOrders:N,setWorkOrders:S,inventory:m,emails:B,setEmails:le,emailTemplates:ye,setEmailTemplates:ge}),[dt.HRM]:t.jsx(yK,{employees:k,setEmployees:E,isAdmin:r.isAdmin}),[dt.PLANNING]:t.jsx(jK,{events:ee,setEvents:_,employees:k,customers:C,workOrders:N,isAdmin:r.isAdmin}),[dt.REPORTS]:t.jsx(bK,{sales:b,inventory:m,quotes:R,workOrders:N}),[dt.WEBSHOP]:t.jsx(NK,{inventory:m,customers:C,isAdmin:r.isAdmin,webshopProducts:Ne,setWebshopProducts:Me})};return t.jsxs("div",{className:"flex h-screen bg-base-100",children:[t.jsx(WW,{userId:r.employeeId,userRole:r.role}),t.jsx(FI,{activeModules:o,isAdmin:r.isAdmin,setIsAdmin:()=>{},notifications:G,isMobileOpen:a,onMobileClose:()=>l(!1)}),t.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[t.jsx(VI,{isAdmin:r.isAdmin,notifications:G,setNotifications:L,currentUser:r,onLogout:X,onMobileMenuToggle:()=>l(!a),quotes:R,invoices:z,workOrders:N,customers:C,onNavigate:Re}),t.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto",children:t.jsxs(X6,{children:[t.jsx(pc,{path:"/",element:t.jsx(iw,{to:`/${dt.DASHBOARD}`,replace:!0})}),ce.map(je=>t.jsx(pc,{path:`/${je.id}`,element:at[je.id]},je.id)),r.isAdmin&&t.jsx(pc,{path:`/${dt.ADMIN_SETTINGS}`,element:t.jsx(qW,{activeModules:o,setActiveModules:d})}),t.jsx(pc,{path:"*",element:t.jsx(iw,{to:`/${dt.DASHBOARD}`,replace:!0})})]})})]})]})}const WO=document.getElementById("root");if(!WO)throw new Error("Could not find root element to mount to");const kK=l6.createRoot(WO);kK.render(t.jsx(Zx.StrictMode,{children:t.jsx(bI,{children:t.jsx(SK,{})})}));
//# sourceMappingURL=index-DWJzAi3B.js.map
